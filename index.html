<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jolt Messenger</title>
    <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();var Xp={exports:{}},th={};var d1;function yA(){if(d1)return th;d1=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,c){var d=null;if(c!==void 0&&(d=""+c),a.key!==void 0&&(d=""+a.key),"key"in a){c={};for(var g in a)g!=="key"&&(c[g]=a[g])}else c=a;return a=c.ref,{$$typeof:i,type:r,key:d,ref:a!==void 0?a:null,props:c}}return th.Fragment=e,th.jsx=t,th.jsxs=t,th}var h1;function xA(){return h1||(h1=1,Xp.exports=yA()),Xp.exports}var l=xA(),Jp={exports:{}},Xe={};var f1;function vA(){if(f1)return Xe;f1=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function V(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,L={};function ce(O,te,ne){this.props=O,this.context=te,this.refs=L,this.updater=ne||q}ce.prototype.isReactComponent={},ce.prototype.setState=function(O,te){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,te,"setState")},ce.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function oe(){}oe.prototype=ce.prototype;function ue(O,te,ne){this.props=O,this.context=te,this.refs=L,this.updater=ne||q}var me=ue.prototype=new oe;me.constructor=ue,W(me,ce.prototype),me.isPureReactComponent=!0;var Ve=Array.isArray;function je(){}var D={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function R(O,te,ne){var he=ne.ref;return{$$typeof:i,type:O,key:te,ref:he!==void 0?he:null,props:ne}}function M(O,te){return R(O.type,te,O.props)}function B(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function U(O){var te={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ne){return te[ne]})}var N=/\/+/g;function rt(O,te){return typeof O=="object"&&O!==null&&O.key!=null?U(""+O.key):te.toString(36)}function xt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(je,je):(O.status="pending",O.then(function(te){O.status==="pending"&&(O.status="fulfilled",O.value=te)},function(te){O.status==="pending"&&(O.status="rejected",O.reason=te)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Z(O,te,ne,he,Se){var ke=typeof O;(ke==="undefined"||ke==="boolean")&&(O=null);var He=!1;if(O===null)He=!0;else switch(ke){case"bigint":case"string":case"number":He=!0;break;case"object":switch(O.$$typeof){case i:case e:He=!0;break;case b:return He=O._init,Z(He(O._payload),te,ne,he,Se)}}if(He)return Se=Se(O),He=he===""?"."+rt(O,0):he,Ve(Se)?(ne="",He!=null&&(ne=He.replace(N,"$&/")+"/"),Z(Se,te,ne,"",function(vr){return vr})):Se!=null&&(B(Se)&&(Se=M(Se,ne+(Se.key==null||O&&O.key===Se.key?"":(""+Se.key).replace(N,"$&/")+"/")+He)),te.push(Se)),1;He=0;var vt=he===""?".":he+":";if(Ve(O))for(var Ze=0;Ze<O.length;Ze++)he=O[Ze],ke=vt+rt(he,Ze),He+=Z(he,te,ne,ke,Se);else if(Ze=V(O),typeof Ze=="function")for(O=Ze.call(O),Ze=0;!(he=O.next()).done;)he=he.value,ke=vt+rt(he,Ze++),He+=Z(he,te,ne,ke,Se);else if(ke==="object"){if(typeof O.then=="function")return Z(xt(O),te,ne,he,Se);throw te=String(O),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return He}function ye(O,te,ne){if(O==null)return O;var he=[],Se=0;return Z(O,he,"","",function(ke){return te.call(ne,ke,Se++)}),he}function Te(O){if(O._status===-1){var te=O._result;te=te(),te.then(function(ne){(O._status===0||O._status===-1)&&(O._status=1,O._result=ne)},function(ne){(O._status===0||O._status===-1)&&(O._status=2,O._result=ne)}),O._status===-1&&(O._status=0,O._result=te)}if(O._status===1)return O._result.default;throw O._result}var Qe=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Ne={map:ye,forEach:function(O,te,ne){ye(O,function(){te.apply(this,arguments)},ne)},count:function(O){var te=0;return ye(O,function(){te++}),te},toArray:function(O){return ye(O,function(te){return te})||[]},only:function(O){if(!B(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Xe.Activity=T,Xe.Children=Ne,Xe.Component=ce,Xe.Fragment=t,Xe.Profiler=a,Xe.PureComponent=ue,Xe.StrictMode=r,Xe.Suspense=p,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return D.H.useMemoCache(O)}},Xe.cache=function(O){return function(){return O.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(O,te,ne){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var he=W({},O.props),Se=O.key;if(te!=null)for(ke in te.key!==void 0&&(Se=""+te.key),te)!C.call(te,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&te.ref===void 0||(he[ke]=te[ke]);var ke=arguments.length-2;if(ke===1)he.children=ne;else if(1<ke){for(var He=Array(ke),vt=0;vt<ke;vt++)He[vt]=arguments[vt+2];he.children=He}return R(O.type,Se,he)},Xe.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Xe.createElement=function(O,te,ne){var he,Se={},ke=null;if(te!=null)for(he in te.key!==void 0&&(ke=""+te.key),te)C.call(te,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Se[he]=te[he]);var He=arguments.length-2;if(He===1)Se.children=ne;else if(1<He){for(var vt=Array(He),Ze=0;Ze<He;Ze++)vt[Ze]=arguments[Ze+2];Se.children=vt}if(O&&O.defaultProps)for(he in He=O.defaultProps,He)Se[he]===void 0&&(Se[he]=He[he]);return R(O,ke,Se)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(O){return{$$typeof:g,render:O}},Xe.isValidElement=B,Xe.lazy=function(O){return{$$typeof:b,_payload:{_status:-1,_result:O},_init:Te}},Xe.memo=function(O,te){return{$$typeof:y,type:O,compare:te===void 0?null:te}},Xe.startTransition=function(O){var te=D.T,ne={};D.T=ne;try{var he=O(),Se=D.S;Se!==null&&Se(ne,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(je,Qe)}catch(ke){Qe(ke)}finally{te!==null&&ne.types!==null&&(te.types=ne.types),D.T=te}},Xe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Xe.use=function(O){return D.H.use(O)},Xe.useActionState=function(O,te,ne){return D.H.useActionState(O,te,ne)},Xe.useCallback=function(O,te){return D.H.useCallback(O,te)},Xe.useContext=function(O){return D.H.useContext(O)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(O,te){return D.H.useDeferredValue(O,te)},Xe.useEffect=function(O,te){return D.H.useEffect(O,te)},Xe.useEffectEvent=function(O){return D.H.useEffectEvent(O)},Xe.useId=function(){return D.H.useId()},Xe.useImperativeHandle=function(O,te,ne){return D.H.useImperativeHandle(O,te,ne)},Xe.useInsertionEffect=function(O,te){return D.H.useInsertionEffect(O,te)},Xe.useLayoutEffect=function(O,te){return D.H.useLayoutEffect(O,te)},Xe.useMemo=function(O,te){return D.H.useMemo(O,te)},Xe.useOptimistic=function(O,te){return D.H.useOptimistic(O,te)},Xe.useReducer=function(O,te,ne){return D.H.useReducer(O,te,ne)},Xe.useRef=function(O){return D.H.useRef(O)},Xe.useState=function(O){return D.H.useState(O)},Xe.useSyncExternalStore=function(O,te,ne){return D.H.useSyncExternalStore(O,te,ne)},Xe.useTransition=function(){return D.H.useTransition()},Xe.version="19.2.3",Xe}var g1;function u0(){return g1||(g1=1,Jp.exports=vA()),Jp.exports}var k=u0(),Zp={exports:{}},nh={},ey={exports:{}},ty={};var m1;function bA(){return m1||(m1=1,(function(i){function e(Z,ye){var Te=Z.length;Z.push(ye);e:for(;0<Te;){var Qe=Te-1>>>1,Ne=Z[Qe];if(0<a(Ne,ye))Z[Qe]=ye,Z[Te]=Ne,Te=Qe;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ye=Z[0],Te=Z.pop();if(Te!==ye){Z[0]=Te;e:for(var Qe=0,Ne=Z.length,O=Ne>>>1;Qe<O;){var te=2*(Qe+1)-1,ne=Z[te],he=te+1,Se=Z[he];if(0>a(ne,Te))he<Ne&&0>a(Se,ne)?(Z[Qe]=Se,Z[he]=Te,Qe=he):(Z[Qe]=ne,Z[te]=Te,Qe=te);else if(he<Ne&&0>a(Se,Te))Z[Qe]=Se,Z[he]=Te,Qe=he;else break e}}return ye}function a(Z,ye){var Te=Z.sortIndex-ye.sortIndex;return Te!==0?Te:Z.id-ye.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();i.unstable_now=function(){return d.now()-g}}var p=[],y=[],b=1,T=null,S=3,V=!1,q=!1,W=!1,L=!1,ce=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function me(Z){for(var ye=t(y);ye!==null;){if(ye.callback===null)r(y);else if(ye.startTime<=Z)r(y),ye.sortIndex=ye.expirationTime,e(p,ye);else break;ye=t(y)}}function Ve(Z){if(W=!1,me(Z),!q)if(t(p)!==null)q=!0,je||(je=!0,U());else{var ye=t(y);ye!==null&&xt(Ve,ye.startTime-Z)}}var je=!1,D=-1,C=5,R=-1;function M(){return L?!0:!(i.unstable_now()-R<C)}function B(){if(L=!1,je){var Z=i.unstable_now();R=Z;var ye=!0;try{e:{q=!1,W&&(W=!1,oe(D),D=-1),V=!0;var Te=S;try{t:{for(me(Z),T=t(p);T!==null&&!(T.expirationTime>Z&&M());){var Qe=T.callback;if(typeof Qe=="function"){T.callback=null,S=T.priorityLevel;var Ne=Qe(T.expirationTime<=Z);if(Z=i.unstable_now(),typeof Ne=="function"){T.callback=Ne,me(Z),ye=!0;break t}T===t(p)&&r(p),me(Z)}else r(p);T=t(p)}if(T!==null)ye=!0;else{var O=t(y);O!==null&&xt(Ve,O.startTime-Z),ye=!1}}break e}finally{T=null,S=Te,V=!1}ye=void 0}}finally{ye?U():je=!1}}}var U;if(typeof ue=="function")U=function(){ue(B)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,rt=N.port2;N.port1.onmessage=B,U=function(){rt.postMessage(null)}}else U=function(){ce(B,0)};function xt(Z,ye){D=ce(function(){Z(i.unstable_now())},ye)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Z){Z.callback=null},i.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Z?Math.floor(1e3/Z):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(Z){switch(S){case 1:case 2:case 3:var ye=3;break;default:ye=S}var Te=S;S=ye;try{return Z()}finally{S=Te}},i.unstable_requestPaint=function(){L=!0},i.unstable_runWithPriority=function(Z,ye){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var Te=S;S=Z;try{return ye()}finally{S=Te}},i.unstable_scheduleCallback=function(Z,ye,Te){var Qe=i.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Qe+Te:Qe):Te=Qe,Z){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=Te+Ne,Z={id:b++,callback:ye,priorityLevel:Z,startTime:Te,expirationTime:Ne,sortIndex:-1},Te>Qe?(Z.sortIndex=Te,e(y,Z),t(p)===null&&Z===t(y)&&(W?(oe(D),D=-1):W=!0,xt(Ve,Te-Qe))):(Z.sortIndex=Ne,e(p,Z),q||V||(q=!0,je||(je=!0,U()))),Z},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(Z){var ye=S;return function(){var Te=S;S=ye;try{return Z.apply(this,arguments)}finally{S=Te}}}})(ty)),ty}var p1;function _A(){return p1||(p1=1,ey.exports=bA()),ey.exports}var ny={exports:{}},Qr={};var y1;function wA(){if(y1)return Qr;y1=1;var i=u0();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(p,y,b){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:p,containerInfo:y,implementation:b}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Qr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qr.createPortal=function(p,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(p,y,null,b)},Qr.flushSync=function(p){var y=d.T,b=r.p;try{if(d.T=null,r.p=2,p)return p()}finally{d.T=y,r.p=b,r.d.f()}},Qr.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},Qr.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Qr.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var b=y.as,T=g(b,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,V=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:V}):b==="script"&&r.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:V,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Qr.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=g(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},Qr.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,T=g(b,y.crossOrigin);r.d.L(p,b,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Qr.preloadModule=function(p,y){if(typeof p=="string")if(y){var b=g(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},Qr.requestFormReset=function(p){r.d.r(p)},Qr.unstable_batchedUpdates=function(p,y){return p(y)},Qr.useFormState=function(p,y,b){return d.H.useFormState(p,y,b)},Qr.useFormStatus=function(){return d.H.useHostTransitionStatus()},Qr.version="19.2.3",Qr}var x1;function TA(){if(x1)return ny.exports;x1=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ny.exports=wA(),ny.exports}var v1;function SA(){if(v1)return nh;v1=1;var i=_A(),e=u0(),t=TA();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function d(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(c(n)!==n)throw Error(r(188))}function y(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),n;if(m===u)return p(f),s;m=m.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=m;else{for(var _=!1,E=f.child;E;){if(E===o){_=!0,o=f,u=m;break}if(E===u){_=!0,u=f,o=m;break}E=E.sibling}if(!_){for(E=m.child;E;){if(E===o){_=!0,o=m,u=f;break}if(E===u){_=!0,u=m,o=f;break}E=E.sibling}if(!_)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function b(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=b(n),s!==null)return s;n=n.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),ce=Symbol.for("react.profiler"),oe=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Ve=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=B&&n[B]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function rt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case W:return"Fragment";case ce:return"Profiler";case L:return"StrictMode";case Ve:return"Suspense";case je:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case q:return"Portal";case ue:return n.displayName||"Context";case oe:return(n._context.displayName||"Context")+".Consumer";case me:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return s=n.displayName||null,s!==null?s:rt(n.type)||"Memo";case C:s=n._payload,n=n._init;try{return rt(n(s))}catch{}}return null}var xt=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Qe=[],Ne=-1;function O(n){return{current:n}}function te(n){0>Ne||(n.current=Qe[Ne],Qe[Ne]=null,Ne--)}function ne(n,s){Ne++,Qe[Ne]=n.current,n.current=s}var he=O(null),Se=O(null),ke=O(null),He=O(null);function vt(n,s){switch(ne(ke,s),ne(Se,n),ne(he,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Mb(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Mb(s),n=Vb(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}te(he),ne(he,n)}function Ze(){te(he),te(Se),te(ke)}function vr(n){n.memoizedState!==null&&ne(He,n);var s=he.current,o=Vb(s,n.type);s!==o&&(ne(Se,n),ne(he,o))}function br(n){Se.current===n&&(te(he),te(Se)),He.current===n&&(te(He),Xd._currentValue=Te)}var _r,bn;function ut(n){if(_r===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);_r=s&&s[1]||"",bn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_r+n+bn}var cn=!1;function Ot(n,s){if(!n||cn)return"";cn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ee){var X=ee}Reflect.construct(n,[],le)}else{try{le.call()}catch(ee){X=ee}n.call(le.prototype)}}else{try{throw Error()}catch(ee){X=ee}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ee){if(ee&&X&&typeof ee.stack=="string")return[ee.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],E=m[1];if(_&&E){var z=_.split(`
`),K=E.split(`
`);for(f=u=0;u<z.length&&!z[u].includes("DetermineComponentFrameRoot");)u++;for(;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;if(u===z.length||f===K.length)for(u=z.length-1,f=K.length-1;1<=u&&0<=f&&z[u]!==K[f];)f--;for(;1<=u&&0<=f;u--,f--)if(z[u]!==K[f]){if(u!==1||f!==1)do if(u--,f--,0>f||z[u]!==K[f]){var re=`
`+z[u].replace(" at new "," at ");return n.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",n.displayName)),re}while(1<=u&&0<=f);break}}}finally{cn=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?ut(o):""}function Nr(n,s){switch(n.tag){case 26:case 27:case 5:return ut(n.type);case 16:return ut("Lazy");case 13:return n.child!==s&&s!==null?ut("Suspense Fallback"):ut("Suspense");case 19:return ut("SuspenseList");case 0:case 15:return Ot(n.type,!1);case 11:return Ot(n.type.render,!1);case 1:return Ot(n.type,!0);case 31:return ut("Activity");default:return""}}function ai(n){try{var s="",o=null;do s+=Nr(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Qt=Object.prototype.hasOwnProperty,Wt=i.unstable_scheduleCallback,Dr=i.unstable_cancelCallback,Bi=i.unstable_shouldYield,zi=i.unstable_requestPaint,Jt=i.unstable_now,un=i.unstable_getCurrentPriorityLevel,ar=i.unstable_ImmediatePriority,Sn=i.unstable_UserBlockingPriority,St=i.unstable_NormalPriority,Mr=i.unstable_LowPriority,or=i.unstable_IdlePriority,oi=i.log,xe=i.unstable_setDisableYieldValue,we=null,Re=null;function _n(n){if(typeof oi=="function"&&xe(n),Re&&typeof Re.setStrictMode=="function")try{Re.setStrictMode(we,n)}catch{}}var Zt=Math.clz32?Math.clz32:vo,Ta=Math.log,ns=Math.LN2;function vo(n){return n>>>=0,n===0?32:31-(Ta(n)/ns|0)|0}var Xn=256,Is=262144,tn=4194304;function li(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Vr(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var E=u&134217727;return E!==0?(u=E&~m,u!==0?f=li(u):(_&=E,_!==0?f=li(_):o||(o=E&~n,o!==0&&(f=li(o))))):(E=u&~m,E!==0?f=li(E):_!==0?f=li(_):o||(o=u&~n,o!==0&&(f=li(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function Nn(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Br(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cs(){var n=tn;return tn<<=1,(tn&62914560)===0&&(tn=4194304),n}function zr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Oi(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Vl(n,s,o,u,f,m){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,z=n.expirationTimes,K=n.hiddenUpdates;for(o=_&~o;0<o;){var re=31-Zt(o),le=1<<re;E[re]=0,z[re]=-1;var X=K[re];if(X!==null)for(K[re]=null,re=0;re<X.length;re++){var ee=X[re];ee!==null&&(ee.lane&=-536870913)}o&=~le}u!==0&&rs(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~s))}function rs(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-Zt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Li(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-Zt(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function is(n,s){var o=s&-s;return o=(o&42)!==0?1:Ee(o),(o&(n.suspendedLanes|s))!==0?0:o}function Ee(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function $e(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Et(){var n=ye.p;return n!==0?n:(n=window.event,n===void 0?32:i1(n.type))}function Lt(n,s){var o=ye.p;try{return ye.p=n,s()}finally{ye.p=o}}var Fe=Math.random().toString(36).slice(2),Pt="__reactFiber$"+Fe,nn="__reactProps$"+Fe,Zr="__reactContainer$"+Fe,Sa="__reactEvents$"+Fe,zc="__reactListeners$"+Fe,ss="__reactHandles$"+Fe,Ea="__reactResources$"+Fe,En="__reactMarker$"+Fe;function Rs(n){delete n[Pt],delete n[nn],delete n[Sa],delete n[zc],delete n[ss]}function lr(n){var s=n[Pt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Zr]||o[Pt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=Fb(n);n!==null;){if(o=n[Pt])return o;n=Fb(n)}return s}n=o,o=n.parentNode}return null}function wr(n){if(n=n[Pt]||n[Zr]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Pn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function as(n){var s=n[Ea];return s||(s=n[Ea]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function dn(n){n[En]=!0}var Aa=new Set,Bl={};function os(n,s){ls(n,s),ls(n+"Capture",s)}function ls(n,s){for(Bl[n]=s,n=0;n<s.length;n++)Aa.add(s[n])}var zl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bo={},Ol={};function Ia(n){return Qt.call(Ol,n)?!0:Qt.call(bo,n)?!1:zl.test(n)?Ol[n]=!0:(bo[n]=!0,!1)}function ci(n,s,o){if(Ia(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function cr(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function hn(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function An(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ei(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _o(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function At(n){if(!n._valueTracker){var s=ei(n)?"checked":"value";n._valueTracker=_o(n,s,""+n[s])}}function cs(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=ei(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Tr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var us=/[\n"\\]/g;function it(n){return n.replace(us,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ca(n,s,o,u,f,m,_,E){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+An(s)):n.value!==""+An(s)&&(n.value=""+An(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?js(n,_,An(s)):o!=null?js(n,_,An(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+An(E):n.removeAttribute("name")}function ui(n,s,o,u,f,m,_,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){At(n);return}o=o!=null?""+An(o):"",s=s!=null?""+An(s):o,E||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=E?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),At(n)}function js(n,s,o){s==="number"&&Tr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Or(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+An(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Ra(n,s,o){if(s!=null&&(s=""+An(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+An(o):""}function Sr(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(xt(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=An(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),At(n)}function ur(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var ks=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qs(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||ks.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Un(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Qs(n,f,u)}else for(var m in s)s.hasOwnProperty(m)&&Qs(n,m,s[m])}function Ns(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var di=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jn(n){return Pi.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function hi(){}var Dn=null;function jt(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var dr=null,ds=null;function Ue(n){var s=wr(n);if(s&&(n=s.stateNode)){var o=n[nn]||null;e:switch(n=s.stateNode,s.type){case"input":if(Ca(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+it(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[nn]||null;if(!f)throw Error(r(90));Ca(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&cs(u)}break e;case"textarea":Ra(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Or(n,!!o.multiple,s,!1)}}}var fi=!1;function Ds(n,s,o){if(fi)return n(s,o);fi=!0;try{var u=n(s);return u}finally{if(fi=!1,(dr!==null||ds!==null)&&(Df(),dr&&(s=dr,n=ds,ds=dr=null,Ue(s),n)))for(s=0;s<n.length;s++)Ue(n[s])}}function Lr(n,s){var o=n.stateNode;if(o===null)return null;var u=o[nn]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ws=!1;if(Mn)try{var bt={};Object.defineProperty(bt,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",bt,bt),window.removeEventListener("test",bt,bt)}catch{Ws=!1}var Ui=null,Ys=null,Xs=null;function wo(){if(Xs)return Xs;var n,s=Ys,o=s.length,u,f="value"in Ui?Ui.value:Ui.textContent,m=f.length;for(n=0;n<o&&s[n]===f[n];n++);var _=o-n;for(u=1;u<=_&&s[o-u]===f[m-u];u++);return Xs=f.slice(n,1<u?1-u:void 0)}function Fi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function hr(){return!0}function gi(){return!1}function mt(n){function s(o,u,f,m,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?hr:gi,this.isPropagationStopped=gi,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=hr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=hr)},persist:function(){},isPersistent:hr}),s}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qi=mt(Er),Ms=T({},Er,{view:0,detail:0}),ti=mt(Ms),hs,ja,mi,To=T({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ta,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==mi&&(mi&&n.type==="mousemove"?(hs=n.screenX-mi.screenX,ja=n.screenY-mi.screenY):ja=hs=0,mi=n),hs)},movementY:function(n){return"movementY"in n?n.movementY:ja}}),Js=mt(To),pi=T({},To,{dataTransfer:0}),ka=mt(pi),Oc=T({},Ms,{relatedTarget:0}),fs=mt(Oc),gs=T({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),So=mt(gs),Na=T({},Er,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Da=mt(Na),Vs=T({},Er,{data:0}),yi=mt(Vs),Zs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ma={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ea={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Va(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=ea[n])?!!s[n]:!1}function ta(){return Va}var Zn=T({},Ms,{key:function(n){if(n.key){var s=Zs[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Fi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ma[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ta,charCode:function(n){return n.type==="keypress"?Fi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ms=mt(Zn),Ll=T({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pr=mt(Ll),h=T({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ta}),v=mt(h),w=T({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=mt(w),H=T({},To,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),J=mt(H),ve=T({},Er,{newState:0,oldState:0}),We=mt(ve),fn=[9,13,27,32],nt=Mn&&"CompositionEvent"in window,Ut=null;Mn&&"documentMode"in document&&(Ut=document.documentMode);var Ur=Mn&&"TextEvent"in window&&!Ut,Gi=Mn&&(!nt||Ut&&8<Ut&&11>=Ut),ni=" ",xi=!1;function Fr(n,s){switch(n){case"keyup":return fn.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ba(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Eo=!1;function Lc(n,s){switch(n){case"compositionend":return Ba(s);case"keypress":return s.which!==32?null:(xi=!0,ni);case"textInput":return n=s.data,n===ni&&xi?null:n;default:return null}}function Ao(n,s){if(Eo)return n==="compositionend"||!nt&&Fr(n,s)?(n=wo(),Xs=Ys=Ui=null,Eo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Gi&&s.locale!=="ko"?null:s.data;default:return null}}var nf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!nf[n.type]:s==="textarea"}function dd(n,s,o,u){dr?ds?ds.push(u):ds=[u]:dr=u,s=Pf(s,"onChange"),0<s.length&&(o=new qi("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var Pl=null,na=null;function Io(n){Cb(n,0)}function Ul(n){var s=Pn(n);if(cs(s))return n}function Fl(n,s){if(n==="change")return s}var hd=!1;if(Mn){var Co;if(Mn){var Uc="oninput"in document;if(!Uc){var ql=document.createElement("div");ql.setAttribute("oninput","return;"),Uc=typeof ql.oninput=="function"}Co=Uc}else Co=!1;hd=Co&&(!document.documentMode||9<document.documentMode)}function Fc(){Pl&&(Pl.detachEvent("onpropertychange",Gl),na=Pl=null)}function Gl(n){if(n.propertyName==="value"&&Ul(na)){var s=[];dd(s,na,n,jt(n)),Ds(Io,s)}}function fd(n,s,o){n==="focusin"?(Fc(),Pl=s,na=o,Pl.attachEvent("onpropertychange",Gl)):n==="focusout"&&Fc()}function Em(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ul(na)}function gd(n,s){if(n==="click")return Ul(s)}function rf(n,s){if(n==="input"||n==="change")return Ul(s)}function sf(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var In=typeof Object.is=="function"?Object.is:sf;function Bs(n,s){if(In(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Qt.call(s,f)||!In(n[f],s[f]))return!1}return!0}function md(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function zs(n,s){var o=md(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=md(o)}}function Ro(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Ro(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Hl(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Tr(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Tr(n.document)}return s}function Ar(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var pd=Mn&&"documentMode"in document&&11>=document.documentMode,Ft=null,jo=null,ko=null,$l=!1;function Am(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;$l||Ft==null||Ft!==Tr(u)||(u=Ft,"selectionStart"in u&&Ar(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ko&&Bs(ko,u)||(ko=u,u=Pf(jo,"onSelect"),0<u.length&&(s=new qi("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=Ft)))}function No(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var ps={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionrun:No("Transition","TransitionRun"),transitionstart:No("Transition","TransitionStart"),transitioncancel:No("Transition","TransitionCancel"),transitionend:No("Transition","TransitionEnd")},yd={},za={};Mn&&(za=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function Oa(n){if(yd[n])return yd[n];if(!ps[n])return n;var s=ps[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in za)return yd[n]=s[o];return n}var vi=Oa("animationend"),La=Oa("animationiteration"),qr=Oa("animationstart"),Kl=Oa("transitionrun"),gn=Oa("transitionstart"),xd=Oa("transitioncancel"),Ql=Oa("transitionend"),qc=new Map,vd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vd.push("scrollEnd");function bi(n,s){qc.set(n,s),os(s,[n])}var Gc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},ri=[],Hi=0,ra=0;function Do(){for(var n=Hi,s=ra=Hi=0;s<n;){var o=ri[s];ri[s++]=null;var u=ri[s];ri[s++]=null;var f=ri[s];ri[s++]=null;var m=ri[s];if(ri[s++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}m!==0&&Wl(o,f,m)}}function Hc(n,s,o,u){ri[Hi++]=n,ri[Hi++]=s,ri[Hi++]=o,ri[Hi++]=u,ra|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Mo(n,s,o,u){return Hc(n,s,o,u),Os(n)}function Pa(n,s){return Hc(n,null,null,s),Os(n)}function Wl(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&s!==null&&(f=31-Zt(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function Os(n){if(50<Gd)throw Gd=0,_p=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var $i={};function Vo(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(n,s,o,u){return new Vo(n,s,o,u)}function $c(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ys(n,s){var o=n.alternate;return o===null?(o=fr(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Kc(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Ua(n,s,o,u,f,m){var _=0;if(u=n,typeof n=="function")$c(n)&&(_=1);else if(typeof n=="string")_=sA(n,o,he.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=fr(31,o,s,f),n.elementType=R,n.lanes=m,n;case W:return Ls(o.children,f,m,s);case L:_=8,f|=24;break;case ce:return n=fr(12,o,s,f|2),n.elementType=ce,n.lanes=m,n;case Ve:return n=fr(13,o,s,f),n.elementType=Ve,n.lanes=m,n;case je:return n=fr(19,o,s,f),n.elementType=je,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ue:_=10;break e;case oe:_=9;break e;case me:_=11;break e;case D:_=14;break e;case C:_=16,u=null;break e}_=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return s=fr(_,o,s,f),s.elementType=n,s.type=u,s.lanes=m,s}function Ls(n,s,o,u){return n=fr(7,n,u,s),n.lanes=o,n}function Bo(n,s,o){return n=fr(6,n,null,s),n.lanes=o,n}function Gr(n){var s=fr(18,null,null,0);return s.stateNode=n,s}function zo(n,s,o){return s=fr(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Qc=new WeakMap;function Hr(n,s){if(typeof n=="object"&&n!==null){var o=Qc.get(n);return o!==void 0?o:(s={value:n,source:s,stack:ai(s)},Qc.set(n,s),s)}return{value:n,source:s,stack:ai(s)}}var ia=[],Oo=0,Yl=null,sa=0,$r=[],Yt=0,mn=null,Ie=1,Kr="";function Fn(n,s){ia[Oo++]=sa,ia[Oo++]=Yl,Yl=n,sa=s}function af(n,s,o){$r[Yt++]=Ie,$r[Yt++]=Kr,$r[Yt++]=mn,mn=n;var u=Ie;n=Kr;var f=32-Zt(u)-1;u&=~(1<<f),o+=1;var m=32-Zt(s)+f;if(30<m){var _=f-f%5;m=(u&(1<<_)-1).toString(32),u>>=_,f-=_,Ie=1<<32-Zt(s)+f|o<<f|u,Kr=m+n}else Ie=1<<m|o<<f|u,Kr=n}function xs(n){n.return!==null&&(Fn(n,1),af(n,1,0))}function Wc(n){for(;n===Yl;)Yl=ia[--Oo],ia[Oo]=null,sa=ia[--Oo],ia[Oo]=null;for(;n===mn;)mn=$r[--Yt],$r[Yt]=null,Kr=$r[--Yt],$r[Yt]=null,Ie=$r[--Yt],$r[Yt]=null}function Fa(n,s){$r[Yt++]=Ie,$r[Yt++]=Kr,$r[Yt++]=mn,Ie=s.id,Kr=s.overflow,mn=n}var rn=null,kt=null,st=!1,aa=null,_i=!1,Xl=Error(r(519));function oa(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Po(Hr(s,n)),Xl}function of(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Pt]=n,s[nn]=u,o){case"dialog":ct("cancel",s),ct("close",s);break;case"iframe":case"object":case"embed":ct("load",s);break;case"video":case"audio":for(o=0;o<$d.length;o++)ct($d[o],s);break;case"source":ct("error",s);break;case"img":case"image":case"link":ct("error",s),ct("load",s);break;case"details":ct("toggle",s);break;case"input":ct("invalid",s),ui(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ct("invalid",s);break;case"textarea":ct("invalid",s),Sr(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Nb(s.textContent,o)?(u.popover!=null&&(ct("beforetoggle",s),ct("toggle",s)),u.onScroll!=null&&ct("scroll",s),u.onScrollEnd!=null&&ct("scrollend",s),u.onClick!=null&&(s.onclick=hi),s=!0):s=!1,s||oa(n,!0)}function lf(n){for(rn=n.return;rn;)switch(rn.tag){case 5:case 31:case 13:_i=!1;return;case 27:case 3:_i=!0;return;default:rn=rn.return}}function Lo(n){if(n!==rn)return!1;if(!st)return lf(n),st=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Bp(n.type,n.memoizedProps)),o=!o),o&&kt&&oa(n),lf(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));kt=Ub(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));kt=Ub(n)}else s===27?(s=kt,Zo(n.type)?(n=Up,Up=null,kt=n):kt=s):kt=rn?Ts(n.stateNode.nextSibling):null;return!0}function qa(){kt=rn=null,st=!1}function bd(){var n=aa;return n!==null&&(Ei===null?Ei=n:Ei.push.apply(Ei,n),aa=null),n}function Po(n){aa===null?aa=[n]:aa.push(n)}var _d=O(null),Ga=null,vs=null;function la(n,s,o){ne(_d,s._currentValue),s._currentValue=o}function bs(n){n._currentValue=_d.current,te(_d)}function wd(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Jl(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var z=0;z<s.length;z++)if(E.context===s[z]){m.lanes|=o,E=m.alternate,E!==null&&(E.lanes|=o),wd(m.return,o,n),u||(_=null);break e}m=E.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),wd(_,o,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Ha(n,s,o,u){n=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var E=f.type;In(f.pendingProps.value,_.value)||(n!==null?n.push(E):n=[E])}}else if(f===He.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Xd):n=[Xd])}f=f.return}n!==null&&Jl(s,n,o,u),s.flags|=262144}function Zl(n){for(n=n.firstContext;n!==null;){if(!In(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ca(n){Ga=n,vs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function qn(n){return cf(Ga,n)}function Yc(n,s){return Ga===null&&ca(n),cf(n,s)}function cf(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},vs===null){if(n===null)throw Error(r(308));vs=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else vs=vs.next=s;return o}var Im=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},Cm=i.unstable_scheduleCallback,uf=i.unstable_NormalPriority,Cn={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Td(){return{controller:new Im,data:new Map,refCount:0}}function ec(n){n.refCount--,n.refCount===0&&Cm(uf,function(){n.controller.abort()})}var tc=null,Sd=0,$a=0,Uo=null;function Ax(n,s){if(tc===null){var o=tc=[];Sd=0,$a=Ip(),Uo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Sd++,s.then(Ed,Ed),s}function Ed(){if(--Sd===0&&tc!==null){Uo!==null&&(Uo.status="fulfilled");var n=tc;tc=null,$a=0,Uo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function wn(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Vn=Z.S;Z.S=function(n,s){nb=Jt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Ax(n,s),Vn!==null&&Vn(n,s)};var ua=O(null);function Ad(){var n=ua.current;return n!==null?n:Xt.pooledCache}function Xc(n,s){s===null?ne(ua,ua.current):ne(ua,s.pool)}function Id(){var n=Ad();return n===null?null:{parent:Cn._currentValue,pool:n}}var Fo=Error(r(460)),Cd=Error(r(474)),nc=Error(r(542)),Jc={then:function(){}};function df(n){return n=n.status,n==="fulfilled"||n==="rejected"}function x(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(hi,hi),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ae(n),n;default:if(typeof s.status=="string")s.then(hi,hi);else{if(n=Xt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ae(n),n}throw j=s,Fo}}function A(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(j=o,Fo):o}}var j=null;function Y(){if(j===null)throw Error(r(459));var n=j;return j=null,n}function ae(n){if(n===Fo||n===nc)throw Error(r(483))}var qe=null,_t=0;function sn(n){var s=_t;return _t+=1,qe===null&&(qe=[]),x(qe,n,s)}function pe(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function qt(n,s){throw s.$$typeof===S?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Gn(n){function s(F,P){if(n){var $=F.deletions;$===null?(F.deletions=[P],F.flags|=16):$.push(P)}}function o(F,P){if(!n)return null;for(;P!==null;)s(F,P),P=P.sibling;return null}function u(F){for(var P=new Map;F!==null;)F.key!==null?P.set(F.key,F):P.set(F.index,F),F=F.sibling;return P}function f(F,P){return F=ys(F,P),F.index=0,F.sibling=null,F}function m(F,P,$){return F.index=$,n?($=F.alternate,$!==null?($=$.index,$<P?(F.flags|=67108866,P):$):(F.flags|=67108866,P)):(F.flags|=1048576,P)}function _(F){return n&&F.alternate===null&&(F.flags|=67108866),F}function E(F,P,$,ie){return P===null||P.tag!==6?(P=Bo($,F.mode,ie),P.return=F,P):(P=f(P,$),P.return=F,P)}function z(F,P,$,ie){var Pe=$.type;return Pe===W?re(F,P,$.props.children,ie,$.key):P!==null&&(P.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===C&&A(Pe)===P.type)?(P=f(P,$.props),pe(P,$),P.return=F,P):(P=Ua($.type,$.key,$.props,null,F.mode,ie),pe(P,$),P.return=F,P)}function K(F,P,$,ie){return P===null||P.tag!==4||P.stateNode.containerInfo!==$.containerInfo||P.stateNode.implementation!==$.implementation?(P=zo($,F.mode,ie),P.return=F,P):(P=f(P,$.children||[]),P.return=F,P)}function re(F,P,$,ie,Pe){return P===null||P.tag!==7?(P=Ls($,F.mode,ie,Pe),P.return=F,P):(P=f(P,$),P.return=F,P)}function le(F,P,$){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Bo(""+P,F.mode,$),P.return=F,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case V:return $=Ua(P.type,P.key,P.props,null,F.mode,$),pe($,P),$.return=F,$;case q:return P=zo(P,F.mode,$),P.return=F,P;case C:return P=A(P),le(F,P,$)}if(xt(P)||U(P))return P=Ls(P,F.mode,$,null),P.return=F,P;if(typeof P.then=="function")return le(F,sn(P),$);if(P.$$typeof===ue)return le(F,Yc(F,P),$);qt(F,P)}return null}function X(F,P,$,ie){var Pe=P!==null?P.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Pe!==null?null:E(F,P,""+$,ie);if(typeof $=="object"&&$!==null){switch($.$$typeof){case V:return $.key===Pe?z(F,P,$,ie):null;case q:return $.key===Pe?K(F,P,$,ie):null;case C:return $=A($),X(F,P,$,ie)}if(xt($)||U($))return Pe!==null?null:re(F,P,$,ie,null);if(typeof $.then=="function")return X(F,P,sn($),ie);if($.$$typeof===ue)return X(F,P,Yc(F,$),ie);qt(F,$)}return null}function ee(F,P,$,ie,Pe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return F=F.get($)||null,E(P,F,""+ie,Pe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case V:return F=F.get(ie.key===null?$:ie.key)||null,z(P,F,ie,Pe);case q:return F=F.get(ie.key===null?$:ie.key)||null,K(P,F,ie,Pe);case C:return ie=A(ie),ee(F,P,$,ie,Pe)}if(xt(ie)||U(ie))return F=F.get($)||null,re(P,F,ie,Pe,null);if(typeof ie.then=="function")return ee(F,P,$,sn(ie),Pe);if(ie.$$typeof===ue)return ee(F,P,$,Yc(P,ie),Pe);qt(P,ie)}return null}function De(F,P,$,ie){for(var Pe=null,wt=null,ze=P,tt=P=0,ht=null;ze!==null&&tt<$.length;tt++){ze.index>tt?(ht=ze,ze=null):ht=ze.sibling;var Tt=X(F,ze,$[tt],ie);if(Tt===null){ze===null&&(ze=ht);break}n&&ze&&Tt.alternate===null&&s(F,ze),P=m(Tt,P,tt),wt===null?Pe=Tt:wt.sibling=Tt,wt=Tt,ze=ht}if(tt===$.length)return o(F,ze),st&&Fn(F,tt),Pe;if(ze===null){for(;tt<$.length;tt++)ze=le(F,$[tt],ie),ze!==null&&(P=m(ze,P,tt),wt===null?Pe=ze:wt.sibling=ze,wt=ze);return st&&Fn(F,tt),Pe}for(ze=u(ze);tt<$.length;tt++)ht=ee(ze,F,tt,$[tt],ie),ht!==null&&(n&&ht.alternate!==null&&ze.delete(ht.key===null?tt:ht.key),P=m(ht,P,tt),wt===null?Pe=ht:wt.sibling=ht,wt=ht);return n&&ze.forEach(function(il){return s(F,il)}),st&&Fn(F,tt),Pe}function Ge(F,P,$,ie){if($==null)throw Error(r(151));for(var Pe=null,wt=null,ze=P,tt=P=0,ht=null,Tt=$.next();ze!==null&&!Tt.done;tt++,Tt=$.next()){ze.index>tt?(ht=ze,ze=null):ht=ze.sibling;var il=X(F,ze,Tt.value,ie);if(il===null){ze===null&&(ze=ht);break}n&&ze&&il.alternate===null&&s(F,ze),P=m(il,P,tt),wt===null?Pe=il:wt.sibling=il,wt=il,ze=ht}if(Tt.done)return o(F,ze),st&&Fn(F,tt),Pe;if(ze===null){for(;!Tt.done;tt++,Tt=$.next())Tt=le(F,Tt.value,ie),Tt!==null&&(P=m(Tt,P,tt),wt===null?Pe=Tt:wt.sibling=Tt,wt=Tt);return st&&Fn(F,tt),Pe}for(ze=u(ze);!Tt.done;tt++,Tt=$.next())Tt=ee(ze,F,tt,Tt.value,ie),Tt!==null&&(n&&Tt.alternate!==null&&ze.delete(Tt.key===null?tt:Tt.key),P=m(Tt,P,tt),wt===null?Pe=Tt:wt.sibling=Tt,wt=Tt);return n&&ze.forEach(function(pA){return s(F,pA)}),st&&Fn(F,tt),Pe}function $t(F,P,$,ie){if(typeof $=="object"&&$!==null&&$.type===W&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case V:e:{for(var Pe=$.key;P!==null;){if(P.key===Pe){if(Pe=$.type,Pe===W){if(P.tag===7){o(F,P.sibling),ie=f(P,$.props.children),ie.return=F,F=ie;break e}}else if(P.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===C&&A(Pe)===P.type){o(F,P.sibling),ie=f(P,$.props),pe(ie,$),ie.return=F,F=ie;break e}o(F,P);break}else s(F,P);P=P.sibling}$.type===W?(ie=Ls($.props.children,F.mode,ie,$.key),ie.return=F,F=ie):(ie=Ua($.type,$.key,$.props,null,F.mode,ie),pe(ie,$),ie.return=F,F=ie)}return _(F);case q:e:{for(Pe=$.key;P!==null;){if(P.key===Pe)if(P.tag===4&&P.stateNode.containerInfo===$.containerInfo&&P.stateNode.implementation===$.implementation){o(F,P.sibling),ie=f(P,$.children||[]),ie.return=F,F=ie;break e}else{o(F,P);break}else s(F,P);P=P.sibling}ie=zo($,F.mode,ie),ie.return=F,F=ie}return _(F);case C:return $=A($),$t(F,P,$,ie)}if(xt($))return De(F,P,$,ie);if(U($)){if(Pe=U($),typeof Pe!="function")throw Error(r(150));return $=Pe.call($),Ge(F,P,$,ie)}if(typeof $.then=="function")return $t(F,P,sn($),ie);if($.$$typeof===ue)return $t(F,P,Yc(F,$),ie);qt(F,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,P!==null&&P.tag===6?(o(F,P.sibling),ie=f(P,$),ie.return=F,F=ie):(o(F,P),ie=Bo($,F.mode,ie),ie.return=F,F=ie),_(F)):o(F,P)}return function(F,P,$,ie){try{_t=0;var Pe=$t(F,P,$,ie);return qe=null,Pe}catch(ze){if(ze===Fo||ze===nc)throw ze;var wt=fr(29,ze,null,F.mode);return wt.lanes=ie,wt.return=F,wt}finally{}}}var Oe=Gn(!0),_s=Gn(!1),Be=!1;function Rn(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ir(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ki(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function qo(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(It&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Os(n),Wl(n,null,o),s}return Hc(n,u,s,o),Os(n)}function Rd(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Li(n,o)}}function Rm(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var jm=!1;function jd(){if(jm){var n=Uo;if(n!==null)throw n}}function kd(n,s,o,u){jm=!1;var f=n.updateQueue;Be=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var z=E,K=z.next;z.next=null,_===null?m=K:_.next=K,_=z;var re=n.alternate;re!==null&&(re=re.updateQueue,E=re.lastBaseUpdate,E!==_&&(E===null?re.firstBaseUpdate=K:E.next=K,re.lastBaseUpdate=z))}if(m!==null){var le=f.baseState;_=0,re=K=z=null,E=m;do{var X=E.lane&-536870913,ee=X!==E.lane;if(ee?(dt&X)===X:(u&X)===X){X!==0&&X===$a&&(jm=!0),re!==null&&(re=re.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var De=n,Ge=E;X=s;var $t=o;switch(Ge.tag){case 1:if(De=Ge.payload,typeof De=="function"){le=De.call($t,le,X);break e}le=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Ge.payload,X=typeof De=="function"?De.call($t,le,X):De,X==null)break e;le=T({},le,X);break e;case 2:Be=!0}}X=E.callback,X!==null&&(n.flags|=64,ee&&(n.flags|=8192),ee=f.callbacks,ee===null?f.callbacks=[X]:ee.push(X))}else ee={lane:X,tag:E.tag,payload:E.payload,callback:E.callback,next:null},re===null?(K=re=ee,z=le):re=re.next=ee,_|=X;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;ee=E,E=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);re===null&&(z=le),f.baseState=z,f.firstBaseUpdate=K,f.lastBaseUpdate=re,m===null&&(f.shared.lanes=0),Qo|=_,n.lanes=_,n.memoizedState=le}}function Ix(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function Cx(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Ix(o[n],s)}var Zc=O(null),hf=O(0);function Rx(n,s){n=to,ne(hf,n),ne(Zc,s),to=n|s.baseLanes}function km(){ne(hf,to),ne(Zc,Zc.current)}function Nm(){to=hf.current,te(Zc),te(hf)}var Qi=O(null),ws=null;function Go(n){var s=n.alternate;ne(Bn,Bn.current&1),ne(Qi,n),ws===null&&(s===null||Zc.current!==null||s.memoizedState!==null)&&(ws=n)}function Dm(n){ne(Bn,Bn.current),ne(Qi,n),ws===null&&(ws=n)}function jx(n){n.tag===22?(ne(Bn,Bn.current),ne(Qi,n),ws===null&&(ws=n)):Ho()}function Ho(){ne(Bn,Bn.current),ne(Qi,Qi.current)}function Wi(n){te(Qi),ws===n&&(ws=null),te(Bn)}var Bn=O(0);function ff(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Lp(o)||Pp(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ka=0,et=null,Gt=null,Hn=null,gf=!1,eu=!1,rc=!1,mf=0,Nd=0,tu=null,aE=0;function jn(){throw Error(r(321))}function Mm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!In(n[o],s[o]))return!1;return!0}function Vm(n,s,o,u,f,m){return Ka=m,et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Z.H=n===null||n.memoizedState===null?fv:Ym,rc=!1,m=o(u,f),rc=!1,eu&&(m=Nx(s,o,u,f)),kx(n),m}function kx(n){Z.H=Vd;var s=Gt!==null&&Gt.next!==null;if(Ka=0,Hn=Gt=et=null,gf=!1,Nd=0,tu=null,s)throw Error(r(300));n===null||$n||(n=n.dependencies,n!==null&&Zl(n)&&($n=!0))}function Nx(n,s,o,u){et=n;var f=0;do{if(eu&&(tu=null),Nd=0,eu=!1,25<=f)throw Error(r(301));if(f+=1,Hn=Gt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Z.H=gv,m=s(o,u)}while(eu);return m}function oE(){var n=Z.H,s=n.useState()[0];return s=typeof s.then=="function"?Dd(s):s,n=n.useState()[0],(Gt!==null?Gt.memoizedState:null)!==n&&(et.flags|=1024),s}function Bm(){var n=mf!==0;return mf=0,n}function zm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Om(n){if(gf){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}gf=!1}Ka=0,Hn=Gt=et=null,eu=!1,Nd=mf=0,tu=null}function ii(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?et.memoizedState=Hn=n:Hn=Hn.next=n,Hn}function zn(){if(Gt===null){var n=et.alternate;n=n!==null?n.memoizedState:null}else n=Gt.next;var s=Hn===null?et.memoizedState:Hn.next;if(s!==null)Hn=s,Gt=n;else{if(n===null)throw et.alternate===null?Error(r(467)):Error(r(310));Gt=n,n={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Hn===null?et.memoizedState=Hn=n:Hn=Hn.next=n}return Hn}function pf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dd(n){var s=Nd;return Nd+=1,tu===null&&(tu=[]),n=x(tu,n,s),s=et,(Hn===null?s.memoizedState:Hn.next)===null&&(s=s.alternate,Z.H=s===null||s.memoizedState===null?fv:Ym),n}function yf(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Dd(n);if(n.$$typeof===ue)return qn(n)}throw Error(r(438,String(n)))}function Lm(n){var s=null,o=et.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=et.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=pf(),et.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=M;return s.index++,o}function Qa(n,s){return typeof s=="function"?s(n):s}function xf(n){var s=zn();return Pm(s,Gt,n)}function Pm(n,s,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}s.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{s=f.next;var E=_=null,z=null,K=s,re=!1;do{var le=K.lane&-536870913;if(le!==K.lane?(dt&le)===le:(Ka&le)===le){var X=K.revertLane;if(X===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),le===$a&&(re=!0);else if((Ka&X)===X){K=K.next,X===$a&&(re=!0);continue}else le={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},z===null?(E=z=le,_=m):z=z.next=le,et.lanes|=X,Qo|=X;le=K.action,rc&&o(m,le),m=K.hasEagerState?K.eagerState:o(m,le)}else X={lane:le,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},z===null?(E=z=X,_=m):z=z.next=X,et.lanes|=le,Qo|=le;K=K.next}while(K!==null&&K!==s);if(z===null?_=m:z.next=E,!In(m,n.memoizedState)&&($n=!0,re&&(o=Uo,o!==null)))throw o;n.memoizedState=m,n.baseState=_,n.baseQueue=z,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Um(n){var s=zn(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do m=n(m,_.action),_=_.next;while(_!==f);In(m,s.memoizedState)||($n=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function Dx(n,s,o){var u=et,f=zn(),m=st;if(m){if(o===void 0)throw Error(r(407));o=o()}else o=s();var _=!In((Gt||f).memoizedState,o);if(_&&(f.memoizedState=o,$n=!0),f=f.queue,Gm(Bx.bind(null,u,f,n),[n]),f.getSnapshot!==s||_||Hn!==null&&Hn.memoizedState.tag&1){if(u.flags|=2048,nu(9,{destroy:void 0},Vx.bind(null,u,f,o,s),null),Xt===null)throw Error(r(349));m||(Ka&127)!==0||Mx(u,s,o)}return o}function Mx(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=et.updateQueue,s===null?(s=pf(),et.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function Vx(n,s,o,u){s.value=o,s.getSnapshot=u,zx(s)&&Ox(n)}function Bx(n,s,o){return o(function(){zx(s)&&Ox(n)})}function zx(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!In(n,o)}catch{return!0}}function Ox(n){var s=Pa(n,2);s!==null&&Ai(s,n,2)}function Fm(n){var s=ii();if(typeof n=="function"){var o=n;if(n=o(),rc){_n(!0);try{o()}finally{_n(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:n},s}function Lx(n,s,o,u){return n.baseState=o,Pm(n,Gt,typeof u=="function"?u:Qa)}function lE(n,s,o,u,f){if(_f(n))throw Error(r(485));if(n=s.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};Z.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,Px(s,m)):(m.next=o.next,s.pending=o.next=m)}}function Px(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var m=Z.T,_={};Z.T=_;try{var E=o(f,u),z=Z.S;z!==null&&z(_,E),Ux(n,s,E)}catch(K){qm(n,s,K)}finally{m!==null&&_.types!==null&&(m.types=_.types),Z.T=m}}else try{m=o(f,u),Ux(n,s,m)}catch(K){qm(n,s,K)}}function Ux(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Fx(n,s,u)},function(u){return qm(n,s,u)}):Fx(n,s,o)}function Fx(n,s,o){s.status="fulfilled",s.value=o,qx(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Px(n,o)))}function qm(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,qx(s),s=s.next;while(s!==u)}n.action=null}function qx(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Gx(n,s){return s}function Hx(n,s){if(st){var o=Xt.formState;if(o!==null){e:{var u=et;if(st){if(kt){t:{for(var f=kt,m=_i;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ts(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){kt=Ts(f.nextSibling),u=f.data==="F!";break e}}oa(u)}u=!1}u&&(s=o[0])}}return o=ii(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gx,lastRenderedState:s},o.queue=u,o=uv.bind(null,et,u),u.dispatch=o,u=Fm(!1),m=Wm.bind(null,et,!1,u.queue),u=ii(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=lE.bind(null,et,f,m,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function $x(n){var s=zn();return Kx(s,Gt,n)}function Kx(n,s,o){if(s=Pm(n,s,Gx)[0],n=xf(Qa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Dd(s)}catch(_){throw _===Fo?nc:_}else u=s;s=zn();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(et.flags|=2048,nu(9,{destroy:void 0},cE.bind(null,f,o),null)),[u,m,n]}function cE(n,s){n.action=s}function Qx(n){var s=zn(),o=Gt;if(o!==null)return Kx(s,o,n);zn(),s=s.memoizedState,o=zn();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function nu(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=et.updateQueue,s===null&&(s=pf(),et.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function Wx(){return zn().memoizedState}function vf(n,s,o,u){var f=ii();et.flags|=n,f.memoizedState=nu(1|s,{destroy:void 0},o,u===void 0?null:u)}function bf(n,s,o,u){var f=zn();u=u===void 0?null:u;var m=f.memoizedState.inst;Gt!==null&&u!==null&&Mm(u,Gt.memoizedState.deps)?f.memoizedState=nu(s,m,o,u):(et.flags|=n,f.memoizedState=nu(1|s,m,o,u))}function Yx(n,s){vf(8390656,8,n,s)}function Gm(n,s){bf(2048,8,n,s)}function uE(n){et.flags|=4;var s=et.updateQueue;if(s===null)s=pf(),et.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function Xx(n){var s=zn().memoizedState;return uE({ref:s,nextImpl:n}),function(){if((It&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Jx(n,s){return bf(4,2,n,s)}function Zx(n,s){return bf(4,4,n,s)}function ev(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function tv(n,s,o){o=o!=null?o.concat([n]):null,bf(4,4,ev.bind(null,s,n),o)}function Hm(){}function nv(n,s){var o=zn();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Mm(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function rv(n,s){var o=zn();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Mm(s,u[1]))return u[0];if(u=n(),rc){_n(!0);try{n()}finally{_n(!1)}}return o.memoizedState=[u,s],u}function $m(n,s,o){return o===void 0||(Ka&1073741824)!==0&&(dt&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=ib(),et.lanes|=n,Qo|=n,o)}function iv(n,s,o,u){return In(o,s)?o:Zc.current!==null?(n=$m(n,o,u),In(n,s)||($n=!0),n):(Ka&42)===0||(Ka&1073741824)!==0&&(dt&261930)===0?($n=!0,n.memoizedState=o):(n=ib(),et.lanes|=n,Qo|=n,s)}function sv(n,s,o,u,f){var m=ye.p;ye.p=m!==0&&8>m?m:8;var _=Z.T,E={};Z.T=E,Wm(n,!1,s,o);try{var z=f(),K=Z.S;if(K!==null&&K(E,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var re=wn(z,u);Md(n,s,re,Ji(n))}else Md(n,s,u,Ji(n))}catch(le){Md(n,s,{then:function(){},status:"rejected",reason:le},Ji())}finally{ye.p=m,_!==null&&E.types!==null&&(_.types=E.types),Z.T=_}}function dE(){}function Km(n,s,o,u){if(n.tag!==5)throw Error(r(476));var f=av(n).queue;sv(n,f,s,Te,o===null?dE:function(){return ov(n),o(u)})}function av(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:Te},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function ov(n){var s=av(n);s.next===null&&(s=n.alternate.memoizedState),Md(n,s.next.queue,{},Ji())}function Qm(){return qn(Xd)}function lv(){return zn().memoizedState}function cv(){return zn().memoizedState}function hE(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Ji();n=Ki(o);var u=qo(s,n,o);u!==null&&(Ai(u,s,o),Rd(u,s,o)),s={cache:Td()},n.payload=s;return}s=s.return}}function fE(n,s,o){var u=Ji();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},_f(n)?dv(s,o):(o=Mo(n,s,o,u),o!==null&&(Ai(o,n,u),hv(o,s,u)))}function uv(n,s,o){var u=Ji();Md(n,s,o,u)}function Md(n,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(_f(n))dv(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,E=m(_,o);if(f.hasEagerState=!0,f.eagerState=E,In(E,_))return Hc(n,s,f,0),Xt===null&&Do(),!1}catch{}finally{}if(o=Mo(n,s,f,u),o!==null)return Ai(o,n,u),hv(o,s,u),!0}return!1}function Wm(n,s,o,u){if(u={lane:2,revertLane:Ip(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},_f(n)){if(s)throw Error(r(479))}else s=Mo(n,o,u,2),s!==null&&Ai(s,n,2)}function _f(n){var s=n.alternate;return n===et||s!==null&&s===et}function dv(n,s){eu=gf=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function hv(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Li(n,o)}}var Vd={readContext:qn,use:yf,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useLayoutEffect:jn,useInsertionEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useSyncExternalStore:jn,useId:jn,useHostTransitionStatus:jn,useFormState:jn,useActionState:jn,useOptimistic:jn,useMemoCache:jn,useCacheRefresh:jn};Vd.useEffectEvent=jn;var fv={readContext:qn,use:yf,useCallback:function(n,s){return ii().memoizedState=[n,s===void 0?null:s],n},useContext:qn,useEffect:Yx,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,vf(4194308,4,ev.bind(null,s,n),o)},useLayoutEffect:function(n,s){return vf(4194308,4,n,s)},useInsertionEffect:function(n,s){vf(4,2,n,s)},useMemo:function(n,s){var o=ii();s=s===void 0?null:s;var u=n();if(rc){_n(!0);try{n()}finally{_n(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=ii();if(o!==void 0){var f=o(s);if(rc){_n(!0);try{o(s)}finally{_n(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=fE.bind(null,et,n),[u.memoizedState,n]},useRef:function(n){var s=ii();return n={current:n},s.memoizedState=n},useState:function(n){n=Fm(n);var s=n.queue,o=uv.bind(null,et,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Hm,useDeferredValue:function(n,s){var o=ii();return $m(o,n,s)},useTransition:function(){var n=Fm(!1);return n=sv.bind(null,et,n.queue,!0,!1),ii().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=et,f=ii();if(st){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),Xt===null)throw Error(r(349));(dt&127)!==0||Mx(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,Yx(Bx.bind(null,u,m,n),[n]),u.flags|=2048,nu(9,{destroy:void 0},Vx.bind(null,u,m,o,s),null),o},useId:function(){var n=ii(),s=Xt.identifierPrefix;if(st){var o=Kr,u=Ie;o=(u&~(1<<32-Zt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=mf++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=aE++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Qm,useFormState:Hx,useActionState:Hx,useOptimistic:function(n){var s=ii();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Wm.bind(null,et,!0,o),o.dispatch=s,[n,s]},useMemoCache:Lm,useCacheRefresh:function(){return ii().memoizedState=hE.bind(null,et)},useEffectEvent:function(n){var s=ii(),o={impl:n};return s.memoizedState=o,function(){if((It&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Ym={readContext:qn,use:yf,useCallback:nv,useContext:qn,useEffect:Gm,useImperativeHandle:tv,useInsertionEffect:Jx,useLayoutEffect:Zx,useMemo:rv,useReducer:xf,useRef:Wx,useState:function(){return xf(Qa)},useDebugValue:Hm,useDeferredValue:function(n,s){var o=zn();return iv(o,Gt.memoizedState,n,s)},useTransition:function(){var n=xf(Qa)[0],s=zn().memoizedState;return[typeof n=="boolean"?n:Dd(n),s]},useSyncExternalStore:Dx,useId:lv,useHostTransitionStatus:Qm,useFormState:$x,useActionState:$x,useOptimistic:function(n,s){var o=zn();return Lx(o,Gt,n,s)},useMemoCache:Lm,useCacheRefresh:cv};Ym.useEffectEvent=Xx;var gv={readContext:qn,use:yf,useCallback:nv,useContext:qn,useEffect:Gm,useImperativeHandle:tv,useInsertionEffect:Jx,useLayoutEffect:Zx,useMemo:rv,useReducer:Um,useRef:Wx,useState:function(){return Um(Qa)},useDebugValue:Hm,useDeferredValue:function(n,s){var o=zn();return Gt===null?$m(o,n,s):iv(o,Gt.memoizedState,n,s)},useTransition:function(){var n=Um(Qa)[0],s=zn().memoizedState;return[typeof n=="boolean"?n:Dd(n),s]},useSyncExternalStore:Dx,useId:lv,useHostTransitionStatus:Qm,useFormState:Qx,useActionState:Qx,useOptimistic:function(n,s){var o=zn();return Gt!==null?Lx(o,Gt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Lm,useCacheRefresh:cv};gv.useEffectEvent=Xx;function Xm(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:T({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Jm={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=Ji(),f=Ki(u);f.payload=s,o!=null&&(f.callback=o),s=qo(n,f,u),s!==null&&(Ai(s,n,u),Rd(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=Ji(),f=Ki(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=qo(n,f,u),s!==null&&(Ai(s,n,u),Rd(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Ji(),u=Ki(o);u.tag=2,s!=null&&(u.callback=s),s=qo(n,u,o),s!==null&&(Ai(s,n,o),Rd(s,n,o))}};function mv(n,s,o,u,f,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,_):s.prototype&&s.prototype.isPureReactComponent?!Bs(o,u)||!Bs(f,m):!0}function pv(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&Jm.enqueueReplaceState(s,s.state,null)}function ic(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=T({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function yv(n){Gc(n)}function xv(n){console.error(n)}function vv(n){Gc(n)}function wf(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function bv(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Zm(n,s,o){return o=Ki(o),o.tag=3,o.payload={element:null},o.callback=function(){wf(n,s)},o}function _v(n){return n=Ki(n),n.tag=3,n}function wv(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){bv(s,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){bv(s,o,u),typeof f!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function gE(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Ha(s,o,f,!0),o=Qi.current,o!==null){switch(o.tag){case 31:case 13:return ws===null?Mf():o.alternate===null&&kn===0&&(kn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Jc?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Sp(n,u,f)),!1;case 22:return o.flags|=65536,u===Jc?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Sp(n,u,f)),!1}throw Error(r(435,o.tag))}return Sp(n,u,f),Mf(),!1}if(st)return s=Qi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Xl&&(n=Error(r(422),{cause:u}),Po(Hr(n,o)))):(u!==Xl&&(s=Error(r(423),{cause:u}),Po(Hr(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Hr(u,o),f=Zm(n.stateNode,u,f),Rm(n,f),kn!==4&&(kn=2)),!1;var m=Error(r(520),{cause:u});if(m=Hr(m,o),qd===null?qd=[m]:qd.push(m),kn!==4&&(kn=2),s===null)return!0;u=Hr(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Zm(o.stateNode,u,n),Rm(o,n),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Wo===null||!Wo.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=_v(f),wv(f,n,o,u),Rm(o,f),!1}o=o.return}while(o!==null);return!1}var ep=Error(r(461)),$n=!1;function Cr(n,s,o,u){s.child=n===null?_s(s,null,o,u):Oe(s,n.child,o,u)}function Tv(n,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var _={};for(var E in u)E!=="ref"&&(_[E]=u[E])}else _=u;return ca(s),u=Vm(n,s,o,_,m,f),E=Bm(),n!==null&&!$n?(zm(n,s,f),Wa(n,s,f)):(st&&E&&xs(s),s.flags|=1,Cr(n,s,u,f),s.child)}function Sv(n,s,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!$c(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,Ev(n,s,m,u,f)):(n=Ua(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!lp(n,f)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:Bs,o(_,u)&&n.ref===s.ref)return Wa(n,s,f)}return s.flags|=1,n=ys(m,u),n.ref=s.ref,n.return=s,s.child=n}function Ev(n,s,o,u,f){if(n!==null){var m=n.memoizedProps;if(Bs(m,u)&&n.ref===s.ref)if($n=!1,s.pendingProps=u=m,lp(n,f))(n.flags&131072)!==0&&($n=!0);else return s.lanes=n.lanes,Wa(n,s,f)}return tp(n,s,o,u,f)}function Av(n,s,o,u){var f=u.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=s.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,s.child=null;return Iv(n,s,m,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Xc(s,m!==null?m.cachePool:null),m!==null?Rx(s,m):km(),jx(s);else return u=s.lanes=536870912,Iv(n,s,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(Xc(s,m.cachePool),Rx(s,m),Ho(),s.memoizedState=null):(n!==null&&Xc(s,null),km(),Ho());return Cr(n,s,f,o),s.child}function Bd(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Iv(n,s,o,u,f){var m=Ad();return m=m===null?null:{parent:Cn._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&Xc(s,null),km(),jx(s),n!==null&&Ha(n,s,u,!0),s.childLanes=f,null}function Tf(n,s){return s=Ef({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Cv(n,s,o){return Oe(s,n.child,null,o),n=Tf(s,s.pendingProps),n.flags|=2,Wi(s),s.memoizedState=null,n}function mE(n,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(st){if(u.mode==="hidden")return n=Tf(s,u),s.lanes=536870912,Bd(null,n);if(Dm(s),(n=kt)?(n=Pb(n,_i),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:mn!==null?{id:Ie,overflow:Kr}:null,retryLane:536870912,hydrationErrors:null},o=Gr(n),o.return=s,s.child=o,rn=s,kt=null)):n=null,n===null)throw oa(s);return s.lanes=536870912,null}return Tf(s,u)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(Dm(s),f)if(s.flags&256)s.flags&=-257,s=Cv(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if($n||Ha(n,s,o,!1),f=(o&n.childLanes)!==0,$n||f){if(u=Xt,u!==null&&(_=is(u,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,Pa(n,_),Ai(u,n,_),ep;Mf(),s=Cv(n,s,o)}else n=m.treeContext,kt=Ts(_.nextSibling),rn=s,st=!0,aa=null,_i=!1,n!==null&&Fa(s,n),s=Tf(s,u),s.flags|=4096;return s}return n=ys(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Sf(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function tp(n,s,o,u,f){return ca(s),o=Vm(n,s,o,u,void 0,f),u=Bm(),n!==null&&!$n?(zm(n,s,f),Wa(n,s,f)):(st&&u&&xs(s),s.flags|=1,Cr(n,s,o,f),s.child)}function Rv(n,s,o,u,f,m){return ca(s),s.updateQueue=null,o=Nx(s,u,o,f),kx(n),u=Bm(),n!==null&&!$n?(zm(n,s,m),Wa(n,s,m)):(st&&u&&xs(s),s.flags|=1,Cr(n,s,o,m),s.child)}function jv(n,s,o,u,f){if(ca(s),s.stateNode===null){var m=$i,_=o.contextType;typeof _=="object"&&_!==null&&(m=qn(_)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Jm,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Rn(s),_=o.contextType,m.context=typeof _=="object"&&_!==null?qn(_):$i,m.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Xm(s,o,_,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Jm.enqueueReplaceState(m,m.state,null),kd(s,u,m,f),jd(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var E=s.memoizedProps,z=ic(o,E);m.props=z;var K=m.context,re=o.contextType;_=$i,typeof re=="object"&&re!==null&&(_=qn(re));var le=o.getDerivedStateFromProps;re=typeof le=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,re||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||K!==_)&&pv(s,m,u,_),Be=!1;var X=s.memoizedState;m.state=X,kd(s,u,m,f),jd(),K=s.memoizedState,E||X!==K||Be?(typeof le=="function"&&(Xm(s,o,le,u),K=s.memoizedState),(z=Be||mv(s,o,z,u,X,K,_))?(re||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=K),m.props=u,m.state=K,m.context=_,u=z):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Ir(n,s),_=s.memoizedProps,re=ic(o,_),m.props=re,le=s.pendingProps,X=m.context,K=o.contextType,z=$i,typeof K=="object"&&K!==null&&(z=qn(K)),E=o.getDerivedStateFromProps,(K=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==le||X!==z)&&pv(s,m,u,z),Be=!1,X=s.memoizedState,m.state=X,kd(s,u,m,f),jd();var ee=s.memoizedState;_!==le||X!==ee||Be||n!==null&&n.dependencies!==null&&Zl(n.dependencies)?(typeof E=="function"&&(Xm(s,o,E,u),ee=s.memoizedState),(re=Be||mv(s,o,re,u,X,ee,z)||n!==null&&n.dependencies!==null&&Zl(n.dependencies))?(K||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,ee,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,ee,z)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=ee),m.props=u,m.state=ee,m.context=z,u=re):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,Sf(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=Oe(s,n.child,null,f),s.child=Oe(s,null,o,f)):Cr(n,s,o,f),s.memoizedState=m.state,n=s.child):n=Wa(n,s,f),n}function kv(n,s,o,u){return qa(),s.flags|=256,Cr(n,s,o,u),s.child}var np={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rp(n){return{baseLanes:n,cachePool:Id()}}function ip(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Xi),n}function Nv(n,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(Bn.current&2)!==0),_&&(f=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(st){if(f?Go(s):Ho(),(n=kt)?(n=Pb(n,_i),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:mn!==null?{id:Ie,overflow:Kr}:null,retryLane:536870912,hydrationErrors:null},o=Gr(n),o.return=s,s.child=o,rn=s,kt=null)):n=null,n===null)throw oa(s);return Pp(n)?s.lanes=32:s.lanes=536870912,null}var E=u.children;return u=u.fallback,f?(Ho(),f=s.mode,E=Ef({mode:"hidden",children:E},f),u=Ls(u,f,o,null),E.return=s,u.return=s,E.sibling=u,s.child=E,u=s.child,u.memoizedState=rp(o),u.childLanes=ip(n,_,o),s.memoizedState=np,Bd(null,u)):(Go(s),sp(s,E))}var z=n.memoizedState;if(z!==null&&(E=z.dehydrated,E!==null)){if(m)s.flags&256?(Go(s),s.flags&=-257,s=ap(n,s,o)):s.memoizedState!==null?(Ho(),s.child=n.child,s.flags|=128,s=null):(Ho(),E=u.fallback,f=s.mode,u=Ef({mode:"visible",children:u.children},f),E=Ls(E,f,o,null),E.flags|=2,u.return=s,E.return=s,u.sibling=E,s.child=u,Oe(s,n.child,null,o),u=s.child,u.memoizedState=rp(o),u.childLanes=ip(n,_,o),s.memoizedState=np,s=Bd(null,u));else if(Go(s),Pp(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var K=_.dgst;_=K,u=Error(r(419)),u.stack="",u.digest=_,Po({value:u,source:null,stack:null}),s=ap(n,s,o)}else if($n||Ha(n,s,o,!1),_=(o&n.childLanes)!==0,$n||_){if(_=Xt,_!==null&&(u=is(_,o),u!==0&&u!==z.retryLane))throw z.retryLane=u,Pa(n,u),Ai(_,n,u),ep;Lp(E)||Mf(),s=ap(n,s,o)}else Lp(E)?(s.flags|=192,s.child=n.child,s=null):(n=z.treeContext,kt=Ts(E.nextSibling),rn=s,st=!0,aa=null,_i=!1,n!==null&&Fa(s,n),s=sp(s,u.children),s.flags|=4096);return s}return f?(Ho(),E=u.fallback,f=s.mode,z=n.child,K=z.sibling,u=ys(z,{mode:"hidden",children:u.children}),u.subtreeFlags=z.subtreeFlags&65011712,K!==null?E=ys(K,E):(E=Ls(E,f,o,null),E.flags|=2),E.return=s,u.return=s,u.sibling=E,s.child=u,Bd(null,u),u=s.child,E=n.child.memoizedState,E===null?E=rp(o):(f=E.cachePool,f!==null?(z=Cn._currentValue,f=f.parent!==z?{parent:z,pool:z}:f):f=Id(),E={baseLanes:E.baseLanes|o,cachePool:f}),u.memoizedState=E,u.childLanes=ip(n,_,o),s.memoizedState=np,Bd(n.child,u)):(Go(s),o=n.child,n=o.sibling,o=ys(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=o,s.memoizedState=null,o)}function sp(n,s){return s=Ef({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Ef(n,s){return n=fr(22,n,null,s),n.lanes=0,n}function ap(n,s,o){return Oe(s,n.child,null,o),n=sp(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Dv(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),wd(n.return,s,o)}function op(n,s,o,u,f,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=m)}function Mv(n,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var _=Bn.current,E=(_&2)!==0;if(E?(_=_&1|2,s.flags|=128):_&=1,ne(Bn,_),Cr(n,s,u,o),u=st?sa:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Dv(n,o,s);else if(n.tag===19)Dv(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&ff(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),op(s,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&ff(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}op(s,!0,o,null,m,u);break;case"together":op(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Wa(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Qo|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(Ha(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=ys(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=ys(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function lp(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Zl(n)))}function pE(n,s,o){switch(s.tag){case 3:vt(s,s.stateNode.containerInfo),la(s,Cn,n.memoizedState.cache),qa();break;case 27:case 5:vr(s);break;case 4:vt(s,s.stateNode.containerInfo);break;case 10:la(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Dm(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Go(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Nv(n,s,o):(Go(s),n=Wa(n,s,o),n!==null?n.sibling:null);Go(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Ha(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return Mv(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ne(Bn,Bn.current),u)break;return null;case 22:return s.lanes=0,Av(n,s,o,s.pendingProps);case 24:la(s,Cn,n.memoizedState.cache)}return Wa(n,s,o)}function Vv(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)$n=!0;else{if(!lp(n,o)&&(s.flags&128)===0)return $n=!1,pE(n,s,o);$n=(n.flags&131072)!==0}else $n=!1,st&&(s.flags&1048576)!==0&&af(s,sa,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=A(s.elementType),s.type=n,typeof n=="function")$c(n)?(u=ic(n,u),s.tag=1,s=jv(null,s,n,u,o)):(s.tag=0,s=tp(null,s,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===me){s.tag=11,s=Tv(null,s,n,u,o);break e}else if(f===D){s.tag=14,s=Sv(null,s,n,u,o);break e}}throw s=rt(n)||n,Error(r(306,s,""))}}return s;case 0:return tp(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=ic(u,s.pendingProps),jv(n,s,u,f,o);case 3:e:{if(vt(s,s.stateNode.containerInfo),n===null)throw Error(r(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,Ir(n,s),kd(s,u,null,o);var _=s.memoizedState;if(u=_.cache,la(s,Cn,u),u!==m.cache&&Jl(s,[Cn],o,!0),jd(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=kv(n,s,u,o);break e}else if(u!==f){f=Hr(Error(r(424)),s),Po(f),s=kv(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(kt=Ts(n.firstChild),rn=s,st=!0,aa=null,_i=!0,o=_s(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(qa(),u===f){s=Wa(n,s,o);break e}Cr(n,s,u,o)}s=s.child}return s;case 26:return Sf(n,s),n===null?(o=$b(s.type,null,s.pendingProps,null))?s.memoizedState=o:st||(o=s.type,n=s.pendingProps,u=Uf(ke.current).createElement(o),u[Pt]=s,u[nn]=n,Rr(u,o,n),dn(u),s.stateNode=u):s.memoizedState=$b(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return vr(s),n===null&&st&&(u=s.stateNode=qb(s.type,s.pendingProps,ke.current),rn=s,_i=!0,f=kt,Zo(s.type)?(Up=f,kt=Ts(u.firstChild)):kt=f),Cr(n,s,s.pendingProps.children,o),Sf(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&st&&((f=u=kt)&&(u=$E(u,s.type,s.pendingProps,_i),u!==null?(s.stateNode=u,rn=s,kt=Ts(u.firstChild),_i=!1,f=!0):f=!1),f||oa(s)),vr(s),f=s.type,m=s.pendingProps,_=n!==null?n.memoizedProps:null,u=m.children,Bp(f,m)?u=null:_!==null&&Bp(f,_)&&(s.flags|=32),s.memoizedState!==null&&(f=Vm(n,s,oE,null,null,o),Xd._currentValue=f),Sf(n,s),Cr(n,s,u,o),s.child;case 6:return n===null&&st&&((n=o=kt)&&(o=KE(o,s.pendingProps,_i),o!==null?(s.stateNode=o,rn=s,kt=null,n=!0):n=!1),n||oa(s)),null;case 13:return Nv(n,s,o);case 4:return vt(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Oe(s,null,u,o):Cr(n,s,u,o),s.child;case 11:return Tv(n,s,s.type,s.pendingProps,o);case 7:return Cr(n,s,s.pendingProps,o),s.child;case 8:return Cr(n,s,s.pendingProps.children,o),s.child;case 12:return Cr(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,la(s,s.type,u.value),Cr(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ca(s),f=qn(f),u=u(f),s.flags|=1,Cr(n,s,u,o),s.child;case 14:return Sv(n,s,s.type,s.pendingProps,o);case 15:return Ev(n,s,s.type,s.pendingProps,o);case 19:return Mv(n,s,o);case 31:return mE(n,s,o);case 22:return Av(n,s,o,s.pendingProps);case 24:return ca(s),u=qn(Cn),n===null?(f=Ad(),f===null&&(f=Xt,m=Td(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},Rn(s),la(s,Cn,f)):((n.lanes&o)!==0&&(Ir(n,s),kd(s,null,null,o),jd()),f=n.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),la(s,Cn,u)):(u=m.cache,la(s,Cn,u),u!==f.cache&&Jl(s,[Cn],o,!0))),Cr(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Ya(n){n.flags|=4}function cp(n,s,o,u,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(lb())n.flags|=8192;else throw j=Jc,Cd}else n.flags&=-16777217}function Bv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Xb(s))if(lb())n.flags|=8192;else throw j=Jc,Cd}function Af(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Cs():536870912,n.lanes|=s,au|=s)}function zd(n,s){if(!st)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function an(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function yE(n,s,o){var u=s.pendingProps;switch(Wc(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(s),null;case 1:return an(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),bs(Cn),Ze(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Lo(s)?Ya(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,bd())),an(s),null;case 26:var f=s.type,m=s.memoizedState;return n===null?(Ya(s),m!==null?(an(s),Bv(s,m)):(an(s),cp(s,f,null,u,o))):m?m!==n.memoizedState?(Ya(s),an(s),Bv(s,m)):(an(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Ya(s),an(s),cp(s,f,n,u,o)),null;case 27:if(br(s),o=ke.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Ya(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return an(s),null}n=he.current,Lo(s)?of(s):(n=qb(f,u,o),s.stateNode=n,Ya(s))}return an(s),null;case 5:if(br(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Ya(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return an(s),null}if(m=he.current,Lo(s))of(s);else{var _=Uf(ke.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}m[Pt]=s,m[nn]=u;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(Rr(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ya(s)}}return an(s),cp(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Ya(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(n=ke.current,Lo(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=rn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Pt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Nb(n.nodeValue,o)),n||oa(s,!0)}else n=Uf(n).createTextNode(u),n[Pt]=s,s.stateNode=n}return an(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=Lo(s),o!==null){if(n===null){if(!u)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Pt]=s}else qa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;an(s),n=!1}else o=bd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Wi(s),s):(Wi(s),null);if((s.flags&128)!==0)throw Error(r(558))}return an(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Lo(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Pt]=s}else qa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;an(s),f=!1}else f=bd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Wi(s),s):(Wi(s),null)}return Wi(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),Af(s,s.updateQueue),an(s),null);case 4:return Ze(),n===null&&kp(s.stateNode.containerInfo),an(s),null;case 10:return bs(s.type),an(s),null;case 19:if(te(Bn),u=s.memoizedState,u===null)return an(s),null;if(f=(s.flags&128)!==0,m=u.rendering,m===null)if(f)zd(u,!1);else{if(kn!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=ff(n),m!==null){for(s.flags|=128,zd(u,!1),n=m.updateQueue,s.updateQueue=n,Af(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)Kc(o,n),o=o.sibling;return ne(Bn,Bn.current&1|2),st&&Fn(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Jt()>kf&&(s.flags|=128,f=!0,zd(u,!1),s.lanes=4194304)}else{if(!f)if(n=ff(m),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,Af(s,n),zd(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!st)return an(s),null}else 2*Jt()-u.renderingStartTime>kf&&o!==536870912&&(s.flags|=128,f=!0,zd(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(n=u.last,n!==null?n.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Jt(),n.sibling=null,o=Bn.current,ne(Bn,f?o&1|2:o&1),st&&Fn(s,u.treeForkCount),n):(an(s),null);case 22:case 23:return Wi(s),Nm(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(an(s),s.subtreeFlags&6&&(s.flags|=8192)):an(s),o=s.updateQueue,o!==null&&Af(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&te(ua),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),bs(Cn),an(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function xE(n,s){switch(Wc(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return bs(Cn),Ze(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return br(s),null;case 31:if(s.memoizedState!==null){if(Wi(s),s.alternate===null)throw Error(r(340));qa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Wi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));qa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return te(Bn),null;case 4:return Ze(),null;case 10:return bs(s.type),null;case 22:case 23:return Wi(s),Nm(),n!==null&&te(ua),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return bs(Cn),null;case 25:return null;default:return null}}function zv(n,s){switch(Wc(s),s.tag){case 3:bs(Cn),Ze();break;case 26:case 27:case 5:br(s);break;case 4:Ze();break;case 31:s.memoizedState!==null&&Wi(s);break;case 13:Wi(s);break;case 19:te(Bn);break;case 10:bs(s.type);break;case 22:case 23:Wi(s),Nm(),n!==null&&te(ua);break;case 24:bs(Cn)}}function Od(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==f)}}catch(E){Dt(s,s.return,E)}}function $o(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var _=u.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,f=s;var z=o,K=E;try{K()}catch(re){Dt(f,z,re)}}}u=u.next}while(u!==m)}}catch(re){Dt(s,s.return,re)}}function Ov(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Cx(s,o)}catch(u){Dt(n,n.return,u)}}}function Lv(n,s,o){o.props=ic(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){Dt(n,s,u)}}function Ld(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){Dt(n,s,f)}}function da(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){Dt(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Dt(n,s,f)}else o.current=null}function Pv(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){Dt(n,n.return,f)}}function up(n,s,o){try{var u=n.stateNode;PE(u,n.type,o,s),u[nn]=s}catch(f){Dt(n,n.return,f)}}function Uv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Zo(n.type)||n.tag===4}function dp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Uv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Zo(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function hp(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=hi));else if(u!==4&&(u===27&&Zo(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(hp(n,s,o),n=n.sibling;n!==null;)hp(n,s,o),n=n.sibling}function If(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&Zo(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(If(n,s,o),n=n.sibling;n!==null;)If(n,s,o),n=n.sibling}function Fv(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Rr(s,u,o),s[Pt]=n,s[nn]=o}catch(m){Dt(n,n.return,m)}}var Xa=!1,Kn=!1,fp=!1,qv=typeof WeakSet=="function"?WeakSet:Set,gr=null;function vE(n,s){if(n=n.containerInfo,Mp=Qf,n=Hl(n),Ar(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,E=-1,z=-1,K=0,re=0,le=n,X=null;t:for(;;){for(var ee;le!==o||f!==0&&le.nodeType!==3||(E=_+f),le!==m||u!==0&&le.nodeType!==3||(z=_+u),le.nodeType===3&&(_+=le.nodeValue.length),(ee=le.firstChild)!==null;)X=le,le=ee;for(;;){if(le===n)break t;if(X===o&&++K===f&&(E=_),X===m&&++re===u&&(z=_),(ee=le.nextSibling)!==null)break;le=X,X=le.parentNode}le=ee}o=E===-1||z===-1?null:{start:E,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(Vp={focusedElem:n,selectionRange:o},Qf=!1,gr=s;gr!==null;)if(s=gr,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,gr=n;else for(;gr!==null;){switch(s=gr,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var De=ic(o.type,f);n=u.getSnapshotBeforeUpdate(De,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ge){Dt(o,o.return,Ge)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Op(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Op(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,gr=n;break}gr=s.return}}function Gv(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Za(n,o),u&4&&Od(5,o);break;case 1:if(Za(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(_){Dt(o,o.return,_)}else{var f=ic(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Dt(o,o.return,_)}}u&64&&Ov(o),u&512&&Ld(o,o.return);break;case 3:if(Za(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Cx(n,s)}catch(_){Dt(o,o.return,_)}}break;case 27:s===null&&u&4&&Fv(o);case 26:case 5:Za(n,o),s===null&&u&4&&Pv(o),u&512&&Ld(o,o.return);break;case 12:Za(n,o);break;case 31:Za(n,o),u&4&&Kv(n,o);break;case 13:Za(n,o),u&4&&Qv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=CE.bind(null,o),QE(n,o))));break;case 22:if(u=o.memoizedState!==null||Xa,!u){s=s!==null&&s.memoizedState!==null||Kn,f=Xa;var m=Kn;Xa=u,(Kn=s)&&!m?eo(n,o,(o.subtreeFlags&8772)!==0):Za(n,o),Xa=f,Kn=m}break;case 30:break;default:Za(n,o)}}function Hv(n){var s=n.alternate;s!==null&&(n.alternate=null,Hv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Rs(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var pn=null,wi=!1;function Ja(n,s,o){for(o=o.child;o!==null;)$v(n,s,o),o=o.sibling}function $v(n,s,o){if(Re&&typeof Re.onCommitFiberUnmount=="function")try{Re.onCommitFiberUnmount(we,o)}catch{}switch(o.tag){case 26:Kn||da(o,s),Ja(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Kn||da(o,s);var u=pn,f=wi;Zo(o.type)&&(pn=o.stateNode,wi=!1),Ja(n,s,o),Qd(o.stateNode),pn=u,wi=f;break;case 5:Kn||da(o,s);case 6:if(u=pn,f=wi,pn=null,Ja(n,s,o),pn=u,wi=f,pn!==null)if(wi)try{(pn.nodeType===9?pn.body:pn.nodeName==="HTML"?pn.ownerDocument.body:pn).removeChild(o.stateNode)}catch(m){Dt(o,s,m)}else try{pn.removeChild(o.stateNode)}catch(m){Dt(o,s,m)}break;case 18:pn!==null&&(wi?(n=pn,Ob(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),gu(n)):Ob(pn,o.stateNode));break;case 4:u=pn,f=wi,pn=o.stateNode.containerInfo,wi=!0,Ja(n,s,o),pn=u,wi=f;break;case 0:case 11:case 14:case 15:$o(2,o,s),Kn||$o(4,o,s),Ja(n,s,o);break;case 1:Kn||(da(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Lv(o,s,u)),Ja(n,s,o);break;case 21:Ja(n,s,o);break;case 22:Kn=(u=Kn)||o.memoizedState!==null,Ja(n,s,o),Kn=u;break;default:Ja(n,s,o)}}function Kv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{gu(n)}catch(o){Dt(s,s.return,o)}}}function Qv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{gu(n)}catch(o){Dt(s,s.return,o)}}function bE(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new qv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new qv),s;default:throw Error(r(435,n.tag))}}function Cf(n,s){var o=bE(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=RE.bind(null,n,u);u.then(f,f)}})}function Ti(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,_=s,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(Zo(E.type)){pn=E.stateNode,wi=!1;break e}break;case 5:pn=E.stateNode,wi=!1;break e;case 3:case 4:pn=E.stateNode.containerInfo,wi=!0;break e}E=E.return}if(pn===null)throw Error(r(160));$v(m,_,f),pn=null,wi=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Wv(s,n),s=s.sibling}var Ps=null;function Wv(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ti(s,n),Si(n),u&4&&($o(3,n,n.return),Od(3,n),$o(5,n,n.return));break;case 1:Ti(s,n),Si(n),u&512&&(Kn||o===null||da(o,o.return)),u&64&&Xa&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Ps;if(Ti(s,n),Si(n),u&512&&(Kn||o===null||da(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[En]||m[Pt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Rr(m,u,o),m[Pt]=n,dn(m),u=m;break e;case"link":var _=Wb("link","href",f).get(u+(o.href||""));if(_){for(var E=0;E<_.length;E++)if(m=_[E],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(E,1);break t}}m=f.createElement(u),Rr(m,u,o),f.head.appendChild(m);break;case"meta":if(_=Wb("meta","content",f).get(u+(o.content||""))){for(E=0;E<_.length;E++)if(m=_[E],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(E,1);break t}}m=f.createElement(u),Rr(m,u,o),f.head.appendChild(m);break;default:throw Error(r(468,u))}m[Pt]=n,dn(m),u=m}n.stateNode=u}else Yb(f,n.type,n.stateNode);else n.stateNode=Qb(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?Yb(f,n.type,n.stateNode):Qb(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&up(n,n.memoizedProps,o.memoizedProps)}break;case 27:Ti(s,n),Si(n),u&512&&(Kn||o===null||da(o,o.return)),o!==null&&u&4&&up(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Ti(s,n),Si(n),u&512&&(Kn||o===null||da(o,o.return)),n.flags&32){f=n.stateNode;try{ur(f,"")}catch(De){Dt(n,n.return,De)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,up(n,f,o!==null?o.memoizedProps:f)),u&1024&&(fp=!0);break;case 6:if(Ti(s,n),Si(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(De){Dt(n,n.return,De)}}break;case 3:if(Gf=null,f=Ps,Ps=Ff(s.containerInfo),Ti(s,n),Ps=f,Si(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{gu(s.containerInfo)}catch(De){Dt(n,n.return,De)}fp&&(fp=!1,Yv(n));break;case 4:u=Ps,Ps=Ff(n.stateNode.containerInfo),Ti(s,n),Si(n),Ps=u;break;case 12:Ti(s,n),Si(n);break;case 31:Ti(s,n),Si(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Cf(n,u)));break;case 13:Ti(s,n),Si(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(jf=Jt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Cf(n,u)));break;case 22:f=n.memoizedState!==null;var z=o!==null&&o.memoizedState!==null,K=Xa,re=Kn;if(Xa=K||f,Kn=re||z,Ti(s,n),Kn=re,Xa=K,Si(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||z||Xa||Kn||sc(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){z=o=s;try{if(m=z.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=z.stateNode;var le=z.memoizedProps.style,X=le!=null&&le.hasOwnProperty("display")?le.display:null;E.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(De){Dt(z,z.return,De)}}}else if(s.tag===6){if(o===null){z=s;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(De){Dt(z,z.return,De)}}}else if(s.tag===18){if(o===null){z=s;try{var ee=z.stateNode;f?Lb(ee,!0):Lb(z.stateNode,!1)}catch(De){Dt(z,z.return,De)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Cf(n,o))));break;case 19:Ti(s,n),Si(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Cf(n,u)));break;case 30:break;case 21:break;default:Ti(s,n),Si(n)}}function Si(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(Uv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,m=dp(n);If(n,m,f);break;case 5:var _=o.stateNode;o.flags&32&&(ur(_,""),o.flags&=-33);var E=dp(n);If(n,E,_);break;case 3:case 4:var z=o.stateNode.containerInfo,K=dp(n);hp(n,K,z);break;default:throw Error(r(161))}}catch(re){Dt(n,n.return,re)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Yv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Yv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Za(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Gv(n,s.alternate,s),s=s.sibling}function sc(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:$o(4,s,s.return),sc(s);break;case 1:da(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Lv(s,s.return,o),sc(s);break;case 27:Qd(s.stateNode);case 26:case 5:da(s,s.return),sc(s);break;case 22:s.memoizedState===null&&sc(s);break;case 30:sc(s);break;default:sc(s)}n=n.sibling}}function eo(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:eo(f,m,o),Od(4,m);break;case 1:if(eo(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(K){Dt(u,u.return,K)}if(u=m,f=u.updateQueue,f!==null){var E=u.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)Ix(z[f],E)}catch(K){Dt(u,u.return,K)}}o&&_&64&&Ov(m),Ld(m,m.return);break;case 27:Fv(m);case 26:case 5:eo(f,m,o),o&&u===null&&_&4&&Pv(m),Ld(m,m.return);break;case 12:eo(f,m,o);break;case 31:eo(f,m,o),o&&_&4&&Kv(f,m);break;case 13:eo(f,m,o),o&&_&4&&Qv(f,m);break;case 22:m.memoizedState===null&&eo(f,m,o),Ld(m,m.return);break;case 30:break;default:eo(f,m,o)}s=s.sibling}}function gp(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&ec(o))}function mp(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&ec(n))}function Us(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Xv(n,s,o,u),s=s.sibling}function Xv(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Us(n,s,o,u),f&2048&&Od(9,s);break;case 1:Us(n,s,o,u);break;case 3:Us(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&ec(n)));break;case 12:if(f&2048){Us(n,s,o,u),n=s.stateNode;try{var m=s.memoizedProps,_=m.id,E=m.onPostCommit;typeof E=="function"&&E(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(z){Dt(s,s.return,z)}}else Us(n,s,o,u);break;case 31:Us(n,s,o,u);break;case 13:Us(n,s,o,u);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?Us(n,s,o,u):Pd(n,s):m._visibility&2?Us(n,s,o,u):(m._visibility|=2,ru(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&gp(_,s);break;case 24:Us(n,s,o,u),f&2048&&mp(s.alternate,s);break;default:Us(n,s,o,u)}}function ru(n,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,_=s,E=o,z=u,K=_.flags;switch(_.tag){case 0:case 11:case 15:ru(m,_,E,z,f),Od(8,_);break;case 23:break;case 22:var re=_.stateNode;_.memoizedState!==null?re._visibility&2?ru(m,_,E,z,f):Pd(m,_):(re._visibility|=2,ru(m,_,E,z,f)),f&&K&2048&&gp(_.alternate,_);break;case 24:ru(m,_,E,z,f),f&&K&2048&&mp(_.alternate,_);break;default:ru(m,_,E,z,f)}s=s.sibling}}function Pd(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:Pd(o,u),f&2048&&gp(u.alternate,u);break;case 24:Pd(o,u),f&2048&&mp(u.alternate,u);break;default:Pd(o,u)}s=s.sibling}}var Ud=8192;function iu(n,s,o){if(n.subtreeFlags&Ud)for(n=n.child;n!==null;)Jv(n,s,o),n=n.sibling}function Jv(n,s,o){switch(n.tag){case 26:iu(n,s,o),n.flags&Ud&&n.memoizedState!==null&&aA(o,Ps,n.memoizedState,n.memoizedProps);break;case 5:iu(n,s,o);break;case 3:case 4:var u=Ps;Ps=Ff(n.stateNode.containerInfo),iu(n,s,o),Ps=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Ud,Ud=16777216,iu(n,s,o),Ud=u):iu(n,s,o));break;default:iu(n,s,o)}}function Zv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Fd(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];gr=u,tb(u,n)}Zv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)eb(n),n=n.sibling}function eb(n){switch(n.tag){case 0:case 11:case 15:Fd(n),n.flags&2048&&$o(9,n,n.return);break;case 3:Fd(n);break;case 12:Fd(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Rf(n)):Fd(n);break;default:Fd(n)}}function Rf(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];gr=u,tb(u,n)}Zv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:$o(8,s,s.return),Rf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Rf(s));break;default:Rf(s)}n=n.sibling}}function tb(n,s){for(;gr!==null;){var o=gr;switch(o.tag){case 0:case 11:case 15:$o(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ec(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,gr=u;else e:for(o=n;gr!==null;){u=gr;var f=u.sibling,m=u.return;if(Hv(u),u===o){gr=null;break e}if(f!==null){f.return=m,gr=f;break e}gr=m}}}var _E={getCacheForType:function(n){var s=qn(Cn),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return qn(Cn).controller.signal}},wE=typeof WeakMap=="function"?WeakMap:Map,It=0,Xt=null,lt=null,dt=0,Nt=0,Yi=null,Ko=!1,su=!1,pp=!1,to=0,kn=0,Qo=0,ac=0,yp=0,Xi=0,au=0,qd=null,Ei=null,xp=!1,jf=0,nb=0,kf=1/0,Nf=null,Wo=null,er=0,Yo=null,ou=null,no=0,vp=0,bp=null,rb=null,Gd=0,_p=null;function Ji(){return(It&2)!==0&&dt!==0?dt&-dt:Z.T!==null?Ip():Et()}function ib(){if(Xi===0)if((dt&536870912)===0||st){var n=Is;Is<<=1,(Is&3932160)===0&&(Is=262144),Xi=n}else Xi=536870912;return n=Qi.current,n!==null&&(n.flags|=32),Xi}function Ai(n,s,o){(n===Xt&&(Nt===2||Nt===9)||n.cancelPendingCommit!==null)&&(lu(n,0),Xo(n,dt,Xi,!1)),Oi(n,o),((It&2)===0||n!==Xt)&&(n===Xt&&((It&2)===0&&(ac|=o),kn===4&&Xo(n,dt,Xi,!1)),ha(n))}function sb(n,s,o){if((It&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Nn(n,s),f=u?EE(n,s):Tp(n,s,!0),m=u;do{if(f===0){su&&!u&&Xo(n,s,0,!1);break}else{if(o=n.current.alternate,m&&!TE(o)){f=Tp(n,s,!1),m=!1;continue}if(f===2){if(m=s,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var E=n;f=qd;var z=E.current.memoizedState.isDehydrated;if(z&&(lu(E,_).flags|=256),_=Tp(E,_,!1),_!==2){if(pp&&!z){E.errorRecoveryDisabledLanes|=m,ac|=m,f=4;break e}m=Ei,Ei=f,m!==null&&(Ei===null?Ei=m:Ei.push.apply(Ei,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){lu(n,0),Xo(n,s,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Xo(u,s,Xi,!Ko);break e;case 2:Ei=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=jf+300-Jt(),10<f)){if(Xo(u,s,Xi,!Ko),Vr(u,0,!0)!==0)break e;no=s,u.timeoutHandle=Bb(ab.bind(null,u,o,Ei,Nf,xp,s,Xi,ac,au,Ko,m,"Throttled",-0,0),f);break e}ab(u,o,Ei,Nf,xp,s,Xi,ac,au,Ko,m,null,-0,0)}}break}while(!0);ha(n)}function ab(n,s,o,u,f,m,_,E,z,K,re,le,X,ee){if(n.timeoutHandle=-1,le=s.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hi},Jv(s,m,le);var De=(m&62914560)===m?jf-Jt():(m&4194048)===m?nb-Jt():0;if(De=oA(le,De),De!==null){no=m,n.cancelPendingCommit=De(gb.bind(null,n,s,m,o,u,f,_,E,z,re,le,null,X,ee)),Xo(n,m,_,!K);return}}gb(n,s,m,o,u,f,_,E,z)}function TE(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!In(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Xo(n,s,o,u){s&=~yp,s&=~ac,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var m=31-Zt(f),_=1<<m;u[m]=-1,f&=~_}o!==0&&rs(n,o,s)}function Df(){return(It&6)===0?(Hd(0),!1):!0}function wp(){if(lt!==null){if(Nt===0)var n=lt.return;else n=lt,vs=Ga=null,Om(n),qe=null,_t=0,n=lt;for(;n!==null;)zv(n.alternate,n),n=n.return;lt=null}}function lu(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,qE(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),no=0,wp(),Xt=n,lt=o=ys(n.current,null),dt=s,Nt=0,Yi=null,Ko=!1,su=Nn(n,s),pp=!1,au=Xi=yp=ac=Qo=kn=0,Ei=qd=null,xp=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-Zt(u),m=1<<f;s|=n[f],u&=~m}return to=s,Do(),o}function ob(n,s){et=null,Z.H=Vd,s===Fo||s===nc?(s=Y(),Nt=3):s===Cd?(s=Y(),Nt=4):Nt=s===ep?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Yi=s,lt===null&&(kn=1,wf(n,Hr(s,n.current)))}function lb(){var n=Qi.current;return n===null?!0:(dt&4194048)===dt?ws===null:(dt&62914560)===dt||(dt&536870912)!==0?n===ws:!1}function cb(){var n=Z.H;return Z.H=Vd,n===null?Vd:n}function ub(){var n=Z.A;return Z.A=_E,n}function Mf(){kn=4,Ko||(dt&4194048)!==dt&&Qi.current!==null||(su=!0),(Qo&134217727)===0&&(ac&134217727)===0||Xt===null||Xo(Xt,dt,Xi,!1)}function Tp(n,s,o){var u=It;It|=2;var f=cb(),m=ub();(Xt!==n||dt!==s)&&(Nf=null,lu(n,s)),s=!1;var _=kn;e:do try{if(Nt!==0&&lt!==null){var E=lt,z=Yi;switch(Nt){case 8:wp(),_=6;break e;case 3:case 2:case 9:case 6:Qi.current===null&&(s=!0);var K=Nt;if(Nt=0,Yi=null,cu(n,E,z,K),o&&su){_=0;break e}break;default:K=Nt,Nt=0,Yi=null,cu(n,E,z,K)}}SE(),_=kn;break}catch(re){ob(n,re)}while(!0);return s&&n.shellSuspendCounter++,vs=Ga=null,It=u,Z.H=f,Z.A=m,lt===null&&(Xt=null,dt=0,Do()),_}function SE(){for(;lt!==null;)db(lt)}function EE(n,s){var o=It;It|=2;var u=cb(),f=ub();Xt!==n||dt!==s?(Nf=null,kf=Jt()+500,lu(n,s)):su=Nn(n,s);e:do try{if(Nt!==0&&lt!==null){s=lt;var m=Yi;t:switch(Nt){case 1:Nt=0,Yi=null,cu(n,s,m,1);break;case 2:case 9:if(df(m)){Nt=0,Yi=null,hb(s);break}s=function(){Nt!==2&&Nt!==9||Xt!==n||(Nt=7),ha(n)},m.then(s,s);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:df(m)?(Nt=0,Yi=null,hb(s)):(Nt=0,Yi=null,cu(n,s,m,7));break;case 5:var _=null;switch(lt.tag){case 26:_=lt.memoizedState;case 5:case 27:var E=lt;if(_?Xb(_):E.stateNode.complete){Nt=0,Yi=null;var z=E.sibling;if(z!==null)lt=z;else{var K=E.return;K!==null?(lt=K,Vf(K)):lt=null}break t}}Nt=0,Yi=null,cu(n,s,m,5);break;case 6:Nt=0,Yi=null,cu(n,s,m,6);break;case 8:wp(),kn=6;break e;default:throw Error(r(462))}}AE();break}catch(re){ob(n,re)}while(!0);return vs=Ga=null,Z.H=u,Z.A=f,It=o,lt!==null?0:(Xt=null,dt=0,Do(),kn)}function AE(){for(;lt!==null&&!Bi();)db(lt)}function db(n){var s=Vv(n.alternate,n,to);n.memoizedProps=n.pendingProps,s===null?Vf(n):lt=s}function hb(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Rv(o,s,s.pendingProps,s.type,void 0,dt);break;case 11:s=Rv(o,s,s.pendingProps,s.type.render,s.ref,dt);break;case 5:Om(s);default:zv(o,s),s=lt=Kc(s,to),s=Vv(o,s,to)}n.memoizedProps=n.pendingProps,s===null?Vf(n):lt=s}function cu(n,s,o,u){vs=Ga=null,Om(s),qe=null,_t=0;var f=s.return;try{if(gE(n,f,s,o,dt)){kn=1,wf(n,Hr(o,n.current)),lt=null;return}}catch(m){if(f!==null)throw lt=f,m;kn=1,wf(n,Hr(o,n.current)),lt=null;return}s.flags&32768?(st||u===1?n=!0:su||(dt&536870912)!==0?n=!1:(Ko=n=!0,(u===2||u===9||u===3||u===6)&&(u=Qi.current,u!==null&&u.tag===13&&(u.flags|=16384))),fb(s,n)):Vf(s)}function Vf(n){var s=n;do{if((s.flags&32768)!==0){fb(s,Ko);return}n=s.return;var o=yE(s.alternate,s,to);if(o!==null){lt=o;return}if(s=s.sibling,s!==null){lt=s;return}lt=s=n}while(s!==null);kn===0&&(kn=5)}function fb(n,s){do{var o=xE(n.alternate,n);if(o!==null){o.flags&=32767,lt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){lt=n;return}lt=n=o}while(n!==null);kn=6,lt=null}function gb(n,s,o,u,f,m,_,E,z){n.cancelPendingCommit=null;do Bf();while(er!==0);if((It&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=ra,Vl(n,o,m,_,E,z),n===Xt&&(lt=Xt=null,dt=0),ou=s,Yo=n,no=o,vp=m,bp=f,rb=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,jE(St,function(){return vb(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Z.T,Z.T=null,f=ye.p,ye.p=2,_=It,It|=4;try{vE(n,s,o)}finally{It=_,ye.p=f,Z.T=u}}er=1,mb(),pb(),yb()}}function mb(){if(er===1){er=0;var n=Yo,s=ou,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Z.T,Z.T=null;var u=ye.p;ye.p=2;var f=It;It|=4;try{Wv(s,n);var m=Vp,_=Hl(n.containerInfo),E=m.focusedElem,z=m.selectionRange;if(_!==E&&E&&E.ownerDocument&&Ro(E.ownerDocument.documentElement,E)){if(z!==null&&Ar(E)){var K=z.start,re=z.end;if(re===void 0&&(re=K),"selectionStart"in E)E.selectionStart=K,E.selectionEnd=Math.min(re,E.value.length);else{var le=E.ownerDocument||document,X=le&&le.defaultView||window;if(X.getSelection){var ee=X.getSelection(),De=E.textContent.length,Ge=Math.min(z.start,De),$t=z.end===void 0?Ge:Math.min(z.end,De);!ee.extend&&Ge>$t&&(_=$t,$t=Ge,Ge=_);var F=zs(E,Ge),P=zs(E,$t);if(F&&P&&(ee.rangeCount!==1||ee.anchorNode!==F.node||ee.anchorOffset!==F.offset||ee.focusNode!==P.node||ee.focusOffset!==P.offset)){var $=le.createRange();$.setStart(F.node,F.offset),ee.removeAllRanges(),Ge>$t?(ee.addRange($),ee.extend(P.node,P.offset)):($.setEnd(P.node,P.offset),ee.addRange($))}}}}for(le=[],ee=E;ee=ee.parentNode;)ee.nodeType===1&&le.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<le.length;E++){var ie=le[E];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Qf=!!Mp,Vp=Mp=null}finally{It=f,ye.p=u,Z.T=o}}n.current=s,er=2}}function pb(){if(er===2){er=0;var n=Yo,s=ou,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Z.T,Z.T=null;var u=ye.p;ye.p=2;var f=It;It|=4;try{Gv(n,s.alternate,s)}finally{It=f,ye.p=u,Z.T=o}}er=3}}function yb(){if(er===4||er===3){er=0,zi();var n=Yo,s=ou,o=no,u=rb;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?er=5:(er=0,ou=Yo=null,xb(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Wo=null),$e(o),s=s.stateNode,Re&&typeof Re.onCommitFiberRoot=="function")try{Re.onCommitFiberRoot(we,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Z.T,f=ye.p,ye.p=2,Z.T=null;try{for(var m=n.onRecoverableError,_=0;_<u.length;_++){var E=u[_];m(E.value,{componentStack:E.stack})}}finally{Z.T=s,ye.p=f}}(no&3)!==0&&Bf(),ha(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===_p?Gd++:(Gd=0,_p=n):Gd=0,Hd(0)}}function xb(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,ec(s)))}function Bf(){return mb(),pb(),yb(),vb()}function vb(){if(er!==5)return!1;var n=Yo,s=vp;vp=0;var o=$e(no),u=Z.T,f=ye.p;try{ye.p=32>o?32:o,Z.T=null,o=bp,bp=null;var m=Yo,_=no;if(er=0,ou=Yo=null,no=0,(It&6)!==0)throw Error(r(331));var E=It;if(It|=4,eb(m.current),Xv(m,m.current,_,o),It=E,Hd(0,!1),Re&&typeof Re.onPostCommitFiberRoot=="function")try{Re.onPostCommitFiberRoot(we,m)}catch{}return!0}finally{ye.p=f,Z.T=u,xb(n,s)}}function bb(n,s,o){s=Hr(o,s),s=Zm(n.stateNode,s,2),n=qo(n,s,2),n!==null&&(Oi(n,2),ha(n))}function Dt(n,s,o){if(n.tag===3)bb(n,n,o);else for(;s!==null;){if(s.tag===3){bb(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Wo===null||!Wo.has(u))){n=Hr(o,n),o=_v(2),u=qo(s,o,2),u!==null&&(wv(o,u,s,n),Oi(u,2),ha(u));break}}s=s.return}}function Sp(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new wE;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(pp=!0,f.add(o),n=IE.bind(null,n,s,o),s.then(n,n))}function IE(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Xt===n&&(dt&o)===o&&(kn===4||kn===3&&(dt&62914560)===dt&&300>Jt()-jf?(It&2)===0&&lu(n,0):yp|=o,au===dt&&(au=0)),ha(n)}function _b(n,s){s===0&&(s=Cs()),n=Pa(n,s),n!==null&&(Oi(n,s),ha(n))}function CE(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),_b(n,o)}function RE(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),_b(n,o)}function jE(n,s){return Wt(n,s)}var zf=null,uu=null,Ep=!1,Of=!1,Ap=!1,Jo=0;function ha(n){n!==uu&&n.next===null&&(uu===null?zf=uu=n:uu=uu.next=n),Of=!0,Ep||(Ep=!0,NE())}function Hd(n,s){if(!Ap&&Of){Ap=!0;do for(var o=!1,u=zf;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var _=u.suspendedLanes,E=u.pingedLanes;m=(1<<31-Zt(42|n)+1)-1,m&=f&~(_&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Eb(u,m))}else m=dt,m=Vr(u,u===Xt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Nn(u,m)||(o=!0,Eb(u,m));u=u.next}while(o);Ap=!1}}function kE(){wb()}function wb(){Of=Ep=!1;var n=0;Jo!==0&&FE()&&(n=Jo);for(var s=Jt(),o=null,u=zf;u!==null;){var f=u.next,m=Tb(u,s);m===0?(u.next=null,o===null?zf=f:o.next=f,f===null&&(uu=o)):(o=u,(n!==0||(m&3)!==0)&&(Of=!0)),u=f}er!==0&&er!==5||Hd(n),Jo!==0&&(Jo=0)}function Tb(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-Zt(m),E=1<<_,z=f[_];z===-1?((E&o)===0||(E&u)!==0)&&(f[_]=Br(E,s)):z<=s&&(n.expiredLanes|=E),m&=~E}if(s=Xt,o=dt,o=Vr(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(Nt===2||Nt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Dr(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Nn(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Dr(u),$e(o)){case 2:case 8:o=Sn;break;case 32:o=St;break;case 268435456:o=or;break;default:o=St}return u=Sb.bind(null,n),o=Wt(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Dr(u),n.callbackPriority=2,n.callbackNode=null,2}function Sb(n,s){if(er!==0&&er!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Bf()&&n.callbackNode!==o)return null;var u=dt;return u=Vr(n,n===Xt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(sb(n,u,s),Tb(n,Jt()),n.callbackNode!=null&&n.callbackNode===o?Sb.bind(null,n):null)}function Eb(n,s){if(Bf())return null;sb(n,s,!0)}function NE(){GE(function(){(It&6)!==0?Wt(ar,kE):wb()})}function Ip(){if(Jo===0){var n=$a;n===0&&(n=Xn,Xn<<=1,(Xn&261888)===0&&(Xn=256)),Jo=n}return Jo}function Ab(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Jn(""+n)}function Ib(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function DE(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=Ab((f[nn]||null).action),_=u.submitter;_&&(s=(s=_[nn]||null)?Ab(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var E=new qi("action","action",null,u,f);n.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Jo!==0){var z=_?Ib(f,_):new FormData(f);Km(o,{pending:!0,data:z,method:f.method,action:m},null,z)}}else typeof m=="function"&&(E.preventDefault(),z=_?Ib(f,_):new FormData(f),Km(o,{pending:!0,data:z,method:f.method,action:m},m,z))},currentTarget:f}]})}}for(var Cp=0;Cp<vd.length;Cp++){var Rp=vd[Cp],ME=Rp.toLowerCase(),VE=Rp[0].toUpperCase()+Rp.slice(1);bi(ME,"on"+VE)}bi(vi,"onAnimationEnd"),bi(La,"onAnimationIteration"),bi(qr,"onAnimationStart"),bi("dblclick","onDoubleClick"),bi("focusin","onFocus"),bi("focusout","onBlur"),bi(Kl,"onTransitionRun"),bi(gn,"onTransitionStart"),bi(xd,"onTransitionCancel"),bi(Ql,"onTransitionEnd"),ls("onMouseEnter",["mouseout","mouseover"]),ls("onMouseLeave",["mouseout","mouseover"]),ls("onPointerEnter",["pointerout","pointerover"]),ls("onPointerLeave",["pointerout","pointerover"]),os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),os("onBeforeInput",["compositionend","keypress","textInput","paste"]),os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($d));function Cb(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var _=u.length-1;0<=_;_--){var E=u[_],z=E.instance,K=E.currentTarget;if(E=E.listener,z!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=K;try{m(f)}catch(re){Gc(re)}f.currentTarget=null,m=z}else for(_=0;_<u.length;_++){if(E=u[_],z=E.instance,K=E.currentTarget,E=E.listener,z!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=K;try{m(f)}catch(re){Gc(re)}f.currentTarget=null,m=z}}}}function ct(n,s){var o=s[Sa];o===void 0&&(o=s[Sa]=new Set);var u=n+"__bubble";o.has(u)||(Rb(s,n,2,!1),o.add(u))}function jp(n,s,o){var u=0;s&&(u|=4),Rb(o,n,u,s)}var Lf="_reactListening"+Math.random().toString(36).slice(2);function kp(n){if(!n[Lf]){n[Lf]=!0,Aa.forEach(function(o){o!=="selectionchange"&&(BE.has(o)||jp(o,!1,n),jp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Lf]||(s[Lf]=!0,jp("selectionchange",!1,s))}}function Rb(n,s,o,u){switch(i1(s)){case 2:var f=uA;break;case 8:f=dA;break;default:f=$p}o=f.bind(null,s,o,n),f=void 0,!Ws||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function Np(n,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var E=u.stateNode.containerInfo;if(E===f)break;if(_===4)for(_=u.return;_!==null;){var z=_.tag;if((z===3||z===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;E!==null;){if(_=lr(E),_===null)return;if(z=_.tag,z===5||z===6||z===26||z===27){u=m=_;continue e}E=E.parentNode}}u=u.return}Ds(function(){var K=m,re=jt(o),le=[];e:{var X=qc.get(n);if(X!==void 0){var ee=qi,De=n;switch(n){case"keypress":if(Fi(o)===0)break e;case"keydown":case"keyup":ee=ms;break;case"focusin":De="focus",ee=fs;break;case"focusout":De="blur",ee=fs;break;case"beforeblur":case"afterblur":ee=fs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Js;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=ka;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=v;break;case vi:case La:case qr:ee=So;break;case Ql:ee=I;break;case"scroll":case"scrollend":ee=ti;break;case"wheel":ee=J;break;case"copy":case"cut":case"paste":ee=Da;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Pr;break;case"toggle":case"beforetoggle":ee=We}var Ge=(s&4)!==0,$t=!Ge&&(n==="scroll"||n==="scrollend"),F=Ge?X!==null?X+"Capture":null:X;Ge=[];for(var P=K,$;P!==null;){var ie=P;if($=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||$===null||F===null||(ie=Lr(P,F),ie!=null&&Ge.push(Kd(P,ie,$))),$t)break;P=P.return}0<Ge.length&&(X=new ee(X,De,null,o,re),le.push({event:X,listeners:Ge}))}}if((s&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",ee=n==="mouseout"||n==="pointerout",X&&o!==Dn&&(De=o.relatedTarget||o.fromElement)&&(lr(De)||De[Zr]))break e;if((ee||X)&&(X=re.window===re?re:(X=re.ownerDocument)?X.defaultView||X.parentWindow:window,ee?(De=o.relatedTarget||o.toElement,ee=K,De=De?lr(De):null,De!==null&&($t=c(De),Ge=De.tag,De!==$t||Ge!==5&&Ge!==27&&Ge!==6)&&(De=null)):(ee=null,De=K),ee!==De)){if(Ge=Js,ie="onMouseLeave",F="onMouseEnter",P="mouse",(n==="pointerout"||n==="pointerover")&&(Ge=Pr,ie="onPointerLeave",F="onPointerEnter",P="pointer"),$t=ee==null?X:Pn(ee),$=De==null?X:Pn(De),X=new Ge(ie,P+"leave",ee,o,re),X.target=$t,X.relatedTarget=$,ie=null,lr(re)===K&&(Ge=new Ge(F,P+"enter",De,o,re),Ge.target=$,Ge.relatedTarget=$t,ie=Ge),$t=ie,ee&&De)t:{for(Ge=zE,F=ee,P=De,$=0,ie=F;ie;ie=Ge(ie))$++;ie=0;for(var Pe=P;Pe;Pe=Ge(Pe))ie++;for(;0<$-ie;)F=Ge(F),$--;for(;0<ie-$;)P=Ge(P),ie--;for(;$--;){if(F===P||P!==null&&F===P.alternate){Ge=F;break t}F=Ge(F),P=Ge(P)}Ge=null}else Ge=null;ee!==null&&jb(le,X,ee,Ge,!1),De!==null&&$t!==null&&jb(le,$t,De,Ge,!0)}}e:{if(X=K?Pn(K):window,ee=X.nodeName&&X.nodeName.toLowerCase(),ee==="select"||ee==="input"&&X.type==="file")var wt=Fl;else if(Pc(X))if(hd)wt=rf;else{wt=Em;var ze=fd}else ee=X.nodeName,!ee||ee.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?K&&Ns(K.elementType)&&(wt=Fl):wt=gd;if(wt&&(wt=wt(n,K))){dd(le,wt,o,re);break e}ze&&ze(n,X,K),n==="focusout"&&K&&X.type==="number"&&K.memoizedProps.value!=null&&js(X,"number",X.value)}switch(ze=K?Pn(K):window,n){case"focusin":(Pc(ze)||ze.contentEditable==="true")&&(Ft=ze,jo=K,ko=null);break;case"focusout":ko=jo=Ft=null;break;case"mousedown":$l=!0;break;case"contextmenu":case"mouseup":case"dragend":$l=!1,Am(le,o,re);break;case"selectionchange":if(pd)break;case"keydown":case"keyup":Am(le,o,re)}var tt;if(nt)e:{switch(n){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else Eo?Fr(n,o)&&(ht="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ht="onCompositionStart");ht&&(Gi&&o.locale!=="ko"&&(Eo||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&Eo&&(tt=wo()):(Ui=re,Ys="value"in Ui?Ui.value:Ui.textContent,Eo=!0)),ze=Pf(K,ht),0<ze.length&&(ht=new yi(ht,n,null,o,re),le.push({event:ht,listeners:ze}),tt?ht.data=tt:(tt=Ba(o),tt!==null&&(ht.data=tt)))),(tt=Ur?Lc(n,o):Ao(n,o))&&(ht=Pf(K,"onBeforeInput"),0<ht.length&&(ze=new yi("onBeforeInput","beforeinput",null,o,re),le.push({event:ze,listeners:ht}),ze.data=tt)),DE(le,n,K,o,re)}Cb(le,s)})}function Kd(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Pf(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Lr(n,o),f!=null&&u.unshift(Kd(n,f,m)),f=Lr(n,s),f!=null&&u.push(Kd(n,f,m))),n.tag===3)return u;n=n.return}return[]}function zE(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function jb(n,s,o,u,f){for(var m=s._reactName,_=[];o!==null&&o!==u;){var E=o,z=E.alternate,K=E.stateNode;if(E=E.tag,z!==null&&z===u)break;E!==5&&E!==26&&E!==27||K===null||(z=K,f?(K=Lr(o,m),K!=null&&_.unshift(Kd(o,K,z))):f||(K=Lr(o,m),K!=null&&_.push(Kd(o,K,z)))),o=o.return}_.length!==0&&n.push({event:s,listeners:_})}var OE=/\r\n?/g,LE=/\u0000|\uFFFD/g;function kb(n){return(typeof n=="string"?n:""+n).replace(OE,`
`).replace(LE,"")}function Nb(n,s){return s=kb(s),kb(n)===s}function Ht(n,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||ur(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&ur(n,""+u);break;case"className":cr(n,"class",u);break;case"tabIndex":cr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":cr(n,o,u);break;case"style":Un(n,u,m);break;case"data":if(s!=="object"){cr(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Jn(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&Ht(n,s,"name",f.name,f,null),Ht(n,s,"formEncType",f.formEncType,f,null),Ht(n,s,"formMethod",f.formMethod,f,null),Ht(n,s,"formTarget",f.formTarget,f,null)):(Ht(n,s,"encType",f.encType,f,null),Ht(n,s,"method",f.method,f,null),Ht(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Jn(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=hi);break;case"onScroll":u!=null&&ct("scroll",n);break;case"onScrollEnd":u!=null&&ct("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Jn(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":ct("beforetoggle",n),ct("toggle",n),ci(n,"popover",u);break;case"xlinkActuate":hn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":hn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":hn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":hn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":hn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":hn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":hn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":hn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":hn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ci(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=di.get(o)||o,ci(n,o,u))}}function Dp(n,s,o,u,f,m){switch(o){case"style":Un(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?ur(n,u):(typeof u=="number"||typeof u=="bigint")&&ur(n,""+u);break;case"onScroll":u!=null&&ct("scroll",n);break;case"onScrollEnd":u!=null&&ct("scrollend",n);break;case"onClick":u!=null&&(n.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=n[nn]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):ci(n,o,u)}}}function Rr(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",n),ct("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ht(n,s,m,_,o,null)}}f&&Ht(n,s,"srcSet",o.srcSet,o,null),u&&Ht(n,s,"src",o.src,o,null);return;case"input":ct("invalid",n);var E=m=_=f=null,z=null,K=null;for(u in o)if(o.hasOwnProperty(u)){var re=o[u];if(re!=null)switch(u){case"name":f=re;break;case"type":_=re;break;case"checked":z=re;break;case"defaultChecked":K=re;break;case"value":m=re;break;case"defaultValue":E=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,s));break;default:Ht(n,s,u,re,o,null)}}ui(n,m,E,z,K,_,f,!1);return;case"select":ct("invalid",n),u=_=m=null;for(f in o)if(o.hasOwnProperty(f)&&(E=o[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":_=E;break;case"multiple":u=E;default:Ht(n,s,f,E,o,null)}s=m,o=_,n.multiple=!!u,s!=null?Or(n,!!u,s,!1):o!=null&&Or(n,!!u,o,!0);return;case"textarea":ct("invalid",n),m=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(E=o[_],E!=null))switch(_){case"value":u=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Ht(n,s,_,E,o,null)}Sr(n,u,f,m);return;case"option":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ht(n,s,z,u,o,null)}return;case"dialog":ct("beforetoggle",n),ct("toggle",n),ct("cancel",n),ct("close",n);break;case"iframe":case"object":ct("load",n);break;case"video":case"audio":for(u=0;u<$d.length;u++)ct($d[u],n);break;case"image":ct("error",n),ct("load",n);break;case"details":ct("toggle",n);break;case"embed":case"source":case"link":ct("error",n),ct("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in o)if(o.hasOwnProperty(K)&&(u=o[K],u!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ht(n,s,K,u,o,null)}return;default:if(Ns(s)){for(re in o)o.hasOwnProperty(re)&&(u=o[re],u!==void 0&&Dp(n,s,re,u,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(u=o[E],u!=null&&Ht(n,s,E,u,o,null))}function PE(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,E=null,z=null,K=null,re=null;for(ee in o){var le=o[ee];if(o.hasOwnProperty(ee)&&le!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":z=le;default:u.hasOwnProperty(ee)||Ht(n,s,ee,null,u,le)}}for(var X in u){var ee=u[X];if(le=o[X],u.hasOwnProperty(X)&&(ee!=null||le!=null))switch(X){case"type":m=ee;break;case"name":f=ee;break;case"checked":K=ee;break;case"defaultChecked":re=ee;break;case"value":_=ee;break;case"defaultValue":E=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,s));break;default:ee!==le&&Ht(n,s,X,ee,u,le)}}Ca(n,_,E,z,K,re,m,f);return;case"select":ee=_=E=X=null;for(m in o)if(z=o[m],o.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":ee=z;default:u.hasOwnProperty(m)||Ht(n,s,m,null,u,z)}for(f in u)if(m=u[f],z=o[f],u.hasOwnProperty(f)&&(m!=null||z!=null))switch(f){case"value":X=m;break;case"defaultValue":E=m;break;case"multiple":_=m;default:m!==z&&Ht(n,s,f,m,u,z)}s=E,o=_,u=ee,X!=null?Or(n,!!o,X,!1):!!u!=!!o&&(s!=null?Or(n,!!o,s,!0):Or(n,!!o,o?[]:"",!1));return;case"textarea":ee=X=null;for(E in o)if(f=o[E],o.hasOwnProperty(E)&&f!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ht(n,s,E,null,u,f)}for(_ in u)if(f=u[_],m=o[_],u.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":X=f;break;case"defaultValue":ee=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&Ht(n,s,_,f,u,m)}Ra(n,X,ee);return;case"option":for(var De in o)if(X=o[De],o.hasOwnProperty(De)&&X!=null&&!u.hasOwnProperty(De))switch(De){case"selected":n.selected=!1;break;default:Ht(n,s,De,null,u,X)}for(z in u)if(X=u[z],ee=o[z],u.hasOwnProperty(z)&&X!==ee&&(X!=null||ee!=null))switch(z){case"selected":n.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:Ht(n,s,z,X,u,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in o)X=o[Ge],o.hasOwnProperty(Ge)&&X!=null&&!u.hasOwnProperty(Ge)&&Ht(n,s,Ge,null,u,X);for(K in u)if(X=u[K],ee=o[K],u.hasOwnProperty(K)&&X!==ee&&(X!=null||ee!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:Ht(n,s,K,X,u,ee)}return;default:if(Ns(s)){for(var $t in o)X=o[$t],o.hasOwnProperty($t)&&X!==void 0&&!u.hasOwnProperty($t)&&Dp(n,s,$t,void 0,u,X);for(re in u)X=u[re],ee=o[re],!u.hasOwnProperty(re)||X===ee||X===void 0&&ee===void 0||Dp(n,s,re,X,u,ee);return}}for(var F in o)X=o[F],o.hasOwnProperty(F)&&X!=null&&!u.hasOwnProperty(F)&&Ht(n,s,F,null,u,X);for(le in u)X=u[le],ee=o[le],!u.hasOwnProperty(le)||X===ee||X==null&&ee==null||Ht(n,s,le,X,u,ee)}function Db(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function UE(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,_=f.initiatorType,E=f.duration;if(m&&E&&Db(_)){for(_=0,E=f.responseEnd,u+=1;u<o.length;u++){var z=o[u],K=z.startTime;if(K>E)break;var re=z.transferSize,le=z.initiatorType;re&&Db(le)&&(z=z.responseEnd,_+=re*(z<E?1:(E-K)/(z-K)))}if(--u,s+=8*(m+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Mp=null,Vp=null;function Uf(n){return n.nodeType===9?n:n.ownerDocument}function Mb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vb(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Bp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var zp=null;function FE(){var n=window.event;return n&&n.type==="popstate"?n===zp?!1:(zp=n,!0):(zp=null,!1)}var Bb=typeof setTimeout=="function"?setTimeout:void 0,qE=typeof clearTimeout=="function"?clearTimeout:void 0,zb=typeof Promise=="function"?Promise:void 0,GE=typeof queueMicrotask=="function"?queueMicrotask:typeof zb<"u"?function(n){return zb.resolve(null).then(n).catch(HE)}:Bb;function HE(n){setTimeout(function(){throw n})}function Zo(n){return n==="head"}function Ob(n,s){var o=s,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),gu(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Qd(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Qd(o);for(var m=o.firstChild;m;){var _=m.nextSibling,E=m.nodeName;m[En]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&Qd(n.ownerDocument.body);o=f}while(o);gu(s)}function Lb(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Op(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Op(o),Rs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function $E(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[En])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Ts(n.nextSibling),n===null)break}return null}function KE(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Ts(n.nextSibling),n===null))return null;return n}function Pb(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ts(n.nextSibling),n===null))return null;return n}function Lp(n){return n.data==="$?"||n.data==="$~"}function Pp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function QE(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Ts(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Up=null;function Ub(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Ts(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function Fb(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function qb(n,s,o){switch(s=Uf(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Qd(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Rs(n)}var Ss=new Map,Gb=new Set;function Ff(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ro=ye.d;ye.d={f:WE,r:YE,D:XE,C:JE,L:ZE,m:eA,X:nA,S:tA,M:rA};function WE(){var n=ro.f(),s=Df();return n||s}function YE(n){var s=wr(n);s!==null&&s.tag===5&&s.type==="form"?ov(s):ro.r(n)}var du=typeof document>"u"?null:document;function Hb(n,s,o){var u=du;if(u&&typeof s=="string"&&s){var f=it(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Gb.has(f)||(Gb.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Rr(s,"link",n),dn(s),u.head.appendChild(s)))}}function XE(n){ro.D(n),Hb("dns-prefetch",n,null)}function JE(n,s){ro.C(n,s),Hb("preconnect",n,s)}function ZE(n,s,o){ro.L(n,s,o);var u=du;if(u&&n&&s){var f='link[rel="preload"][as="'+it(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+it(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+it(o.imageSizes)+'"]')):f+='[href="'+it(n)+'"]';var m=f;switch(s){case"style":m=hu(n);break;case"script":m=fu(n)}Ss.has(m)||(n=T({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Ss.set(m,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(Wd(m))||s==="script"&&u.querySelector(Yd(m))||(s=u.createElement("link"),Rr(s,"link",n),dn(s),u.head.appendChild(s)))}}function eA(n,s){ro.m(n,s);var o=du;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+it(u)+'"][href="'+it(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=fu(n)}if(!Ss.has(m)&&(n=T({rel:"modulepreload",href:n},s),Ss.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Yd(m)))return}u=o.createElement("link"),Rr(u,"link",n),dn(u),o.head.appendChild(u)}}}function tA(n,s,o){ro.S(n,s,o);var u=du;if(u&&n){var f=as(u).hoistableStyles,m=hu(n);s=s||"default";var _=f.get(m);if(!_){var E={loading:0,preload:null};if(_=u.querySelector(Wd(m)))E.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Ss.get(m))&&Fp(n,o);var z=_=u.createElement("link");dn(z),Rr(z,"link",n),z._p=new Promise(function(K,re){z.onload=K,z.onerror=re}),z.addEventListener("load",function(){E.loading|=1}),z.addEventListener("error",function(){E.loading|=2}),E.loading|=4,qf(_,s,u)}_={type:"stylesheet",instance:_,count:1,state:E},f.set(m,_)}}}function nA(n,s){ro.X(n,s);var o=du;if(o&&n){var u=as(o).hoistableScripts,f=fu(n),m=u.get(f);m||(m=o.querySelector(Yd(f)),m||(n=T({src:n,async:!0},s),(s=Ss.get(f))&&qp(n,s),m=o.createElement("script"),dn(m),Rr(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function rA(n,s){ro.M(n,s);var o=du;if(o&&n){var u=as(o).hoistableScripts,f=fu(n),m=u.get(f);m||(m=o.querySelector(Yd(f)),m||(n=T({src:n,async:!0,type:"module"},s),(s=Ss.get(f))&&qp(n,s),m=o.createElement("script"),dn(m),Rr(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function $b(n,s,o,u){var f=(f=ke.current)?Ff(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=hu(o.href),o=as(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=hu(o.href);var m=as(f).hoistableStyles,_=m.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=f.querySelector(Wd(n)))&&!m._p&&(_.instance=m,_.state.loading=5),Ss.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ss.set(n,o),m||iA(f,n,o,_.state))),s&&u===null)throw Error(r(528,""));return _}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=fu(o),o=as(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function hu(n){return'href="'+it(n)+'"'}function Wd(n){return'link[rel="stylesheet"]['+n+"]"}function Kb(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function iA(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Rr(s,"link",o),dn(s),n.head.appendChild(s))}function fu(n){return'[src="'+it(n)+'"]'}function Yd(n){return"script[async]"+n}function Qb(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+it(o.href)+'"]');if(u)return s.instance=u,dn(u),u;var f=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),dn(u),Rr(u,"style",f),qf(u,o.precedence,n),s.instance=u;case"stylesheet":f=hu(o.href);var m=n.querySelector(Wd(f));if(m)return s.state.loading|=4,s.instance=m,dn(m),m;u=Kb(o),(f=Ss.get(f))&&Fp(u,f),m=(n.ownerDocument||n).createElement("link"),dn(m);var _=m;return _._p=new Promise(function(E,z){_.onload=E,_.onerror=z}),Rr(m,"link",u),s.state.loading|=4,qf(m,o.precedence,n),s.instance=m;case"script":return m=fu(o.src),(f=n.querySelector(Yd(m)))?(s.instance=f,dn(f),f):(u=o,(f=Ss.get(m))&&(u=T({},o),qp(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),dn(f),Rr(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,qf(u,o.precedence,n));return s.instance}function qf(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,_=0;_<u.length;_++){var E=u[_];if(E.dataset.precedence===s)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Fp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function qp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Gf=null;function Wb(n,s,o){if(Gf===null){var u=new Map,f=Gf=new Map;f.set(o,u)}else f=Gf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[En]||m[Pt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=n+_;var E=u.get(_);E?E.push(m):u.set(_,[m])}}return u}function Yb(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function sA(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Xb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function aA(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=hu(u.href),m=s.querySelector(Wd(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Hf.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=m,dn(m);return}m=s.ownerDocument||s,u=Kb(u),(f=Ss.get(f))&&Fp(u,f),m=m.createElement("link"),dn(m);var _=m;_._p=new Promise(function(E,z){_.onload=E,_.onerror=z}),Rr(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Hf.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Gp=0;function oA(n,s){return n.stylesheets&&n.count===0&&Kf(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Kf(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Gp===0&&(Gp=62500*UE());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Kf(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Gp?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Hf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var $f=null;function Kf(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,$f=new Map,s.forEach(lA,n),$f=null,Hf.call(n))}function lA(n,s){if(!(s.state.loading&4)){var o=$f.get(n);if(o)var u=o.get(null);else{o=new Map,$f.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=s.instance,_=f.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,f),o.set(_,f),this.count++,u=Hf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var Xd={$$typeof:ue,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function cA(n,s,o,u,f,m,_,E,z){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zr(0),this.hiddenUpdates=zr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Jb(n,s,o,u,f,m,_,E,z,K,re,le){return n=new cA(n,s,o,_,z,K,re,le,E),s=1,m===!0&&(s|=24),m=fr(3,null,null,s),n.current=m,m.stateNode=n,s=Td(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},Rn(m),n}function Zb(n){return n?(n=$i,n):$i}function e1(n,s,o,u,f,m){f=Zb(f),u.context===null?u.context=f:u.pendingContext=f,u=Ki(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=qo(n,u,s),o!==null&&(Ai(o,n,s),Rd(o,n,s))}function t1(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Hp(n,s){t1(n,s),(n=n.alternate)&&t1(n,s)}function n1(n){if(n.tag===13||n.tag===31){var s=Pa(n,67108864);s!==null&&Ai(s,n,67108864),Hp(n,67108864)}}function r1(n){if(n.tag===13||n.tag===31){var s=Ji();s=Ee(s);var o=Pa(n,s);o!==null&&Ai(o,n,s),Hp(n,s)}}var Qf=!0;function uA(n,s,o,u){var f=Z.T;Z.T=null;var m=ye.p;try{ye.p=2,$p(n,s,o,u)}finally{ye.p=m,Z.T=f}}function dA(n,s,o,u){var f=Z.T;Z.T=null;var m=ye.p;try{ye.p=8,$p(n,s,o,u)}finally{ye.p=m,Z.T=f}}function $p(n,s,o,u){if(Qf){var f=Kp(u);if(f===null)Np(n,s,u,Wf,o),s1(n,u);else if(fA(f,n,s,o,u))u.stopPropagation();else if(s1(n,u),s&4&&-1<hA.indexOf(n)){for(;f!==null;){var m=wr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=li(m.pendingLanes);if(_!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var z=1<<31-Zt(_);E.entanglements[1]|=z,_&=~z}ha(m),(It&6)===0&&(kf=Jt()+500,Hd(0))}}break;case 31:case 13:E=Pa(m,2),E!==null&&Ai(E,m,2),Df(),Hp(m,2)}if(m=Kp(u),m===null&&Np(n,s,u,Wf,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Np(n,s,u,null,o)}}function Kp(n){return n=jt(n),Qp(n)}var Wf=null;function Qp(n){if(Wf=null,n=lr(n),n!==null){var s=c(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=d(s),n!==null)return n;n=null}else if(o===31){if(n=g(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Wf=n,null}function i1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(un()){case ar:return 2;case Sn:return 8;case St:case Mr:return 32;case or:return 268435456;default:return 32}default:return 32}}var Wp=!1,el=null,tl=null,nl=null,Jd=new Map,Zd=new Map,rl=[],hA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s1(n,s){switch(n){case"focusin":case"focusout":el=null;break;case"dragenter":case"dragleave":tl=null;break;case"mouseover":case"mouseout":nl=null;break;case"pointerover":case"pointerout":Jd.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zd.delete(s.pointerId)}}function eh(n,s,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=wr(s),s!==null&&n1(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function fA(n,s,o,u,f){switch(s){case"focusin":return el=eh(el,n,s,o,u,f),!0;case"dragenter":return tl=eh(tl,n,s,o,u,f),!0;case"mouseover":return nl=eh(nl,n,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return Jd.set(m,eh(Jd.get(m)||null,n,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Zd.set(m,eh(Zd.get(m)||null,n,s,o,u,f)),!0}return!1}function a1(n){var s=lr(n.target);if(s!==null){var o=c(s);if(o!==null){if(s=o.tag,s===13){if(s=d(o),s!==null){n.blockedOn=s,Lt(n.priority,function(){r1(o)});return}}else if(s===31){if(s=g(o),s!==null){n.blockedOn=s,Lt(n.priority,function(){r1(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Yf(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Kp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Dn=u,o.target.dispatchEvent(u),Dn=null}else return s=wr(o),s!==null&&n1(s),n.blockedOn=o,!1;s.shift()}return!0}function o1(n,s,o){Yf(n)&&o.delete(s)}function gA(){Wp=!1,el!==null&&Yf(el)&&(el=null),tl!==null&&Yf(tl)&&(tl=null),nl!==null&&Yf(nl)&&(nl=null),Jd.forEach(o1),Zd.forEach(o1)}function Xf(n,s){n.blockedOn===s&&(n.blockedOn=null,Wp||(Wp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,gA)))}var Jf=null;function l1(n){Jf!==n&&(Jf=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Jf===n&&(Jf=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(Qp(u||o)===null)continue;break}var m=wr(o);m!==null&&(n.splice(s,3),s-=3,Km(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function gu(n){function s(z){return Xf(z,n)}el!==null&&Xf(el,n),tl!==null&&Xf(tl,n),nl!==null&&Xf(nl,n),Jd.forEach(s),Zd.forEach(s);for(var o=0;o<rl.length;o++){var u=rl[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<rl.length&&(o=rl[0],o.blockedOn===null);)a1(o),o.blockedOn===null&&rl.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],_=f[nn]||null;if(typeof m=="function")_||l1(o);else if(_){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[nn]||null)E=_.formAction;else if(Qp(f)!==null)continue}else E=_.action;typeof E=="function"?o[u+1]=E:(o.splice(u,3),u-=3),l1(o)}}}function c1(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Yp(n){this._internalRoot=n}Zf.prototype.render=Yp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Ji();e1(o,u,n,s,null,null)},Zf.prototype.unmount=Yp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;e1(n.current,2,null,n,null,null),Df(),s[Zr]=null}};function Zf(n){this._internalRoot=n}Zf.prototype.unstable_scheduleHydration=function(n){if(n){var s=Et();n={blockedOn:null,target:n,priority:s};for(var o=0;o<rl.length&&s!==0&&s<rl[o].priority;o++);rl.splice(o,0,n),o===0&&a1(n)}};var u1=e.version;if(u1!=="19.2.3")throw Error(r(527,u1,"19.2.3"));ye.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(s),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var mA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eg.isDisabled&&eg.supportsFiber)try{we=eg.inject(mA),Re=eg}catch{}}return nh.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,u="",f=yv,m=xv,_=vv;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=Jb(n,1,!1,null,null,o,u,null,f,m,_,c1),n[Zr]=s.current,kp(n),new Yp(s)},nh.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var u=!1,f="",m=yv,_=xv,E=vv,z=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(z=o.formState)),s=Jb(n,1,!0,s,o??null,u,f,z,m,_,E,c1),s.context=Zb(null),o=s.current,u=Ji(),u=Ee(u),f=Ki(u),f.callback=null,qo(o,f,u),o=u,s.current.lanes=o,Oi(s,o),ha(s),n[Zr]=s.current,kp(n),new Zf(s)},nh.version="19.2.3",nh}var b1;function EA(){if(b1)return Zp.exports;b1=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Zp.exports=SA(),Zp.exports}var AA=EA();function IA({currentStep:i}){const e=[1,2,3,4,5];return l.jsx("div",{className:"flex items-center justify-center mb-8",children:e.map((t,r)=>{const a=t<i,c=t===i;return l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:["w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold transition-all duration-500",a?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/30":"",c?"bg-blue-500 text-white shadow-lg shadow-blue-500/40 ring-4 ring-blue-500/20":"",!a&&!c?"bg-slate-800 text-slate-500 border border-slate-700":""].join(" "),children:a?l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):t}),r<e.length-1&&l.jsx("div",{className:["w-10 h-0.5 mx-1 rounded-full transition-all duration-500",t<i?"bg-emerald-500":"bg-slate-800"].join(" ")})]},t)})})}function _1({isOpen:i,particleColor:e="#3B82F6"}){const[t,r]=k.useState([]),a=k.useRef(i),c=k.useRef(0),d=k.useCallback(()=>{const g=[];for(let p=0;p<18;p++){const y=p/18*Math.PI*2+(Math.random()-.5)*.4,b=30+Math.random()*45;g.push({id:c.current++,tx:Math.cos(y)*b,ty:Math.sin(y)*b,size:3+Math.random()*5})}r(g),setTimeout(()=>r([]),900)},[]);return k.useEffect(()=>{a.current!==i&&(d(),a.current=i)},[i,d]),l.jsxs("div",{className:"relative w-28 h-28 mx-auto mb-4",children:[l.jsxs("svg",{viewBox:"0 0 120 100",className:"w-full h-full",children:[l.jsx("defs",{children:l.jsxs("filter",{id:"lockGlow",children:[l.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),l.jsxs("feMerge",{children:[l.jsx("feMergeNode",{in:"blur"}),l.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),l.jsx("rect",{x:"32",y:"52",width:"56",height:"38",rx:"8",fill:"#0F172A",stroke:i?"#22C55E":"#3B82F6",strokeWidth:"3",filter:"url(#lockGlow)",className:"transition-all duration-500"}),l.jsx("circle",{cx:"60",cy:"66",r:"5",fill:i?"#22C55E":"#3B82F6",className:"transition-all duration-500"}),l.jsx("rect",{x:"57.5",y:"66",width:"5",height:"10",rx:"2",fill:i?"#22C55E":"#3B82F6",className:"transition-all duration-500"}),l.jsx("path",{d:i?"M 42 52 L 42 34 A 18 18 0 0 1 78 34 L 78 38":"M 42 52 L 42 34 A 18 18 0 0 1 78 34 L 78 52",fill:"none",stroke:i?"#22C55E":"#3B82F6",strokeWidth:"6",strokeLinecap:"round",filter:"url(#lockGlow)",className:"transition-all duration-500"})]}),t.map(g=>l.jsx("div",{className:"particle",style:{width:g.size,height:g.size,backgroundColor:e,"--tx":`${g.tx}px`,"--ty":`${g.ty}px`}},g.id))]})}function sl(i){return new Promise(e=>setTimeout(e,i))}function CA(){const[i,e]=k.useState(!1),[t,r]=k.useState(0),[a,c]=k.useState(!1);k.useEffect(()=>{let T=!0;return(async()=>{if(await sl(600),!!T){for(;T;)if(r(0),c(!1),e(!0),await sl(900),!T||(r(1),await sl(550),!T)||(r(2),await sl(550),!T)||(r(3),await sl(700),!T)||(e(!1),await sl(900),!T)||(c(!0),r(0),await sl(2e3),!T)||(c(!1),await sl(400),!T))return}})(),()=>{T=!1}},[]);const d=72,g=112,p=56,y=72,b=80;return l.jsx("div",{className:"flex justify-center mb-6",children:l.jsxs("div",{style:{position:"relative",width:`${d+b+20}px`,height:`${g}px`},children:[l.jsx("div",{style:{position:"absolute",left:`${(d+b+20)/2-p/2}px`,top:`${(g-y)/2}px`,zIndex:1,transform:i?`translateX(${b}px)`:"translateX(0px)",transition:"transform 0.75s cubic-bezier(0.4, 0, 0.2, 1)"},children:l.jsxs("svg",{width:p,height:y,viewBox:"0 0 56 72",className:"drop-shadow-lg",children:[l.jsx("path",{d:"M3 3 L36 3 L53 20 L53 69 L3 69 Z",fill:"#1E293B",stroke:"#06B6D4",strokeWidth:"2"}),l.jsx("path",{d:"M36 3 L36 20 L53 20 Z",fill:"#0F172A"}),l.jsx("path",{d:"M36 3 L36 20 L53 20",fill:"none",stroke:"#06B6D4",strokeWidth:"2"}),l.jsx("line",{x1:"12",y1:"32",x2:"44",y2:"32",stroke:"#3B82F6",strokeWidth:"2.5",strokeLinecap:"round",strokeDasharray:"32",style:{strokeDashoffset:t>=1?0:32,transition:"stroke-dashoffset 0.5s ease-out"}}),l.jsx("line",{x1:"12",y1:"42",x2:"44",y2:"42",stroke:"#3B82F6",strokeWidth:"2.5",strokeLinecap:"round",strokeDasharray:"32",style:{strokeDashoffset:t>=2?0:32,transition:"stroke-dashoffset 0.5s ease-out"}}),l.jsx("line",{x1:"12",y1:"52",x2:"34",y2:"52",stroke:"#3B82F6",strokeWidth:"2.5",strokeLinecap:"round",strokeDasharray:"22",style:{strokeDashoffset:t>=3?0:22,transition:"stroke-dashoffset 0.5s ease-out"}})]})}),l.jsxs("div",{style:{position:"absolute",left:`${(d+b+20)/2-d/2}px`,top:"0px",zIndex:2},children:[l.jsxs("svg",{width:d,height:g,viewBox:"0 0 72 112",className:"drop-shadow-xl",children:[l.jsx("rect",{x:"3",y:"3",width:"66",height:"106",rx:"12",fill:"#1E293B",stroke:"#3B82F6",strokeWidth:"2.5"}),l.jsx("rect",{x:"9",y:"18",width:"54",height:"68",rx:"3",fill:"#0F172A"}),l.jsx("rect",{x:"22",y:"8",width:"28",height:"4",rx:"2",fill:"#334155"}),l.jsx("rect",{x:"24",y:"94",width:"24",height:"3.5",rx:"1.75",fill:"#334155"})]}),l.jsxs("div",{style:{position:"absolute",top:"18px",left:"9px",width:"54px",height:"68px",display:"flex",alignItems:"center",justifyContent:"center",opacity:a?1:0,transform:a?"scale(1)":"scale(0.2)",transition:"opacity 0.45s ease-out, transform 0.45s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:[l.jsx("div",{style:{position:"absolute",inset:0,borderRadius:"3px",background:"radial-gradient(circle, rgba(34,197,94,0.25) 0%, transparent 70%)"}}),l.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 40 40",children:[l.jsx("circle",{cx:"20",cy:"20",r:"17",fill:"rgba(34, 197, 94, 0.15)"}),l.jsx("circle",{cx:"20",cy:"20",r:"17",fill:"none",stroke:"#22C55E",strokeWidth:"2",opacity:"0.4"}),l.jsx("path",{d:"M11 20 L17 26 L29 12",fill:"none",stroke:"#22C55E",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"30",style:{strokeDashoffset:a?0:30,transition:"stroke-dashoffset 0.5s ease-out 0.15s"}})]})]})]})]})})}function ry(i){const e=i.replace("#","");if(e.length<6)return!1;const t=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16);return(.299*t+.587*r+.114*a)/255>.6}const d0="jolt_current_user";function h0(i){localStorage.setItem(d0,JSON.stringify(i))}function RA(){try{const i=localStorage.getItem(d0);return i?JSON.parse(i):null}catch{return null}}function Iy(){localStorage.removeItem(d0)}function iy(){return String(Math.floor(1e5+Math.random()*9e5))}function _2(){return String(Math.floor(1e5+Math.random()*9e5))}function tr(i){return i.nickname==="JOLT"&&i.tag==="123456"}const jA=()=>{};var w1={};const w2=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},kA=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[t++];e[r++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[t++],d=i[t++],g=i[t++],p=((a&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const c=i[t++],d=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},T2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const c=i[a],d=a+1<i.length,g=d?i[a+1]:0,p=a+2<i.length,y=p?i[a+2]:0,b=c>>2,T=(c&3)<<4|g>>4;let S=(g&15)<<2|y>>6,V=y&63;p||(V=64,d||(S=64)),r.push(t[b],t[T],t[S],t[V])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(w2(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):kA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const c=t[i.charAt(a++)],g=a<i.length?t[i.charAt(a)]:0;++a;const y=a<i.length?t[i.charAt(a)]:64;++a;const T=a<i.length?t[i.charAt(a)]:64;if(++a,c==null||g==null||y==null||T==null)throw new NA;const S=c<<2|g>>4;if(r.push(S),y!==64){const V=g<<4&240|y>>2;if(r.push(V),T!==64){const q=y<<6&192|T;r.push(q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class NA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DA=function(i){const e=w2(i);return T2.encodeByteArray(e,!0)},kg=function(i){return DA(i).replace(/\./g,"")},MA=function(i){try{return T2.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function S2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const VA=()=>S2().__FIREBASE_DEFAULTS__,BA=()=>{if(typeof process>"u"||typeof w1>"u")return;const i=w1.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},zA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&MA(i[1]);return e&&JSON.parse(e)},f0=()=>{try{return jA()||VA()||BA()||zA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},OA=i=>f0()?.emulatorHosts?.[i],E2=i=>{const e=OA(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},A2=()=>f0()?.config;class LA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Uh(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function g0(i){return(await fetch(i,{credentials:"include"})).ok}function I2(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[kg(JSON.stringify(t)),kg(JSON.stringify(d)),""].join(".")}const yh={};function PA(){const i={prod:[],emulator:[]};for(const e of Object.keys(yh))yh[e]?i.emulator.push(e):i.prod.push(e);return i}function UA(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let T1=!1;function C2(i,e){if(typeof window>"u"||typeof document>"u"||!Uh(window.location.host)||yh[i]===e||yh[i]||T1)return;yh[i]=e;function t(S){return`__firebase__banner__${S}`}const r="__firebase__banner",c=PA().prod.length>0;function d(){const S=document.getElementById(r);S&&S.remove()}function g(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,V){S.setAttribute("width","24"),S.setAttribute("id",V),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{T1=!0,d()},S}function b(S,V){S.setAttribute("id",V),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=UA(r),V=t("text"),q=document.getElementById(V)||document.createElement("span"),W=t("learnmore"),L=document.getElementById(W)||document.createElement("a"),ce=t("preprendIcon"),oe=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ue=S.element;g(ue),b(L,W);const me=y();p(oe,ce),ue.append(oe,q,L,me),document.body.appendChild(ue)}c?(q.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function Ng(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function R2(){const i=f0()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j2(){return!R2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k2(){return!R2()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function N2(){try{return typeof indexedDB=="object"}catch{return!1}}function FA(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const qA="FirebaseError";class Rc extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=qA,Object.setPrototypeOf(this,Rc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D2.prototype.create)}}class D2{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?GA(c,r):"Error",g=`${this.serviceName}: ${d} (${a}).`;return new Rc(a,g,r)}}function GA(i,e){return i.replace(HA,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const HA=/\{\$([^}]+)}/g;function xl(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const c=i[a],d=e[a];if(S1(c)&&S1(d)){if(!xl(c,d))return!1}else if(c!==d)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function S1(i){return i!==null&&typeof i=="object"}function Yn(i){return i&&i._delegate?i._delegate:i}class ju{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const cc="[DEFAULT]";class $A{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new LA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QA(e))try{this.getOrInitializeService({instanceIdentifier:cc})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});r.resolve(c)}catch{}}}}clearInstance(e=cc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cc){return this.instances.has(e)}getOptions(e=cc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);r===g&&d.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const c=this.instances.get(r);return c&&e(c,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cc){return this.component?this.component.multipleInstances?e:cc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KA(i){return i===cc?void 0:i}function QA(i){return i.instantiationMode==="EAGER"}class WA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $A(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var yt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(yt||(yt={}));const YA={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},XA=yt.INFO,JA={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},ZA=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=JA[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class M2{constructor(e){this.name=e,this._logLevel=XA,this._logHandler=ZA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...e),this._logHandler(this,yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...e),this._logHandler(this,yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...e),this._logHandler(this,yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...e),this._logHandler(this,yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...e),this._logHandler(this,yt.ERROR,...e)}}const e4=(i,e)=>e.some(t=>i instanceof t);let E1,A1;function t4(){return E1||(E1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n4(){return A1||(A1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const V2=new WeakMap,Cy=new WeakMap,B2=new WeakMap,sy=new WeakMap,m0=new WeakMap;function r4(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{t(fl(i.result)),a()},d=()=>{r(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&V2.set(t,i)}).catch(()=>{}),m0.set(e,i),e}function i4(i){if(Cy.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{t(),a()},d=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});Cy.set(i,e)}let Ry={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Cy.get(i);if(e==="objectStoreNames")return i.objectStoreNames||B2.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fl(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function s4(i){Ry=i(Ry)}function a4(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(ay(this),e,...t);return B2.set(r,e.sort?e.sort():[e]),fl(r)}:n4().includes(i)?function(...e){return i.apply(ay(this),e),fl(V2.get(this))}:function(...e){return fl(i.apply(ay(this),e))}}function o4(i){return typeof i=="function"?a4(i):(i instanceof IDBTransaction&&i4(i),e4(i,t4())?new Proxy(i,Ry):i)}function fl(i){if(i instanceof IDBRequest)return r4(i);if(sy.has(i))return sy.get(i);const e=o4(i);return e!==i&&(sy.set(i,e),m0.set(e,i)),e}const ay=i=>m0.get(i);function l4(i,e,{blocked:t,upgrade:r,blocking:a,terminated:c}={}){const d=indexedDB.open(i,e),g=fl(d);return r&&d.addEventListener("upgradeneeded",p=>{r(fl(d.result),p.oldVersion,p.newVersion,fl(d.transaction),p)}),t&&d.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),a&&p.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const c4=["get","getKey","getAll","getAllKeys","count"],u4=["put","add","delete","clear"],oy=new Map;function I1(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(oy.get(e))return oy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=u4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||c4.includes(t)))return;const c=async function(d,...g){const p=this.transaction(d,a?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(g.shift())),(await Promise.all([y[t](...g),a&&p.done]))[0]};return oy.set(e,c),c}s4(i=>({...i,get:(e,t,r)=>I1(e,t)||i.get(e,t,r),has:(e,t)=>!!I1(e,t)||i.has(e,t)}));class d4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(h4(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function h4(i){return i.getComponent()?.type==="VERSION"}const jy="@firebase/app",C1="0.14.8";const uo=new M2("@firebase/app"),f4="@firebase/app-compat",g4="@firebase/analytics-compat",m4="@firebase/analytics",p4="@firebase/app-check-compat",y4="@firebase/app-check",x4="@firebase/auth",v4="@firebase/auth-compat",b4="@firebase/database",_4="@firebase/data-connect",w4="@firebase/database-compat",T4="@firebase/functions",S4="@firebase/functions-compat",E4="@firebase/installations",A4="@firebase/installations-compat",I4="@firebase/messaging",C4="@firebase/messaging-compat",R4="@firebase/performance",j4="@firebase/performance-compat",k4="@firebase/remote-config",N4="@firebase/remote-config-compat",D4="@firebase/storage",M4="@firebase/storage-compat",V4="@firebase/firestore",B4="@firebase/ai",z4="@firebase/firestore-compat",O4="firebase",L4="12.9.0";const Dg="[DEFAULT]",P4={[jy]:"fire-core",[f4]:"fire-core-compat",[m4]:"fire-analytics",[g4]:"fire-analytics-compat",[y4]:"fire-app-check",[p4]:"fire-app-check-compat",[x4]:"fire-auth",[v4]:"fire-auth-compat",[b4]:"fire-rtdb",[_4]:"fire-data-connect",[w4]:"fire-rtdb-compat",[T4]:"fire-fn",[S4]:"fire-fn-compat",[E4]:"fire-iid",[A4]:"fire-iid-compat",[I4]:"fire-fcm",[C4]:"fire-fcm-compat",[R4]:"fire-perf",[j4]:"fire-perf-compat",[k4]:"fire-rc",[N4]:"fire-rc-compat",[D4]:"fire-gcs",[M4]:"fire-gcs-compat",[V4]:"fire-fst",[z4]:"fire-fst-compat",[B4]:"fire-vertex","fire-js":"fire-js",[O4]:"fire-js-all"};const Mg=new Map,U4=new Map,ky=new Map;function R1(i,e){try{i.container.addComponent(e)}catch(t){uo.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Ih(i){const e=i.name;if(ky.has(e))return uo.debug(`There were multiple attempts to register component ${e}.`),!1;ky.set(e,i);for(const t of Mg.values())R1(t,i);for(const t of U4.values())R1(t,i);return!0}function Jg(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function F4(i,e,t=Dg){Jg(i,e).clearInstance(t)}function z2(i){return i==null?!1:i.settings!==void 0}const q4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gl=new D2("app","Firebase",q4);class G4{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ju("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gl.create("app-deleted",{appName:this._name})}}const O2=L4;function L2(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:Dg,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw gl.create("bad-app-name",{appName:String(a)});if(t||(t=A2()),!t)throw gl.create("no-options");const c=Mg.get(a);if(c){if(xl(t,c.options)&&xl(r,c.config))return c;throw gl.create("duplicate-app",{appName:a})}const d=new WA(a);for(const p of ky.values())d.addComponent(p);const g=new G4(t,r,d);return Mg.set(a,g),g}function P2(i=Dg){const e=Mg.get(i);if(!e&&i===Dg&&A2())return L2();if(!e)throw gl.create("no-app",{appName:i});return e}function ml(i,e,t){let r=P4[i]??i;t&&(r+=`-${t}`);const a=r.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${r}" with version "${e}":`];a&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),uo.warn(d.join(" "));return}Ih(new ju(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const H4="firebase-heartbeat-database",$4=1,Ch="firebase-heartbeat-store";let ly=null;function U2(){return ly||(ly=l4(H4,$4,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Ch)}catch(t){console.warn(t)}}}}).catch(i=>{throw gl.create("idb-open",{originalErrorMessage:i.message})})),ly}async function K4(i){try{const t=(await U2()).transaction(Ch),r=await t.objectStore(Ch).get(F2(i));return await t.done,r}catch(e){if(e instanceof Rc)uo.warn(e.message);else{const t=gl.create("idb-get",{originalErrorMessage:e?.message});uo.warn(t.message)}}}async function j1(i,e){try{const r=(await U2()).transaction(Ch,"readwrite");await r.objectStore(Ch).put(e,F2(i)),await r.done}catch(t){if(t instanceof Rc)uo.warn(t.message);else{const r=gl.create("idb-set",{originalErrorMessage:t?.message});uo.warn(r.message)}}}function F2(i){return`${i.name}!${i.options.appId}`}const Q4=1024,W4=30;class Y4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new J4(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=k1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>W4){const a=Z4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){uo.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=k1(),{heartbeatsToSend:t,unsentEntries:r}=X4(this._heartbeatsCache.heartbeats),a=kg(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return uo.warn(e),""}}}function k1(){return new Date().toISOString().substring(0,10)}function X4(i,e=Q4){const t=[];let r=i.slice();for(const a of i){const c=t.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),N1(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),N1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class J4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N2()?FA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await K4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return j1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return j1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function N1(i){return kg(JSON.stringify({version:2,heartbeats:i})).length}function Z4(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}function eI(i){Ih(new ju("platform-logger",e=>new d4(e),"PRIVATE")),Ih(new ju("heartbeat",e=>new Y4(e),"PRIVATE")),ml(jy,C1,i),ml(jy,C1,"esm2020"),ml("fire-js","")}eI("");var D1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var pl,q2;(function(){var i;function e(D,C){function R(){}R.prototype=C.prototype,D.F=C.prototype,D.prototype=new R,D.prototype.constructor=D,D.D=function(M,B,U){for(var N=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)N[rt-2]=arguments[rt];return C.prototype[B].apply(M,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,C,R){R||(R=0);const M=Array(16);if(typeof C=="string")for(var B=0;B<16;++B)M[B]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(B=0;B<16;++B)M[B]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=D.g[0],R=D.g[1],B=D.g[2];let U=D.g[3],N;N=C+(U^R&(B^U))+M[0]+3614090360&4294967295,C=R+(N<<7&4294967295|N>>>25),N=U+(B^C&(R^B))+M[1]+3905402710&4294967295,U=C+(N<<12&4294967295|N>>>20),N=B+(R^U&(C^R))+M[2]+606105819&4294967295,B=U+(N<<17&4294967295|N>>>15),N=R+(C^B&(U^C))+M[3]+3250441966&4294967295,R=B+(N<<22&4294967295|N>>>10),N=C+(U^R&(B^U))+M[4]+4118548399&4294967295,C=R+(N<<7&4294967295|N>>>25),N=U+(B^C&(R^B))+M[5]+1200080426&4294967295,U=C+(N<<12&4294967295|N>>>20),N=B+(R^U&(C^R))+M[6]+2821735955&4294967295,B=U+(N<<17&4294967295|N>>>15),N=R+(C^B&(U^C))+M[7]+4249261313&4294967295,R=B+(N<<22&4294967295|N>>>10),N=C+(U^R&(B^U))+M[8]+1770035416&4294967295,C=R+(N<<7&4294967295|N>>>25),N=U+(B^C&(R^B))+M[9]+2336552879&4294967295,U=C+(N<<12&4294967295|N>>>20),N=B+(R^U&(C^R))+M[10]+4294925233&4294967295,B=U+(N<<17&4294967295|N>>>15),N=R+(C^B&(U^C))+M[11]+2304563134&4294967295,R=B+(N<<22&4294967295|N>>>10),N=C+(U^R&(B^U))+M[12]+1804603682&4294967295,C=R+(N<<7&4294967295|N>>>25),N=U+(B^C&(R^B))+M[13]+4254626195&4294967295,U=C+(N<<12&4294967295|N>>>20),N=B+(R^U&(C^R))+M[14]+2792965006&4294967295,B=U+(N<<17&4294967295|N>>>15),N=R+(C^B&(U^C))+M[15]+1236535329&4294967295,R=B+(N<<22&4294967295|N>>>10),N=C+(B^U&(R^B))+M[1]+4129170786&4294967295,C=R+(N<<5&4294967295|N>>>27),N=U+(R^B&(C^R))+M[6]+3225465664&4294967295,U=C+(N<<9&4294967295|N>>>23),N=B+(C^R&(U^C))+M[11]+643717713&4294967295,B=U+(N<<14&4294967295|N>>>18),N=R+(U^C&(B^U))+M[0]+3921069994&4294967295,R=B+(N<<20&4294967295|N>>>12),N=C+(B^U&(R^B))+M[5]+3593408605&4294967295,C=R+(N<<5&4294967295|N>>>27),N=U+(R^B&(C^R))+M[10]+38016083&4294967295,U=C+(N<<9&4294967295|N>>>23),N=B+(C^R&(U^C))+M[15]+3634488961&4294967295,B=U+(N<<14&4294967295|N>>>18),N=R+(U^C&(B^U))+M[4]+3889429448&4294967295,R=B+(N<<20&4294967295|N>>>12),N=C+(B^U&(R^B))+M[9]+568446438&4294967295,C=R+(N<<5&4294967295|N>>>27),N=U+(R^B&(C^R))+M[14]+3275163606&4294967295,U=C+(N<<9&4294967295|N>>>23),N=B+(C^R&(U^C))+M[3]+4107603335&4294967295,B=U+(N<<14&4294967295|N>>>18),N=R+(U^C&(B^U))+M[8]+1163531501&4294967295,R=B+(N<<20&4294967295|N>>>12),N=C+(B^U&(R^B))+M[13]+2850285829&4294967295,C=R+(N<<5&4294967295|N>>>27),N=U+(R^B&(C^R))+M[2]+4243563512&4294967295,U=C+(N<<9&4294967295|N>>>23),N=B+(C^R&(U^C))+M[7]+1735328473&4294967295,B=U+(N<<14&4294967295|N>>>18),N=R+(U^C&(B^U))+M[12]+2368359562&4294967295,R=B+(N<<20&4294967295|N>>>12),N=C+(R^B^U)+M[5]+4294588738&4294967295,C=R+(N<<4&4294967295|N>>>28),N=U+(C^R^B)+M[8]+2272392833&4294967295,U=C+(N<<11&4294967295|N>>>21),N=B+(U^C^R)+M[11]+1839030562&4294967295,B=U+(N<<16&4294967295|N>>>16),N=R+(B^U^C)+M[14]+4259657740&4294967295,R=B+(N<<23&4294967295|N>>>9),N=C+(R^B^U)+M[1]+2763975236&4294967295,C=R+(N<<4&4294967295|N>>>28),N=U+(C^R^B)+M[4]+1272893353&4294967295,U=C+(N<<11&4294967295|N>>>21),N=B+(U^C^R)+M[7]+4139469664&4294967295,B=U+(N<<16&4294967295|N>>>16),N=R+(B^U^C)+M[10]+3200236656&4294967295,R=B+(N<<23&4294967295|N>>>9),N=C+(R^B^U)+M[13]+681279174&4294967295,C=R+(N<<4&4294967295|N>>>28),N=U+(C^R^B)+M[0]+3936430074&4294967295,U=C+(N<<11&4294967295|N>>>21),N=B+(U^C^R)+M[3]+3572445317&4294967295,B=U+(N<<16&4294967295|N>>>16),N=R+(B^U^C)+M[6]+76029189&4294967295,R=B+(N<<23&4294967295|N>>>9),N=C+(R^B^U)+M[9]+3654602809&4294967295,C=R+(N<<4&4294967295|N>>>28),N=U+(C^R^B)+M[12]+3873151461&4294967295,U=C+(N<<11&4294967295|N>>>21),N=B+(U^C^R)+M[15]+530742520&4294967295,B=U+(N<<16&4294967295|N>>>16),N=R+(B^U^C)+M[2]+3299628645&4294967295,R=B+(N<<23&4294967295|N>>>9),N=C+(B^(R|~U))+M[0]+4096336452&4294967295,C=R+(N<<6&4294967295|N>>>26),N=U+(R^(C|~B))+M[7]+1126891415&4294967295,U=C+(N<<10&4294967295|N>>>22),N=B+(C^(U|~R))+M[14]+2878612391&4294967295,B=U+(N<<15&4294967295|N>>>17),N=R+(U^(B|~C))+M[5]+4237533241&4294967295,R=B+(N<<21&4294967295|N>>>11),N=C+(B^(R|~U))+M[12]+1700485571&4294967295,C=R+(N<<6&4294967295|N>>>26),N=U+(R^(C|~B))+M[3]+2399980690&4294967295,U=C+(N<<10&4294967295|N>>>22),N=B+(C^(U|~R))+M[10]+4293915773&4294967295,B=U+(N<<15&4294967295|N>>>17),N=R+(U^(B|~C))+M[1]+2240044497&4294967295,R=B+(N<<21&4294967295|N>>>11),N=C+(B^(R|~U))+M[8]+1873313359&4294967295,C=R+(N<<6&4294967295|N>>>26),N=U+(R^(C|~B))+M[15]+4264355552&4294967295,U=C+(N<<10&4294967295|N>>>22),N=B+(C^(U|~R))+M[6]+2734768916&4294967295,B=U+(N<<15&4294967295|N>>>17),N=R+(U^(B|~C))+M[13]+1309151649&4294967295,R=B+(N<<21&4294967295|N>>>11),N=C+(B^(R|~U))+M[4]+4149444226&4294967295,C=R+(N<<6&4294967295|N>>>26),N=U+(R^(C|~B))+M[11]+3174756917&4294967295,U=C+(N<<10&4294967295|N>>>22),N=B+(C^(U|~R))+M[2]+718787259&4294967295,B=U+(N<<15&4294967295|N>>>17),N=R+(U^(B|~C))+M[9]+3951481745&4294967295,D.g[0]=D.g[0]+C&4294967295,D.g[1]=D.g[1]+(B+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+B&4294967295,D.g[3]=D.g[3]+U&4294967295}r.prototype.v=function(D,C){C===void 0&&(C=D.length);const R=C-this.blockSize,M=this.C;let B=this.h,U=0;for(;U<C;){if(B==0)for(;U<=R;)a(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<C;)if(M[B++]=D.charCodeAt(U++),B==this.blockSize){a(this,M),B=0;break}}else for(;U<C;)if(M[B++]=D[U++],B==this.blockSize){a(this,M),B=0;break}}this.h=B,this.o+=C},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var C=1;C<D.length-8;++C)D[C]=0;C=this.o*8;for(var R=D.length-8;R<D.length;++R)D[R]=C&255,C/=256;for(this.v(D),D=Array(16),C=0,R=0;R<4;++R)for(let M=0;M<32;M+=8)D[C++]=this.g[R]>>>M&255;return D};function c(D,C){var R=g;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=C(D)}function d(D,C){this.h=C;const R=[];let M=!0;for(let B=D.length-1;B>=0;B--){const U=D[B]|0;M&&U==C||(R[B]=U,M=!1)}this.g=R}var g={};function p(D){return-128<=D&&D<128?c(D,function(C){return new d([C|0],C<0?-1:0)}):new d([D|0],D<0?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return L(y(-D));const C=[];let R=1;for(let M=0;D>=R;M++)C[M]=D/R|0,R*=4294967296;return new d(C,0)}function b(D,C){if(D.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(D.charAt(0)=="-")return L(b(D.substring(1),C));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(C,8));let M=T;for(let U=0;U<D.length;U+=8){var B=Math.min(8,D.length-U);const N=parseInt(D.substring(U,U+B),C);B<8?(B=y(Math.pow(C,B)),M=M.j(B).add(y(N))):(M=M.j(R),M=M.add(y(N)))}return M}var T=p(0),S=p(1),V=p(16777216);i=d.prototype,i.m=function(){if(W(this))return-L(this).m();let D=0,C=1;for(let R=0;R<this.g.length;R++){const M=this.i(R);D+=(M>=0?M:4294967296+M)*C,C*=4294967296}return D},i.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(q(this))return"0";if(W(this))return"-"+L(this).toString(D);const C=y(Math.pow(D,6));var R=this;let M="";for(;;){const B=me(R,C).g;R=ce(R,B.j(C));let U=((R.g.length>0?R.g[0]:R.h)>>>0).toString(D);if(R=B,q(R))return U+M;for(;U.length<6;)U="0"+U;M=U+M}},i.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function q(D){if(D.h!=0)return!1;for(let C=0;C<D.g.length;C++)if(D.g[C]!=0)return!1;return!0}function W(D){return D.h==-1}i.l=function(D){return D=ce(this,D),W(D)?-1:q(D)?0:1};function L(D){const C=D.g.length,R=[];for(let M=0;M<C;M++)R[M]=~D.g[M];return new d(R,~D.h).add(S)}i.abs=function(){return W(this)?L(this):this},i.add=function(D){const C=Math.max(this.g.length,D.g.length),R=[];let M=0;for(let B=0;B<=C;B++){let U=M+(this.i(B)&65535)+(D.i(B)&65535),N=(U>>>16)+(this.i(B)>>>16)+(D.i(B)>>>16);M=N>>>16,U&=65535,N&=65535,R[B]=N<<16|U}return new d(R,R[R.length-1]&-2147483648?-1:0)};function ce(D,C){return D.add(L(C))}i.j=function(D){if(q(this)||q(D))return T;if(W(this))return W(D)?L(this).j(L(D)):L(L(this).j(D));if(W(D))return L(this.j(L(D)));if(this.l(V)<0&&D.l(V)<0)return y(this.m()*D.m());const C=this.g.length+D.g.length,R=[];for(var M=0;M<2*C;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(let B=0;B<D.g.length;B++){const U=this.i(M)>>>16,N=this.i(M)&65535,rt=D.i(B)>>>16,xt=D.i(B)&65535;R[2*M+2*B]+=N*xt,oe(R,2*M+2*B),R[2*M+2*B+1]+=U*xt,oe(R,2*M+2*B+1),R[2*M+2*B+1]+=N*rt,oe(R,2*M+2*B+1),R[2*M+2*B+2]+=U*rt,oe(R,2*M+2*B+2)}for(D=0;D<C;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=C;D<2*C;D++)R[D]=0;return new d(R,0)};function oe(D,C){for(;(D[C]&65535)!=D[C];)D[C+1]+=D[C]>>>16,D[C]&=65535,C++}function ue(D,C){this.g=D,this.h=C}function me(D,C){if(q(C))throw Error("division by zero");if(q(D))return new ue(T,T);if(W(D))return C=me(L(D),C),new ue(L(C.g),L(C.h));if(W(C))return C=me(D,L(C)),new ue(L(C.g),C.h);if(D.g.length>30){if(W(D)||W(C))throw Error("slowDivide_ only works with positive integers.");for(var R=S,M=C;M.l(D)<=0;)R=Ve(R),M=Ve(M);var B=je(R,1),U=je(M,1);for(M=je(M,2),R=je(R,2);!q(M);){var N=U.add(M);N.l(D)<=0&&(B=B.add(R),U=N),M=je(M,1),R=je(R,1)}return C=ce(D,B.j(C)),new ue(B,C)}for(B=T;D.l(C)>=0;){for(R=Math.max(1,Math.floor(D.m()/C.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),U=y(R),N=U.j(C);W(N)||N.l(D)>0;)R-=M,U=y(R),N=U.j(C);q(U)&&(U=S),B=B.add(U),D=ce(D,N)}return new ue(B,D)}i.B=function(D){return me(this,D).h},i.and=function(D){const C=Math.max(this.g.length,D.g.length),R=[];for(let M=0;M<C;M++)R[M]=this.i(M)&D.i(M);return new d(R,this.h&D.h)},i.or=function(D){const C=Math.max(this.g.length,D.g.length),R=[];for(let M=0;M<C;M++)R[M]=this.i(M)|D.i(M);return new d(R,this.h|D.h)},i.xor=function(D){const C=Math.max(this.g.length,D.g.length),R=[];for(let M=0;M<C;M++)R[M]=this.i(M)^D.i(M);return new d(R,this.h^D.h)};function Ve(D){const C=D.g.length+1,R=[];for(let M=0;M<C;M++)R[M]=D.i(M)<<1|D.i(M-1)>>>31;return new d(R,D.h)}function je(D,C){const R=C>>5;C%=32;const M=D.g.length-R,B=[];for(let U=0;U<M;U++)B[U]=C>0?D.i(U+R)>>>C|D.i(U+R+1)<<32-C:D.i(U+R);return new d(B,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,q2=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=b,pl=d}).apply(typeof D1<"u"?D1:typeof self<"u"?self:typeof window<"u"?window:{});var tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var G2,hh,H2,xg,Ny,$2,K2,Q2;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof tg=="object"&&tg];for(var v=0;v<h.length;++v){var w=h[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function a(h,v){if(v)e:{var w=r;h=h.split(".");for(var I=0;I<h.length-1;I++){var H=h[I];if(!(H in w))break e;w=w[H]}h=h[h.length-1],I=w[h],v=v(I),v!=I&&v!=null&&e(w,h,{configurable:!0,writable:!0,value:v})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(v){var w=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&w.push([I,v[I]]);return w}});var c=c||{},d=this||self;function g(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function p(h,v,w){return h.call.apply(h.bind,arguments)}function y(h,v,w){return y=p,y.apply(null,arguments)}function b(h,v){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function T(h,v){function w(){}w.prototype=v.prototype,h.Z=v.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(I,H,J){for(var ve=Array(arguments.length-2),We=2;We<arguments.length;We++)ve[We-2]=arguments[We];return v.prototype[H].apply(I,ve)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function V(h){const v=h.length;if(v>0){const w=Array(v);for(let I=0;I<v;I++)w[I]=h[I];return w}return[]}function q(h,v){for(let I=1;I<arguments.length;I++){const H=arguments[I];var w=typeof H;if(w=w!="object"?w:H?Array.isArray(H)?"array":w:"null",w=="array"||w=="object"&&typeof H.length=="number"){w=h.length||0;const J=H.length||0;h.length=w+J;for(let ve=0;ve<J;ve++)h[w+ve]=H[ve]}else h.push(H)}}class W{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function L(h){d.setTimeout(()=>{throw h},0)}function ce(){var h=D;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class oe{constructor(){this.h=this.g=null}add(v,w){const I=ue.get();I.set(v,w),this.h?this.h.next=I:this.g=I,this.h=I}}var ue=new W(()=>new me,h=>h.reset());class me{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,je=!1,D=new oe,C=()=>{const h=Promise.resolve(void 0);Ve=()=>{h.then(R)}};function R(){for(var h;h=ce();){try{h.h.call(h.g)}catch(w){L(w)}var v=ue;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}je=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};d.addEventListener("test",w,v),d.removeEventListener("test",w,v)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function rt(h,v){B.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}T(rt,B),rt.prototype.init=function(h,v){const w=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(w=="mouseover"?v=h.fromElement:w=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&rt.Z.h.call(this)},rt.prototype.h=function(){rt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var xt="closure_listenable_"+(Math.random()*1e6|0),Z=0;function ye(h,v,w,I,H){this.listener=h,this.proxy=null,this.src=v,this.type=w,this.capture=!!I,this.ha=H,this.key=++Z,this.da=this.fa=!1}function Te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Qe(h,v,w){for(const I in h)v.call(w,h[I],I,h)}function Ne(h,v){for(const w in h)v.call(void 0,h[w],w,h)}function O(h){const v={};for(const w in h)v[w]=h[w];return v}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(h,v){let w,I;for(let H=1;H<arguments.length;H++){I=arguments[H];for(w in I)h[w]=I[w];for(let J=0;J<te.length;J++)w=te[J],Object.prototype.hasOwnProperty.call(I,w)&&(h[w]=I[w])}}function he(h){this.src=h,this.g={},this.h=0}he.prototype.add=function(h,v,w,I,H){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const ve=ke(h,v,I,H);return ve>-1?(v=h[ve],w||(v.fa=!1)):(v=new ye(v,this.src,J,!!I,H),v.fa=w,h.push(v)),v};function Se(h,v){const w=v.type;if(w in h.g){var I=h.g[w],H=Array.prototype.indexOf.call(I,v,void 0),J;(J=H>=0)&&Array.prototype.splice.call(I,H,1),J&&(Te(v),h.g[w].length==0&&(delete h.g[w],h.h--))}}function ke(h,v,w,I){for(let H=0;H<h.length;++H){const J=h[H];if(!J.da&&J.listener==v&&J.capture==!!w&&J.ha==I)return H}return-1}var He="closure_lm_"+(Math.random()*1e6|0),vt={};function Ze(h,v,w,I,H){if(Array.isArray(v)){for(let J=0;J<v.length;J++)Ze(h,v[J],w,I,H);return null}return w=ai(w),h&&h[xt]?h.J(v,w,g(I)?!!I.capture:!1,H):vr(h,v,w,!1,I,H)}function vr(h,v,w,I,H,J){if(!v)throw Error("Invalid event type");const ve=g(H)?!!H.capture:!!H;let We=Ot(h);if(We||(h[He]=We=new he(h)),w=We.add(v,w,I,ve,J),w.proxy)return w;if(I=br(),w.proxy=I,I.src=h,I.listener=w,h.addEventListener)U||(H=ve),H===void 0&&(H=!1),h.addEventListener(v.toString(),I,H);else if(h.attachEvent)h.attachEvent(ut(v.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function br(){function h(w){return v.call(h.src,h.listener,w)}const v=cn;return h}function _r(h,v,w,I,H){if(Array.isArray(v))for(var J=0;J<v.length;J++)_r(h,v[J],w,I,H);else I=g(I)?!!I.capture:!!I,w=ai(w),h&&h[xt]?(h=h.i,J=String(v).toString(),J in h.g&&(v=h.g[J],w=ke(v,w,I,H),w>-1&&(Te(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete h.g[J],h.h--)))):h&&(h=Ot(h))&&(v=h.g[v.toString()],h=-1,v&&(h=ke(v,w,I,H)),(w=h>-1?v[h]:null)&&bn(w))}function bn(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[xt])Se(v.i,h);else{var w=h.type,I=h.proxy;v.removeEventListener?v.removeEventListener(w,I,h.capture):v.detachEvent?v.detachEvent(ut(w),I):v.addListener&&v.removeListener&&v.removeListener(I),(w=Ot(v))?(Se(w,h),w.h==0&&(w.src=null,v[He]=null)):Te(h)}}}function ut(h){return h in vt?vt[h]:vt[h]="on"+h}function cn(h,v){if(h.da)h=!0;else{v=new rt(v,this);const w=h.listener,I=h.ha||h.src;h.fa&&bn(h),h=w.call(I,v)}return h}function Ot(h){return h=h[He],h instanceof he?h:null}var Nr="__closure_events_fn_"+(Math.random()*1e9>>>0);function ai(h){return typeof h=="function"?h:(h[Nr]||(h[Nr]=function(v){return h.handleEvent(v)}),h[Nr])}function Qt(){M.call(this),this.i=new he(this),this.M=this,this.G=null}T(Qt,M),Qt.prototype[xt]=!0,Qt.prototype.removeEventListener=function(h,v,w,I){_r(this,h,v,w,I)};function Wt(h,v){var w,I=h.G;if(I)for(w=[];I;I=I.G)w.push(I);if(h=h.M,I=v.type||v,typeof v=="string")v=new B(v,h);else if(v instanceof B)v.target=v.target||h;else{var H=v;v=new B(I,h),ne(v,H)}H=!0;let J,ve;if(w)for(ve=w.length-1;ve>=0;ve--)J=v.g=w[ve],H=Dr(J,I,!0,v)&&H;if(J=v.g=h,H=Dr(J,I,!0,v)&&H,H=Dr(J,I,!1,v)&&H,w)for(ve=0;ve<w.length;ve++)J=v.g=w[ve],H=Dr(J,I,!1,v)&&H}Qt.prototype.N=function(){if(Qt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const w=h.g[v];for(let I=0;I<w.length;I++)Te(w[I]);delete h.g[v],h.h--}}this.G=null},Qt.prototype.J=function(h,v,w,I){return this.i.add(String(h),v,!1,w,I)},Qt.prototype.K=function(h,v,w,I){return this.i.add(String(h),v,!0,w,I)};function Dr(h,v,w,I){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let H=!0;for(let J=0;J<v.length;++J){const ve=v[J];if(ve&&!ve.da&&ve.capture==w){const We=ve.listener,fn=ve.ha||ve.src;ve.fa&&Se(h.i,ve),H=We.call(fn,I)!==!1&&H}}return H&&!I.defaultPrevented}function Bi(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function zi(h){h.g=Bi(()=>{h.g=null,h.i&&(h.i=!1,zi(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Jt extends M{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:zi(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function un(h){M.call(this),this.h=h,this.g={}}T(un,M);var ar=[];function Sn(h){Qe(h.g,function(v,w){this.g.hasOwnProperty(w)&&bn(v)},h),h.g={}}un.prototype.N=function(){un.Z.N.call(this),Sn(this)},un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var St=d.JSON.stringify,Mr=d.JSON.parse,or=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function oi(){}function xe(){}var we={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Re(){B.call(this,"d")}T(Re,B);function _n(){B.call(this,"c")}T(_n,B);var Zt={},Ta=null;function ns(){return Ta=Ta||new Qt}Zt.Ia="serverreachability";function vo(h){B.call(this,Zt.Ia,h)}T(vo,B);function Xn(h){const v=ns();Wt(v,new vo(v))}Zt.STAT_EVENT="statevent";function Is(h,v){B.call(this,Zt.STAT_EVENT,h),this.stat=v}T(Is,B);function tn(h){const v=ns();Wt(v,new Is(v,h))}Zt.Ja="timingevent";function li(h,v){B.call(this,Zt.Ja,h),this.size=v}T(li,B);function Vr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Nn(){this.g=!0}Nn.prototype.ua=function(){this.g=!1};function Br(h,v,w,I,H,J){h.info(function(){if(h.g)if(J){var ve="",We=J.split("&");for(let nt=0;nt<We.length;nt++){var fn=We[nt].split("=");if(fn.length>1){const Ut=fn[0];fn=fn[1];const Ur=Ut.split("_");ve=Ur.length>=2&&Ur[1]=="type"?ve+(Ut+"="+fn+"&"):ve+(Ut+"=redacted&")}}}else ve=null;else ve=J;return"XMLHTTP REQ ("+I+") [attempt "+H+"]: "+v+`
`+w+`
`+ve})}function Cs(h,v,w,I,H,J,ve){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+H+"]: "+v+`
`+w+`
`+J+" "+ve})}function zr(h,v,w,I){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Vl(h,w)+(I?" "+I:"")})}function Oi(h,v){h.info(function(){return"TIMEOUT: "+v})}Nn.prototype.info=function(){};function Vl(h,v){if(!h.g)return v;if(!v)return null;try{const J=JSON.parse(v);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var w=J[h];if(!(w.length<2)){var I=w[1];if(Array.isArray(I)&&!(I.length<1)){var H=I[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ve=1;ve<I.length;ve++)I[ve]=""}}}}return St(J)}catch{return v}}var rs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Li={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},is;function Ee(){}T(Ee,oi),Ee.prototype.g=function(){return new XMLHttpRequest},is=new Ee;function $e(h){return encodeURIComponent(String(h))}function Et(h){var v=1;h=h.split(":");const w=[];for(;v>0&&h.length;)w.push(h.shift()),v--;return h.length&&w.push(h.join(":")),w}function Lt(h,v,w,I){this.j=h,this.i=v,this.l=w,this.S=I||1,this.V=new un(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fe}function Fe(){this.i=null,this.g="",this.h=!1}var Pt={},nn={};function Zr(h,v,w){h.M=1,h.A=cs(hn(v)),h.u=w,h.R=!0,Sa(h,null)}function Sa(h,v){h.F=Date.now(),En(h),h.B=hn(h.A);var w=h.B,I=h.S;Array.isArray(I)||(I=[String(I)]),Ns(w.i,"t",I),h.C=0,w=h.j.L,h.h=new Fe,h.g=ea(h.j,w?v:null,!h.u),h.P>0&&(h.O=new Jt(y(h.Y,h,h.g),h.P)),v=h.V,w=h.g,I=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(ar[0]=H.toString()),H=ar);for(let J=0;J<H.length;J++){const ve=Ze(w,H[J],I||v.handleEvent,!1,v.h||v);if(!ve)break;v.g[ve.key]=ve}v=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),Xn(),Br(h.i,h.v,h.B,h.l,h.S,h.u)}Lt.prototype.ba=function(h){h=h.target;const v=this.O;v&&gi(h)==3?v.j():this.Y(h)},Lt.prototype.Y=function(h){try{if(h==this.g)e:{const We=gi(this.g),fn=this.g.ya(),nt=this.g.ca();if(!(We<3)&&(We!=3||this.g&&(this.h.h||this.g.la()||mt(this.g)))){this.K||We!=4||fn==7||(fn==8||nt<=0?Xn(3):Xn(2)),lr(this);var v=this.g.ca();this.X=v;var w=zc(this);if(this.o=v==200,Cs(this.i,this.v,this.B,this.l,this.S,We,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,H=this.g;if((I=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(I)){var J=I;break t}}J=null}if(h=J)zr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,as(this,h);else{this.o=!1,this.m=3,tn(12),Pn(this),wr(this);break e}}if(this.R){h=!0;let Ut;for(;!this.K&&this.C<w.length;)if(Ut=Ea(this,w),Ut==nn){We==4&&(this.m=4,tn(14),h=!1),zr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Pt){this.m=4,tn(15),zr(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else zr(this.i,this.l,Ut,null),as(this,Ut);if(ss(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||w.length!=0||this.h.h||(this.m=1,tn(16),h=!1),this.o=this.o&&h,!h)zr(this.i,this.l,w,"[Invalid Chunked Response]"),Pn(this),wr(this);else if(w.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),gs(ve),ve.P=!0,tn(11))}}else zr(this.i,this.l,w,null),as(this,w);We==4&&Pn(this),this.o&&!this.K&&(We==4?Da(this.j,this):(this.o=!1,En(this)))}else Er(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,tn(12)):(this.m=0,tn(13)),Pn(this),wr(this)}}}catch{}finally{}};function zc(h){if(!ss(h))return h.g.la();const v=mt(h.g);if(v==="")return"";let w="";const I=v.length,H=gi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Pn(h),wr(h),"";h.h.i=new d.TextDecoder}for(let J=0;J<I;J++)h.h.h=!0,w+=h.h.i.decode(v[J],{stream:!(H&&J==I-1)});return v.length=0,h.h.g+=w,h.C=0,h.h.g}function ss(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ea(h,v){var w=h.C,I=v.indexOf(`
`,w);return I==-1?nn:(w=Number(v.substring(w,I)),isNaN(w)?Pt:(I+=1,I+w>v.length?nn:(v=v.slice(I,I+w),h.C=I+w,v)))}Lt.prototype.cancel=function(){this.K=!0,Pn(this)};function En(h){h.T=Date.now()+h.H,Rs(h,h.H)}function Rs(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Vr(y(h.aa,h),v)}function lr(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Lt.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Oi(this.i,this.B),this.M!=2&&(Xn(),tn(17)),Pn(this),this.m=2,wr(this)):Rs(this,this.T-h)};function wr(h){h.j.I==0||h.K||Da(h.j,h)}function Pn(h){lr(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,Sn(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function as(h,v){try{var w=h.j;if(w.I!=0&&(w.g==h||ls(w.h,h))){if(!h.L&&ls(w.h,h)&&w.I==3){try{var I=w.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var H=I;if(H[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Na(w),hs(w);else break e;fs(w),tn(18)}}else w.xa=H[1],0<w.xa-w.K&&H[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Vr(y(w.Va,w),6e3));os(w.h)<=1&&w.ta&&(w.ta=void 0)}else yi(w,11)}else if((h.L||w.g==h)&&Na(w),!N(v))for(H=w.Ba.g.parse(v),v=0;v<H.length;v++){let nt=H[v];const Ut=nt[0];if(!(Ut<=w.K))if(w.K=Ut,nt=nt[1],w.I==2)if(nt[0]=="c"){w.M=nt[1],w.ba=nt[2];const Ur=nt[3];Ur!=null&&(w.ka=Ur,w.j.info("VER="+w.ka));const Gi=nt[4];Gi!=null&&(w.za=Gi,w.j.info("SVER="+w.za));const ni=nt[5];ni!=null&&typeof ni=="number"&&ni>0&&(I=1.5*ni,w.O=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const xi=h.g;if(xi){const Fr=xi.g?xi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fr){var J=I.h;J.g||Fr.indexOf("spdy")==-1&&Fr.indexOf("quic")==-1&&Fr.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(zl(J,J.h),J.h=null))}if(I.G){const Ba=xi.g?xi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ba&&(I.wa=Ba,At(I.J,I.G,Ba))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),I=w;var ve=h;if(I.na=Ma(I,I.L?I.ba:null,I.W),ve.L){bo(I.h,ve);var We=ve,fn=I.O;fn&&(We.H=fn),We.D&&(lr(We),En(We)),I.g=ve}else Oc(I);w.i.length>0&&mi(w)}else nt[0]!="stop"&&nt[0]!="close"||yi(w,7);else w.I==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?yi(w,7):ti(w):nt[0]!="noop"&&w.l&&w.l.qa(nt),w.A=0)}}Xn(4)}catch{}}var dn=class{constructor(h,v){this.g=h,this.map=v}};function Aa(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Bl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function os(h){return h.h?1:h.g?h.g.size:0}function ls(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function zl(h,v){h.g?h.g.add(v):h.h=v}function bo(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Aa.prototype.cancel=function(){if(this.i=Ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ol(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const w of h.g.values())v=v.concat(w.G);return v}return V(h.i)}var Ia=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ci(h,v){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const I=h[w].indexOf("=");let H,J=null;I>=0?(H=h[w].substring(0,I),J=h[w].substring(I+1)):H=h[w],v(H,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function cr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof cr?(this.l=h.l,An(this,h.j),this.o=h.o,this.g=h.g,ei(this,h.u),this.h=h.h,_o(this,di(h.i)),this.m=h.m):h&&(v=String(h).match(Ia))?(this.l=!1,An(this,v[1]||"",!0),this.o=Tr(v[2]||""),this.g=Tr(v[3]||"",!0),ei(this,v[4]),this.h=Tr(v[5]||"",!0),_o(this,v[6]||"",!0),this.m=Tr(v[7]||"")):(this.l=!1,this.i=new Sr(null,this.l))}cr.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(us(v,Ca,!0),":");var w=this.g;return(w||v=="file")&&(h.push("//"),(v=this.o)&&h.push(us(v,Ca,!0),"@"),h.push($e(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(us(w,w.charAt(0)=="/"?js:ui,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",us(w,Ra)),h.join("")},cr.prototype.resolve=function(h){const v=hn(this);let w=!!h.j;w?An(v,h.j):w=!!h.o,w?v.o=h.o:w=!!h.g,w?v.g=h.g:w=h.u!=null;var I=h.h;if(w)ei(v,h.u);else if(w=!!h.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var H=v.h.lastIndexOf("/");H!=-1&&(I=v.h.slice(0,H+1)+I)}if(H=I,H==".."||H==".")I="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){I=H.lastIndexOf("/",0)==0,H=H.split("/");const J=[];for(let ve=0;ve<H.length;){const We=H[ve++];We=="."?I&&ve==H.length&&J.push(""):We==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),I&&ve==H.length&&J.push("")):(J.push(We),I=!0)}I=J.join("/")}else I=H}return w?v.h=I:w=h.i.toString()!=="",w?_o(v,di(h.i)):w=!!h.m,w&&(v.m=h.m),v};function hn(h){return new cr(h)}function An(h,v,w){h.j=w?Tr(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function ei(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function _o(h,v,w){v instanceof Sr?(h.i=v,Jn(h.i,h.l)):(w||(v=us(v,Or)),h.i=new Sr(v,h.l))}function At(h,v,w){h.i.set(v,w)}function cs(h){return At(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Tr(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function us(h,v,w){return typeof h=="string"?(h=encodeURI(h).replace(v,it),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function it(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ca=/[#\/\?@]/g,ui=/[#\?:]/g,js=/[#\?]/g,Or=/[#\?@]/g,Ra=/#/g;function Sr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function ur(h){h.g||(h.g=new Map,h.h=0,h.i&&ci(h.i,function(v,w){h.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}i=Sr.prototype,i.add=function(h,v){ur(this),this.i=null,h=Pi(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(v),this.h+=1,this};function ks(h,v){ur(h),v=Pi(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Qs(h,v){return ur(h),v=Pi(h,v),h.g.has(v)}i.forEach=function(h,v){ur(this),this.g.forEach(function(w,I){w.forEach(function(H){h.call(v,H,I,this)},this)},this)};function Un(h,v){ur(h);let w=[];if(typeof v=="string")Qs(h,v)&&(w=w.concat(h.g.get(Pi(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)w=w.concat(h[v]);return w}i.set=function(h,v){return ur(this),this.i=null,h=Pi(this,h),Qs(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},i.get=function(h,v){return h?(h=Un(this,h),h.length>0?String(h[0]):v):v};function Ns(h,v,w){ks(h,v),w.length>0&&(h.i=null,h.g.set(Pi(h,v),V(w)),h.h+=w.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var w=v[I];const H=$e(w);w=Un(this,w);for(let J=0;J<w.length;J++){let ve=H;w[J]!==""&&(ve+="="+$e(w[J])),h.push(ve)}}return this.i=h.join("&")};function di(h){const v=new Sr;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function Pi(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Jn(h,v){v&&!h.j&&(ur(h),h.i=null,h.g.forEach(function(w,I){const H=I.toLowerCase();I!=H&&(ks(this,I),Ns(this,H,w))},h)),h.j=v}function hi(h,v){const w=new Nn;if(d.Image){const I=new Image;I.onload=b(jt,w,"TestLoadImage: loaded",!0,v,I),I.onerror=b(jt,w,"TestLoadImage: error",!1,v,I),I.onabort=b(jt,w,"TestLoadImage: abort",!1,v,I),I.ontimeout=b(jt,w,"TestLoadImage: timeout",!1,v,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else v(!1)}function Dn(h,v){const w=new Nn,I=new AbortController,H=setTimeout(()=>{I.abort(),jt(w,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:I.signal}).then(J=>{clearTimeout(H),J.ok?jt(w,"TestPingServer: ok",!0,v):jt(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),jt(w,"TestPingServer: error",!1,v)})}function jt(h,v,w,I,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),I(w)}catch{}}function dr(){this.g=new or}function ds(h){this.i=h.Sb||null,this.h=h.ab||!1}T(ds,oi),ds.prototype.g=function(){return new Ue(this.i,this.h)};function Ue(h,v){Qt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Ue,Qt),i=Ue.prototype,i.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Lr(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Lr(this)),this.g&&(this.readyState=3,Lr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fi(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function fi(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Ds(this):Lr(this),this.readyState==3&&fi(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,Ds(this))},i.Na=function(h){this.g&&(this.response=h,Ds(this))},i.ga=function(){this.g&&Ds(this)};function Ds(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Lr(h)}i.setRequestHeader=function(h,v){this.A.append(h,v)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=v.next();return h.join(`\r
`)};function Lr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ue.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Mn(h){let v="";return Qe(h,function(w,I){v+=I,v+=":",v+=w,v+=`\r
`}),v}function Ws(h,v,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=Mn(w),typeof h=="string"?w!=null&&$e(w):At(h,v,w))}function bt(h){Qt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(bt,Qt);var Ui=/^https?$/i,Ys=["POST","PUT"];i=bt.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,v,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():is.g(),this.g.onreadystatechange=S(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(J){Xs(this,J);return}if(h=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var H in I)w.set(H,I[H]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const J of I.keys())w.set(J,I.get(J));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(J=>J.toLowerCase()=="content-type"),H=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Ys,v,void 0)>=0)||I||H||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ve]of w)this.g.setRequestHeader(J,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){Xs(this,J)}};function Xs(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,wo(h),hr(h)}function wo(h){h.A||(h.A=!0,Wt(h,"complete"),Wt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Wt(this,"complete"),Wt(this,"abort"),hr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hr(this,!0)),bt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Fi(this):this.Xa())},i.Xa=function(){Fi(this)};function Fi(h){if(h.h&&typeof c<"u"){if(h.v&&gi(h)==4)setTimeout(h.Ca.bind(h),0);else if(Wt(h,"readystatechange"),gi(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var I;if(I=J===0){let ve=String(h.D).match(Ia)[1]||null;!ve&&d.self&&d.self.location&&(ve=d.self.location.protocol.slice(0,-1)),I=!Ui.test(ve?ve.toLowerCase():"")}w=I}if(w)Wt(h,"complete"),Wt(h,"success");else{h.o=6;try{var H=gi(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",wo(h)}}finally{hr(h)}}}}function hr(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,v||Wt(h,"ready");try{w.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function gi(h){return h.g?h.g.readyState:0}i.ca=function(){try{return gi(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Mr(v)}};function mt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Er(h){const v={};h=(h.g&&gi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(N(h[I]))continue;var w=Et(h[I]);const H=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const J=v[H]||[];v[H]=J,J.push(w)}Ne(v,function(I){return I.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qi(h,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||v}function Ms(h){this.za=0,this.i=[],this.j=new Nn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qi("baseRetryDelayMs",5e3,h),this.Za=qi("retryDelaySeedMs",1e4,h),this.Ta=qi("forwardChannelMaxRetries",2,h),this.va=qi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Aa(h&&h.concurrentRequestLimit),this.Ba=new dr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Ms.prototype,i.ka=8,i.I=1,i.connect=function(h,v,w,I){tn(0),this.W=h,this.H=v||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.J=Ma(this,null,this.W),mi(this)};function ti(h){if(ja(h),h.I==3){var v=h.V++,w=hn(h.J);if(At(w,"SID",h.M),At(w,"RID",v),At(w,"TYPE","terminate"),pi(h,w),v=new Lt(h,h.j,v),v.M=2,v.A=cs(hn(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&d.Image&&(new Image().src=v.A,w=!0),w||(v.g=ea(v.j,null),v.g.ea(v.A)),v.F=Date.now(),En(v)}Zs(h)}function hs(h){h.g&&(gs(h),h.g.cancel(),h.g=null)}function ja(h){hs(h),h.v&&(d.clearTimeout(h.v),h.v=null),Na(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function mi(h){if(!Bl(h.h)&&!h.m){h.m=!0;var v=h.Ea;Ve||C(),je||(Ve(),je=!0),D.add(v,h),h.D=0}}function To(h,v){return os(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Vr(y(h.Ea,h,v),Vs(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new Lt(this,this.j,h);let J=this.o;if(this.U&&(J?(J=O(J),ne(J,this.U)):J=this.U),this.u!==null||this.R||(H.J=J,J=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=ka(this,H,v),w=hn(this.J),At(w,"RID",h),At(w,"CVER",22),this.G&&At(w,"X-HTTP-Session-Id",this.G),pi(this,w),J&&(this.R?v="headers="+$e(Mn(J))+"&"+v:this.u&&Ws(w,this.u,J)),zl(this.h,H),this.Ra&&At(w,"TYPE","init"),this.S?(At(w,"$req",v),At(w,"SID","null"),H.U=!0,Zr(H,w,null)):Zr(H,w,v),this.I=2}}else this.I==3&&(h?Js(this,h):this.i.length==0||Bl(this.h)||Js(this))};function Js(h,v){var w;v?w=v.l:w=h.V++;const I=hn(h.J);At(I,"SID",h.M),At(I,"RID",w),At(I,"AID",h.K),pi(h,I),h.u&&h.o&&Ws(I,h.u,h.o),w=new Lt(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),v&&(h.i=v.G.concat(h.i)),v=ka(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),zl(h.h,w),Zr(w,I,v)}function pi(h,v){h.H&&Qe(h.H,function(w,I){At(v,I,w)}),h.l&&Qe({},function(w,I){At(v,I,w)})}function ka(h,v,w){w=Math.min(h.i.length,w);const I=h.l?y(h.l.Ka,h.l,h):null;e:{var H=h.i;let We=-1;for(;;){const fn=["count="+w];We==-1?w>0?(We=H[0].g,fn.push("ofs="+We)):We=0:fn.push("ofs="+We);let nt=!0;for(let Ut=0;Ut<w;Ut++){var J=H[Ut].g;const Ur=H[Ut].map;if(J-=We,J<0)We=Math.max(0,H[Ut].g-100),nt=!1;else try{J="req"+J+"_"||"";try{var ve=Ur instanceof Map?Ur:Object.entries(Ur);for(const[Gi,ni]of ve){let xi=ni;g(ni)&&(xi=St(ni)),fn.push(J+Gi+"="+encodeURIComponent(xi))}}catch(Gi){throw fn.push(J+"type="+encodeURIComponent("_badmap")),Gi}}catch{I&&I(Ur)}}if(nt){ve=fn.join("&");break e}}ve=void 0}return h=h.i.splice(0,w),v.G=h,ve}function Oc(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;Ve||C(),je||(Ve(),je=!0),D.add(v,h),h.A=0}}function fs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Vr(y(h.Da,h),Vs(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,So(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Vr(y(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,tn(10),hs(this),So(this))};function gs(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function So(h){h.g=new Lt(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=hn(h.na);At(v,"RID","rpc"),At(v,"SID",h.M),At(v,"AID",h.K),At(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&At(v,"TO",h.ia),At(v,"TYPE","xmlhttp"),pi(h,v),h.u&&h.o&&Ws(v,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=cs(hn(v)),w.u=null,w.R=!0,Sa(w,h)}i.Va=function(){this.C!=null&&(this.C=null,hs(this),fs(this),tn(19))};function Na(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Da(h,v){var w=null;if(h.g==v){Na(h),gs(h),h.g=null;var I=2}else if(ls(h.h,v))w=v.G,bo(h.h,v),I=1;else return;if(h.I!=0){if(v.o)if(I==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var H=h.D;I=ns(),Wt(I,new li(I,w)),mi(h)}else Oc(h);else if(H=v.m,H==3||H==0&&v.X>0||!(I==1&&To(h,v)||I==2&&fs(h)))switch(w&&w.length>0&&(v=h.h,v.i=v.i.concat(w)),H){case 1:yi(h,5);break;case 4:yi(h,10);break;case 3:yi(h,6);break;default:yi(h,2)}}}function Vs(h,v){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*v}function yi(h,v){if(h.j.info("Error code "+v),v==2){var w=y(h.bb,h),I=h.Ua;const H=!I;I=new cr(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||An(I,"https"),cs(I),H?hi(I.toString(),w):Dn(I.toString(),w)}else tn(2);h.I=0,h.l&&h.l.pa(v),Zs(h),ja(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function Zs(h){if(h.I=0,h.ja=[],h.l){const v=Ol(h.h);(v.length!=0||h.i.length!=0)&&(q(h.ja,v),q(h.ja,h.i),h.h.i.length=0,V(h.i),h.i.length=0),h.l.oa()}}function Ma(h,v,w){var I=w instanceof cr?hn(w):new cr(w);if(I.g!="")v&&(I.g=v+"."+I.g),ei(I,I.u);else{var H=d.location;I=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;const J=new cr(null);I&&An(J,I),v&&(J.g=v),H&&ei(J,H),w&&(J.h=w),I=J}return w=h.G,v=h.wa,w&&v&&At(I,w,v),At(I,"VER",h.ka),pi(h,I),I}function ea(h,v,w){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new bt(new ds({ab:w})):new bt(h.ma),v.Fa(h.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Va(){}i=Va.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function ta(){}ta.prototype.g=function(h,v){return new Zn(h,v)};function Zn(h,v){Qt.call(this),this.g=new Ms(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!N(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!N(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Pr(this)}T(Zn,Qt),Zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){ti(this.g)},Zn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=St(h),h=w);v.i.push(new dn(v.Ya++,h)),v.I==3&&mi(v)},Zn.prototype.N=function(){this.g.l=null,delete this.j,ti(this.g),delete this.g,Zn.Z.N.call(this)};function ms(h){Re.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const w in v){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}T(ms,Re);function Ll(){_n.call(this),this.status=1}T(Ll,_n);function Pr(h){this.g=h}T(Pr,Va),Pr.prototype.ra=function(){Wt(this.g,"a")},Pr.prototype.qa=function(h){Wt(this.g,new ms(h))},Pr.prototype.pa=function(h){Wt(this.g,new Ll)},Pr.prototype.oa=function(){Wt(this.g,"b")},ta.prototype.createWebChannel=ta.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,Q2=function(){return new ta},K2=function(){return ns()},$2=Zt,Ny={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},rs.NO_ERROR=0,rs.TIMEOUT=8,rs.HTTP_ERROR=6,xg=rs,Li.COMPLETE="complete",H2=Li,xe.EventType=we,we.OPEN="a",we.CLOSE="b",we.ERROR="c",we.MESSAGE="d",Qt.prototype.listen=Qt.prototype.J,hh=xe,bt.prototype.listenOnce=bt.prototype.K,bt.prototype.getLastError=bt.prototype.Ha,bt.prototype.getLastErrorCode=bt.prototype.ya,bt.prototype.getStatus=bt.prototype.ca,bt.prototype.getResponseJson=bt.prototype.La,bt.prototype.getResponseText=bt.prototype.la,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Fa,G2=bt}).apply(typeof tg<"u"?tg:typeof self<"u"?self:typeof window<"u"?window:{});class pr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pr.UNAUTHENTICATED=new pr(null),pr.GOOGLE_CREDENTIALS=new pr("google-credentials-uid"),pr.FIRST_PARTY=new pr("first-party-uid"),pr.MOCK_USER=new pr("mock-user");let Ju="12.9.0";function tI(i){Ju=i}const vl=new M2("@firebase/firestore");function Tu(){return vl.logLevel}function nI(i){vl.setLogLevel(i)}function de(i,...e){if(vl.logLevel<=yt.DEBUG){const t=e.map(p0);vl.debug(`Firestore (${Ju}): ${i}`,...t)}}function On(i,...e){if(vl.logLevel<=yt.ERROR){const t=e.map(p0);vl.error(`Firestore (${Ju}): ${i}`,...t)}}function Vi(i,...e){if(vl.logLevel<=yt.WARN){const t=e.map(p0);vl.warn(`Firestore (${Ju}): ${i}`,...t)}}function p0(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function Ce(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,W2(i,r,t)}function W2(i,e,t){let r=`FIRESTORE (${Ju}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw On(r),new Error(r)}function Me(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||W2(e,a,r)}function rI(i,e){i||Ce(57014,e)}function _e(i,e){return i}const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Rc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Y2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(pr.UNAUTHENTICATED)))}shutdown(){}}class iI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class sI{constructor(e){this.t=e,this.currentUser=pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Me(this.o===void 0,42304);let r=this.i;const a=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let c=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new xr,e.enqueueRetryable((()=>a(this.currentUser)))};const d=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},g=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new xr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Me(typeof r.accessToken=="string",31837,{l:r}),new Y2(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string",2055,{h:e}),new pr(e)}}class aI{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class oI{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new aI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(pr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Dy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,z2(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Me(this.o===void 0,3512);const r=c=>{c.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,de("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const a=c=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Dy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Me(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Dy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class cI{getToken(){return Promise.resolve(new Dy(""))}invalidateToken(){}start(e,t){}shutdown(){}}function uI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}class Zg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=uI(40);for(let c=0;c<a.length;++c)r.length<20&&a[c]<t&&(r+=e.charAt(a[c]%62))}return r}}function Ke(i,e){return i<e?-1:i>e?1:0}function My(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const a=i.charAt(r),c=e.charAt(r);if(a!==c)return cy(a)===cy(c)?Ke(a,c):cy(a)?1:-1}return Ke(i.length,e.length)}const dI=55296,hI=57343;function cy(i){const e=i.charCodeAt(0);return e>=dI&&e<=hI}function ku(i,e,t){return i.length===e.length&&i.every(((r,a)=>t(r,e[a])))}function J2(i){return i+"\0"}const Vy="__name__";class fa{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ce(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return fa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fa?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const c=fa.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return Ke(e.length,t.length)}static compareSegments(e,t){const r=fa.isNumericId(e),a=fa.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?fa.extractNumericId(e).compare(fa.extractNumericId(t)):My(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pl.fromString(e.substring(4,e.length-2))}}class at extends fa{construct(e,t,r){return new at(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new at(t)}static emptyPath(){return new at([])}}const fI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends fa{construct(e,t,r){return new ln(e,t,r)}static isValidIdentifier(e){return fI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vy}static keyField(){return new ln([Vy])}static fromServerFormat(e){const t=[];let r="",a=0;const c=()=>{if(r.length===0)throw new se(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;a<e.length;){const g=e[a];if(g==="\\"){if(a+1===e.length)throw new se(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new se(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,a+=2}else g==="`"?(d=!d,a++):g!=="."||d?(r+=g,a++):(c(),a++)}if(c(),d)throw new se(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}class be{constructor(e){this.path=e}static fromPath(e){return new be(at.fromString(e))}static fromName(e){return new be(at.fromString(e).popFirst(5))}static empty(){return new be(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new at(e.slice()))}}function y0(i,e,t){if(!t)throw new se(Q.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Z2(i,e,t,r){if(e===!0&&r===!0)throw new se(Q.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function M1(i){if(!be.isDocumentKey(i))throw new se(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function V1(i){if(be.isDocumentKey(i))throw new se(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ew(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function em(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ce(12329,{type:typeof i})}function ot(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new se(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=em(i);throw new se(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function tw(i,e){if(e<=0)throw new se(Q.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}function Wn(i,e){const t={typeString:i};return e&&(t.value=e),t}function jc(i,e){if(!ew(i))throw new se(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const d=i[r];if(a&&typeof d!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${r}' field to equal '${c.value}'`;break}}if(t)throw new se(Q.INVALID_ARGUMENT,t);return!0}const B1=-62135596800,z1=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*z1);return new Ye(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<B1)throw new se(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/z1}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jc(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-B1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:Wn("string",Ye._jsonSchemaVersion),seconds:Wn("number"),nanoseconds:Wn("number")};class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Ye(0,0))}static max(){return new Le(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Nu=-1;class Du{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function By(i){return i.fields.find((e=>e.kind===2))}function uc(i){return i.fields.filter((e=>e.kind!==2))}function gI(i,e){let t=Ke(i.collectionGroup,e.collectionGroup);if(t!==0)return t;for(let r=0;r<Math.min(i.fields.length,e.fields.length);++r)if(t=mI(i.fields[r],e.fields[r]),t!==0)return t;return Ke(i.fields.length,e.fields.length)}Du.UNKNOWN_ID=-1;class yc{constructor(e,t){this.fieldPath=e,this.kind=t}}function mI(i,e){const t=ln.comparator(i.fieldPath,e.fieldPath);return t!==0?t:Ke(i.kind,e.kind)}class Mu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mu(0,ts.min())}}function nw(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=Le.fromTimestamp(r===1e9?new Ye(t+1,0):new Ye(t,r));return new ts(a,be.empty(),e)}function rw(i){return new ts(i.readTime,i.key,Nu)}class ts{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ts(Le.min(),be.empty(),Nu)}static max(){return new ts(Le.max(),be.empty(),Nu)}}function x0(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(i.documentKey,e.documentKey),t!==0?t:Ke(i.largestBatchId,e.largestBatchId))}const iw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Cl(i){if(i.code!==Q.FAILED_PRECONDITION||i.message!==iw)throw i;de("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((r,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,r)=>{t(e)}))}static reject(e){return new G(((t,r)=>{r(e)}))}static waitFor(e){return new G(((t,r)=>{let a=0,c=0,d=!1;e.forEach((g=>{++a,g.next((()=>{++c,d&&c===a&&t()}),(p=>r(p)))})),d=!0,c===a&&t()}))}static or(e){let t=G.resolve(!1);for(const r of e)t=t.next((a=>a?G.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,c)=>{r.push(t.call(this,a,c))})),this.waitFor(r)}static mapArray(e,t){return new G(((r,a)=>{const c=e.length,d=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;t(e[y]).next((b=>{d[y]=b,++g,g===c&&r(d)}),(b=>a(b)))}}))}static doWhile(e,t){return new G(((r,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):r()};c()}))}}const Zi="SimpleDb";class tm{static open(e,t,r,a){try{return new tm(t,e.transaction(a,r))}catch(c){throw new xh(t,c)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new xr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new xh(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=v0(r.target.error);this.S.reject(new xh(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(de(Zi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yI(t)}}class ya{static delete(e){return de(Zi,"Removing database:",e),hc(S2().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!N2())return!1;if(ya.F())return!0;const e=Ng(),t=ya.M(e),r=0<t&&t<10,a=aw(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,ya.M(Ng())===12.2&&On("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(de(Zi,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=c=>{const d=c.target.result;t(d)},a.onblocked=()=>{r(new xh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const d=c.target.error;d.name==="VersionError"?r(new se(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):d.name==="InvalidStateError"?r(new se(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d)):r(new xh(e,d))},a.onupgradeneeded=c=>{de(Zi,'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const d=c.target.result;this.N.k(d,a.transaction,c.oldVersion,this.version).next((()=>{de(Zi,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const c=t==="readonly";let d=0;for(;;){++d;try{this.db=await this.L(e);const g=tm.open(this.db,e,c?"readonly":"readwrite",r),p=a(g).next((y=>(g.C(),y))).catch((y=>(g.abort(y),G.reject(y)))).toPromise();return p.catch((()=>{})),await g.D,p}catch(g){const p=g,y=p.name!=="FirebaseError"&&d<3;if(de(Zi,"Transaction failed with error:",p.message,"Retrying:",y),this.close(),!y)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function aw(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class pI{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return hc(this.U.delete())}}class xh extends se{constructor(e,t){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Rl(i){return i.name==="IndexedDbTransactionError"}class yI{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(de(Zi,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(de(Zi,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hc(r)}add(e){return de(Zi,"ADD",this.store.name,e,e),hc(this.store.add(e))}get(e){return hc(this.store.get(e)).next((t=>(t===void 0&&(t=null),de(Zi,"GET",this.store.name,e,t),t)))}delete(e){return de(Zi,"DELETE",this.store.name,e),hc(this.store.delete(e))}count(){return de(Zi,"COUNT",this.store.name),hc(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const c=a.getAll(r.range);return new G(((d,g)=>{c.onerror=p=>{g(p.target.error)},c.onsuccess=p=>{d(p.target.result)}}))}{const c=this.cursor(r),d=[];return this.J(c,((g,p)=>{d.push(p)})).next((()=>d))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new G(((a,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{a(d.target.result)}}))}X(e,t){de(Zi,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((c,d,g)=>g.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new G(((r,a)=>{t.onerror=c=>{const d=v0(c.target.error);a(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next((g=>{g?d.continue():r()})):r()}}))}J(e,t){const r=[];return new G(((a,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void a();const p=new pI(g),y=t(g.primaryKey,g.value,p);if(y instanceof G){const b=y.catch((T=>(p.done(),G.reject(T))));r.push(b)}p.isDone?a():p.G===null?g.continue():g.continue(p.G)}})).next((()=>G.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hc(i){return new G(((e,t)=>{i.onsuccess=r=>{const a=r.target.result;e(a)},i.onerror=r=>{const a=v0(r.target.error);t(a)}}))}let O1=!1;function v0(i){const e=ya.M(Ng());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return O1||(O1=!0,setTimeout((()=>{throw r}),0)),r}}return i}const vh="IndexBackfiller";class xI{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){de(vh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();de(vh,`Documents written: ${t}`)}catch(t){Rl(t)?de(vh,"Ignoring IndexedDB error during index backfill: ",t):await Cl(t)}await this.re(6e4)}))}}class vI{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,c=!0;return G.doWhile((()=>c===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((d=>{if(d!==null&&!r.has(d))return de(vh,`Processing collection: ${d}`),this.oe(e,d,a).next((g=>{a-=g,r.add(d)}));c=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next((()=>this._e(a,c))).next((g=>(de(vh,`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g)))).next((()=>d.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,c)=>{const d=rw(c);x0(d,r)>0&&(r=d)})),new ts(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ri{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ri.ce=-1;const yl=-1;function Fh(i){return i==null}function Rh(i){return i===0&&1/i==-1/0}function ow(i){return typeof i=="number"&&Number.isInteger(i)&&!Rh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Vg="";function Xr(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=L1(e)),e=bI(i.get(t),e);return L1(e)}function bI(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const c=i.charAt(a);switch(c){case"\0":t+="";break;case Vg:t+="";break;default:t+=c}}return t}function L1(i){return i+Vg+""}function ma(i){const e=i.length;if(Me(e>=2,64408,{path:i}),e===2)return Me(i.charAt(0)===Vg&&i.charAt(1)==="",56145,{path:i}),at.emptyPath();const t=e-2,r=[];let a="";for(let c=0;c<e;){const d=i.indexOf(Vg,c);switch((d<0||d>t)&&Ce(50515,{path:i}),i.charAt(d+1)){case"":const g=i.substring(c,d);let p;a.length===0?p=g:(a+=g,p=a,a=""),r.push(p);break;case"":a+=i.substring(c,d),a+="\0";break;case"":a+=i.substring(c,d+1);break;default:Ce(61167,{path:i})}c=d+2}return new at(r)}const dc="remoteDocuments",qh="owner",mu="owner",jh="mutationQueues",_I="userId",qs="mutations",P1="batchId",pc="userMutationsIndex",U1=["userId","batchId"];function vg(i,e){return[i,Xr(e)]}function lw(i,e,t){return[i,Xr(e),t]}const wI={},Vu="documentMutations",Bg="remoteDocumentsV14",TI=["prefixPath","collectionGroup","readTime","documentId"],bg="documentKeyIndex",SI=["prefixPath","collectionGroup","documentId"],cw="collectionGroupIndex",EI=["collectionGroup","readTime","prefixPath","documentId"],kh="remoteDocumentGlobal",zy="remoteDocumentGlobalKey",Bu="targets",uw="queryTargetsIndex",AI=["canonicalId","targetId"],zu="targetDocuments",II=["targetId","path"],b0="documentTargetsIndex",CI=["path","targetId"],zg="targetGlobalKey",xc="targetGlobal",Nh="collectionParents",RI=["collectionId","parent"],Ou="clientMetadata",jI="clientId",nm="bundles",kI="bundleId",rm="namedQueries",NI="name",_0="indexConfiguration",DI="indexId",Oy="collectionGroupIndex",MI="collectionGroup",bh="indexState",VI=["indexId","uid"],dw="sequenceNumberIndex",BI=["uid","sequenceNumber"],_h="indexEntries",zI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hw="documentKeyIndex",OI=["indexId","uid","orderedDocumentKey"],im="documentOverlays",LI=["userId","collectionPath","documentId"],Ly="collectionPathOverlayIndex",PI=["userId","collectionPath","largestBatchId"],fw="collectionGroupOverlayIndex",UI=["userId","collectionGroup","largestBatchId"],w0="globals",FI="name",gw=[jh,qs,Vu,dc,Bu,qh,xc,zu,Ou,kh,Nh,nm,rm],qI=[...gw,im],mw=[jh,qs,Vu,Bg,Bu,qh,xc,zu,Ou,kh,Nh,nm,rm,im],pw=mw,T0=[...pw,_0,bh,_h],GI=T0,yw=[...T0,w0],HI=yw;class Py extends sw{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function sr(i,e){const t=_e(i);return ya.O(t.le,e)}function F1(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function jl(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function xw(i,e){const t=[];for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&t.push(e(i[r],r,i));return t}function vw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class en{constructor(e,t){this.comparator=e,this.root=t||kr.EMPTY}insert(e,t){return new en(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kr.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ng(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ng(this.root,e,this.comparator,!1)}getReverseIterator(){return new ng(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ng(this.root,e,this.comparator,!0)}}class ng{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kr{constructor(e,t,r,a,c){this.key=e,this.value=t,this.color=r??kr.RED,this.left=a??kr.EMPTY,this.right=c??kr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,c){return new kr(e??this.key,t??this.value,r??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const c=r(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,r),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return kr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return kr.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}kr.EMPTY=null,kr.RED=!0,kr.BLACK=!1;kr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,r,a,c){return this}insert(e,t,r){return new kr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bt{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new q1(this.data.getIterator())}getIteratorFrom(e){return new q1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class q1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pu(i){return i.hasNext()?i.getNext():void 0}class ji{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new ji([])}unionWith(e){let t=new Bt(ln.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ku(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class bw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function $I(){return typeof atob<"u"}class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new bw("Invalid base64 string: "+c):c}})(e);return new Tn(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c})(e);return new Tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const KI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ho(i){if(Me(!!i,39018),typeof i=="string"){let e=0;const t=KI.exec(i);if(Me(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yn(i.seconds),nanos:yn(i.nanos)}}function yn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function fo(i){return typeof i=="string"?Tn.fromBase64String(i):Tn.fromUint8Array(i)}const _w="server_timestamp",ww="__type__",Tw="__previous_value__",Sw="__local_write_time__";function sm(i){return(i?.mapValue?.fields||{})[ww]?.stringValue===_w}function am(i){const e=i.mapValue.fields[Tw];return sm(e)?am(e):e}function Dh(i){const e=ho(i.mapValue.fields[Sw].timestampValue);return new Ye(e.seconds,e.nanos)}class QI{constructor(e,t,r,a,c,d,g,p,y,b,T){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=T}}const Mh="(default)";class bl{constructor(e,t){this.projectId=e,this.database=t||Mh}static empty(){return new bl("","")}get isDefaultDatabase(){return this.database===Mh}isEqual(e){return e instanceof bl&&e.projectId===this.projectId&&e.database===this.database}}function WI(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new se(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bl(i.options.projectId,e)}const S0="__type__",Ew="__max__",dl={mapValue:{fields:{__type__:{stringValue:Ew}}}},E0="__vector__",Lu="value",_g={nullValue:"NULL_VALUE"};function _l(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?sm(i)?4:Aw(i)?9007199254740991:om(i)?10:11:Ce(28295,{value:i})}function va(i,e){if(i===e)return!0;const t=_l(i);if(t!==_l(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Dh(i).isEqual(Dh(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=ho(a.timestampValue),g=ho(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,c){return fo(a.bytesValue).isEqual(fo(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,c){return yn(a.geoPointValue.latitude)===yn(c.geoPointValue.latitude)&&yn(a.geoPointValue.longitude)===yn(c.geoPointValue.longitude)})(i,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return yn(a.integerValue)===yn(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=yn(a.doubleValue),g=yn(c.doubleValue);return d===g?Rh(d)===Rh(g):isNaN(d)&&isNaN(g)}return!1})(i,e);case 9:return ku(i.arrayValue.values||[],e.arrayValue.values||[],va);case 10:case 11:return(function(a,c){const d=a.mapValue.fields||{},g=c.mapValue.fields||{};if(F1(d)!==F1(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!va(d[p],g[p])))return!1;return!0})(i,e);default:return Ce(52216,{left:i})}}function Vh(i,e){return(i.values||[]).find((t=>va(t,e)))!==void 0}function wl(i,e){if(i===e)return 0;const t=_l(i),r=_l(e);if(t!==r)return Ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(i.booleanValue,e.booleanValue);case 2:return(function(c,d){const g=yn(c.integerValue||c.doubleValue),p=yn(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(i,e);case 3:return G1(i.timestampValue,e.timestampValue);case 4:return G1(Dh(i),Dh(e));case 5:return My(i.stringValue,e.stringValue);case 6:return(function(c,d){const g=fo(c),p=fo(d);return g.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(c,d){const g=c.split("/"),p=d.split("/");for(let y=0;y<g.length&&y<p.length;y++){const b=Ke(g[y],p[y]);if(b!==0)return b}return Ke(g.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,d){const g=Ke(yn(c.latitude),yn(d.latitude));return g!==0?g:Ke(yn(c.longitude),yn(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return H1(i.arrayValue,e.arrayValue);case 10:return(function(c,d){const g=c.fields||{},p=d.fields||{},y=g[Lu]?.arrayValue,b=p[Lu]?.arrayValue,T=Ke(y?.values?.length||0,b?.values?.length||0);return T!==0?T:H1(y,b)})(i.mapValue,e.mapValue);case 11:return(function(c,d){if(c===dl.mapValue&&d===dl.mapValue)return 0;if(c===dl.mapValue)return 1;if(d===dl.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=d.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let T=0;T<p.length&&T<b.length;++T){const S=My(p[T],b[T]);if(S!==0)return S;const V=wl(g[p[T]],y[b[T]]);if(V!==0)return V}return Ke(p.length,b.length)})(i.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function G1(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ke(i,e);const t=ho(i),r=ho(e),a=Ke(t.seconds,r.seconds);return a!==0?a:Ke(t.nanos,r.nanos)}function H1(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const c=wl(t[a],r[a]);if(c)return c}return Ke(t.length,r.length)}function Pu(i){return Uy(i)}function Uy(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=ho(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return fo(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return be.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",a=!0;for(const c of t.values||[])a?a=!1:r+=",",r+=Uy(c);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const d of r)c?c=!1:a+=",",a+=`${d}:${Uy(t.fields[d])}`;return a+"}"})(i.mapValue):Ce(61005,{value:i})}function wg(i){switch(_l(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=am(i);return e?16+wg(e):16;case 5:return 2*i.stringValue.length;case 6:return fo(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,c)=>a+wg(c)),0)})(i.arrayValue);case 10:case 11:return(function(r){let a=0;return jl(r.fields,((c,d)=>{a+=c.length+wg(d)})),a})(i.mapValue);default:throw Ce(13486,{value:i})}}function bc(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Fy(i){return!!i&&"integerValue"in i}function Bh(i){return!!i&&"arrayValue"in i}function $1(i){return!!i&&"nullValue"in i}function K1(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Tg(i){return!!i&&"mapValue"in i}function om(i){return(i?.mapValue?.fields||{})[S0]?.stringValue===E0}function wh(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return jl(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=wh(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wh(i.arrayValue.values[t]);return e}return{...i}}function Aw(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Ew}const Iw={mapValue:{fields:{[S0]:{stringValue:E0},[Lu]:{arrayValue:{}}}}};function YI(i){return"nullValue"in i?_g:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?bc(bl.empty(),be.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?om(i)?Iw:{mapValue:{}}:Ce(35942,{value:i})}function XI(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?bc(bl.empty(),be.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?Iw:"mapValue"in i?om(i)?{mapValue:{}}:dl:Ce(61959,{value:i})}function Q1(i,e){const t=wl(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function W1(i,e){const t=wl(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class yr{constructor(e){this.value=e}static empty(){return new yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Tg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wh(t)}setAll(e){let t=ln.emptyPath(),r={},a=[];e.forEach(((d,g)=>{if(!t.isImmediateParentOf(g)){const p=this.getFieldsMap(t);this.applyChanges(p,r,a),r={},a=[],t=g.popLast()}d?r[g.lastSegment()]=wh(d):a.push(g.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,r,a)}delete(e){const t=this.field(e.popLast());Tg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return va(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Tg(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){jl(t,((a,c)=>e[a]=c));for(const a of r)delete e[a]}clone(){return new yr(wh(this.value))}}function Cw(i){const e=[];return jl(i.fields,((t,r)=>{const a=new ln([t]);if(Tg(r)){const c=Cw(r.mapValue).fields;if(c.length===0)e.push(a);else for(const d of c)e.push(a.child(d))}else e.push(a)})),new ji(e)}class on{constructor(e,t,r,a,c,d,g){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new on(e,0,Le.min(),Le.min(),Le.min(),yr.empty(),0)}static newFoundDocument(e,t,r,a){return new on(e,1,t,Le.min(),r,a,0)}static newNoDocument(e,t){return new on(e,2,t,Le.min(),Le.min(),yr.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Le.min(),Le.min(),yr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tl{constructor(e,t){this.position=e,this.inclusive=t}}function Y1(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const c=e[a],d=i.position[a];if(c.field.isKeyField()?r=be.comparator(be.fromName(d.referenceValue),t.key):r=wl(d,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function X1(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!va(i.position[t],e.position[t]))return!1;return!0}class zh{constructor(e,t="asc"){this.field=e,this.dir=t}}function JI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Rw{}class ft extends Rw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ZI(e,t,r):t==="array-contains"?new nC(e,r):t==="in"?new Vw(e,r):t==="not-in"?new rC(e,r):t==="array-contains-any"?new iC(e,r):new ft(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new eC(e,r):new tC(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wl(t,this.value)):t!==null&&_l(this.value)===_l(t)&&this.matchesComparison(wl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mt extends Rw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Mt(e,t)}matches(e){return Uu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Uu(i){return i.op==="and"}function qy(i){return i.op==="or"}function A0(i){return jw(i)&&Uu(i)}function jw(i){for(const e of i.filters)if(e instanceof Mt)return!1;return!0}function Gy(i){if(i instanceof ft)return i.field.canonicalString()+i.op.toString()+Pu(i.value);if(A0(i))return i.filters.map((e=>Gy(e))).join(",");{const e=i.filters.map((t=>Gy(t))).join(",");return`${i.op}(${e})`}}function kw(i,e){return i instanceof ft?(function(r,a){return a instanceof ft&&r.op===a.op&&r.field.isEqual(a.field)&&va(r.value,a.value)})(i,e):i instanceof Mt?(function(r,a){return a instanceof Mt&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((c,d,g)=>c&&kw(d,a.filters[g])),!0):!1})(i,e):void Ce(19439)}function Nw(i,e){const t=i.filters.concat(e);return Mt.create(t,i.op)}function Dw(i){return i instanceof ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${Pu(t.value)}`})(i):i instanceof Mt?(function(t){return t.op.toString()+" {"+t.getFilters().map(Dw).join(" ,")+"}"})(i):"Filter"}class ZI extends ft{constructor(e,t,r){super(e,t,r),this.key=be.fromName(r.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class eC extends ft{constructor(e,t){super(e,"in",t),this.keys=Mw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class tC extends ft{constructor(e,t){super(e,"not-in",t),this.keys=Mw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Mw(i,e){return(e.arrayValue?.values||[]).map((t=>be.fromName(t.referenceValue)))}class nC extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bh(t)&&Vh(t.arrayValue,this.value)}}class Vw extends ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vh(this.value.arrayValue,t)}}class rC extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vh(this.value.arrayValue,t)}}class iC extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Vh(this.value.arrayValue,r)))}}class sC{constructor(e,t=null,r=[],a=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function Hy(i,e=null,t=[],r=[],a=null,c=null,d=null){return new sC(i,e,t,r,a,c,d)}function _c(i){const e=_e(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Gy(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Fh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Pu(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Pu(r))).join(",")),e.Te=t}return e.Te}function Gh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!JI(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!kw(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!X1(i.startAt,e.startAt)&&X1(i.endAt,e.endAt)}function Og(i){return be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Lg(i,e){return i.filters.filter((t=>t instanceof ft&&t.field.isEqual(e)))}function J1(i,e,t){let r=_g,a=!0;for(const c of Lg(i,e)){let d=_g,g=!0;switch(c.op){case"<":case"<=":d=YI(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,g=!1;break;case"!=":case"not-in":d=_g}Q1({value:r,inclusive:a},{value:d,inclusive:g})<0&&(r=d,a=g)}if(t!==null){for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const d=t.position[c];Q1({value:r,inclusive:a},{value:d,inclusive:t.inclusive})<0&&(r=d,a=t.inclusive);break}}return{value:r,inclusive:a}}function Z1(i,e,t){let r=dl,a=!0;for(const c of Lg(i,e)){let d=dl,g=!0;switch(c.op){case">=":case">":d=XI(c.value),g=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,g=!1;break;case"!=":case"not-in":d=dl}W1({value:r,inclusive:a},{value:d,inclusive:g})>0&&(r=d,a=g)}if(t!==null){for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const d=t.position[c];W1({value:r,inclusive:a},{value:d,inclusive:t.inclusive})>0&&(r=d,a=t.inclusive);break}}return{value:r,inclusive:a}}class mo{constructor(e,t=null,r=[],a=[],c=null,d="F",g=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Bw(i,e,t,r,a,c,d,g){return new mo(i,e,t,r,a,c,d,g)}function Zu(i){return new mo(i)}function e_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function aC(i){return be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function I0(i){return i.collectionGroup!==null}function Iu(i){const e=_e(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Bt(ln.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new zh(c,r))})),t.has(ln.keyField().canonicalString())||e.Ie.push(new zh(ln.keyField(),r))}return e.Ie}function Jr(i){const e=_e(i);return e.Ee||(e.Ee=Ow(e,Iu(i))),e.Ee}function zw(i){const e=_e(i);return e.Re||(e.Re=Ow(e,i.explicitOrderBy)),e.Re}function Ow(i,e){if(i.limitType==="F")return Hy(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new zh(a.field,c)}));const t=i.endAt?new Tl(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Tl(i.startAt.position,i.startAt.inclusive):null;return Hy(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function $y(i,e){const t=i.filters.concat([e]);return new mo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function oC(i,e){const t=i.explicitOrderBy.concat([e]);return new mo(i.path,i.collectionGroup,t,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function Pg(i,e,t){return new mo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function lC(i,e){return new mo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,e,i.endAt)}function cC(i,e){return new mo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,e)}function Hh(i,e){return Gh(Jr(i),Jr(e))&&i.limitType===e.limitType}function Lw(i){return`${_c(Jr(i))}|lt:${i.limitType}`}function Su(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>Dw(a))).join(", ")}]`),Fh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Pu(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Pu(a))).join(",")),`Target(${r})`})(Jr(i))}; limitType=${i.limitType})`}function $h(i,e){return e.isFoundDocument()&&(function(r,a){const c=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):be.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(i,e)&&(function(r,a){for(const c of Iu(r))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(r,a){for(const c of r.filters)if(!c.matches(a))return!1;return!0})(i,e)&&(function(r,a){return!(r.startAt&&!(function(d,g,p){const y=Y1(d,g,p);return d.inclusive?y<=0:y<0})(r.startAt,Iu(r),a)||r.endAt&&!(function(d,g,p){const y=Y1(d,g,p);return d.inclusive?y>=0:y>0})(r.endAt,Iu(r),a))})(i,e)}function Pw(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Uw(i){return(e,t)=>{let r=!1;for(const a of Iu(i)){const c=uC(a,e,t);if(c!==0)return c;r=r||a.field.isKeyField()}return 0}}function uC(i,e,t){const r=i.field.isKeyField()?be.comparator(e.key,t.key):(function(c,d,g){const p=d.data.field(c),y=g.data.field(c);return p!==null&&y!==null?wl(p,y):Ce(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:i.dir})}}class po{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,c]of r)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){jl(this.inner,((t,r)=>{for(const[a,c]of r)e(a,c)}))}isEmpty(){return vw(this.inner)}size(){return this.innerSize}}const dC=new en(be.comparator);function ki(){return dC}const Fw=new en(be.comparator);function fh(...i){let e=Fw;for(const t of i)e=e.insert(t.key,t);return e}function qw(i){let e=Fw;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function pa(){return Th()}function Gw(){return Th()}function Th(){return new po((i=>i.toString()),((i,e)=>i.isEqual(e)))}const hC=new en(be.comparator),fC=new Bt(be.comparator);function Je(...i){let e=fC;for(const t of i)e=e.add(t);return e}const gC=new Bt(Ke);function C0(){return gC}function R0(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function Hw(i){return{integerValue:""+i}}function $w(i,e){return ow(e)?Hw(e):R0(i,e)}class lm{constructor(){this._=void 0}}function mC(i,e,t){return i instanceof Fu?(function(a,c){const d={fields:{[ww]:{stringValue:_w},[Sw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&sm(c)&&(c=am(c)),c&&(d.fields[Tw]=c),{mapValue:d}})(t,e):i instanceof wc?Qw(i,e):i instanceof Tc?Ww(i,e):(function(a,c){const d=Kw(a,c),g=t_(d)+t_(a.Ae);return Fy(d)&&Fy(a.Ae)?Hw(g):R0(a.serializer,g)})(i,e)}function pC(i,e,t){return i instanceof wc?Qw(i,e):i instanceof Tc?Ww(i,e):t}function Kw(i,e){return i instanceof qu?(function(r){return Fy(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class Fu extends lm{}class wc extends lm{constructor(e){super(),this.elements=e}}function Qw(i,e){const t=Yw(e);for(const r of i.elements)t.some((a=>va(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Tc extends lm{constructor(e){super(),this.elements=e}}function Ww(i,e){let t=Yw(e);for(const r of i.elements)t=t.filter((a=>!va(a,r)));return{arrayValue:{values:t}}}class qu extends lm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function t_(i){return yn(i.integerValue||i.doubleValue)}function Yw(i){return Bh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Kh{constructor(e,t){this.field=e,this.transform=t}}function yC(i,e){return i.field.isEqual(e.field)&&(function(r,a){return r instanceof wc&&a instanceof wc||r instanceof Tc&&a instanceof Tc?ku(r.elements,a.elements,va):r instanceof qu&&a instanceof qu?va(r.Ae,a.Ae):r instanceof Fu&&a instanceof Fu})(i.transform,e.transform)}class xC{constructor(e,t){this.version=e,this.transformResults=t}}class xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sg(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class cm{}function Xw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new td(i.key,xn.none()):new ed(i.key,i.data,xn.none());{const t=i.data,r=yr.empty();let a=new Bt(ln.comparator);for(let c of e.fields)if(!a.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?r.delete(c):r.set(c,d),a=a.add(c)}return new yo(i.key,r,new ji(a.toArray()),xn.none())}}function vC(i,e,t){i instanceof ed?(function(a,c,d){const g=a.value.clone(),p=r_(a.fieldTransforms,c,d.transformResults);g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(i,e,t):i instanceof yo?(function(a,c,d){if(!Sg(a.precondition,c))return void c.convertToUnknownDocument(d.version);const g=r_(a.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(Jw(a)),p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(i,e,t):(function(a,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Sh(i,e,t,r){return i instanceof ed?(function(c,d,g,p){if(!Sg(c.precondition,d))return g;const y=c.value.clone(),b=i_(c.fieldTransforms,p,d);return y.setAll(b),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(i,e,t,r):i instanceof yo?(function(c,d,g,p){if(!Sg(c.precondition,d))return g;const y=i_(c.fieldTransforms,p,d),b=d.data;return b.setAll(Jw(c)),b.setAll(y),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((T=>T.field)))})(i,e,t,r):(function(c,d,g){return Sg(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(i,e,t)}function bC(i,e){let t=null;for(const r of i.fieldTransforms){const a=e.data.field(r.field),c=Kw(r.transform,a||null);c!=null&&(t===null&&(t=yr.empty()),t.set(r.field,c))}return t||null}function n_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&ku(r,a,((c,d)=>yC(c,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ed extends cm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class yo extends cm{constructor(e,t,r,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Jw(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function r_(i,e,t){const r=new Map;Me(i.length===t.length,32656,{Ve:t.length,de:i.length});for(let a=0;a<t.length;a++){const c=i[a],d=c.transform,g=e.data.field(c.field);r.set(c.field,pC(d,g,t[a]))}return r}function i_(i,e,t){const r=new Map;for(const a of i){const c=a.transform,d=t.data.field(a.field);r.set(a.field,mC(c,d,e))}return r}class td extends cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class j0 extends cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class k0{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&vC(c,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Sh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Sh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Gw();return this.mutations.forEach((a=>{const c=e.get(a.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=t.has(a.key)?null:g;const p=Xw(d,g);p!==null&&r.set(a.key,p),d.isValidDocument()||d.convertToNoDocument(Le.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Je())}isEqual(e){return this.batchId===e.batchId&&ku(this.mutations,e.mutations,((t,r)=>n_(t,r)))&&ku(this.baseMutations,e.baseMutations,((t,r)=>n_(t,r)))}}class N0{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Me(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return hC})();const c=e.mutations;for(let d=0;d<c.length;d++)a=a.insert(c[d].key,r[d].version);return new N0(e,t,r,a)}}class D0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Zw{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}class _C{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qn,pt;function eT(i){switch(i){case Q.OK:return Ce(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return Ce(15467,{code:i})}}function tT(i){if(i===void 0)return On("GRPC error has no .code"),Q.UNKNOWN;switch(i){case Qn.OK:return Q.OK;case Qn.CANCELLED:return Q.CANCELLED;case Qn.UNKNOWN:return Q.UNKNOWN;case Qn.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Qn.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Qn.INTERNAL:return Q.INTERNAL;case Qn.UNAVAILABLE:return Q.UNAVAILABLE;case Qn.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Qn.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Qn.NOT_FOUND:return Q.NOT_FOUND;case Qn.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Qn.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Qn.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Qn.ABORTED:return Q.ABORTED;case Qn.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Qn.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Qn.DATA_LOSS:return Q.DATA_LOSS;default:return Ce(39323,{code:i})}}(pt=Qn||(Qn={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";let Ky=null;function wC(i){if(Ky)throw new Error("a TestingHooksSpi instance is already set");Ky=i}function nT(){return new TextEncoder}const TC=new pl([4294967295,4294967295],0);function s_(i){const e=nT().encode(i),t=new q2;return t.update(e),new Uint8Array(t.digest())}function a_(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new pl([t,r],0),new pl([a,c],0)]}class M0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gh(`Invalid padding: ${t}`);if(r<0)throw new gh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=pl.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(pl.fromNumber(r)));return a.compare(TC)===1&&(a=new pl([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=s_(e),[r,a]=a_(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,a,c);if(!this.we(d))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new M0(c,a,t);return r.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const t=s_(e),[r,a]=a_(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,a,c);this.be(d)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class gh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qh{constructor(e,t,r,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Wh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qh(Le.min(),a,new en(Ke),ki(),Je())}}class Wh{constructor(e,t,r,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Wh(r,t,Je(),Je(),Je())}}class Eg{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class rT{constructor(e,t){this.targetId=e,this.Ce=t}}class iT{constructor(e,t,r=Tn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class o_{constructor(){this.ve=0,this.Fe=l_(),this.Me=Tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),t=Je(),r=Je();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Ce(38017,{changeType:c})}})),new Wh(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=l_()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Me(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class SC{constructor(e){this.Ge=e,this.ze=new Map,this.je=ki(),this.He=rg(),this.Je=rg(),this.Ze=new en(Ke)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const c=a.target;if(Og(c))if(r===0){const d=new be(c.path);this.et(t,d,on.newNoDocument(d,Le.min()))}else Me(r===1,20013,{expectedCount:r});else{const d=this._t(t);if(d!==r){const g=this.ut(e),p=g?this.ct(g,e,d):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}Ky?.lt((function(b,T,S,V,q){const W={localCacheCount:b,existenceFilterCount:T.count,databaseId:S.database,projectId:S.projectId},L=T.unchangedNames;return L&&(W.bloomFilter={applied:q===0,hashCount:L?.hashCount??0,bitmapLength:L?.bits?.bitmap?.length??0,padding:L?.bits?.padding??0,mightContain:ce=>V?.mightContain(ce)??!1}),W})(d,e.Ce,this.Ge.ht(),g,p))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:c=0}=t;let d,g;try{d=fo(r).toUint8Array()}catch(p){if(p instanceof bw)return Vi("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new M0(d,a,c)}catch(p){return Vi(p instanceof gh?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(t,c,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const g=this.ot(d);if(g){if(c.current&&Og(g.target)){const p=new be(g.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,on.newNoDocument(p,e))}c.Be&&(t.set(d,c.ke()),c.Ke())}}));let r=Je();this.Je.forEach(((c,d)=>{let g=!0;d.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const a=new Qh(e,t,this.Ze,this.je,r);return this.je=ki(),this.He=rg(),this.Je=rg(),this.Ze=new en(Ke),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new o_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Bt(Ke),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Bt(Ke),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new o_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function rg(){return new en(be.comparator)}function l_(){return new en(be.comparator)}const EC={asc:"ASCENDING",desc:"DESCENDING"},AC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IC={and:"AND",or:"OR"};class CC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qy(i,e){return i.useProto3Json||Fh(e)?e:{value:e}}function Gu(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function RC(i,e){return Gu(i,e.toTimestamp())}function Ln(i){return Me(!!i,49232),Le.fromTimestamp((function(t){const r=ho(t);return new Ye(r.seconds,r.nanos)})(i))}function V0(i,e){return Wy(i,e).canonicalString()}function Wy(i,e){const t=(function(a){return new at(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function aT(i){const e=at.fromString(i);return Me(mT(e),10190,{key:e.toString()}),e}function Oh(i,e){return V0(i.databaseId,e.path)}function xa(i,e){const t=aT(e);if(t.get(1)!==i.databaseId.projectId)throw new se(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new se(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new be(cT(t))}function oT(i,e){return V0(i.databaseId,e)}function lT(i){const e=aT(i);return e.length===4?at.emptyPath():cT(e)}function Yy(i){return new at(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function cT(i){return Me(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function c_(i,e,t){return{name:Oh(i,e),fields:t.value.mapValue.fields}}function um(i,e,t){const r=xa(i,e.name),a=Ln(e.updateTime),c=e.createTime?Ln(e.createTime):Le.min(),d=new yr({mapValue:{fields:e.fields}}),g=on.newFoundDocument(r,a,c,d);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function jC(i,e){return"found"in e?(function(r,a){Me(!!a.found,43571),a.found.name,a.found.updateTime;const c=xa(r,a.found.name),d=Ln(a.found.updateTime),g=a.found.createTime?Ln(a.found.createTime):Le.min(),p=new yr({mapValue:{fields:a.found.fields}});return on.newFoundDocument(c,d,g,p)})(i,e):"missing"in e?(function(r,a){Me(!!a.missing,3894),Me(!!a.readTime,22933);const c=xa(r,a.missing),d=Ln(a.readTime);return on.newNoDocument(c,d)})(i,e):Ce(7234,{result:e})}function kC(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ce(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(y,b){return y.useProto3Json?(Me(b===void 0||typeof b=="string",58123),Tn.fromBase64String(b||"")):(Me(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Tn.fromUint8Array(b||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(y){const b=y.code===void 0?Q.UNKNOWN:tT(y.code);return new se(b,y.message||"")})(d);t=new iT(r,a,c,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=xa(i,r.document.name),c=Ln(r.document.updateTime),d=r.document.createTime?Ln(r.document.createTime):Le.min(),g=new yr({mapValue:{fields:r.document.fields}}),p=on.newFoundDocument(a,c,d,g),y=r.targetIds||[],b=r.removedTargetIds||[];t=new Eg(y,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=xa(i,r.document),c=r.readTime?Ln(r.readTime):Le.min(),d=on.newNoDocument(a,c),g=r.removedTargetIds||[];t=new Eg([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=xa(i,r.document),c=r.removedTargetIds||[];t=new Eg([],c,a,null)}else{if(!("filter"in e))return Ce(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:c}=r,d=new _C(a,c),g=r.targetId;t=new rT(g,d)}}return t}function Lh(i,e){let t;if(e instanceof ed)t={update:c_(i,e.key,e.value)};else if(e instanceof td)t={delete:Oh(i,e.key)};else if(e instanceof yo)t={update:c_(i,e.key,e.data),updateMask:zC(e.fieldMask)};else{if(!(e instanceof j0))return Ce(16599,{dt:e.type});t={verify:Oh(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(c,d){const g=d.transform;if(g instanceof Fu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof wc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Tc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof qu)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Ce(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:RC(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ce(27497)})(i,e.precondition)),t}function Xy(i,e){const t=e.currentDocument?(function(c){return c.updateTime!==void 0?xn.updateTime(Ln(c.updateTime)):c.exists!==void 0?xn.exists(c.exists):xn.none()})(e.currentDocument):xn.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(d,g){let p=null;if("setToServerValue"in g)Me(g.setToServerValue==="REQUEST_TIME",16630,{proto:g}),p=new Fu;else if("appendMissingElements"in g){const b=g.appendMissingElements.values||[];p=new wc(b)}else if("removeAllFromArray"in g){const b=g.removeAllFromArray.values||[];p=new Tc(b)}else"increment"in g?p=new qu(d,g.increment):Ce(16584,{proto:g});const y=ln.fromServerFormat(g.fieldPath);return new Kh(y,p)})(i,a))):[];if(e.update){e.update.name;const a=xa(i,e.update.name),c=new yr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=(function(p){const y=p.fieldPaths||[];return new ji(y.map((b=>ln.fromServerFormat(b))))})(e.updateMask);return new yo(a,c,d,t,r)}return new ed(a,c,t,r)}if(e.delete){const a=xa(i,e.delete);return new td(a,t)}if(e.verify){const a=xa(i,e.verify);return new j0(a,t)}return Ce(1463,{proto:e})}function NC(i,e){return i&&i.length>0?(Me(e!==void 0,14353),i.map((t=>(function(a,c){let d=a.updateTime?Ln(a.updateTime):Ln(c);return d.isEqual(Le.min())&&(d=Ln(c)),new xC(d,a.transformResults||[])})(t,e)))):[]}function uT(i,e){return{documents:[oT(i,e.path)]}}function dm(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=oT(i,a);const c=(function(y){if(y.length!==0)return gT(Mt.create(y,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((b=>(function(S){return{field:cl(S.field),direction:MC(S.dir)}})(b)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=Qy(i,e.limit);return g!==null&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function dT(i,e,t,r){const{ft:a,parent:c}=dm(i,e),d={},g=[];let p=0;return t.forEach((y=>{const b=r?y.alias:"aggregate_"+p++;d[b]=y.alias,y.aggregateType==="count"?g.push({alias:b,count:{}}):y.aggregateType==="avg"?g.push({alias:b,avg:{field:cl(y.fieldPath)}}):y.aggregateType==="sum"&&g.push({alias:b,sum:{field:cl(y.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:g,structuredQuery:a.structuredQuery},parent:a.parent},gt:d,parent:c}}function hT(i){let e=lT(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Me(r===1,65062);const b=t.from[0];b.allDescendants?a=b.collectionId:e=e.child(b.collectionId)}let c=[];t.where&&(c=(function(T){const S=fT(T);return S instanceof Mt&&A0(S)?S.getFilters():[S]})(t.where));let d=[];t.orderBy&&(d=(function(T){return T.map((S=>(function(q){return new zh(Eu(q.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(S)))})(t.orderBy));let g=null;t.limit&&(g=(function(T){let S;return S=typeof T=="object"?T.value:T,Fh(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,V=T.values||[];return new Tl(V,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const S=!T.before,V=T.values||[];return new Tl(V,S)})(t.endAt)),Bw(e,a,d,c,g,"F",p,y)}function DC(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fT(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Eu(t.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Eu(t.unaryFilter.field);return ft.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Eu(t.unaryFilter.field);return ft.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Eu(t.unaryFilter.field);return ft.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(i):i.fieldFilter!==void 0?(function(t){return ft.create(Eu(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Mt.create(t.compositeFilter.filters.map((r=>fT(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(i):Ce(30097,{filter:i})}function MC(i){return EC[i]}function VC(i){return AC[i]}function BC(i){return IC[i]}function cl(i){return{fieldPath:i.canonicalString()}}function Eu(i){return ln.fromServerFormat(i.fieldPath)}function gT(i){return i instanceof ft?(function(t){if(t.op==="=="){if(K1(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NAN"}};if($1(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(K1(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NOT_NAN"}};if($1(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(t.field),op:VC(t.op),value:t.value}}})(i):i instanceof Mt?(function(t){const r=t.getFilters().map((a=>gT(a)));return r.length===1?r[0]:{compositeFilter:{op:BC(t.op),filters:r}}})(i):Ce(54877,{filter:i})}function zC(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function mT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function pT(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class lo{constructor(e,t,r,a,c=Le.min(),d=Le.min(),g=Tn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new lo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class yT{constructor(e){this.yt=e}}function OC(i,e){let t;if(e.document)t=um(i.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=be.fromSegments(e.noDocument.path),a=Ec(e.noDocument.readTime);t=on.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ce(56709);{const r=be.fromSegments(e.unknownDocument.path),a=Ec(e.unknownDocument.version);t=on.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const c=new Ye(a[0],a[1]);return Le.fromTimestamp(c)})(e.readTime)),t}function u_(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ug(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(c,d){return{name:Oh(c,d.key),fields:d.data.value.mapValue.fields,updateTime:Gu(c,d.version.toTimestamp()),createTime:Gu(c,d.createTime.toTimestamp())}})(i.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Sc(e.version)};else{if(!e.isUnknownDocument())return Ce(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Sc(e.version)}}return r}function Ug(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Sc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ec(i){const e=new Ye(i.seconds,i.nanoseconds);return Le.fromTimestamp(e)}function fc(i,e){const t=(e.baseMutations||[]).map((c=>Xy(i.yt,c)));for(let c=0;c<e.mutations.length-1;++c){const d=e.mutations[c];if(c+1<e.mutations.length&&e.mutations[c+1].transform!==void 0){const g=e.mutations[c+1];d.updateTransforms=g.transform.fieldTransforms,e.mutations.splice(c+1,1),++c}}const r=e.mutations.map((c=>Xy(i.yt,c))),a=Ye.fromMillis(e.localWriteTimeMs);return new k0(e.batchId,a,t,r)}function mh(i){const e=Ec(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?Ec(i.lastLimboFreeSnapshotVersion):Le.min();let r;return r=(function(c){return c.documents!==void 0})(i.query)?(function(c){const d=c.documents.length;return Me(d===1,1966,{count:d}),Jr(Zu(lT(c.documents[0])))})(i.query):(function(c){return Jr(hT(c))})(i.query),new lo(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,Tn.fromBase64String(i.resumeToken))}function xT(i,e){const t=Sc(e.snapshotVersion),r=Sc(e.lastLimboFreeSnapshotVersion);let a;a=Og(e.target)?uT(i.yt,e.target):dm(i.yt,e.target).ft;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_c(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function hm(i){const e=hT({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Pg(e,e.limit,"L"):e}function uy(i,e){return new D0(e.largestBatchId,Xy(i.yt,e.overlayMutation))}function d_(i,e){const t=e.path.lastSegment();return[i,Xr(e.path.popLast()),t]}function h_(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:Sc(r.readTime),documentKey:Xr(r.documentKey.path),largestBatchId:r.largestBatchId}}class LC{getBundleMetadata(e,t){return f_(e).get(t).next((r=>{if(r)return(function(c){return{id:c.bundleId,createTime:Ec(c.createTime),version:c.version}})(r)}))}saveBundleMetadata(e,t){return f_(e).put((function(a){return{bundleId:a.id,createTime:Sc(Ln(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return g_(e).get(t).next((r=>{if(r)return(function(c){return{name:c.name,query:hm(c.bundledQuery),readTime:Ec(c.readTime)}})(r)}))}saveNamedQuery(e,t){return g_(e).put((function(a){return{name:a.name,readTime:Sc(Ln(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function f_(i){return sr(i,nm)}function g_(i){return sr(i,rm)}class fm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new fm(e,r)}getOverlay(e,t){return rh(e).get(d_(this.userId,t)).next((r=>r?uy(this.serializer,r):null))}getOverlays(e,t){const r=pa();return G.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&r.set(a,c)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((c,d)=>{const g=new D0(t,d);a.push(this.bt(e,g))})),G.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((d=>a.add(Xr(d.getCollectionPath()))));const c=[];return a.forEach((d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);c.push(rh(e).X(Ly,g))})),G.waitFor(c)}getOverlaysForCollection(e,t,r){const a=pa(),c=Xr(t),d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return rh(e).H(Ly,d).next((g=>{for(const p of g){const y=uy(this.serializer,p);a.set(y.getKey(),y)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const c=pa();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rh(e).ee({index:fw,range:g},((p,y,b)=>{const T=uy(this.serializer,y);c.size()<a||T.largestBatchId===d?(c.set(T.getKey(),T),d=T.largestBatchId):b.done()})).next((()=>c))}bt(e,t){return rh(e).put((function(a,c,d){const[g,p,y]=d_(c,d.mutation.key);return{userId:c,collectionPath:p,documentId:y,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:Lh(a.yt,d.mutation)}})(this.serializer,this.userId,t))}}function rh(i){return sr(i,im)}class PC{St(e){return sr(e,w0)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t?.value;return r?Tn.fromUint8Array(r):Tn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class gc{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(yn(e.integerValue));else if("doubleValue"in e){const r=yn(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Rh(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ho(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(fo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Aw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):om(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):Ce(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=Lu,c=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(yn(c)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),be.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}gc.Wt=new gc;const yu=255;function UC(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function m_(i){const e=64-(function(r){let a=0;for(let c=0;c<8;++c){const d=UC(255&r[c]);if(a+=d,d!==8)break}return a})(i);return Math.ceil(e/8)}class FC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=m_(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=m_(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(yu),this.sn(255)}_n(){this.an(yu),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(c){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,c,!1),new Uint8Array(d.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===yu?(this.sn(yu),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===yu?(this.an(yu),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class qC{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class GC{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ih{constructor(){this.cn=new FC,this.ascending=new qC(this.cn),this.descending=new GC(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class mc{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new mc(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:Ag(this.Tn),directionalValue:Ag(this.In),orderedDocumentKey:Ag(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function al(i,e){let t=i.hn-e.hn;return t!==0?t:(t=p_(i.Tn,e.Tn),t!==0?t:(t=p_(i.In,e.In),t!==0?t:be.comparator(i.Pn,e.Pn)))}function p_(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function Ag(i){return k2()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(i):i}function y_(i){return typeof i!="string"?i:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(i)}class x_{constructor(e){this.Vn=new Bt(((t,r)=>ln.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Me(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=By(e);if(t!==void 0&&!this.pn(t))return!1;const r=uc(e);let a=new Set,c=0,d=0;for(;c<r.length&&this.pn(r[c]);++c)a=a.add(r[c].fieldPath.canonicalString());if(c===r.length)return!0;if(this.Vn.size>0){const g=this.Vn.getIterator().getNext();if(!a.has(g.field.canonicalString())){const p=r[c];if(!this.yn(g,p)||!this.wn(this.dn[d++],p))return!1}++c}for(;c<r.length;++c){const g=r[c];if(d>=this.dn.length||!this.wn(this.dn[d++],g))return!1}return!0}bn(){if(this.fn)return null;let e=new Bt(ln.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new yc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new yc(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new yc(r.field,r.dir==="asc"?0:1)));return new Du(Du.UNKNOWN_ID,this.collectionId,t,Mu.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function vT(i){if(Me(i instanceof ft||i instanceof Mt,20012),i instanceof ft){if(i instanceof Vw){const t=i.value.arrayValue?.values?.map((r=>ft.create(i.field,"==",r)))||[];return Mt.create(t,"or")}return i}const e=i.filters.map((t=>vT(t)));return Mt.create(e,i.op)}function HC(i){if(i.getFilters().length===0)return[];const e=e0(vT(i));return Me(bT(e),7391),Jy(e)||Zy(e)?[e]:e.getFilters()}function Jy(i){return i instanceof ft}function Zy(i){return i instanceof Mt&&A0(i)}function bT(i){return Jy(i)||Zy(i)||(function(t){if(t instanceof Mt&&qy(t)){for(const r of t.getFilters())if(!Jy(r)&&!Zy(r))return!1;return!0}return!1})(i)}function e0(i){if(Me(i instanceof ft||i instanceof Mt,34018),i instanceof ft)return i;if(i.filters.length===1)return e0(i.filters[0]);const e=i.filters.map((r=>e0(r)));let t=Mt.create(e,i.op);return t=Fg(t),bT(t)?t:(Me(t instanceof Mt,64498),Me(Uu(t),40251),Me(t.filters.length>1,57927),t.filters.reduce(((r,a)=>B0(r,a))))}function B0(i,e){let t;return Me(i instanceof ft||i instanceof Mt,38388),Me(e instanceof ft||e instanceof Mt,25473),t=i instanceof ft?e instanceof ft?(function(a,c){return Mt.create([a,c],"and")})(i,e):v_(i,e):e instanceof ft?v_(e,i):(function(a,c){if(Me(a.filters.length>0&&c.filters.length>0,48005),Uu(a)&&Uu(c))return Nw(a,c.getFilters());const d=qy(a)?a:c,g=qy(a)?c:a,p=d.filters.map((y=>B0(y,g)));return Mt.create(p,"or")})(i,e),Fg(t)}function v_(i,e){if(Uu(e))return Nw(e,i.getFilters());{const t=e.filters.map((r=>B0(i,r)));return Mt.create(t,"or")}}function Fg(i){if(Me(i instanceof ft||i instanceof Mt,11850),i instanceof ft)return i;const e=i.getFilters();if(e.length===1)return Fg(e[0]);if(jw(i))return i;const t=e.map((a=>Fg(a))),r=[];return t.forEach((a=>{a instanceof ft?r.push(a):a instanceof Mt&&(a.op===i.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:Mt.create(r,i.op)}class $C{constructor(){this.Sn=new z0}addToCollectionParentIndex(e,t){return this.Sn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(ts.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(ts.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class z0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Bt(at.comparator),c=!a.has(r);return this.index[t]=a.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Bt(at.comparator)).toArray()}}const b_="IndexedDbIndexManager",ig=new Uint8Array(0);class KC{constructor(e,t){this.databaseId=t,this.Dn=new z0,this.Cn=new po((r=>_c(r)),((r,a)=>Gh(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const c={collectionId:r,parent:Xr(a)};return __(e).put(c)}return G.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[J2(t),""],!1,!0);return __(e).H(a).next((c=>{for(const d of c){if(d.collectionId!==t)break;r.push(ma(d.parent))}return r}))}addFieldIndex(e,t){const r=sh(e),a=(function(g){return{indexId:g.indexId,collectionGroup:g.collectionGroup,fields:g.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const c=r.add(a);if(t.indexState){const d=vu(e);return c.next((g=>{d.put(h_(g,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return c.next()}deleteFieldIndex(e,t){const r=sh(e),a=vu(e),c=xu(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=sh(e),r=xu(e),a=vu(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return G.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const c=new x_(r).bn();if(c!=null)return this.addFieldIndex(e,c)}}))))}getDocumentsMatchingTarget(e,t){const r=xu(e);let a=!0;const c=new Map;return G.forEach(this.vn(t),(d=>this.Fn(e,d).next((g=>{a&&(a=!!g),c.set(d,g)})))).next((()=>{if(a){let d=Je();const g=[];return G.forEach(c,((p,y)=>{de(b_,`Using index ${(function(ue){return`id=${ue.indexId}|cg=${ue.collectionGroup}|f=${ue.fields.map((me=>`${me.fieldPath}:${me.kind}`)).join(",")}`})(p)} to execute ${_c(t)}`);const b=(function(ue,me){const Ve=By(me);if(Ve===void 0)return null;for(const je of Lg(ue,Ve.fieldPath))switch(je.op){case"array-contains-any":return je.value.arrayValue.values||[];case"array-contains":return[je.value]}return null})(y,p),T=(function(ue,me){const Ve=new Map;for(const je of uc(me))for(const D of Lg(ue,je.fieldPath))switch(D.op){case"==":case"in":Ve.set(je.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return Ve.set(je.fieldPath.canonicalString(),D.value),Array.from(Ve.values())}return null})(y,p),S=(function(ue,me){const Ve=[];let je=!0;for(const D of uc(me)){const C=D.kind===0?J1(ue,D.fieldPath,ue.startAt):Z1(ue,D.fieldPath,ue.startAt);Ve.push(C.value),je&&(je=C.inclusive)}return new Tl(Ve,je)})(y,p),V=(function(ue,me){const Ve=[];let je=!0;for(const D of uc(me)){const C=D.kind===0?Z1(ue,D.fieldPath,ue.endAt):J1(ue,D.fieldPath,ue.endAt);Ve.push(C.value),je&&(je=C.inclusive)}return new Tl(Ve,je)})(y,p),q=this.Mn(p,y,S),W=this.Mn(p,y,V),L=this.xn(p,y,T),ce=this.On(p.indexId,b,q,S.inclusive,W,V.inclusive,L);return G.forEach(ce,(oe=>r.Z(oe,t.limit).next((ue=>{ue.forEach((me=>{const Ve=be.fromSegments(me.documentKey);d.has(Ve)||(d=d.add(Ve),g.push(Ve))}))}))))})).next((()=>g))}return G.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=HC(Mt.create(e.filters,"and")).map((r=>Hy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,c,d,g){const p=(t!=null?t.length:1)*Math.max(r.length,c.length),y=p/(t!=null?t.length:1),b=[];for(let T=0;T<p;++T){const S=t?this.Nn(t[T/y]):ig,V=this.Bn(e,S,r[T%y],a),q=this.Ln(e,S,c[T%y],d),W=g.map((L=>this.Bn(e,S,L,!0)));b.push(...this.createRange(V,q,W))}return b}Bn(e,t,r,a){const c=new mc(e,be.empty(),t,r);return a?c:c.En()}Ln(e,t,r,a){const c=new mc(e,be.empty(),t,r);return a?c.En():c}Fn(e,t){const r=new x_(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((c=>{let d=null;for(const g of c)r.gn(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d}))}getIndexType(e,t){let r=2;const a=this.vn(t);return G.forEach(a,(c=>this.Fn(e,c).next((d=>{d?r!==0&&d.fields.length<(function(p){let y=new Bt(ln.comparator),b=!1;for(const T of p.filters)for(const S of T.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?b=!0:y=y.add(S.field));for(const T of p.orderBy)T.field.isKeyField()||(y=y.add(T.field));return y.size+(b?1:0)})(c)&&(r=1):r=0})))).next((()=>(function(d){return d.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new ih;for(const a of uc(e)){const c=t.data.field(a.fieldPath);if(c==null)return null;const d=r.ln(a.kind);gc.Wt.Dt(c,d)}return r.un()}Nn(e){const t=new ih;return gc.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new ih;return gc.Wt.Dt(bc(this.databaseId,t),r.ln((function(c){const d=uc(c);return d.length===0?0:d[d.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new ih);let c=0;for(const d of uc(e)){const g=r[c++];for(const p of a)if(this.qn(t,d.fieldPath)&&Bh(g))a=this.Un(a,d,g);else{const y=p.ln(d.kind);gc.Wt.Dt(g,y)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],c=[];for(const d of r.arrayValue.values||[])for(const g of a){const p=new ih;p.seed(g.un()),gc.Wt.Dt(d,p.ln(t.kind)),c.push(p)}return c}qn(e,t){return!!e.filters.find((r=>r instanceof ft&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=sh(e),a=vu(e);return(t?r.H(Oy,IDBKeyRange.bound(t,t)):r.H()).next((c=>{const d=[];return G.forEach(c,(g=>a.get([g.indexId,this.uid]).next((p=>{d.push((function(b,T){const S=T?new Mu(T.sequenceNumber,new ts(Ec(T.readTime),new be(ma(T.documentKey)),T.largestBatchId)):Mu.empty(),V=b.fields.map((([q,W])=>new yc(ln.fromServerFormat(q),W)));return new Du(b.indexId,b.collectionGroup,V,S)})(g,p))})))).next((()=>d))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const c=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return c!==0?c:Ke(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=sh(e),c=vu(e);return this.Wn(e).next((d=>a.H(Oy,IDBKeyRange.bound(t,t)).next((g=>G.forEach(g,(p=>c.put(h_(p.indexId,this.uid,d,r))))))))}updateIndexEntries(e,t){const r=new Map;return G.forEach(t,((a,c)=>{const d=r.get(a.collectionGroup);return(d?G.resolve(d):this.getFieldIndexes(e,a.collectionGroup)).next((g=>(r.set(a.collectionGroup,g),G.forEach(g,(p=>this.Qn(e,a,p).next((y=>{const b=this.Gn(c,p);return y.isEqual(b)?G.resolve():this.zn(e,c,p,y,b)})))))))}))}jn(e,t,r,a){return xu(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return xu(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=xu(e);let c=new Bt(al);return a.ee({index:hw,range:IDBKeyRange.only([r.indexId,this.uid,Ag(this.Kn(r,t))])},((d,g)=>{c=c.add(new mc(r.indexId,t,y_(g.arrayValue),y_(g.directionalValue)))})).next((()=>c))}Gn(e,t){let r=new Bt(al);const a=this.kn(t,e);if(a==null)return r;const c=By(t);if(c!=null){const d=e.data.field(c.fieldPath);if(Bh(d))for(const g of d.arrayValue.values||[])r=r.add(new mc(t.indexId,e.key,this.Nn(g),a))}else r=r.add(new mc(t.indexId,e.key,ig,a));return r}zn(e,t,r,a,c){de(b_,"Updating index entries for document '%s'",t.key);const d=[];return(function(p,y,b,T,S){const V=p.getIterator(),q=y.getIterator();let W=pu(V),L=pu(q);for(;W||L;){let ce=!1,oe=!1;if(W&&L){const ue=b(W,L);ue<0?oe=!0:ue>0&&(ce=!0)}else W!=null?oe=!0:ce=!0;ce?(T(L),L=pu(q)):oe?(S(W),W=pu(V)):(W=pu(V),L=pu(q))}})(a,c,al,(g=>{d.push(this.jn(e,t,r,g))}),(g=>{d.push(this.Hn(e,t,r,g))})),G.waitFor(d)}Wn(e){let t=1;return vu(e).ee({index:dw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,c)=>{c.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((d,g)=>al(d,g))).filter(((d,g,p)=>!g||al(d,p[g-1])!==0));const a=[];a.push(e);for(const d of r){const g=al(d,e),p=al(d,t);if(g===0)a[0]=e.En();else if(g>0&&p<0)a.push(d),a.push(d.En());else if(p>0)break}a.push(t);const c=[];for(let d=0;d<a.length;d+=2){if(this.Jn(a[d],a[d+1]))return[];const g=a[d].An(this.uid,ig,be.empty()),p=a[d+1].An(this.uid,ig,be.empty());c.push(IDBKeyRange.bound(g,p))}return c}Jn(e,t){return al(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(w_)}getMinOffset(e,t){return G.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||Ce(44426))))).next(w_)}}function __(i){return sr(i,Nh)}function xu(i){return sr(i,_h)}function sh(i){return sr(i,_0)}function vu(i){return sr(i,bh)}function w_(i){Me(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const a=i[r].indexState.offset;x0(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new ts(e.readTime,e.documentKey,t)}const T_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_T=41943040;class Yr{static withCacheSize(e){return new Yr(e,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function wT(i,e,t){const r=i.store(qs),a=i.store(Vu),c=[],d=IDBKeyRange.only(t.batchId);let g=0;const p=r.ee({range:d},((b,T,S)=>(g++,S.delete())));c.push(p.next((()=>{Me(g===1,47070,{batchId:t.batchId})})));const y=[];for(const b of t.mutations){const T=lw(e,b.key.path,t.batchId);c.push(a.delete(T)),y.push(b.key)}return G.waitFor(c).next((()=>y))}function qg(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Ce(14731);e=i.noDocument}return JSON.stringify(e).length}Yr.DEFAULT_COLLECTION_PERCENTILE=10,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yr.DEFAULT=new Yr(_T,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yr.DISABLED=new Yr(-1,0,0);class gm{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){Me(e.uid!=="",64387);const c=e.isAuthenticated()?e.uid:"";return new gm(c,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ol(e).ee({index:pc,range:r},((a,c,d)=>{t=!1,d.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const c=Au(e),d=ol(e);return d.add({}).next((g=>{Me(typeof g=="number",49019);const p=new k0(g,t,r,a),y=(function(V,q,W){const L=W.baseMutations.map((oe=>Lh(V.yt,oe))),ce=W.mutations.map((oe=>Lh(V.yt,oe)));return{userId:q,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:L,mutations:ce}})(this.serializer,this.userId,p),b=[];let T=new Bt(((S,V)=>Ke(S.canonicalString(),V.canonicalString())));for(const S of a){const V=lw(this.userId,S.key.path,g);T=T.add(S.key.path.popLast()),b.push(d.put(y)),b.push(c.put(V,wI))}return T.forEach((S=>{b.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Zn[g]=p.keys()})),G.waitFor(b).next((()=>p))}))}lookupMutationBatch(e,t){return ol(e).get(t).next((r=>r?(Me(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),fc(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?G.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return ol(e).ee({index:pc,range:a},((d,g,p)=>{g.userId===this.userId&&(Me(g.batchId>=r,47524,{Yn:r}),c=fc(this.serializer,g)),p.done()})).next((()=>c))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=yl;return ol(e).ee({index:pc,range:t,reverse:!0},((a,c,d)=>{r=c.batchId,d.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,yl],[this.userId,Number.POSITIVE_INFINITY]);return ol(e).H(pc,t).next((r=>r.map((a=>fc(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=vg(this.userId,t.path),a=IDBKeyRange.lowerBound(r),c=[];return Au(e).ee({range:a},((d,g,p)=>{const[y,b,T]=d,S=ma(b);if(y===this.userId&&t.path.isEqual(S))return ol(e).get(T).next((V=>{if(!V)throw Ce(61480,{er:d,batchId:T});Me(V.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:V.userId,batchId:T}),c.push(fc(this.serializer,V))}));p.done()})).next((()=>c))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(Ke);const a=[];return t.forEach((c=>{const d=vg(this.userId,c.path),g=IDBKeyRange.lowerBound(d),p=Au(e).ee({range:g},((y,b,T)=>{const[S,V,q]=y,W=ma(V);S===this.userId&&c.path.isEqual(W)?r=r.add(q):T.done()}));a.push(p)})),G.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,c=vg(this.userId,r),d=IDBKeyRange.lowerBound(c);let g=new Bt(Ke);return Au(e).ee({range:d},((p,y,b)=>{const[T,S,V]=p,q=ma(S);T===this.userId&&r.isPrefixOf(q)?q.length===a&&(g=g.add(V)):b.done()})).next((()=>this.tr(e,g)))}tr(e,t){const r=[],a=[];return t.forEach((c=>{a.push(ol(e).get(c).next((d=>{if(d===null)throw Ce(35274,{batchId:c});Me(d.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:d.userId,batchId:c}),r.push(fc(this.serializer,d))})))})),G.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return wT(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),G.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return G.resolve();const r=IDBKeyRange.lowerBound((function(d){return[d]})(this.userId)),a=[];return Au(e).ee({range:r},((c,d,g)=>{if(c[0]===this.userId){const p=ma(c[1]);a.push(p)}else g.done()})).next((()=>{Me(a.length===0,56720,{rr:a.map((c=>c.canonicalString()))})}))}))}containsKey(e,t){return TT(e,this.userId,t)}ir(e){return ST(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:yl,lastStreamToken:""}))}}function TT(i,e,t){const r=vg(e,t.path),a=r[1],c=IDBKeyRange.lowerBound(r);let d=!1;return Au(i).ee({range:c,Y:!0},((g,p,y)=>{const[b,T,S]=g;b===e&&T===a&&(d=!0),y.done()})).next((()=>d))}function ol(i){return sr(i,qs)}function Au(i){return sr(i,Vu)}function ST(i){return sr(i,jh)}class Ac{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ac(0)}static ar(){return new Ac(-1)}}class QC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new Ac(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Le.fromTimestamp(new Ye(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>bu(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(Me(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const c=[];return bu(e).ee(((d,g)=>{const p=mh(g);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(a++,c.push(this.removeTargetData(e,p)))})).next((()=>G.waitFor(c))).next((()=>a))}forEachTarget(e,t){return bu(e).ee(((r,a)=>{const c=mh(a);t(c)}))}ur(e){return S_(e).get(zg).next((t=>(Me(t!==null,2888),t)))}cr(e,t){return S_(e).put(zg,t)}lr(e,t){return bu(e).put(xT(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=_c(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return bu(e).ee({range:a,index:uw},((d,g,p)=>{const y=mh(g);Gh(t,y.target)&&(c=y,p.done())})).next((()=>c))}addMatchingKeys(e,t,r){const a=[],c=ul(e);return t.forEach((d=>{const g=Xr(d.path);a.push(c.put({targetId:r,path:g})),a.push(this.referenceDelegate.addReference(e,r,d))})),G.waitFor(a)}removeMatchingKeys(e,t,r){const a=ul(e);return G.forEach(t,(c=>{const d=Xr(c.path);return G.waitFor([a.delete([r,d]),this.referenceDelegate.removeReference(e,r,c)])}))}removeMatchingKeysForTargetId(e,t){const r=ul(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=ul(e);let c=Je();return a.ee({range:r,Y:!0},((d,g,p)=>{const y=ma(d[1]),b=new be(y);c=c.add(b)})).next((()=>c))}containsKey(e,t){const r=Xr(t.path),a=IDBKeyRange.bound([r],[J2(r)],!1,!0);let c=0;return ul(e).ee({index:b0,Y:!0,range:a},(([d,g],p,y)=>{d!==0&&(c++,y.done())})).next((()=>c>0))}At(e,t){return bu(e).get(t).next((r=>r?mh(r):null))}}function bu(i){return sr(i,Bu)}function S_(i){return sr(i,xc)}function ul(i){return sr(i,zu)}const E_="LruGarbageCollector",ET=1048576;function A_([i,e],[t,r]){const a=Ke(i,t);return a===0?Ke(e,r):a}class WC{constructor(e){this.Pr=e,this.buffer=new Bt(A_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();A_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){de(E_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Rl(t)?de(E_,"Ignoring IndexedDB error during garbage collection: ",t):await Cl(t)}await this.Ar(3e5)}))}}class YC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Ri.ce);const r=new WC(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(T_)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,c,d,g,p,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,d=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(r=T,g=Date.now(),this.removeTargets(e,r,t)))).next((T=>(c=T,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((T=>(y=Date.now(),Tu()<=yt.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${a} in `+(g-d)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-b}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:T}))))}}function IT(i,e){return new YC(i,e)}class XC{constructor(e,t){this.db=e,this.garbageCollector=IT(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return sg(e,r)}removeReference(e,t,r){return sg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return sg(e,t)}wr(e,t){return(function(a,c){let d=!1;return ST(a).te((g=>TT(a,g,c).next((p=>(p&&(d=!0),G.resolve(!p)))))).next((()=>d))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.yr(e,((d,g)=>{if(g<=t){const p=this.wr(e,d).next((y=>{if(!y)return c++,r.getEntry(e,d).next((()=>(r.removeEntry(d,Le.min()),ul(e).delete((function(T){return[0,Xr(T.path)]})(d)))))}));a.push(p)}})).next((()=>G.waitFor(a))).next((()=>r.apply(e))).next((()=>c))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return sg(e,t)}yr(e,t){const r=ul(e);let a,c=Ri.ce;return r.ee({index:b0},(([d,g],{path:p,sequenceNumber:y})=>{d===0?(c!==Ri.ce&&t(new be(ma(a)),c),c=y,a=p):c=Ri.ce})).next((()=>{c!==Ri.ce&&t(new be(ma(a)),c)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sg(i,e){return ul(i).put((function(r,a){return{targetId:0,path:Xr(r.path),sequenceNumber:a}})(e,i.currentSequenceNumber))}class CT{constructor(){this.changes=new po((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class JC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return oc(e).put(r)}removeEntry(e,t,r){return oc(e).delete((function(c,d){const g=c.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],Ug(d),g[g.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=on.newInvalidDocument(t);return oc(e).ee({index:bg,range:IDBKeyRange.only(ah(t))},((a,c)=>{r=this.Sr(t,c)})).next((()=>r))}Dr(e,t){let r={size:0,document:on.newInvalidDocument(t)};return oc(e).ee({index:bg,range:IDBKeyRange.only(ah(t))},((a,c)=>{r={document:this.Sr(t,c),size:qg(c)}})).next((()=>r))}getEntries(e,t){let r=ki();return this.Cr(e,t,((a,c)=>{const d=this.Sr(a,c);r=r.insert(a,d)})).next((()=>r))}vr(e,t){let r=ki(),a=new en(be.comparator);return this.Cr(e,t,((c,d)=>{const g=this.Sr(c,d);r=r.insert(c,g),a=a.insert(c,qg(d))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return G.resolve();let a=new Bt(R_);t.forEach((p=>a=a.add(p)));const c=IDBKeyRange.bound(ah(a.first()),ah(a.last())),d=a.getIterator();let g=d.getNext();return oc(e).ee({index:bg,range:c},((p,y,b)=>{const T=be.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;g&&R_(g,T)<0;)r(g,null),g=d.getNext();g&&g.isEqual(T)&&(r(g,y),g=d.hasNext()?d.getNext():null),g?b.j(ah(g)):b.done()})).next((()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,c){const d=t.path,g=[d.popLast().toArray(),d.lastSegment(),Ug(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oc(e).H(IDBKeyRange.bound(g,p,!0)).next((y=>{c?.incrementDocumentReadCount(y.length);let b=ki();for(const T of y){const S=this.Sr(be.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);S.isFoundDocument()&&($h(t,S)||a.has(S.key))&&(b=b.insert(S.key,S))}return b}))}getAllFromCollectionGroup(e,t,r,a){let c=ki();const d=C_(t,r),g=C_(t,ts.max());return oc(e).ee({index:cw,range:IDBKeyRange.bound(d,g,!0)},((p,y,b)=>{const T=this.Sr(be.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);c=c.insert(T.key,T),c.size===a&&b.done()})).next((()=>c))}newChangeBuffer(e){return new ZC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return I_(e).get(zy).next((t=>(Me(!!t,20021),t)))}br(e,t){return I_(e).put(zy,t)}Sr(e,t){if(t){const r=OC(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Le.min())))return r}return on.newInvalidDocument(e)}}function RT(i){return new JC(i)}class ZC extends CT{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new po((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new Bt(((c,d)=>Ke(c.canonicalString(),d.canonicalString())));return this.changes.forEach(((c,d)=>{const g=this.Or.get(c);if(t.push(this.Mr.removeEntry(e,c,g.readTime)),d.isValidDocument()){const p=u_(this.Mr.serializer,d);a=a.add(c.path.popLast());const y=qg(p);r+=y-g.size,t.push(this.Mr.addEntry(e,c,p))}else if(r-=g.size,this.trackRemovals){const p=u_(this.Mr.serializer,d.convertToNoDocument(Le.min()));t.push(this.Mr.addEntry(e,c,p))}})),a.forEach((c=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,c))})),t.push(this.Mr.updateMetadata(e,r)),G.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((c,d)=>{this.Or.set(c,{size:d,readTime:r.get(c).readTime})})),r)))}}function I_(i){return sr(i,kh)}function oc(i){return sr(i,Bg)}function ah(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function C_(i,e){const t=e.documentKey.path.toArray();return[i,Ug(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function R_(i,e){const t=i.path.toArray(),r=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(a=Ke(t[c],r[c]),a)return a;return a=Ke(t.length,r.length),a||(a=Ke(t[t.length-2],r[r.length-2]),a||Ke(t[t.length-1],r[r.length-1]))}class eR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class jT{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Sh(r.mutation,a,ji.empty(),Ye.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Je()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Je()){const a=pa();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((c=>{let d=fh();return c.forEach(((g,p)=>{d=d.insert(g,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const r=pa();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Je())))}populateOverlays(e,t,r){const a=[];return r.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((d,g)=>{t.set(d,g)}))}))}computeViews(e,t,r,a){let c=ki();const d=Th(),g=(function(){return Th()})();return t.forEach(((p,y)=>{const b=r.get(y.key);a.has(y.key)&&(b===void 0||b.mutation instanceof yo)?c=c.insert(y.key,y):b!==void 0?(d.set(y.key,b.mutation.getFieldMask()),Sh(b.mutation,y,b.mutation.getFieldMask(),Ye.now())):d.set(y.key,ji.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((y,b)=>d.set(y,b))),t.forEach(((y,b)=>g.set(y,new eR(b,d.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,t){const r=Th();let a=new en(((d,g)=>d-g)),c=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const g of d)g.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let b=r.get(p)||ji.empty();b=g.applyToLocalView(y,b),r.set(p,b);const T=(a.get(g.batchId)||Je()).add(p);a=a.insert(g.batchId,T)}))})).next((()=>{const d=[],g=a.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,b=p.value,T=Gw();b.forEach((S=>{if(!c.has(S)){const V=Xw(t.get(S),r.get(S));V!==null&&T.set(S,V),c=c.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,T))}return G.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return aC(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):I0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-c.size):G.resolve(pa());let g=Nu,p=c;return d.next((y=>G.forEach(y,((b,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),c.get(b)?G.resolve():this.remoteDocumentCache.getEntry(e,b).next((S=>{p=p.insert(b,S)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,p,y,Je()))).next((b=>({batchId:g,changes:qw(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((r=>{let a=fh();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const c=t.collectionGroup;let d=fh();return this.indexManager.getCollectionParents(e,c).next((g=>G.forEach(g,(p=>{const y=(function(T,S){return new mo(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,r,a).next((b=>{b.forEach(((T,S)=>{d=d.insert(T,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,a)))).next((d=>{c.forEach(((p,y)=>{const b=y.getKey();d.get(b)===null&&(d=d.insert(b,on.newInvalidDocument(b)))}));let g=fh();return d.forEach(((p,y)=>{const b=c.get(p);b!==void 0&&Sh(b.mutation,y,ji.empty(),Ye.now()),$h(t,y)&&(g=g.insert(p,y))})),g}))}}class tR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return G.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ln(a.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:hm(a.bundledQuery),readTime:Ln(a.readTime)}})(t)),G.resolve()}}class nR{constructor(){this.overlays=new en(be.comparator),this.Lr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const r=pa();return G.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&r.set(a,c)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,c)=>{this.bt(e,t,c)})),G.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){const a=pa(),c=t.length+1,d=new be(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>r&&a.set(p.getKey(),p)}return G.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let c=new en(((y,b)=>y-b));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let b=c.get(y.largestBatchId);b===null&&(b=pa(),c=c.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const g=pa(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,b)=>g.set(y,b))),!(g.size()>=a)););return G.resolve(g)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const d=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new D0(t,r));let c=this.Lr.get(t);c===void 0&&(c=Je(),this.Lr.set(t,c)),this.Lr.set(t,c.add(r.key))}}class rR{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}class O0{constructor(){this.kr=new Bt(mr.Kr),this.qr=new Bt(mr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new mr(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new mr(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new be(new at([])),r=new mr(t,e),a=new mr(t,e+1),c=[];return this.qr.forEachInRange([r,a],(d=>{this.Wr(d),c.push(d.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new be(new at([])),r=new mr(t,e),a=new mr(t,e+1);let c=Je();return this.qr.forEachInRange([r,a],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new mr(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class mr{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return be.comparator(e.key,t.key)||Ke(e.Hr,t.Hr)}static Ur(e,t){return Ke(e.Hr,t.Hr)||be.comparator(e.key,t.key)}}class iR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Bt(mr.Kr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new k0(c,t,r,a);this.mutationQueue.push(d);for(const g of a)this.Jr=this.Jr.add(new mr(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return G.resolve(d)}lookupMutationBatch(e,t){return G.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),c=a<0?0:a;return G.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?yl:this.Yn-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mr(t,0),a=new mr(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([r,a],(d=>{const g=this.Zr(d.Hr);c.push(g)})),G.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(Ke);return t.forEach((a=>{const c=new mr(a,0),d=new mr(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,d],(g=>{r=r.add(g.Hr)}))})),G.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let c=r;be.isDocumentKey(c)||(c=c.child(""));const d=new mr(new be(c),0);let g=new Bt(Ke);return this.Jr.forEachWhile((p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===a&&(g=g.add(p.Hr)),!0)}),d),G.resolve(this.Yr(g))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Me(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return G.forEach(t.mutations,(a=>{const c=new mr(a.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new mr(t,0),a=this.Jr.firstAfterOrEqual(r);return G.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class sR{constructor(e){this.ti=e,this.docs=(function(){return new en(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),c=a?a.size:0,d=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let r=ki();return t.forEach((a=>{const c=this.docs.get(a);r=r.insert(a,c?c.document.mutableCopy():on.newInvalidDocument(a))})),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let c=ki();const d=t.path,g=new be(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:b}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||x0(rw(b),r)<=0||(a.has(b.key)||$h(t,b))&&(c=c.insert(b.key,b.mutableCopy()))}return G.resolve(c)}getAllFromCollectionGroup(e,t,r,a){Ce(9500)}ni(e,t){return G.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new aR(this)}getSize(e){return G.resolve(this.size)}}class aR extends CT{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),G.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class oR{constructor(e){this.persistence=e,this.ri=new po((t=>_c(t)),Gh),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.ii=0,this.si=new O0,this.targetCount=0,this.oi=Ac._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),G.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Ac(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.lr(t),G.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let a=0;const c=[];return this.ri.forEach(((d,g)=>{g.sequenceNumber<=t&&r.get(g.targetId)===null&&(this.ri.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)})),G.waitFor(c).next((()=>a))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((d=>{c.push(a.markPotentiallyOrphaned(e,d))})),G.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.si.containsKey(t))}}class L0{constructor(e,t){this._i={},this.overlays={},this.ai=new Ri(0),this.ui=!1,this.ui=!0,this.ci=new rR,this.referenceDelegate=e(this),this.li=new oR(this),this.indexManager=new $C,this.remoteDocumentCache=(function(a){return new sR(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new yT(t),this.Pi=new tR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new iR(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){de("MemoryPersistence","Starting transaction:",e);const a=new lR(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((c=>this.referenceDelegate.Ii(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,t){return G.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class lR extends sw{constructor(e){super(),this.currentSequenceNumber=e}}class mm{constructor(e){this.persistence=e,this.Ri=new O0,this.Ai=null}static Vi(e){return new mm(e)}get di(){if(this.Ai)return this.Ai;throw Ce(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.di.add(c.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.di,(r=>{const a=be.fromPath(r);return this.mi(e,a).next((c=>{c||t.removeEntry(a,Le.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Gg{constructor(e,t){this.persistence=e,this.fi=new po((r=>Xr(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=IT(this,t)}static Vi(e,t){return new Gg(e,t)}Ti(){}Ii(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return G.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((c=>c?G.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ni(e,(d=>this.wr(e,d,t).next((g=>{g||(r++,c.removeEntry(d,Le.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),G.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wg(e.data.value)),t}wr(e,t,r){return G.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return G.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class cR{constructor(e){this.serializer=e}k(e,t,r,a){const c=new tm("createOrUpgrade",t);r<1&&a>=1&&((function(p){p.createObjectStore(qh)})(e),(function(p){p.createObjectStore(jh,{keyPath:_I}),p.createObjectStore(qs,{keyPath:P1,autoIncrement:!0}).createIndex(pc,U1,{unique:!0}),p.createObjectStore(Vu)})(e),j_(e),(function(p){p.createObjectStore(dc)})(e));let d=G.resolve();return r<3&&a>=3&&(r!==0&&((function(p){p.deleteObjectStore(zu),p.deleteObjectStore(Bu),p.deleteObjectStore(xc)})(e),j_(e)),d=d.next((()=>(function(p){const y=p.store(xc),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Le.min().toTimestamp(),targetCount:0};return y.put(zg,b)})(c)))),r<4&&a>=4&&(r!==0&&(d=d.next((()=>(function(p,y){return y.store(qs).H().next((T=>{p.deleteObjectStore(qs),p.createObjectStore(qs,{keyPath:P1,autoIncrement:!0}).createIndex(pc,U1,{unique:!0});const S=y.store(qs),V=T.map((q=>S.put(q)));return G.waitFor(V)}))})(e,c)))),d=d.next((()=>{(function(p){p.createObjectStore(Ou,{keyPath:jI})})(e)}))),r<5&&a>=5&&(d=d.next((()=>this.gi(c)))),r<6&&a>=6&&(d=d.next((()=>((function(p){p.createObjectStore(kh)})(e),this.pi(c))))),r<7&&a>=7&&(d=d.next((()=>this.yi(c)))),r<8&&a>=8&&(d=d.next((()=>this.wi(e,c)))),r<9&&a>=9&&(d=d.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(d=d.next((()=>this.bi(c)))),r<11&&a>=11&&(d=d.next((()=>{(function(p){p.createObjectStore(nm,{keyPath:kI})})(e),(function(p){p.createObjectStore(rm,{keyPath:NI})})(e)}))),r<12&&a>=12&&(d=d.next((()=>{(function(p){const y=p.createObjectStore(im,{keyPath:LI});y.createIndex(Ly,PI,{unique:!1}),y.createIndex(fw,UI,{unique:!1})})(e)}))),r<13&&a>=13&&(d=d.next((()=>(function(p){const y=p.createObjectStore(Bg,{keyPath:TI});y.createIndex(bg,SI),y.createIndex(cw,EI)})(e))).next((()=>this.Si(e,c))).next((()=>e.deleteObjectStore(dc)))),r<14&&a>=14&&(d=d.next((()=>this.Di(e,c)))),r<15&&a>=15&&(d=d.next((()=>(function(p){p.createObjectStore(_0,{keyPath:DI,autoIncrement:!0}).createIndex(Oy,MI,{unique:!1}),p.createObjectStore(bh,{keyPath:VI}).createIndex(dw,BI,{unique:!1}),p.createObjectStore(_h,{keyPath:zI}).createIndex(hw,OI,{unique:!1})})(e)))),r<16&&a>=16&&(d=d.next((()=>{t.objectStore(bh).clear()})).next((()=>{t.objectStore(_h).clear()}))),r<17&&a>=17&&(d=d.next((()=>{(function(p){p.createObjectStore(w0,{keyPath:FI})})(e)}))),r<18&&a>=18&&k2()&&(d=d.next((()=>{t.objectStore(bh).clear()})).next((()=>{t.objectStore(_h).clear()}))),d}pi(e){let t=0;return e.store(dc).ee(((r,a)=>{t+=qg(a)})).next((()=>{const r={byteSize:t};return e.store(kh).put(zy,r)}))}gi(e){const t=e.store(jh),r=e.store(qs);return t.H().next((a=>G.forEach(a,(c=>{const d=IDBKeyRange.bound([c.userId,yl],[c.userId,c.lastAcknowledgedBatchId]);return r.H(pc,d).next((g=>G.forEach(g,(p=>{Me(p.userId===c.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const y=fc(this.serializer,p);return wT(e,c.userId,y).next((()=>{}))}))))}))))}yi(e){const t=e.store(zu),r=e.store(dc);return e.store(xc).get(zg).next((a=>{const c=[];return r.ee(((d,g)=>{const p=new at(d),y=(function(T){return[0,Xr(T)]})(p);c.push(t.get(y).next((b=>b?G.resolve():(T=>t.put({targetId:0,path:Xr(T),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>G.waitFor(c)))}))}wi(e,t){e.createObjectStore(Nh,{keyPath:RI});const r=t.store(Nh),a=new z0,c=d=>{if(a.add(d)){const g=d.lastSegment(),p=d.popLast();return r.put({collectionId:g,parent:Xr(p)})}};return t.store(dc).ee({Y:!0},((d,g)=>{const p=new at(d);return c(p.popLast())})).next((()=>t.store(Vu).ee({Y:!0},(([d,g,p],y)=>{const b=ma(g);return c(b.popLast())}))))}bi(e){const t=e.store(Bu);return t.ee(((r,a)=>{const c=mh(a),d=xT(this.serializer,c);return t.put(d)}))}Si(e,t){const r=t.store(dc),a=[];return r.ee(((c,d)=>{const g=t.store(Bg),p=(function(T){return T.document?new be(at.fromString(T.document.name).popFirst(5)):T.noDocument?be.fromSegments(T.noDocument.path):T.unknownDocument?be.fromSegments(T.unknownDocument.path):Ce(36783)})(d).path.toArray(),y={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};a.push(g.put(y))})).next((()=>G.waitFor(a)))}Di(e,t){const r=t.store(qs),a=RT(this.serializer),c=new L0(mm.Vi,this.serializer.yt);return r.H().next((d=>{const g=new Map;return d.forEach((p=>{let y=g.get(p.userId)??Je();fc(this.serializer,p).keys().forEach((b=>y=y.add(b))),g.set(p.userId,y)})),G.forEach(g,((p,y)=>{const b=new pr(y),T=fm.wt(this.serializer,b),S=c.getIndexManager(b),V=gm.wt(b,this.serializer,S,c.referenceDelegate);return new jT(a,V,T,S).recalculateAndSaveOverlaysForDocumentKeys(new Py(t,Ri.ce),p).next()}))}))}}function j_(i){i.createObjectStore(zu,{keyPath:II}).createIndex(b0,CI,{unique:!0}),i.createObjectStore(Bu,{keyPath:"targetId"}).createIndex(uw,AI,{unique:!0}),i.createObjectStore(xc)}const ll="IndexedDbPersistence",dy=18e5,hy=5e3,fy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kT="main";class P0{constructor(e,t,r,a,c,d,g,p,y,b,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=c,this.window=d,this.document=g,this.Fi=y,this.Mi=b,this.xi=T,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=S=>Promise.resolve(),!P0.v())throw new se(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XC(this,a),this.Ki=t+kT,this.serializer=new yT(p),this.qi=new ya(this.Ki,this.xi,new cR(this.serializer)),this.ci=new PC,this.li=new QC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=RT(this.serializer),this.Pi=new LC,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,b===!1&&On(ll,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(Q.FAILED_PRECONDITION,fy);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Ri(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>ag(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Rl(e))return de(ll,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return de(ll,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return oh(e).get(mu).next((t=>G.resolve(this.Xi(t))))}Yi(e){return ag(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,dy)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=sr(t,Ou);return r.H().next((a=>{const c=this.ns(a,dy),d=a.filter((g=>c.indexOf(g)===-1));return G.forEach(d,(g=>r.delete(g.clientId))).next((()=>d))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?G.resolve(!0):oh(e).get(mu).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,hy)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new se(Q.FAILED_PRECONDITION,fy);return!1}}return!(!this.networkEnabled||!this.inForeground)||ag(e).H().next((r=>this.ns(r,hy).find((a=>{if(this.clientId!==a.clientId){const c=!this.networkEnabled&&a.networkEnabled,d=!this.inForeground&&a.inForeground,g=this.networkEnabled===a.networkEnabled;if(c||d&&g)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&de(ll,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[qh,Ou],(e=>{const t=new Py(e,Ri.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>ag(e).H().next((t=>this.ns(t,dy).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return gm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new KC(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return fm.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){de(ll,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",c=(function(p){return p===18?HI:p===17?yw:p===16?GI:p===15?T0:p===14?pw:p===13?mw:p===12?qI:p===11?gw:void Ce(60245)})(this.xi);let d;return this.qi.runTransaction(e,a,c,(g=>(d=new Py(g,this.ai?this.ai.next():Ri.ce),t==="readwrite-primary"?this.ji(d).next((p=>!!p||this.Hi(d))).next((p=>{if(!p)throw On(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new se(Q.FAILED_PRECONDITION,iw);return r(d)})).next((p=>this.Zi(d).next((()=>p)))):this.Ps(d).next((()=>r(d)))))).then((g=>(d.raiseOnCommittedEvent(),g)))}Ps(e){return oh(e).get(mu).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,hy)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new se(Q.FAILED_PRECONDITION,fy)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return oh(e).put(mu,t)}static v(){return ya.v()}Ji(e){const t=oh(e);return t.get(mu).next((r=>this.Xi(r)?(de(ll,"Releasing primary lease."),t.delete(mu)):G.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(On(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;j2()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return de(ll,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return On(ll,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){On("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function oh(i){return sr(i,qh)}function ag(i){return sr(i,Ou)}function U0(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class F0{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=Je(),a=Je();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new F0(e,t.fromCache,r,a)}}class uR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class NT{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return j2()?8:aw(Ng())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const c={result:null};return this.gs(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ps(e,t,a,r).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new uR;return this.ys(e,t,d).next((g=>{if(c.result=g,this.As)return this.ws(e,t,d,g.size)}))})).next((()=>c.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(Tu()<=yt.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Su(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(Tu()<=yt.DEBUG&&de("QueryEngine","Query:",Su(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(Tu()<=yt.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Su(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jr(t))):G.resolve())}gs(e,t){if(e_(t))return G.resolve(null);let r=Jr(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Pg(t,null,"F"),r=Jr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const d=Je(...c);return this.fs.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,r).next((p=>{const y=this.bs(t,g);return this.Ss(t,y,d,p.readTime)?this.gs(e,Pg(t,null,"F")):this.Ds(e,y,t,p)}))))})))))}ps(e,t,r,a){return e_(t)||a.isEqual(Le.min())?G.resolve(null):this.fs.getDocuments(e,r).next((c=>{const d=this.bs(t,c);return this.Ss(t,d,r,a)?G.resolve(null):(Tu()<=yt.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Su(t)),this.Ds(e,d,t,nw(a,Nu)).next((g=>g)))}))}bs(e,t){let r=new Bt(Uw(e));return t.forEach(((a,c)=>{$h(e,c)&&(r=r.add(c))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ys(e,t,r){return Tu()<=yt.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Su(t)),this.fs.getDocumentsMatchingQuery(e,t,ts.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const q0="LocalStore",dR=3e8;class hR{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new en(Ke),this.Fs=new po((c=>_c(c)),Gh),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jT(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function DT(i,e,t,r){return new hR(i,e,t,r)}async function MT(i,e){const t=_e(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((c=>(a=c,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((c=>{const d=[],g=[];let p=Je();for(const y of a){d.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}for(const y of c){g.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}return t.localDocuments.getDocuments(r,p).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:g})))}))}))}function fR(i,e){const t=_e(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,b){const T=y.batch,S=T.keys();let V=G.resolve();return S.forEach((q=>{V=V.next((()=>b.getEntry(p,q))).next((W=>{const L=y.docVersions.get(q);Me(L!==null,48541),W.version.compareTo(L)<0&&(T.applyToRemoteDocument(W,y),W.isValidDocument()&&(W.setReadTime(y.commitVersion),b.addEntry(W)))}))})),V.next((()=>g.mutationQueue.removeMutationBatch(p,T)))})(t,r,e,c).next((()=>c.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let p=Je();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function VT(i){const e=_e(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function gR(i,e){const t=_e(i),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const g=[];e.targetChanges.forEach(((b,T)=>{const S=a.get(T);if(!S)return;g.push(t.li.removeMatchingKeys(c,b.removedDocuments,T).next((()=>t.li.addMatchingKeys(c,b.addedDocuments,T))));let V=S.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(T)!==null?V=V.withResumeToken(Tn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):b.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(b.resumeToken,r)),a=a.insert(T,V),(function(W,L,ce){return W.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=dR?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0})(S,V,b)&&g.push(t.li.updateTargetData(c,V))}));let p=ki(),y=Je();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(c,b))})),g.push(BT(c,d,e.documentUpdates).next((b=>{p=b.Bs,y=b.Ls}))),!r.isEqual(Le.min())){const b=t.li.getLastRemoteSnapshotVersion(c).next((T=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,r)));g.push(b)}return G.waitFor(g).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,p,y))).next((()=>p))})).then((c=>(t.vs=a,c)))}function BT(i,e,t){let r=Je(),a=Je();return t.forEach((c=>r=r.add(c))),e.getEntries(i,r).next((c=>{let d=ki();return t.forEach(((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(g)),p.isNoDocument()&&p.version.isEqual(Le.min())?(e.removeEntry(g,p.readTime),d=d.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(g,p)):de(q0,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{Bs:d,Ls:a}}))}function mR(i,e){const t=_e(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=yl),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Hu(i,e){const t=_e(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((c=>c?(a=c,G.resolve(a)):t.li.allocateTargetId(r).next((d=>(a=new lo(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function $u(i,e,t){const r=_e(i),a=r.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,(d=>r.persistence.referenceDelegate.removeTarget(d,a)))}catch(d){if(!Rl(d))throw d;de(q0,`Failed to update sequence numbers for target ${e}: ${d}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function Hg(i,e,t){const r=_e(i);let a=Le.min(),c=Je();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,y,b){const T=_e(p),S=T.Fs.get(b);return S!==void 0?G.resolve(T.vs.get(S)):T.li.getTargetData(y,b)})(r,d,Jr(e)).next((g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(d,g.targetId).next((p=>{c=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(d,e,t?a:Le.min(),t?c:Je()))).next((g=>(LT(r,Pw(e),g),{documents:g,ks:c})))))}function zT(i,e){const t=_e(i),r=_e(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(c=>r.At(c,e).next((d=>d?d.target:null))))}function OT(i,e){const t=_e(i),r=t.Ms.get(e)||Le.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,nw(r,Nu),Number.MAX_SAFE_INTEGER))).then((a=>(LT(t,e,a),a)))}function LT(i,e,t){let r=i.Ms.get(e)||Le.min();t.forEach(((a,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),i.Ms.set(e,r)}async function pR(i,e,t,r){const a=_e(i);let c=Je(),d=ki();for(const y of t){const b=e.Ks(y.metadata.name);y.document&&(c=c.add(b));const T=e.qs(y);T.setReadTime(e.Us(y.metadata.readTime)),d=d.insert(b,T)}const g=a.xs.newChangeBuffer({trackRemovals:!0}),p=await Hu(a,(function(b){return Jr(Zu(at.fromString(`__bundle__/docs/${b}`)))})(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",(y=>BT(y,g,d).next((b=>(g.apply(y),b))).next((b=>a.li.removeMatchingKeysForTargetId(y,p.targetId).next((()=>a.li.addMatchingKeys(y,c,p.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(y,b.Bs,b.Ls))).next((()=>b.Bs))))))}async function yR(i,e,t=Je()){const r=await Hu(i,Jr(hm(e.bundledQuery))),a=_e(i);return a.persistence.runTransaction("Save named query","readwrite",(c=>{const d=Ln(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return a.Pi.saveNamedQuery(c,e);const g=r.withResumeToken(Tn.EMPTY_BYTE_STRING,d);return a.vs=a.vs.insert(g.targetId,g),a.li.updateTargetData(c,g).next((()=>a.li.removeMatchingKeysForTargetId(c,r.targetId))).next((()=>a.li.addMatchingKeys(c,t,r.targetId))).next((()=>a.Pi.saveNamedQuery(c,e)))}))}const PT="firestore_clients";function k_(i,e){return`${PT}_${i}_${e}`}const UT="firestore_mutations";function N_(i,e,t){let r=`${UT}_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const FT="firestore_targets";function gy(i,e){return`${FT}_${i}_${e}`}const ga="SharedClientState";class $g{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let c,d=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return d&&a.error&&(d=typeof a.error.message=="string"&&typeof a.error.code=="string",d&&(c=new se(a.error.code,a.error.message))),d?new $g(e,t,a.state,c):(On(ga,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Eh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,c=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return c&&r.error&&(c=typeof r.error.message=="string"&&typeof r.error.code=="string",c&&(a=new se(r.error.code,r.error.message))),c?new Eh(e,r.state,a):(On(ga,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,c=C0();for(let d=0;a&&d<r.activeTargetIds.length;++d)a=ow(r.activeTargetIds[d]),c=c.add(r.activeTargetIds[d]);return a?new Kg(e,c):(On(ga,`Failed to parse client data for instance '${e}': ${t}`),null)}}class G0{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new G0(t.clientId,t.onlineState):(On(ga,`Failed to parse online state: ${e}`),null)}}class t0{constructor(){this.activeTargetIds=C0()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class my{constructor(e,t,r,a,c){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new en(Ke),this.started=!1,this.Zs=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.Xs=k_(this.persistenceKey,this.zs),this.Ys=(function(p){return`firestore_sequence_number_${p}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new t0),this.eo=new RegExp(`^${PT}_${d}_([^_]*)$`),this.no=new RegExp(`^${UT}_${d}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${FT}_${d}_(\\d+)$`),this.io=(function(p){return`firestore_online_state_${p}`})(this.persistenceKey),this.so=(function(p){return`firestore_bundle_loaded_v2_${p}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(k_(this.persistenceKey,r));if(a){const c=Kg.$s(r,a);c&&(this.Js=this.Js.insert(c.clientId,c))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(gy(this.persistenceKey,e));if(a){const c=Eh.$s(e,a);c&&(r=c.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gy(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return de(ga,"READ",e,t),t}setItem(e,t){de(ga,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){de(ga,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(de(ga,"EVENT",t.key,t.newValue),t.key===this.Xs)return void On("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(c){let d=Ri.ce;if(c!=null)try{const g=JSON.parse(c);Me(typeof g=="number",30636,{yo:c}),d=g}catch(g){On(ga,"Failed to read sequence number from WebStorage",g)}return d})(t.newValue);r!==Ri.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new $g(this.currentUser,e,t,r),c=N_(this.persistenceKey,this.currentUser,e);this.setItem(c,a.Ws())}lo(e){const t=N_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=gy(this.persistenceKey,e),c=new Eh(e,t,r);this.setItem(a,c.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return Kg.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),c=r[2]!==void 0?r[2]:null;return $g.$s(new pr(c),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return Eh.$s(a,t)}_o(e){return G0.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);de(ga,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),c=this.uo(r),d=[],g=[];return c.forEach((p=>{a.has(p)||d.push(p)})),a.forEach((p=>{c.has(p)||g.push(p)})),this.syncEngine.Co(d,g).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=C0();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class qT{constructor(){this.vo=new t0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new t0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xR{Mo(e){}shutdown(){}}const D_="ConnectivityMonitor";class M_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){de(D_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){de(D_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let og=null;function n0(){return og===null?og=(function(){return 268435456+Math.round(2147483648*Math.random())})():og++,"0x"+og.toString(16)}const py="RestConnection",vR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class bR{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===Mh?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,c){const d=n0(),g=this.Qo(e,t.toUriEncodedString());de(py,`Sending RPC '${e}' ${d}:`,g,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,c);const{host:y}=new URL(g),b=Uh(y);return this.zo(e,g,p,r,b).then((T=>(de(py,`Received RPC '${e}' ${d}: `,T),T)),(T=>{throw Vi(py,`RPC '${e}' ${d} failed with error: `,T,"url: ",g,"request:",r),T}))}jo(e,t,r,a,c,d){return this.Wo(e,t,r,a,c)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ju})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),r&&r.headers.forEach(((a,c)=>e[c]=a))}Qo(e,t){const r=vR[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class _R{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Wr="WebChannelConnection",lh=(i,e,t)=>{i.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Cu extends bR{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Cu.c_){const e=K2();lh(e,$2.STAT_EVENT,(t=>{t.stat===Ny.PROXY?de(Wr,"STAT_EVENT: detected buffering proxy"):t.stat===Ny.NOPROXY&&de(Wr,"STAT_EVENT: detected no buffering proxy")})),Cu.c_=!0}}zo(e,t,r,a,c){const d=n0();return new Promise(((g,p)=>{const y=new G2;y.setWithCredentials(!0),y.listenOnce(H2.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case xg.NO_ERROR:const T=y.getResponseJson();de(Wr,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(T)),g(T);break;case xg.TIMEOUT:de(Wr,`RPC '${e}' ${d} timed out`),p(new se(Q.DEADLINE_EXCEEDED,"Request time out"));break;case xg.HTTP_ERROR:const S=y.getStatus();if(de(Wr,`RPC '${e}' ${d} failed with status:`,S,"response text:",y.getResponseText()),S>0){let V=y.getResponseJson();Array.isArray(V)&&(V=V[0]);const q=V?.error;if(q&&q.status&&q.message){const W=(function(ce){const oe=ce.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(oe)>=0?oe:Q.UNKNOWN})(q.status);p(new se(W,q.message))}else p(new se(Q.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new se(Q.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{de(Wr,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(a);de(Wr,`RPC '${e}' ${d} sending request:`,a),y.send(t,"POST",b,r,15)}))}T_(e,t,r){const a=n0(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Go(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const y=c.join("");de(Wr,`Creating RPC '${e}' stream ${a}: ${y}`,g);const b=d.createWebChannel(y,g);this.I_(b);let T=!1,S=!1;const V=new _R({Ho:q=>{S?de(Wr,`Not sending because RPC '${e}' stream ${a} is closed:`,q):(T||(de(Wr,`Opening RPC '${e}' stream ${a} transport.`),b.open(),T=!0),de(Wr,`RPC '${e}' stream ${a} sending:`,q),b.send(q))},Jo:()=>b.close()});return lh(b,hh.EventType.OPEN,(()=>{S||(de(Wr,`RPC '${e}' stream ${a} transport opened.`),V.i_())})),lh(b,hh.EventType.CLOSE,(()=>{S||(S=!0,de(Wr,`RPC '${e}' stream ${a} transport closed`),V.o_(),this.E_(b))})),lh(b,hh.EventType.ERROR,(q=>{S||(S=!0,Vi(Wr,`RPC '${e}' stream ${a} transport errored. Name:`,q.name,"Message:",q.message),V.o_(new se(Q.UNAVAILABLE,"The operation could not be completed")))})),lh(b,hh.EventType.MESSAGE,(q=>{if(!S){const W=q.data[0];Me(!!W,16349);const L=W,ce=L?.error||L[0]?.error;if(ce){de(Wr,`RPC '${e}' stream ${a} received error:`,ce);const oe=ce.status;let ue=(function(je){const D=Qn[je];if(D!==void 0)return tT(D)})(oe),me=ce.message;oe==="NOT_FOUND"&&me.includes("database")&&me.includes("does not exist")&&me.includes(this.databaseId.database)&&Vi(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ue===void 0&&(ue=Q.INTERNAL,me="Unknown error status: "+oe+" with message "+ce.message),S=!0,V.o_(new se(ue,me)),b.close()}else de(Wr,`RPC '${e}' stream ${a} received:`,W),V.__(W)}})),Cu.u_(),setTimeout((()=>{V.s_()}),0),V}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Q2()}}function wR(i){return new Cu(i)}function GT(){return typeof window<"u"?window:null}function Ig(){return typeof document<"u"?document:null}function kc(i){return new CC(i,!0)}Cu.c_=!1;class H0{constructor(e,t,r=1e3,a=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&de("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const V_="PersistentStream";class HT{constructor(e,t,r,a,c,d,g,p){this.Ci=e,this.b_=r,this.S_=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new H0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(On(t.toString()),On("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new se(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(V_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(de(V_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class TR extends HT{constructor(e,t,r,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=kC(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Le.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Le.min():d.readTime?Ln(d.readTime):Le.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=Yy(this.serializer),t.addTarget=(function(c,d){let g;const p=d.target;if(g=Og(p)?{documents:uT(c,p)}:{query:dm(c,p).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=sT(c,d.resumeToken);const y=Qy(c,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(Le.min())>0){g.readTime=Gu(c,d.snapshotVersion.toTimestamp());const y=Qy(c,d.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const r=DC(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=Yy(this.serializer),t.removeTarget=e,this.K_(t)}}class SR extends HT{constructor(e,t,r,a,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,d),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=NC(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Yy(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Lh(this.serializer,r)))};this.K_(t)}}class ER{}class AR extends ER{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new se(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Wo(e,Wy(t,r),a,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se(Q.UNKNOWN,c.toString())}))}jo(e,t,r,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.jo(e,Wy(t,r),a,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new se(Q.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function IR(i,e,t,r){return new AR(i,e,t,r)}class CR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(On(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ic="RemoteStore";class RR{constructor(e,t,r,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((d=>{r.enqueueAndForget((async()=>{kl(this)&&(de(Ic,"Restarting streams for network reachability change."),await(async function(p){const y=_e(p);y.Ea.add(4),await nd(y),y.Va.set("Unknown"),y.Ea.delete(4),await Yh(y)})(this))}))})),this.Va=new CR(r,a)}}async function Yh(i){if(kl(i))for(const e of i.Ra)await e(!0)}async function nd(i){for(const e of i.Ra)await e(!1)}function pm(i,e){const t=_e(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Q0(t)?K0(t):id(t).O_()&&$0(t,e))}function Ku(i,e){const t=_e(i),r=id(t);t.Ia.delete(e),r.O_()&&$T(t,e),t.Ia.size===0&&(r.O_()?r.L_():kl(t)&&t.Va.set("Unknown"))}function $0(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}id(i).Z_(e)}function $T(i,e){i.da.$e(e),id(i).X_(e)}function K0(i){i.da=new SC({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),id(i).start(),i.Va.ua()}function Q0(i){return kl(i)&&!id(i).x_()&&i.Ia.size>0}function kl(i){return _e(i).Ea.size===0}function KT(i){i.da=void 0}async function jR(i){i.Va.set("Online")}async function kR(i){i.Ia.forEach(((e,t)=>{$0(i,e)}))}async function NR(i,e){KT(i),Q0(i)?(i.Va.ha(e),K0(i)):i.Va.set("Unknown")}async function DR(i,e,t){if(i.Va.set("Online"),e instanceof iT&&e.state===2&&e.cause)try{await(async function(a,c){const d=c.cause;for(const g of c.targetIds)a.Ia.has(g)&&(await a.remoteSyncer.rejectListen(g,d),a.Ia.delete(g),a.da.removeTarget(g))})(i,e)}catch(r){de(Ic,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qg(i,r)}else if(e instanceof Eg?i.da.Xe(e):e instanceof rT?i.da.st(e):i.da.tt(e),!t.isEqual(Le.min()))try{const r=await VT(i.localStore);t.compareTo(r)>=0&&await(function(c,d){const g=c.da.Tt(d);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=c.Ia.get(y);b&&c.Ia.set(y,b.withResumeToken(p.resumeToken,d))}})),g.targetMismatches.forEach(((p,y)=>{const b=c.Ia.get(p);if(!b)return;c.Ia.set(p,b.withResumeToken(Tn.EMPTY_BYTE_STRING,b.snapshotVersion)),$T(c,p);const T=new lo(b.target,p,y,b.sequenceNumber);$0(c,T)})),c.remoteSyncer.applyRemoteEvent(g)})(i,t)}catch(r){de(Ic,"Failed to raise snapshot:",r),await Qg(i,r)}}async function Qg(i,e,t){if(!Rl(e))throw e;i.Ea.add(1),await nd(i),i.Va.set("Offline"),t||(t=()=>VT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{de(Ic,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Yh(i)}))}function QT(i,e){return e().catch((t=>Qg(i,t,e)))}async function rd(i){const e=_e(i),t=Sl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yl;for(;MR(e);)try{const a=await mR(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,VR(e,a)}catch(a){await Qg(e,a)}WT(e)&&YT(e)}function MR(i){return kl(i)&&i.Ta.length<10}function VR(i,e){i.Ta.push(e);const t=Sl(i);t.O_()&&t.Y_&&t.ea(e.mutations)}function WT(i){return kl(i)&&!Sl(i).x_()&&i.Ta.length>0}function YT(i){Sl(i).start()}async function BR(i){Sl(i).ra()}async function zR(i){const e=Sl(i);for(const t of i.Ta)e.ea(t.mutations)}async function OR(i,e,t){const r=i.Ta.shift(),a=N0.from(r,e,t);await QT(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await rd(i)}async function LR(i,e){e&&Sl(i).Y_&&await(async function(r,a){if((function(d){return eT(d)&&d!==Q.ABORTED})(a.code)){const c=r.Ta.shift();Sl(r).B_(),await QT(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,a))),await rd(r)}})(i,e),WT(i)&&YT(i)}async function B_(i,e){const t=_e(i);t.asyncQueue.verifyOperationInProgress(),de(Ic,"RemoteStore received new credentials");const r=kl(t);t.Ea.add(3),await nd(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Yh(t)}async function r0(i,e){const t=_e(i);e?(t.Ea.delete(2),await Yh(t)):e||(t.Ea.add(2),await nd(t),t.Va.set("Unknown"))}function id(i){return i.ma||(i.ma=(function(t,r,a){const c=_e(t);return c.sa(),new TR(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Zo:jR.bind(null,i),Yo:kR.bind(null,i),t_:NR.bind(null,i),J_:DR.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),Q0(i)?K0(i):i.Va.set("Unknown")):(await i.ma.stop(),KT(i))}))),i.ma}function Sl(i){return i.fa||(i.fa=(function(t,r,a){const c=_e(t);return c.sa(),new SR(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:BR.bind(null,i),t_:LR.bind(null,i),ta:zR.bind(null,i),na:OR.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await rd(i)):(await i.fa.stop(),i.Ta.length>0&&(de(Ic,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class W0{constructor(e,t,r,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=c,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,c){const d=Date.now()+r,g=new W0(e,t,d,a,c);return g.start(r),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sd(i,e){if(On("AsyncQueue",`${e}: ${i}`),Rl(i))return new se(Q.UNAVAILABLE,`${e}: ${i}`);throw i}class vc{static emptySet(e){return new vc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||be.comparator(t.key,r.key):(t,r)=>be.comparator(t.key,r.key),this.keyedMap=fh(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new vc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class z_{constructor(){this.ga=new en(be.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Cc{constructor(e,t,r,a,c,d,g,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,a,c){const d=[];return t.forEach((g=>{d.push({type:0,doc:g})})),new Cc(e,t,vc.emptySet(t),d,r,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class PR{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class UR{constructor(){this.queries=O_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=_e(t),c=a.queries;a.queries=O_(),c.forEach(((d,g)=>{for(const p of g.ba)p.onError(r)}))})(this,new se(Q.ABORTED,"Firestore shutting down"))}}function O_(){return new po((i=>Lw(i)),Hh)}async function Y0(i,e){const t=_e(i);let r=3;const a=e.query;let c=t.queries.get(a);c?!c.Sa()&&e.Da()&&(r=2):(c=new PR,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await t.onListen(a,!0);break;case 1:c.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(d){const g=sd(d,`Initialization of query '${Su(e.query)}' failed`);return void e.onError(g)}t.queries.set(a,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&J0(t)}async function X0(i,e){const t=_e(i),r=e.query;let a=3;const c=t.queries.get(r);if(c){const d=c.ba.indexOf(e);d>=0&&(c.ba.splice(d,1),c.ba.length===0?a=e.Da()?0:1:!c.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function FR(i,e){const t=_e(i);let r=!1;for(const a of e){const c=a.query,d=t.queries.get(c);if(d){for(const g of d.ba)g.Fa(a)&&(r=!0);d.wa=a}}r&&J0(t)}function qR(i,e,t){const r=_e(i),a=r.queries.get(e);if(a)for(const c of a.ba)c.onError(t);r.queries.delete(e)}function J0(i){i.Ca.forEach((e=>{e.next()}))}var i0,L_;(L_=i0||(i0={})).Ma="default",L_.Cache="cache";class Z0{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Cc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Cc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==i0.Cache}}class XT{constructor(e,t){this.qa=e,this.byteLength=t}Ua(){return"metadata"in this.qa}}class P_{constructor(e){this.serializer=e}Ks(e){return xa(this.serializer,e)}qs(e){return e.metadata.exists?um(this.serializer,e.document,!1):on.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Ln(e)}}class ex{constructor(e,t){this.$a=e,this.serializer=t,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=JT(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const r=at.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new P_(this.serializer);for(const a of e)if(a.metadata.queries){const c=r.Ks(a.metadata.name);for(const d of a.metadata.queries){const g=(t.get(d)||Je()).add(c);t.set(d,g)}}return t}async ja(e){const t=await pR(e,new P_(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const a of this.Wa)await yR(e,a,r.get(a.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:t}}}function JT(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class ZT{constructor(e){this.key=e}}class eS{constructor(e){this.key=e}}class tS{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Je(),this.mutatedKeys=Je(),this.eu=Uw(e),this.tu=new vc(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new z_,a=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=a,g=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((b,T)=>{const S=a.get(b),V=$h(this.query,T)?T:null,q=!!S&&this.mutatedKeys.has(S.key),W=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let L=!1;S&&V?S.data.isEqual(V.data)?q!==W&&(r.track({type:3,doc:V}),L=!0):this.su(S,V)||(r.track({type:2,doc:V}),L=!0,(p&&this.eu(V,p)>0||y&&this.eu(V,y)<0)&&(g=!0)):!S&&V?(r.track({type:0,doc:V}),L=!0):S&&!V&&(r.track({type:1,doc:S}),L=!0,(p||y)&&(g=!0)),L&&(V?(d=d.add(V),c=W?c.add(b):c.delete(b)):(d=d.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),c=c.delete(b.key),r.track({type:1,doc:b})}return{tu:d,iu:r,Ss:g,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,T)=>(function(V,q){const W=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Vt:L})}};return W(V)-W(q)})(b.type,T.type)||this.eu(b.doc,T.doc))),this.ou(r),a=a??!1;const g=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,y=p!==this.Xa;return this.Xa=p,d.length!==0||y?{snapshot:new Cc(this.query,e.tu,c,d,e.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new z_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new eS(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new ZT(r))})),t}cu(e){this.Za=e.ks,this.Ya=Je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Cc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Nl="SyncEngine";class GR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class HR{constructor(e){this.key=e,this.hu=!1}}class $R{constructor(e,t,r,a,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new po((g=>Lw(g)),Hh),this.Iu=new Map,this.Eu=new Set,this.Ru=new en(be.comparator),this.Au=new Map,this.Vu=new O0,this.du={},this.mu=new Map,this.fu=Ac.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function KR(i,e,t=!0){const r=ym(i);let a;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await nS(r,e,t,!0),a}async function QR(i,e){const t=ym(i);await nS(t,e,!0,!1)}async function nS(i,e,t,r){const a=await Hu(i.localStore,Jr(e)),c=a.targetId,d=i.sharedClientState.addLocalQueryTarget(c,t);let g;return r&&(g=await tx(i,e,c,d==="current",a.resumeToken)),i.isPrimaryClient&&t&&pm(i.remoteStore,a),g}async function tx(i,e,t,r,a){i.pu=(T,S,V)=>(async function(W,L,ce,oe){let ue=L.view.ru(ce);ue.Ss&&(ue=await Hg(W.localStore,L.query,!1).then((({documents:D})=>L.view.ru(D,ue))));const me=oe&&oe.targetChanges.get(L.targetId),Ve=oe&&oe.targetMismatches.get(L.targetId)!=null,je=L.view.applyChanges(ue,W.isPrimaryClient,me,Ve);return s0(W,L.targetId,je.au),je.snapshot})(i,T,S,V);const c=await Hg(i.localStore,e,!0),d=new tS(e,c.ks),g=d.ru(c.documents),p=Wh.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),y=d.applyChanges(g,i.isPrimaryClient,p);s0(i,t,y.au);const b=new GR(e,t,d);return i.Tu.set(e,b),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),y.snapshot}async function WR(i,e,t){const r=_e(i),a=r.Tu.get(e),c=r.Iu.get(a.targetId);if(c.length>1)return r.Iu.set(a.targetId,c.filter((d=>!Hh(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await $u(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Ku(r.remoteStore,a.targetId),Qu(r,a.targetId)})).catch(Cl)):(Qu(r,a.targetId),await $u(r.localStore,a.targetId,!0))}async function YR(i,e){const t=_e(i),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ku(t.remoteStore,r.targetId))}async function XR(i,e,t){const r=sx(i);try{const a=await(function(d,g){const p=_e(d),y=Ye.now(),b=g.reduce(((V,q)=>V.add(q.key)),Je());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let q=ki(),W=Je();return p.xs.getEntries(V,b).next((L=>{q=L,q.forEach(((ce,oe)=>{oe.isValidDocument()||(W=W.add(ce))}))})).next((()=>p.localDocuments.getOverlayedDocuments(V,q))).next((L=>{T=L;const ce=[];for(const oe of g){const ue=bC(oe,T.get(oe.key).overlayedDocument);ue!=null&&ce.push(new yo(oe.key,ue,Cw(ue.value.mapValue),xn.exists(!0)))}return p.mutationQueue.addMutationBatch(V,y,ce,g)})).next((L=>{S=L;const ce=L.applyToLocalDocumentSet(T,W);return p.documentOverlayCache.saveOverlays(V,L.batchId,ce)}))})).then((()=>({batchId:S.batchId,changes:qw(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(d,g,p){let y=d.du[d.currentUser.toKey()];y||(y=new en(Ke)),y=y.insert(g,p),d.du[d.currentUser.toKey()]=y})(r,a.batchId,t),await xo(r,a.changes),await rd(r.remoteStore)}catch(a){const c=sd(a,"Failed to persist write");t.reject(c)}}async function rS(i,e){const t=_e(i);try{const r=await gR(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const d=t.Au.get(c);d&&(Me(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?d.hu=!0:a.modifiedDocuments.size>0?Me(d.hu,14607):a.removedDocuments.size>0&&(Me(d.hu,42227),d.hu=!1))})),await xo(t,r,e)}catch(r){await Cl(r)}}function U_(i,e,t){const r=_e(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((c,d)=>{const g=d.view.va(e);g.snapshot&&a.push(g.snapshot)})),(function(d,g){const p=_e(d);p.onlineState=g;let y=!1;p.queries.forEach(((b,T)=>{for(const S of T.ba)S.va(g)&&(y=!0)})),y&&J0(p)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JR(i,e,t){const r=_e(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),c=a&&a.key;if(c){let d=new en(be.comparator);d=d.insert(c,on.newNoDocument(c,Le.min()));const g=Je().add(c),p=new Qh(Le.min(),new Map,new en(Ke),d,g);await rS(r,p),r.Ru=r.Ru.remove(c),r.Au.delete(e),ix(r)}else await $u(r.localStore,e,!1).then((()=>Qu(r,e,t))).catch(Cl)}async function ZR(i,e){const t=_e(i),r=e.batch.batchId;try{const a=await fR(t.localStore,e);rx(t,r,null),nx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await xo(t,a)}catch(a){await Cl(a)}}async function ej(i,e,t){const r=_e(i);try{const a=await(function(d,g){const p=_e(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return p.mutationQueue.lookupMutationBatch(y,g).next((T=>(Me(T!==null,37113),b=T.keys(),p.mutationQueue.removeMutationBatch(y,T)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,b,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>p.localDocuments.getDocuments(y,b)))}))})(r.localStore,e);rx(r,e,t),nx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await xo(r,a)}catch(a){await Cl(a)}}async function tj(i,e){const t=_e(i);kl(t.remoteStore)||de(Nl,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(d){const g=_e(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(p=>g.mutationQueue.getHighestUnacknowledgedBatchId(p)))})(t.localStore);if(r===yl)return void e.resolve();const a=t.mu.get(r)||[];a.push(e),t.mu.set(r,a)}catch(r){const a=sd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function nx(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function rx(i,e,t){const r=_e(i);let a=r.du[r.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function Qu(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((r=>{i.Vu.containsKey(r)||iS(i,r)}))}function iS(i,e){i.Eu.delete(e.path.canonicalString());const t=i.Ru.get(e);t!==null&&(Ku(i.remoteStore,t),i.Ru=i.Ru.remove(e),i.Au.delete(t),ix(i))}function s0(i,e,t){for(const r of t)r instanceof ZT?(i.Vu.addReference(r.key,e),nj(i,r)):r instanceof eS?(de(Nl,"Document no longer in limbo: "+r.key),i.Vu.removeReference(r.key,e),i.Vu.containsKey(r.key)||iS(i,r.key)):Ce(19791,{wu:r})}function nj(i,e){const t=e.key,r=t.path.canonicalString();i.Ru.get(t)||i.Eu.has(r)||(de(Nl,"New document in limbo: "+t),i.Eu.add(r),ix(i))}function ix(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new be(at.fromString(e)),r=i.fu.next();i.Au.set(r,new HR(t)),i.Ru=i.Ru.insert(t,r),pm(i.remoteStore,new lo(Jr(Zu(t.path)),r,"TargetPurposeLimboResolution",Ri.ce))}}async function xo(i,e,t){const r=_e(i),a=[],c=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((g,p)=>{d.push(r.pu(p,e,t).then((y=>{if((y||t)&&r.isPrimaryClient){const b=y?!y.fromCache:t?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(y){a.push(y);const b=F0.Es(p.targetId,y);c.push(b)}})))})),await Promise.all(d),r.Pu.J_(a),await(async function(p,y){const b=_e(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>G.forEach(y,(S=>G.forEach(S.Ts,(V=>b.persistence.referenceDelegate.addReference(T,S.targetId,V))).next((()=>G.forEach(S.Is,(V=>b.persistence.referenceDelegate.removeReference(T,S.targetId,V)))))))))}catch(T){if(!Rl(T))throw T;de(q0,"Failed to update sequence numbers: "+T)}for(const T of y){const S=T.targetId;if(!T.fromCache){const V=b.vs.get(S),q=V.snapshotVersion,W=V.withLastLimboFreeSnapshotVersion(q);b.vs=b.vs.insert(S,W)}}})(r.localStore,c))}async function rj(i,e){const t=_e(i);if(!t.currentUser.isEqual(e)){de(Nl,"User change. New user:",e.toKey());const r=await MT(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((g=>{g.forEach((p=>{p.reject(new se(Q.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xo(t,r.Ns)}}function ij(i,e){const t=_e(i),r=t.Au.get(e);if(r&&r.hu)return Je().add(r.key);{let a=Je();const c=t.Iu.get(e);if(!c)return a;for(const d of c){const g=t.Tu.get(d);a=a.unionWith(g.view.nu)}return a}}async function sj(i,e){const t=_e(i),r=await Hg(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&s0(t,e.targetId,a.au),a}async function aj(i,e){const t=_e(i);return OT(t.localStore,e).then((r=>xo(t,r)))}async function oj(i,e,t,r){const a=_e(i),c=await(function(g,p){const y=_e(g),b=_e(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",(T=>b.Xn(T,p).next((S=>S?y.localDocuments.getDocuments(T,S):G.resolve(null)))))})(a.localStore,e);c!==null?(t==="pending"?await rd(a.remoteStore):t==="acknowledged"||t==="rejected"?(rx(a,e,r||null),nx(a,e),(function(g,p){_e(_e(g).mutationQueue).nr(p)})(a.localStore,e)):Ce(6720,"Unknown batchState",{bu:t}),await xo(a,c)):de(Nl,"Cannot apply mutation batch with id: "+e)}async function lj(i,e){const t=_e(i);if(ym(t),sx(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await F_(t,r.toArray());t.gu=!0,await r0(t.remoteStore,!0);for(const c of a)pm(t.remoteStore,c)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):a=a.then((()=>(Qu(t,d),$u(t.localStore,d,!0)))),Ku(t.remoteStore,d)})),await a,await F_(t,r),(function(d){const g=_e(d);g.Au.forEach(((p,y)=>{Ku(g.remoteStore,y)})),g.Vu.zr(),g.Au=new Map,g.Ru=new en(be.comparator)})(t),t.gu=!1,await r0(t.remoteStore,!1)}}async function F_(i,e,t){const r=_e(i),a=[],c=[];for(const d of e){let g;const p=r.Iu.get(d);if(p&&p.length!==0){g=await Hu(r.localStore,Jr(p[0]));for(const y of p){const b=r.Tu.get(y),T=await sj(r,b);T.snapshot&&c.push(T.snapshot)}}else{const y=await zT(r.localStore,d);g=await Hu(r.localStore,y),await tx(r,sS(y),d,!1,g.resumeToken)}a.push(g)}return r.Pu.J_(c),a}function sS(i){return Bw(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function cj(i){return(function(t){return _e(_e(t).persistence).hs()})(_e(i).localStore)}async function uj(i,e,t,r){const a=_e(i);if(a.gu)return void de(Nl,"Ignoring unexpected query state notification.");const c=a.Iu.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const d=await OT(a.localStore,Pw(c[0])),g=Qh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Tn.EMPTY_BYTE_STRING);await xo(a,d,g);break}case"rejected":await $u(a.localStore,e,!0),Qu(a,e,r);break;default:Ce(64155,t)}}async function dj(i,e,t){const r=ym(i);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){de(Nl,"Adding an already active target "+a);continue}const c=await zT(r.localStore,a),d=await Hu(r.localStore,c);await tx(r,sS(c),d.targetId,!1,d.resumeToken),pm(r.remoteStore,d)}for(const a of t)r.Iu.has(a)&&await $u(r.localStore,a,!1).then((()=>{Ku(r.remoteStore,a),Qu(r,a)})).catch(Cl)}}function ym(i){const e=_e(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=rS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ij.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JR.bind(null,e),e.Pu.J_=FR.bind(null,e.eventManager),e.Pu.yu=qR.bind(null,e.eventManager),e}function sx(i){const e=_e(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ej.bind(null,e),e}function hj(i,e,t){const r=_e(i);(async function(c,d,g){try{const p=await d.getMetadata();if(await(function(V,q){const W=_e(V),L=Ln(q.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",(ce=>W.Pi.getBundleMetadata(ce,q.id))).then((ce=>!!ce&&ce.createTime.compareTo(L)>=0))})(c.localStore,p))return await d.close(),g._completeWith((function(V){return{taskState:"Success",documentsLoaded:V.totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}})(p)),Promise.resolve(new Set);g._updateProgress(JT(p));const y=new ex(p,d.serializer);let b=await d.Su();for(;b;){const S=await y.Ga(b);S&&g._updateProgress(S),b=await d.Su()}const T=await y.ja(c.localStore);return await xo(c,T.Ja,void 0),await(function(V,q){const W=_e(V);return W.persistence.runTransaction("Save bundle","readwrite",(L=>W.Pi.saveBundleMetadata(L,q)))})(c.localStore,p),g._completeWith(T.progress),Promise.resolve(T.Ha)}catch(p){return Vi(Nl,`Loading bundle failed with ${p}`),g._failWith(p),Promise.resolve(new Set)}})(r,e,t).then((a=>{r.sharedClientState.notifyBundleLoaded(a)}))}class Wu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return DT(this.persistence,new NT,e.initialUser,this.serializer)}Cu(e){return new L0(mm.Vi,this.serializer)}Du(e){return new qT}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wu.provider={build:()=>new Wu};class ax extends Wu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Me(this.persistence.referenceDelegate instanceof Gg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new AT(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Yr.withCacheSize(this.cacheSizeBytes):Yr.DEFAULT;return new L0((r=>Gg.Vi(r,t)),this.serializer)}}class ox extends Wu{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await sx(this.xu.syncEngine),await rd(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return DT(this.persistence,new NT,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new AT(r,e.asyncQueue,t)}Mu(e,t){const r=new vI(t,this.persistence);return new xI(e.asyncQueue,r)}Cu(e){const t=U0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Yr.withCacheSize(this.cacheSizeBytes):Yr.DEFAULT;return new P0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,GT(),Ig(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new qT}}class aS extends ox{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof my&&(this.sharedClientState.syncEngine={So:oj.bind(null,t),Do:uj.bind(null,t),Co:dj.bind(null,t),hs:cj.bind(null,t),bo:aj.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await lj(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=GT();if(!my.v(t))throw new se(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=U0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new my(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class El{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>U_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rj.bind(null,this.syncEngine),await r0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UR})()}createDatastore(e){const t=kc(e.databaseInfo.databaseId),r=wR(e.databaseInfo);return IR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,c,d,g){return new RR(r,a,c,d,g)})(this.localStore,this.datastore,e.asyncQueue,(t=>U_(this.syncEngine,t,0)),(function(){return M_.v()?new M_:new xR})())}createSyncEngine(e,t){return(function(a,c,d,g,p,y,b){const T=new $R(a,c,d,g,p,y);return b&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=_e(t);de(Ic,"RemoteStore shutting down."),r.Ea.add(5),await nd(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}El.provider={build:()=>new El};function q_(i,e=10240){let t=0;return{async read(){if(t<i.byteLength){const r={value:i.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class xm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):On("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class fj{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new xr,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);const a=await this.Uu(r);return new XT(JSON.parse(a),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class gj{constructor(e,t){this.bundleData=e,this.serializer=t,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Ua())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r?.qa)}`);this.metadata=r;do r=this.Su(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Qu(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.Ku(),t=this.Uu(e);return new XT(JSON.parse(t),e)}Uu(e){if(this.cursor+e>this.bundleData.length)throw new se(Q.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}Ku(){const e=this.cursor;let t=this.cursor;for(;t<this.bundleData.length;){if(this.bundleData[t]==="{"){if(t===e)throw new Error("First character is a bracket and not a number");return this.cursor=t,Number(this.bundleData.slice(e,t))}t++}throw new Error("Reached the end of bundle when more is expected.")}}let mj=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new se(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,c){const d=_e(a),g={documents:c.map((T=>Oh(d.serializer,T)))},p=await d.jo("BatchGetDocuments",d.serializer.databaseId,at.emptyPath(),g,c.length),y=new Map;p.forEach((T=>{const S=jC(d.serializer,T);y.set(S.key.toString(),S)}));const b=[];return c.forEach((T=>{const S=y.get(T.toString());Me(!!S,55234,{key:T}),b.push(S)})),b})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new td(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const a=be.fromPath(r);this.mutations.push(new j0(a,this.precondition(a)))})),await(async function(r,a){const c=_e(r),d={writes:a.map((g=>Lh(c.serializer,g)))};await c.Wo("Commit",c.serializer.databaseId,at.emptyPath(),d)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ce(50498,{Gu:e.constructor.name});t=Le.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new se(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Le.min())?xn.exists(!1):xn.updateTime(t):xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Le.min()))throw new se(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xn.updateTime(t)}return xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};class pj{constructor(e,t,r,a,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=c,this.zu=r.maxAttempts,this.M_=new H0(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new mj(this.datastore),t=this.Ju(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((a=>{this.Zu(a)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const t=this.updateFunction(e);return!Fh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!eT(t)}return!1}}const Al="FirestoreClient";class yj{constructor(e,t,r,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=pr.UNAUTHENTICATED,this.clientId=Zg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async d=>{de(Al,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(de(Al,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=sd(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function yy(i,e){i.asyncQueue.verifyOperationInProgress(),de(Al,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async a=>{r.isEqual(a)||(await MT(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function G_(i,e){i.asyncQueue.verifyOperationInProgress();const t=await lx(i);de(Al,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>B_(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,a)=>B_(e.remoteStore,a))),i._onlineComponents=e}async function lx(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){de(Al,"Using user provided OfflineComponentProvider");try{await yy(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Q.FAILED_PRECONDITION||a.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Vi("Error using user provided cache. Falling back to memory cache: "+t),await yy(i,new Wu)}}else de(Al,"Using default OfflineComponentProvider"),await yy(i,new ax(void 0));return i._offlineComponents}async function vm(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(de(Al,"Using user provided OnlineComponentProvider"),await G_(i,i._uninitializedComponentsProvider._online)):(de(Al,"Using default OnlineComponentProvider"),await G_(i,new El))),i._onlineComponents}function oS(i){return lx(i).then((e=>e.persistence))}function ad(i){return lx(i).then((e=>e.localStore))}function lS(i){return vm(i).then((e=>e.remoteStore))}function cx(i){return vm(i).then((e=>e.syncEngine))}function cS(i){return vm(i).then((e=>e.datastore))}async function Yu(i){const e=await vm(i),t=e.eventManager;return t.onListen=KR.bind(null,e.syncEngine),t.onUnlisten=WR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=QR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=YR.bind(null,e.syncEngine),t}function xj(i){return i.asyncQueue.enqueue((async()=>{const e=await oS(i),t=await lS(i);return e.setNetworkEnabled(!0),(function(a){const c=_e(a);return c.Ea.delete(0),Yh(c)})(t)}))}function vj(i){return i.asyncQueue.enqueue((async()=>{const e=await oS(i),t=await lS(i);return e.setNetworkEnabled(!1),(async function(a){const c=_e(a);c.Ea.add(0),await nd(c),c.Va.set("Offline")})(t)}))}function bj(i,e,t,r){const a=new xm(r),c=new Z0(e,a,t);return i.asyncQueue.enqueueAndForget((async()=>Y0(await Yu(i),c))),()=>{a.Nu(),i.asyncQueue.enqueueAndForget((async()=>X0(await Yu(i),c)))}}function _j(i,e){const t=new xr;return i.asyncQueue.enqueueAndForget((async()=>(async function(a,c,d){try{const g=await(function(y,b){const T=_e(y);return T.persistence.runTransaction("read document","readonly",(S=>T.localDocuments.getDocument(S,b)))})(a,c);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new se(Q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const p=sd(g,`Failed to get document '${c} from cache`);d.reject(p)}})(await ad(i),e,t))),t.promise}function uS(i,e,t={}){const r=new xr;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,p,y){const b=new xm({next:S=>{b.Nu(),d.enqueueAndForget((()=>X0(c,T)));const V=S.docs.has(g);!V&&S.fromCache?y.reject(new se(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&S.fromCache&&p&&p.source==="server"?y.reject(new se(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new Z0(Zu(g.path),b,{includeMetadataChanges:!0,Ka:!0});return Y0(c,T)})(await Yu(i),i.asyncQueue,e,t,r))),r.promise}function wj(i,e){const t=new xr;return i.asyncQueue.enqueueAndForget((async()=>(async function(a,c,d){try{const g=await Hg(a,c,!0),p=new tS(c,g.ks),y=p.ru(g.documents),b=p.applyChanges(y,!1);d.resolve(b.snapshot)}catch(g){const p=sd(g,`Failed to execute query '${c} against cache`);d.reject(p)}})(await ad(i),e,t))),t.promise}function dS(i,e,t={}){const r=new xr;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,p,y){const b=new xm({next:S=>{b.Nu(),d.enqueueAndForget((()=>X0(c,T))),S.fromCache&&p.source==="server"?y.reject(new se(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new Z0(g,b,{includeMetadataChanges:!0,Ka:!0});return Y0(c,T)})(await Yu(i),i.asyncQueue,e,t,r))),r.promise}function Tj(i,e,t){const r=new xr;return i.asyncQueue.enqueueAndForget((async()=>{try{const a=await cS(i);r.resolve((async function(d,g,p){const y=_e(d),{request:b,gt:T,parent:S}=dT(y.serializer,zw(g),p);y.connection.Ko||delete b.parent;const V=(await y.jo("RunAggregationQuery",y.serializer.databaseId,S,b,1)).filter((W=>!!W.result));Me(V.length===1,64727);const q=V[0].result?.aggregateFields;return Object.keys(q).reduce(((W,L)=>(W[T[L]]=q[L],W)),{})})(a,e,t))}catch(a){r.reject(a)}})),r.promise}function Sj(i,e){const t=new xr;return i.asyncQueue.enqueueAndForget((async()=>XR(await cx(i),e,t))),t.promise}function Ej(i,e){const t=new xm(e);return i.asyncQueue.enqueueAndForget((async()=>(function(a,c){_e(a).Ca.add(c),c.next()})(await Yu(i),t))),()=>{t.Nu(),i.asyncQueue.enqueueAndForget((async()=>(function(a,c){_e(a).Ca.delete(c)})(await Yu(i),t)))}}function Aj(i,e,t){const r=new xr;return i.asyncQueue.enqueueAndForget((async()=>{const a=await cS(i);new pj(i.asyncQueue,a,t,e,r).ju()})),r.promise}function Ij(i,e,t,r){const a=(function(d,g){let p;return p=typeof d=="string"?nT().encode(d):d,(function(b,T){return new fj(b,T)})((function(b,T){if(b instanceof Uint8Array)return q_(b,T);if(b instanceof ArrayBuffer)return q_(new Uint8Array(b),T);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(p),g)})(t,kc(e));i.asyncQueue.enqueueAndForget((async()=>{hj(await cx(i),a,r)}))}function Cj(i,e){return i.asyncQueue.enqueue((async()=>(function(r,a){const c=_e(r);return c.persistence.runTransaction("Get named query","readonly",(d=>c.Pi.getNamedQuery(d,a)))})(await ad(i),e)))}function hS(i,e){return(function(r,a){return new gj(r,a)})(i,e)}function Rj(i,e){return i.asyncQueue.enqueue((async()=>(async function(r,a){const c=_e(r),d=c.indexManager,g=[];return c.persistence.runTransaction("Configure indexes","readwrite",(p=>d.getFieldIndexes(p).next((y=>(function(T,S,V,q,W){T=[...T],S=[...S],T.sort(V),S.sort(V);const L=T.length,ce=S.length;let oe=0,ue=0;for(;oe<ce&&ue<L;){const me=V(T[ue],S[oe]);me<0?W(T[ue++]):me>0?q(S[oe++]):(oe++,ue++)}for(;oe<ce;)q(S[oe++]);for(;ue<L;)W(T[ue++])})(y,a,gI,(b=>{g.push(d.addFieldIndex(p,b))}),(b=>{g.push(d.deleteFieldIndex(p,b))})))).next((()=>G.waitFor(g)))))})(await ad(i),e)))}function jj(i,e){return i.asyncQueue.enqueue((async()=>(function(r,a){_e(r).Cs.As=a})(await ad(i),e)))}function kj(i){return i.asyncQueue.enqueue((async()=>(function(t){const r=_e(t),a=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",(c=>a.deleteAllFieldIndexes(c)))})(await ad(i))))}function fS(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const Nj="ComponentProvider",H_=new Map;function Dj(i,e,t,r,a){return new QI(i,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,fS(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}const gS="firestore.googleapis.com",$_=!0;class K_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gS,this.ssl=$_}else this.host=e.host,this.ssl=e.ssl??$_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_T;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ET)throw new se(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xh{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new X2;switch(r.type){case"firstParty":return new oI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=H_.get(t);r&&(de(Nj,"Removing Datastore"),H_.delete(t),r.terminate())})(this),Promise.resolve()}}function mS(i,e,t,r={}){i=ot(i,Xh);const a=Uh(e),c=i._getSettings(),d={...c,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${t}`;a&&(g0(`https://${g}`),C2("Firestore",!0)),c.host!==gS&&c.host!==g&&Vi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:a,emulatorOptions:r};if(!xl(p,d)&&(i._setSettings(p),r.mockUserToken)){let y,b;if(typeof r.mockUserToken=="string")y=r.mockUserToken,b=pr.MOCK_USER;else{y=I2(r.mockUserToken,i._app?.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new se(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new pr(T)}i._authCredentials=new iI(new Y2(y,b))}}class ir{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ir(this.firestore,e,this._query)}}class Vt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(jc(t,Vt._jsonSchema))return new Vt(e,r||null,new be(at.fromString(t.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Wn("string",Vt._jsonSchemaVersion),referencePath:Wn("string")};class Hs extends ir{constructor(e,t,r){super(e,t,Zu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new be(e))}withConverter(e){return new Hs(this.firestore,e,this._path)}}function Rt(i,e,...t){if(i=Yn(i),y0("collection","path",e),i instanceof Xh){const r=at.fromString(e,...t);return V1(r),new Hs(i,null,r)}{if(!(i instanceof Vt||i instanceof Hs))throw new se(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(at.fromString(e,...t));return V1(r),new Hs(i.firestore,null,r)}}function Mj(i,e){if(i=ot(i,Xh),y0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new se(Q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ir(i,null,(function(r){return new mo(at.emptyPath(),r)})(e))}function Ae(i,e,...t){if(i=Yn(i),arguments.length===1&&(e=Zg.newId()),y0("doc","path",e),i instanceof Xh){const r=at.fromString(e,...t);return M1(r),new Vt(i,null,new be(r))}{if(!(i instanceof Vt||i instanceof Hs))throw new se(Q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(at.fromString(e,...t));return M1(r),new Vt(i.firestore,i instanceof Hs?i.converter:null,new be(r))}}function Vj(i,e){return i=Yn(i),e=Yn(e),(i instanceof Vt||i instanceof Hs)&&(e instanceof Vt||e instanceof Hs)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function ux(i,e){return i=Yn(i),e=Yn(e),i instanceof ir&&e instanceof ir&&i.firestore===e.firestore&&Hh(i._query,e._query)&&i.converter===e.converter}const Q_="AsyncQueue";class W_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new H0(this,"async_queue_retry"),this._c=()=>{const r=Ig();r&&de(Q_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ig();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ig();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new xr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Rl(e))throw e;de(Q_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,On("INTERNAL UNHANDLED ERROR: ",Y_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=W0.createAndSchedule(this,e,t,r,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&Ce(47125,{Pc:Y_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Y_(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class pS{constructor(){this._progressObserver={},this._taskCompletionResolver=new xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Bj=-1;class Kt extends Xh{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new W_,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new W_(e),this._firestoreClient=void 0,await e}}}function zj(i,e,t){t||(t=Mh);const r=Jg(i,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),c=r.getOptions(t);if(xl(c,e))return a;throw new se(Q.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new se(Q.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ET)throw new se(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Uh(e.host)&&g0(e.host),r.initialize({options:e,instanceIdentifier:t})}function yS(i,e){const t=typeof i=="object"?i:P2(),r=typeof i=="string"?i:e||Mh,a=Jg(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const c=E2("firestore");c&&mS(a,...c)}return a}function vn(i){if(i._terminated)throw new se(Q.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||xS(i),i._firestoreClient}function xS(i){const e=i._freezeSettings(),t=Dj(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new yj(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(i._componentsProvider))}function Oj(i,e){Vi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();return vS(i,El.provider,{build:r=>new ox(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function Lj(i){Vi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=i._freezeSettings();vS(i,El.provider,{build:t=>new aS(t,e.cacheSizeBytes)})}function vS(i,e,t){if((i=ot(i,Kt))._firestoreClient||i._terminated)throw new se(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new se(Q.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:e,_offline:t},xS(i)}function Pj(i){if(i._initialized&&!i._terminated)throw new se(Q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xr;return i._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!ya.v())return Promise.resolve();const a=r+kT;await ya.delete(a)})(U0(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function Uj(i){return(function(t){const r=new xr;return t.asyncQueue.enqueueAndForget((async()=>tj(await cx(t),r))),r.promise})(vn(i=ot(i,Kt)))}function Fj(i){return xj(vn(i=ot(i,Kt)))}function qj(i){return vj(vn(i=ot(i,Kt)))}function Gj(i){return F4(i.app,"firestore",i._databaseId.database),i._delete()}function a0(i,e){const t=vn(i=ot(i,Kt)),r=new pS;return Ij(t,i._databaseId,e,r),r}function bS(i,e){return Cj(vn(i=ot(i,Kt)),e).then((t=>t?new ir(i,null,t.query):null))}class Ci{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ci(Tn.fromBase64String(e))}catch(t){throw new se(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ci(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ci._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jc(e,Ci._jsonSchema))return Ci.fromBase64String(e.bytes)}}Ci._jsonSchemaVersion="firestore/bytes/1.0",Ci._jsonSchema={type:Wn("string",Ci._jsonSchemaVersion),bytes:Wn("string")};class Nc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Hj(){return new Nc(Vy)}class Dl{constructor(e){this._methodName=e}}class $s{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$s._jsonSchemaVersion}}static fromJSON(e){if(jc(e,$s._jsonSchema))return new $s(e.latitude,e.longitude)}}$s._jsonSchemaVersion="firestore/geoPoint/1.0",$s._jsonSchema={type:Wn("string",$s._jsonSchemaVersion),latitude:Wn("number"),longitude:Wn("number")};class es{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:es._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jc(e,es._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new es(e.vectorValues);throw new se(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}es._jsonSchemaVersion="firestore/vectorValue/1.0",es._jsonSchema={type:Wn("string",es._jsonSchemaVersion),vectorValues:Wn("object")};const $j=/^__.*__$/;class Kj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new yo(e,this.data,this.fieldMask,t,this.fieldTransforms):new ed(e,this.data,t,this.fieldTransforms)}}class _S{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new yo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wS(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{dataSource:i})}}class bm{constructor(e,t,r,a,c,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new bm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Wg(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(wS(this.dataSource)&&$j.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Qj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||kc(e)}createContext(e,t,r,a=!1){return new bm({dataSource:e,methodName:t,targetDoc:r,path:ln.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dc(i){const e=i._freezeSettings(),t=kc(i._databaseId);return new Qj(i._databaseId,!!e.ignoreUndefinedProperties,t)}function _m(i,e,t,r,a,c={}){const d=i.createContext(c.merge||c.mergeFields?2:0,e,t,a);yx("Data must be an object, but it was:",d,r);const g=ES(r,d);let p,y;if(c.merge)p=new ji(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const b=[];for(const T of c.mergeFields){const S=go(e,T,t);if(!d.contains(S))throw new se(Q.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);IS(b,S)||b.push(S)}p=new ji(b),y=d.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,y=d.fieldTransforms;return new Kj(new yr(g),p,y)}class Jh extends Dl{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jh}}function TS(i,e,t){return new bm({dataSource:3,targetDoc:e.settings.targetDoc,methodName:i._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class dx extends Dl{_toFieldTransform(e){return new Kh(e.path,new Fu)}isEqual(e){return e instanceof dx}}class hx extends Dl{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=TS(this,e,!0),r=this.Ac.map((c=>Mc(c,t))),a=new wc(r);return new Kh(e.path,a)}isEqual(e){return e instanceof hx&&xl(this.Ac,e.Ac)}}class fx extends Dl{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=TS(this,e,!0),r=this.Ac.map((c=>Mc(c,t))),a=new Tc(r);return new Kh(e.path,a)}isEqual(e){return e instanceof fx&&xl(this.Ac,e.Ac)}}class gx extends Dl{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new qu(e.serializer,$w(e.serializer,this.Vc));return new Kh(e.path,t)}isEqual(e){return e instanceof gx&&this.Vc===e.Vc}}function mx(i,e,t,r){const a=i.createContext(1,e,t);yx("Data must be an object, but it was:",a,r);const c=[],d=yr.empty();jl(r,((p,y)=>{const b=xx(e,p,t);y=Yn(y);const T=a.childContextForFieldPath(b);if(y instanceof Jh)c.push(b);else{const S=Mc(y,T);S!=null&&(c.push(b),d.set(b,S))}}));const g=new ji(c);return new _S(d,g,a.fieldTransforms)}function px(i,e,t,r,a,c){const d=i.createContext(1,e,t),g=[go(e,r,t)],p=[a];if(c.length%2!=0)throw new se(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<c.length;S+=2)g.push(go(e,c[S])),p.push(c[S+1]);const y=[],b=yr.empty();for(let S=g.length-1;S>=0;--S)if(!IS(y,g[S])){const V=g[S];let q=p[S];q=Yn(q);const W=d.childContextForFieldPath(V);if(q instanceof Jh)y.push(V);else{const L=Mc(q,W);L!=null&&(y.push(V),b.set(V,L))}}const T=new ji(y);return new _S(b,T,d.fieldTransforms)}function SS(i,e,t,r=!1){return Mc(t,i.createContext(r?4:3,e))}function Mc(i,e){if(AS(i=Yn(i)))return yx("Unsupported field value:",e,i),ES(i,e);if(i instanceof Dl)return(function(r,a){if(!wS(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const c=[];let d=0;for(const g of r){let p=Mc(g,a.childContextForArray(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}})(i,e)}return(function(r,a){if((r=Yn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $w(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Ye.fromDate(r);return{timestampValue:Gu(a.serializer,c)}}if(r instanceof Ye){const c=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gu(a.serializer,c)}}if(r instanceof $s)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ci)return{bytesValue:sT(a.serializer,r._byteString)};if(r instanceof Vt){const c=a.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw a.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:V0(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof es)return(function(d,g){const p=d instanceof es?d.toArray():d;return{mapValue:{fields:{[S0]:{stringValue:E0},[Lu]:{arrayValue:{values:p.map((b=>{if(typeof b!="number")throw g.createError("VectorValues must only contain numeric values.");return R0(g.serializer,b)}))}}}}}})(r,a);if(pT(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${em(r)}`)})(i,e)}function ES(i,e){const t={};return vw(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jl(i,((r,a)=>{const c=Mc(a,e.childContextForField(r));c!=null&&(t[r]=c)})),{mapValue:{fields:t}}}function AS(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ye||i instanceof $s||i instanceof Ci||i instanceof Vt||i instanceof Dl||i instanceof es||pT(i))}function yx(i,e,t){if(!AS(t)||!ew(t)){const r=em(t);throw r==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+r)}}function go(i,e,t){if((e=Yn(e))instanceof Nc)return e._internalPath;if(typeof e=="string")return xx(i,e);throw Wg("Field path arguments must be of type string or ",i,!1,void 0,t)}const Wj=new RegExp("[~\\*/\\[\\]]");function xx(i,e,t){if(e.search(Wj)>=0)throw Wg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Nc(...e.split("."))._internalPath}catch{throw Wg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Wg(i,e,t,r,a){const c=r&&!r.isEmpty(),d=a!==void 0;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${r}`),d&&(p+=` in document ${a}`),p+=")"),new se(Q.INVALID_ARGUMENT,g+i+p)}function IS(i,e){return i.some((t=>t.isEqual(e)))}class vx{convertValue(e,t="none"){switch(_l(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return jl(e,((a,c)=>{r[a]=this.convertValue(c,t)})),r}convertVectorValue(e){const t=e.fields?.[Lu].arrayValue?.values?.map((r=>yn(r.doubleValue)));return new es(t)}convertGeoPoint(e){return new $s(yn(e.latitude),yn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=am(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dh(e));default:return null}}convertTimestamp(e){const t=ho(e);return new Ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=at.fromString(e);Me(mT(r),9688,{name:e});const a=new bl(r.get(1),r.get(3)),c=new be(r.popFirst(5));return a.isEqual(t)||On(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}class Ml extends vx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ci(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}}function Yj(){return new Jh("deleteField")}function wm(){return new dx("serverTimestamp")}function Ks(...i){return new hx("arrayUnion",i)}function Il(...i){return new fx("arrayRemove",i)}function Xj(i){return new gx("increment",i)}function Jj(i){return new es(i)}function Zj(i){const e=vn(ot(i.firestore,Kt)),t=e._onlineComponents?.datastore.serializer;return t===void 0?null:dm(t,Jr(i._query)).ft}function e5(i,e){const t=xw(e,((c,d)=>new Zw(d,c.aggregateType,c._internalFieldPath))),r=vn(ot(i.firestore,Kt)),a=r._onlineComponents?.datastore.serializer;return a===void 0?null:dT(a,zw(i._query),t,!0).request}const X_="@firebase/firestore",J_="4.11.0";function Ru(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const c of r)if(c in a&&typeof a[c]=="function")return!0;return!1})(i,["next","error","complete"])}class Xu{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class CS{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new yr({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}class Ph{constructor(e,t,r,a,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(go("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class t5 extends Ph{data(){return super.data()}}function RS(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new se(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bx{}class od extends bx{}function si(i,e,...t){let r=[];e instanceof bx&&r.push(e),r=r.concat(t),(function(c){const d=c.filter((p=>p instanceof Vc)).length,g=c.filter((p=>p instanceof ld)).length;if(d>1||d>0&&g>0)throw new se(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)i=a._apply(i);return i}class ld extends od{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ld(e,t,r)}_apply(e){const t=this._parse(e);return NS(e._query,t),new ir(e.firestore,e.converter,$y(e._query,t))}_parse(e){const t=Dc(e.firestore);return(function(c,d,g,p,y,b,T){let S;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new se(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){e2(T,b);const q=[];for(const W of T)q.push(Z_(p,c,W));S={arrayValue:{values:q}}}else S=Z_(p,c,T)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||e2(T,b),S=SS(g,d,T,b==="in"||b==="not-in");return ft.create(y,b,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function nr(i,e,t){const r=e,a=go("where",i);return ld._create(a,r,t)}class Vc extends bx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vc(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Mt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let d=a;const g=c.getFlattenedFilters();for(const p of g)NS(d,p),d=$y(d,p)})(e._query,t),new ir(e.firestore,e.converter,$y(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function n5(...i){return i.forEach((e=>DS("or",e))),Vc._create("or",i)}function r5(...i){return i.forEach((e=>DS("and",e))),Vc._create("and",i)}class Tm extends od{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Tm(e,t)}_apply(e){const t=(function(a,c,d){if(a.startAt!==null)throw new se(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new se(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zh(c,d)})(e._query,this._field,this._direction);return new ir(e.firestore,e.converter,oC(e._query,t))}}function jS(i,e="asc"){const t=e,r=go("orderBy",i);return Tm._create(r,t)}class Zh extends od{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Zh(e,t,r)}_apply(e){return new ir(e.firestore,e.converter,Pg(e._query,this._limit,this._limitType))}}function i5(i){return tw("limit",i),Zh._create("limit",i,"F")}function s5(i){return tw("limitToLast",i),Zh._create("limitToLast",i,"L")}class ef extends od{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ef(e,t,r)}_apply(e){const t=kS(e,this.type,this._docOrFields,this._inclusive);return new ir(e.firestore,e.converter,lC(e._query,t))}}function a5(...i){return ef._create("startAt",i,!0)}function o5(...i){return ef._create("startAfter",i,!1)}class tf extends od{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new tf(e,t,r)}_apply(e){const t=kS(e,this.type,this._docOrFields,this._inclusive);return new ir(e.firestore,e.converter,cC(e._query,t))}}function l5(...i){return tf._create("endBefore",i,!1)}function c5(...i){return tf._create("endAt",i,!0)}function kS(i,e,t,r){if(t[0]=Yn(t[0]),t[0]instanceof Ph)return(function(c,d,g,p,y){if(!p)throw new se(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const b=[];for(const T of Iu(c))if(T.field.isKeyField())b.push(bc(d,p.key));else{const S=p.data.field(T.field);if(sm(S))throw new se(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(S===null){const V=T.field.canonicalString();throw new se(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}b.push(S)}return new Tl(b,y)})(i._query,i.firestore._databaseId,e,t[0]._document,r);{const a=Dc(i.firestore);return(function(d,g,p,y,b,T){const S=d.explicitOrderBy;if(b.length>S.length)throw new se(Q.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let q=0;q<b.length;q++){const W=b[q];if(S[q].field.isKeyField()){if(typeof W!="string")throw new se(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof W}`);if(!I0(d)&&W.indexOf("/")!==-1)throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${W}' contains a slash.`);const L=d.path.child(at.fromString(W));if(!be.isDocumentKey(L))throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const ce=new be(L);V.push(bc(g,ce))}else{const L=SS(p,y,W);V.push(L)}}return new Tl(V,T)})(i._query,i.firestore._databaseId,a,e,t,r)}}function Z_(i,e,t){if(typeof(t=Yn(t))=="string"){if(t==="")throw new se(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!I0(e)&&t.indexOf("/")!==-1)throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(at.fromString(t));if(!be.isDocumentKey(r))throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bc(i,new be(r))}if(t instanceof Vt)return bc(i,t._key);throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${em(t)}.`)}function e2(i,e){if(!Array.isArray(i)||i.length===0)throw new se(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NS(i,e){const t=(function(a,c){for(const d of a)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function DS(i,e){if(!(e instanceof ld||e instanceof Vc))throw new se(Q.INVALID_ARGUMENT,`Function ${i}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}function Sm(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class _x extends vx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ci(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}}function u5(i){return new Xu("sum",go("sum",i))}function d5(i){return new Xu("avg",go("average",i))}function MS(){return new Xu("count")}function h5(i,e){return i instanceof Xu&&e instanceof Xu&&i.aggregateType===e.aggregateType&&i._internalFieldPath?.canonicalString()===e._internalFieldPath?.canonicalString()}function f5(i,e){return ux(i.query,e.query)&&xl(i.data(),e.data())}function g5(i){return VS(i,{count:MS()})}function VS(i,e){const t=ot(i.firestore,Kt),r=vn(t),a=xw(e,((c,d)=>new Zw(d,c.aggregateType,c._internalFieldPath)));return Tj(r,i._query,a).then((c=>(function(g,p,y){const b=new Ml(g);return new CS(p,b,y)})(t,i,c)))}class m5{constructor(e){this.kind="memory",this._onlineComponentProvider=El.provider,this._offlineComponentProvider=e?.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new ax(void 0)}}toJSON(){return{kind:this.kind}}}class p5{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=BS(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class y5{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Wu.provider}toJSON(){return{kind:this.kind}}}class x5{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new ax(e)}}toJSON(){return{kind:this.kind}}}function v5(){return new y5}function b5(i){return new x5(i?.cacheSizeBytes)}function _5(i){return new m5(i)}function w5(i){return new p5(i)}class T5{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=El.provider,this._offlineComponentProvider={build:t=>new ox(t,e?.cacheSizeBytes,this.forceOwnership)}}}class S5{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=El.provider,this._offlineComponentProvider={build:t=>new aS(t,e?.cacheSizeBytes)}}}function BS(i){return new T5(i?.forceOwnership)}function E5(){return new S5}const zS="NOT SUPPORTED";class co{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ni extends Ph{constructor(e,t,r,a,c,d){super(e,t,r,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(go("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ni._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}function A5(i,e,t){if(jc(e,Ni._jsonSchema)){if(e.bundle===zS)throw new se(Q.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=kc(i._databaseId),a=hS(e.bundle,r),c=a.t(),d=new ex(a.getMetadata(),r);for(const b of c)d.o(b);const g=d.documents;if(g.length!==1)throw new se(Q.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${g.length} documents.`);const p=um(r,g[0].document),y=new be(at.fromString(e.bundleName));return new Ni(i,new _x(i),y,p,new co(!1,!1),t||null)}}Ni._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ni._jsonSchema={type:Wn("string",Ni._jsonSchemaVersion),bundleSource:Wn("string","DocumentSnapshot"),bundleName:Wn("string"),bundle:Wn("string")};class Ah extends Ni{data(e={}){return super.data(e)}}class Di{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new co(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Ah(this._firestore,this._userDataWriter,r.key,r,new co(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let d=0;return a._snapshot.docChanges.map((g=>{const p=new Ah(a._firestore,a._userDataWriter,g.doc.key,g.doc,new co(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const p=new Ah(a._firestore,a._userDataWriter,g.doc.key,g.doc,new co(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,b=-1;return g.type!==0&&(y=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),b=d.indexOf(g.doc.key)),{type:C5(g.type),doc:p,oldIndex:y,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Di._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function I5(i,e,t){if(jc(e,Di._jsonSchema)){if(e.bundle===zS)throw new se(Q.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=kc(i._databaseId),a=hS(e.bundle,r),c=a.t(),d=new ex(a.getMetadata(),r);for(const S of c)d.o(S);if(d.queries.length!==1)throw new se(Q.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${d.queries.length} queries.`);const g=hm(d.queries[0].bundledQuery),p=d.documents;let y=new vc;p.map((S=>{const V=um(r,S.document);y=y.add(V)}));const b=Cc.fromInitialDocuments(g,y,Je(),!1,!1),T=new ir(i,t||null,g);return new Di(i,new _x(i),T,b)}}function C5(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:i})}}function R5(i,e){return i instanceof Ni&&e instanceof Ni?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(i._document===null?e._document===null:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Di&&e instanceof Di&&i._firestore===e._firestore&&ux(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}Di._jsonSchemaVersion="firestore/querySnapshot/1.0",Di._jsonSchema={type:Wn("string",Di._jsonSchemaVersion),bundleSource:Wn("string","QuerySnapshot"),bundleName:Wn("string"),bundle:Wn("string")};const j5={maxAttempts:5};class OS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dc(e)}set(e,t,r){this._verifyNotCommitted();const a=hl(e,this._firestore),c=Sm(a.converter,t,r),d=_m(this._dataReader,"WriteBatch.set",a._key,c,a.converter!==null,r);return this._mutations.push(d.toMutation(a._key,xn.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const c=hl(e,this._firestore);let d;return d=typeof(t=Yn(t))=="string"||t instanceof Nc?px(this._dataReader,"WriteBatch.update",c._key,t,r,a):mx(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hl(e,this._firestore);return this._mutations=this._mutations.concat(new td(t._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new se(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hl(i,e){if((i=Yn(i)).firestore!==e)throw new se(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class k5{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dc(e)}get(e){const t=hl(e,this._firestore),r=new _x(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return Ce(24041);const c=a[0];if(c.isFoundDocument())return new Ph(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new Ph(this._firestore,r,t._key,null,t.converter);throw Ce(18433,{doc:c})}))}set(e,t,r){const a=hl(e,this._firestore),c=Sm(a.converter,t,r),d=_m(this._dataReader,"Transaction.set",a._key,c,a.converter!==null,r);return this._transaction.set(a._key,d),this}update(e,t,r,...a){const c=hl(e,this._firestore);let d;return d=typeof(t=Yn(t))=="string"||t instanceof Nc?px(this._dataReader,"Transaction.update",c._key,t,r,a):mx(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,d),this}delete(e){const t=hl(e,this._firestore);return this._transaction.delete(t._key),this}}class LS extends k5{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=hl(e,this._firestore),r=new Ml(this._firestore);return super.get(e).then((a=>new Ni(this._firestore,r,t._key,a._document,new co(!1,!1),t.converter)))}}function N5(i,e,t){i=ot(i,Kt);const r={...j5,...t};(function(d){if(d.maxAttempts<1)throw new se(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const a=vn(i);return Aj(a,(c=>e(new LS(i,c))),r)}function zt(i){i=ot(i,Vt);const e=ot(i.firestore,Kt),t=vn(e);return uS(t,i._key).then((r=>wx(e,i,r)))}function D5(i){i=ot(i,Vt);const e=ot(i.firestore,Kt),t=vn(e),r=new Ml(e);return _j(t,i._key).then((a=>new Ni(e,r,i._key,a,new co(a!==null&&a.hasLocalMutations,!0),i.converter)))}function M5(i){i=ot(i,Vt);const e=ot(i.firestore,Kt),t=vn(e);return uS(t,i._key,{source:"server"}).then((r=>wx(e,i,r)))}function Mi(i){i=ot(i,ir);const e=ot(i.firestore,Kt),t=vn(e),r=new Ml(e);return RS(i._query),dS(t,i._query).then((a=>new Di(e,r,i,a)))}function V5(i){i=ot(i,ir);const e=ot(i.firestore,Kt),t=vn(e),r=new Ml(e);return wj(t,i._query).then((a=>new Di(e,r,i,a)))}function B5(i){i=ot(i,ir);const e=ot(i.firestore,Kt),t=vn(e),r=new Ml(e);return dS(t,i._query,{source:"server"}).then((a=>new Di(e,r,i,a)))}function Bc(i,e,t){i=ot(i,Vt);const r=ot(i.firestore,Kt),a=Sm(i.converter,e,t),c=Dc(r);return cd(r,[_m(c,"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,xn.none())])}function gt(i,e,t,...r){i=ot(i,Vt);const a=ot(i.firestore,Kt),c=Dc(a);let d;return d=typeof(e=Yn(e))=="string"||e instanceof Nc?px(c,"updateDoc",i._key,e,t,r):mx(c,"updateDoc",i._key,e),cd(a,[d.toMutation(i._key,xn.exists(!0))])}function ba(i){return cd(ot(i.firestore,Kt),[new td(i._key,xn.none())])}function Es(i,e){const t=ot(i.firestore,Kt),r=Ae(i),a=Sm(i.converter,e),c=Dc(i.firestore);return cd(t,[_m(c,"addDoc",r._key,a,i.converter!==null,{}).toMutation(r._key,xn.exists(!1))]).then((()=>r))}function rr(i,...e){i=Yn(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Ru(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Ru(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let c,d,g;if(i instanceof Vt)d=ot(i.firestore,Kt),g=Zu(i._key.path),c={next:y=>{e[r]&&e[r](wx(d,i,y))},error:e[r+1],complete:e[r+2]};else{const y=ot(i,ir);d=ot(y.firestore,Kt),g=y._query;const b=new Ml(d);c={next:T=>{e[r]&&e[r](new Di(d,b,y,T))},error:e[r+1],complete:e[r+2]},RS(i._query)}const p=vn(d);return bj(p,g,a,c)}function z5(i,e,...t){const r=Yn(i),a=(function(p){const y={bundle:"",bundleName:"",bundleSource:""},b=["bundle","bundleName","bundleSource"];for(const T of b){if(!(T in p)){y.error=`snapshotJson missing required field: ${T}`;break}const S=p[T];if(typeof S!="string"){y.error=`snapshotJson field '${T}' must be a string.`;break}if(S.length===0){y.error=`snapshotJson field '${T}' cannot be an empty string.`;break}T==="bundle"?y.bundle=S:T==="bundleName"?y.bundleName=S:T==="bundleSource"&&(y.bundleSource=S)}return y})(e);if(a.error)throw new se(Q.INVALID_ARGUMENT,a.error);let c,d=0;if(typeof t[d]!="object"||Ru(t[d])||(c=t[d++]),a.bundleSource==="QuerySnapshot"){let g=null;if(typeof t[d]=="object"&&Ru(t[d])){const p=t[d++];g={next:p.next,error:p.error,complete:p.complete}}else g={next:t[d++],error:t[d++],complete:t[d++]};return(function(y,b,T,S,V){let q,W=!1;return a0(y,b.bundle).then((()=>bS(y,b.bundleName))).then((ce=>{ce&&!W&&(V&&ce.withConverter(V),q=rr(ce,T||{},S))})).catch((ce=>(S.error&&S.error(ce),()=>{}))),()=>{W||(W=!0,q&&q())}})(r,a,c,g,t[d])}if(a.bundleSource==="DocumentSnapshot"){let g=null;if(typeof t[d]=="object"&&Ru(t[d])){const p=t[d++];g={next:p.next,error:p.error,complete:p.complete}}else g={next:t[d++],error:t[d++],complete:t[d++]};return(function(y,b,T,S,V){let q,W=!1;return a0(y,b.bundle).then((()=>{if(!W){const ce=new Vt(y,V||null,be.fromPath(b.bundleName));q=rr(ce,T||{},S)}})).catch((ce=>(S.error&&S.error(ce),()=>{}))),()=>{W||(W=!0,q&&q())}})(r,a,c,g,t[d])}throw new se(Q.INVALID_ARGUMENT,`unsupported bundle source: ${a.bundleSource}`)}function O5(i,e){i=ot(i,Kt);const t=vn(i),r=Ru(e)?e:{next:e};return Ej(t,r)}function cd(i,e){const t=vn(i);return Sj(t,e)}function wx(i,e,t){const r=t.docs.get(e._key),a=new Ml(i);return new Ni(i,a,e._key,r,new co(t.hasPendingWrites,t.fromCache),e.converter)}function L5(i){return i=ot(i,Kt),vn(i),new OS(i,(e=>cd(i,e)))}function P5(i,e){i=ot(i,Kt);const t=vn(i);if(!t._uninitializedComponentsProvider||t._uninitializedComponentsProvider._offline.kind==="memory")return Vi("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=(function(c){const d=typeof c=="string"?(function(y){try{return JSON.parse(y)}catch(b){throw new se(Q.INVALID_ARGUMENT,"Failed to parse JSON: "+b?.message)}})(c):c,g=[];if(Array.isArray(d.indexes))for(const p of d.indexes){const y=t2(p,"collectionGroup"),b=[];if(Array.isArray(p.fields))for(const T of p.fields){const S=t2(T,"fieldPath"),V=xx("setIndexConfiguration",S);T.arrayConfig==="CONTAINS"?b.push(new yc(V,2)):T.order==="ASCENDING"?b.push(new yc(V,0)):T.order==="DESCENDING"&&b.push(new yc(V,1))}g.push(new Du(Du.UNKNOWN_ID,y,b,Mu.empty()))}return g})(e);return Rj(t,r)}function t2(i,e){if(typeof i[e]!="string")throw new se(Q.INVALID_ARGUMENT,"Missing string value for: "+e);return i[e]}class PS{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function U5(i){i=ot(i,Kt);const e=n2.get(i);if(e)return e;if(vn(i)._uninitializedComponentsProvider?._offline.kind!=="persistent")return null;const r=new PS(i);return n2.set(i,r),r}function F5(i){US(i,!0)}function q5(i){US(i,!1)}function G5(i){const e=vn(i._firestore);kj(e).then((t=>de("deleting all persistent cache indexes succeeded"))).catch((t=>Vi("deleting all persistent cache indexes failed",t)))}function US(i,e){const t=vn(i._firestore);jj(t,e).then((r=>de(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((r=>Vi(`setting persistent cache index auto creation isEnabled=${e} failed`,r)))}const n2=new WeakMap;class H5{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Tx.instance.onExistenceFilterMismatch(e)}}class Tx{constructor(){this.i=new Map}static get instance(){return lg||(lg=new Tx,wC(lg)),lg}u(e){this.i.forEach((t=>t(e)))}onExistenceFilterMismatch(e){const t=Symbol(),r=this.i;return r.set(t,e),()=>r.delete(t)}}let lg=null;(function(e,t=!0){tI(O2),Ih(new ju("firestore",((r,{instanceIdentifier:a,options:c})=>{const d=r.getProvider("app").getImmediate(),g=new Kt(new sI(r.getProvider("auth-internal")),new lI(d,r.getProvider("app-check-internal")),WI(d,a),d);return c={useFetchStreams:t,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),ml(X_,J_,e),ml(X_,J_,"esm2020")})();const $5=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:vx,AggregateField:Xu,AggregateQuerySnapshot:CS,Bytes:Ci,CACHE_SIZE_UNLIMITED:Bj,CollectionReference:Hs,DocumentReference:Vt,DocumentSnapshot:Ni,FieldPath:Nc,FieldValue:Dl,Firestore:Kt,FirestoreError:se,GeoPoint:$s,LoadBundleTask:pS,PersistentCacheIndexManager:PS,Query:ir,QueryCompositeFilterConstraint:Vc,QueryConstraint:od,QueryDocumentSnapshot:Ah,QueryEndAtConstraint:tf,QueryFieldFilterConstraint:ld,QueryLimitConstraint:Zh,QueryOrderByConstraint:Tm,QuerySnapshot:Di,QueryStartAtConstraint:ef,SnapshotMetadata:co,Timestamp:Ye,Transaction:LS,VectorValue:es,WriteBatch:OS,_AutoId:Zg,_ByteString:Tn,_DatabaseId:bl,_DocumentKey:be,_EmptyAppCheckTokenProvider:cI,_EmptyAuthCredentialsProvider:X2,_FieldPath:ln,_TestingHooks:H5,_cast:ot,_debugAssert:rI,_internalAggregationQueryToProtoRunAggregationQueryRequest:e5,_internalQueryToProtoQueryTarget:Zj,_isBase64Available:$I,_logWarn:Vi,_validateIsNotUsedTogether:Z2,addDoc:Es,aggregateFieldEqual:h5,aggregateQuerySnapshotEqual:f5,and:r5,arrayRemove:Il,arrayUnion:Ks,average:d5,clearIndexedDbPersistence:Pj,collection:Rt,collectionGroup:Mj,connectFirestoreEmulator:mS,count:MS,deleteAllPersistentCacheIndexes:G5,deleteDoc:ba,deleteField:Yj,disableNetwork:qj,disablePersistentCacheIndexAutoCreation:q5,doc:Ae,documentId:Hj,documentSnapshotFromJSON:A5,enableIndexedDbPersistence:Oj,enableMultiTabIndexedDbPersistence:Lj,enableNetwork:Fj,enablePersistentCacheIndexAutoCreation:F5,endAt:c5,endBefore:l5,ensureFirestoreConfigured:vn,executeWrite:cd,getAggregateFromServer:VS,getCountFromServer:g5,getDoc:zt,getDocFromCache:D5,getDocFromServer:M5,getDocs:Mi,getDocsFromCache:V5,getDocsFromServer:B5,getFirestore:yS,getPersistentCacheIndexManager:U5,increment:Xj,initializeFirestore:zj,limit:i5,limitToLast:s5,loadBundle:a0,memoryEagerGarbageCollector:v5,memoryLocalCache:_5,memoryLruGarbageCollector:b5,namedQuery:bS,onSnapshot:rr,onSnapshotResume:z5,onSnapshotsInSync:O5,or:n5,orderBy:jS,persistentLocalCache:w5,persistentMultipleTabManager:E5,persistentSingleTabManager:BS,query:si,queryEqual:ux,querySnapshotFromJSON:I5,refEqual:Vj,runTransaction:N5,serverTimestamp:wm,setDoc:Bc,setIndexConfiguration:P5,setLogLevel:nI,snapshotEqual:R5,startAfter:o5,startAt:a5,sum:u5,terminate:Gj,updateDoc:gt,vector:Jj,waitForPendingWrites:Uj,where:nr,writeBatch:L5},Symbol.toStringTag,{value:"Module"}));var K5="firebase",Q5="12.9.0";ml(K5,Q5,"app");const FS="firebasestorage.googleapis.com",W5="storageBucket",Y5=120*1e3,X5=600*1e3;class wa extends Rc{constructor(e,t,r=0){super(xy(e),`Firebase Storage: ${t} (${xy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wa.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _a;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_a||(_a={}));function xy(i){return"storage/"+i}function J5(){const i="An unknown error occurred, please check the error payload for server response.";return new wa(_a.UNKNOWN,i)}function Z5(){return new wa(_a.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ek(){return new wa(_a.CANCELED,"User canceled the upload/download.")}function tk(i){return new wa(_a.INVALID_URL,"Invalid URL '"+i+"'.")}function nk(i){return new wa(_a.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function r2(i){return new wa(_a.INVALID_ARGUMENT,i)}function qS(){return new wa(_a.APP_DELETED,"The Firebase app was deleted.")}function rk(i){return new wa(_a.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Gs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Gs.makeFromUrl(e,t)}catch{return new Gs(e,"")}if(r.path==="")return r;throw nk(e)}static makeFromUrl(e,t){let r=null;const a="([A-Za-z0-9.\\-_]+)";function c(me){me.path.charAt(me.path.length-1)==="/"&&(me.path_=me.path_.slice(0,-1))}const d="(/(.*))?$",g=new RegExp("^gs://"+a+d,"i"),p={bucket:1,path:3};function y(me){me.path_=decodeURIComponent(me.path)}const b="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",V=new RegExp(`^https?://${T}/${b}/b/${a}/o${S}`,"i"),q={bucket:1,path:3},W=t===FS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",ce=new RegExp(`^https?://${W}/${a}/${L}`,"i"),ue=[{regex:g,indices:p,postModify:c},{regex:V,indices:q,postModify:y},{regex:ce,indices:{bucket:1,path:2},postModify:y}];for(let me=0;me<ue.length;me++){const Ve=ue[me],je=Ve.regex.exec(e);if(je){const D=je[Ve.indices.bucket];let C=je[Ve.indices.path];C||(C=""),r=new Gs(D,C),Ve.postModify(r);break}}if(r==null)throw tk(e);return r}}class ik{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function sk(i,e,t){let r=1,a=null,c=null,d=!1,g=0;function p(){return g===2}let y=!1;function b(...L){y||(y=!0,e.apply(null,L))}function T(L){a=setTimeout(()=>{a=null,i(V,p())},L)}function S(){c&&clearTimeout(c)}function V(L,...ce){if(y){S();return}if(L){S(),b.call(null,L,...ce);return}if(p()||d){S(),b.call(null,L,...ce);return}r<64&&(r*=2);let ue;g===1?(g=2,ue=0):ue=(r+Math.random())*1e3,T(ue)}let q=!1;function W(L){q||(q=!0,S(),!y&&(a!==null?(L||(g=2),clearTimeout(a),T(0)):L||(g=1)))}return T(0),c=setTimeout(()=>{d=!0,W(!0)},t),W}function ak(i){i(!1)}function ok(i){return i!==void 0}function i2(i,e,t,r){if(r<e)throw r2(`Invalid value for '${i}'. Expected ${e} or greater.`);if(r>t)throw r2(`Invalid value for '${i}'. Expected ${t} or less.`)}function lk(i){const e=encodeURIComponent;let t="?";for(const r in i)if(i.hasOwnProperty(r)){const a=e(r)+"="+e(i[r]);t=t+a+"&"}return t=t.slice(0,-1),t}var Yg;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Yg||(Yg={}));function ck(i,e){const t=i>=500&&i<600,a=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return t||a||c}class uk{constructor(e,t,r,a,c,d,g,p,y,b,T,S=!0,V=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=a,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=g,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=T,this.retry=S,this.isUsingEmulator=V,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,W)=>{this.resolve_=q,this.reject_=W,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new cg(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=g=>{const p=g.loaded,y=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,y)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const g=c.getErrorCode()===Yg.NO_ERROR,p=c.getStatus();if(!g||ck(p,this.additionalRetryCodes_)&&this.retry){const b=c.getErrorCode()===Yg.ABORT;r(!1,new cg(!1,null,b));return}const y=this.successCodes_.indexOf(p)!==-1;r(!0,new cg(y,c))})},t=(r,a)=>{const c=this.resolve_,d=this.reject_,g=a.connection;if(a.wasSuccessCode)try{const p=this.callback_(g,g.getResponse());ok(p)?c(p):c()}catch(p){d(p)}else if(g!==null){const p=J5();p.serverResponse=g.getErrorText(),this.errorCallback_?d(this.errorCallback_(g,p)):d(p)}else if(a.canceled){const p=this.appDelete_?qS():ek();d(p)}else{const p=Z5();d(p)}};this.canceled_?t(!1,new cg(!1,null,!0)):this.backoffId_=sk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ak(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cg{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function dk(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function hk(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function fk(i,e){e&&(i["X-Firebase-GMPID"]=e)}function gk(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function mk(i,e,t,r,a,c,d=!0,g=!1){const p=lk(i.urlParams),y=i.url+p,b=Object.assign({},i.headers);return fk(b,e),dk(b,t),hk(b,c),gk(b,r),new uk(y,i.method,b,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,a,d,g)}function pk(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function yk(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}class Xg{constructor(e,t){this._service=e,t instanceof Gs?this._location=t:this._location=Gs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xg(e,t)}get root(){const e=new Gs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yk(this._location.path)}get storage(){return this._service}get parent(){const e=pk(this._location.path);if(e===null)return null;const t=new Gs(this._location.bucket,e);return new Xg(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw rk(e)}}function s2(i,e){const t=e?.[W5];return t==null?null:Gs.makeFromBucketSpec(t,i)}function xk(i,e,t,r={}){i.host=`${e}:${t}`;const a=Uh(e);a&&(g0(`https://${i.host}/b`),C2("Storage",!0)),i._isUsingEmulator=!0,i._protocol=a?"https":"http";const{mockUserToken:c}=r;c&&(i._overrideAuthToken=typeof c=="string"?c:I2(c,i.app.options.projectId))}class vk{constructor(e,t,r,a,c,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=a,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=FS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Y5,this._maxUploadRetryTime=X5,this._requests=new Set,a!=null?this._bucket=Gs.makeFromBucketSpec(a,this._host):this._bucket=s2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gs.makeFromBucketSpec(this._url,e):this._bucket=s2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){i2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){i2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(z2(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xg(this,e)}_makeRequest(e,t,r,a,c=!0){if(this._deleted)return new ik(qS());{const d=mk(e,this._appId,r,a,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,a).getPromise()}}const a2="@firebase/storage",o2="0.14.0";const GS="storage";function bk(i=P2(),e){i=Yn(i);const r=Jg(i,GS).getImmediate({identifier:e}),a=E2("storage");return a&&_k(r,...a),r}function _k(i,e,t,r={}){xk(i,e,t,r)}function wk(i,{instanceIdentifier:e}){const t=i.getProvider("app").getImmediate(),r=i.getProvider("auth-internal"),a=i.getProvider("app-check-internal");return new vk(t,r,a,e,O2)}function Tk(){Ih(new ju(GS,wk,"PUBLIC").setMultipleInstances(!0)),ml(a2,o2,""),ml(a2,o2,"esm2020")}Tk();const Sk={apiKey:"AIzaSyDFej1qXoiXznze447mk2nf5Yat6yCCimM",authDomain:"jolt-aab28.firebaseapp.com",projectId:"jolt-aab28",storageBucket:"jolt-aab28.firebasestorage.app",messagingSenderId:"866913014186",appId:"1:866913014186:web:0d847f053427efeba55bd3",measurementId:"G-34QKE54JJT"},HS=L2(Sk),ge=yS(HS);bk(HS);const As="users",Sx="bannedEmails";function Ct(i){return i.toLowerCase().replace(/[^a-z0-9]/g,"_")}function Ek(i){return{nickname:i.nickname||"",tag:i.tag||"",email:(i.email||"").toLowerCase(),password:i.password||"",avatarColor:i.avatarColor||"#3B82F6",avatarGradient:i.avatarGradient||null,avatarImage:i.avatarImage||null,banned:i.banned===!0,banReason:i.banReason||"",frozen:i.frozen===!0,freezeReason:i.freezeReason||"",createdAt:i.createdAt||new Date().toISOString(),status:i.status||"online",aboutMe:i.aboutMe||"",banner:i.banner||null,displayName:i.displayName||i.nickname||"",frame:i.frame||"none",gameWidget:i.gameWidget||"",isAdmin:i.isAdmin===!0,theme:i.theme||"jolt",language:i.language||"ru",friends:i.friends||[]}}function ud(i){return{nickname:i.nickname||"",tag:i.tag||"",email:i.email||"",password:i.password||"",avatarColor:i.avatarColor||"#3B82F6",avatarGradient:i.avatarGradient||null,avatarImage:i.avatarImage||null,banned:i.banned===!0,banReason:i.banReason||void 0,frozen:i.frozen===!0,freezeReason:i.freezeReason||void 0,createdAt:i.createdAt||new Date().toISOString(),status:i.status||"online",aboutMe:i.aboutMe||"",banner:i.banner||null,displayName:i.displayName||i.nickname||"",frame:i.frame||"none",gameWidget:i.gameWidget||"",isAdmin:i.isAdmin===!0,theme:i.theme||"jolt",language:i.language||"ru",friends:i.friends||[]}}async function Ak(i){try{const e=Ct(i.email),t=Ek(i);return console.log(" Saving user to Firestore:",{docId:e,collection:As,data:t}),await Bc(Ae(ge,As,e),t),console.log(" User saved successfully!"),{success:!0}}catch(e){const t=e?.message||e?.code||String(e);return console.error(" fbSaveUser FAILED:",t,e),{success:!1,error:t}}}async function Ex(i){try{const e=Ct(i);console.log(" Looking up user:",{docId:e,email:i});const t=await zt(Ae(ge,As,e));return t.exists()?(console.log(" User found in Firestore"),ud(t.data())):(console.log(" User not found in Firestore"),null)}catch(e){return console.error(" fbFindUserByEmail error:",e?.message||e),null}}async function Ik(i){try{return await Ex(i)!==null}catch{return!1}}async function Ck(i,e){try{const t=si(Rt(ge,As),nr("nickname","==",i),nr("tag","==",e));return!(await Mi(t)).empty}catch(t){return console.error("fbIsUsernameTaken error:",t?.message||t),!1}}async function ph(i,e){try{const t=si(Rt(ge,As),nr("nickname","==",i),nr("tag","==",e)),r=await Mi(t);return r.empty?null:ud(r.docs[0].data())}catch(t){return console.error("fbFindUserByUsername error:",t?.message||t),null}}async function jr(i,e){try{const t=Ct(i);if(!(await zt(Ae(ge,As,t))).exists())return null;const a={};for(const[d,g]of Object.entries(e))a[d]=g===void 0?"":g;await gt(Ae(ge,As,t),a);const c=await zt(Ae(ge,As,t));return ud(c.data())}catch(t){return console.error("fbUpdateUser error:",t?.message||t),null}}async function Rk(i){try{const e=Ct(i);await ba(Ae(ge,As,e))}catch(e){console.error("fbDeleteUser error:",e?.message||e)}}async function jk(){try{const i=si(Rt(ge,As),nr("banned","==",!0));return(await Mi(i)).docs.map(t=>ud(t.data()))}catch{return[]}}async function kk(){try{const i=si(Rt(ge,As),nr("frozen","==",!0));return(await Mi(i)).docs.map(t=>ud(t.data()))}catch{return[]}}async function Nk(){try{const i=si(Rt(ge,As),nr("isAdmin","==",!0)),t=(await Mi(i)).docs.map(a=>ud(a.data())),r=await ph("JOLT","123456");return r&&!t.some(a=>a.email===r.email)&&t.unshift(r),t}catch{return[]}}async function Dk(i,e){try{const t=Ct(i);await Bc(Ae(ge,Sx,t),{email:i.toLowerCase(),reason:e||"",bannedAt:new Date().toISOString()})}catch(t){console.error("fbBanEmail error:",t?.message||t)}}async function Mk(i){try{const e=Ct(i);await ba(Ae(ge,Sx,e))}catch(e){console.error("fbUnbanEmail error:",e?.message||e)}}async function Vk(i){try{const e=Ct(i);return(await zt(Ae(ge,Sx,e))).exists()}catch{return!1}}const ug=["#EF4444","#F97316","#F59E0B","#EAB308","#84CC16","#22C55E","#10B981","#14B8A6","#06B6D4","#0EA5E9","#3B82F6","#6366F1","#8B5CF6","#A855F7","#D946EF","#EC4899","#F43F5E","#78716C","#64748B","#1E293B"];function vy(i){const e=i.replace("#",""),t=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16);return(.299*t+.587*r+.114*a)/255>.6}function Bk({onComplete:i,onSwitchToLogin:e}){const[t,r]=k.useState(1),[a,c]=k.useState(""),[d,g]=k.useState(iy()),[p,y]=k.useState(""),[b,T]=k.useState(""),[S,V]=k.useState(""),[q,W]=k.useState(ug[8]),[L,ce]=k.useState(null),[oe,ue]=k.useState(!1),[me,Ve]=k.useState(!1),[je,D]=k.useState("#FF6B6B"),[C,R]=k.useState(!1),[M,B]=k.useState(!1),[U,N]=k.useState(!1),[rt,xt]=k.useState(!1),[Z,ye]=k.useState("#3B82F6"),[Te,Qe]=k.useState("#8B5CF6"),[Ne,O]=k.useState("#3B82F6"),[te,ne]=k.useState("#8B5CF6"),[he,Se]=k.useState(!1),[ke,He]=k.useState(!1),[vt,Ze]=k.useState(""),[vr,br]=k.useState(!1),[_r,bn]=k.useState(""),[ut,cn]=k.useState(["","","","","",""]),[Ot,Nr]=k.useState(!1),[ai,Qt]=k.useState(0),[Wt,Dr]=k.useState(""),[Bi,zi]=k.useState(0),[Jt,un]=k.useState(!1),ar=k.useRef(null),Sn=k.useRef([]),St=k.useRef(null);k.useEffect(()=>()=>{St.current&&clearInterval(St.current)},[]);const Mr=Ee=>{Dr(Ee),setTimeout(()=>Dr(""),4e3)},or=()=>{br(!0),setTimeout(()=>br(!1),500)},oi=Ee=>{const $e=Ee.target.files?.[0];if($e){const Et=new FileReader;Et.onload=Lt=>{ce(Lt.target?.result)},Et.readAsDataURL($e)}},xe=Ee=>{const $e=Ee.replace(/\D/g,"").slice(0,6);g($e)},we=()=>{const Ee=_2();bn(Ee),Nr(!0),cn(["","","","","",""]),Qt(60),Mr(` -   : ${Ee}`),St.current&&clearInterval(St.current),St.current=setInterval(()=>{Qt($e=>$e<=1?(St.current&&clearInterval(St.current),0):$e-1)},1e3),setTimeout(()=>Sn.current[0]?.focus(),100)},Re=(Ee,$e)=>{const Et=$e.replace(/\D/g,"");if(Et.length>1){const Lt=[...ut];for(let Pt=0;Pt<6;Pt++)Lt[Pt]=Et[Pt]||"";cn(Lt);const Fe=Math.min(Et.length,5);setTimeout(()=>Sn.current[Fe]?.focus(),10);return}if(Et.length===1){const Lt=[...ut];Lt[Ee]=Et,cn(Lt),Ee<5&&setTimeout(()=>Sn.current[Ee+1]?.focus(),10)}else if($e===""){const Lt=[...ut];Lt[Ee]="",cn(Lt)}},_n=(Ee,$e)=>{if($e.key==="Backspace"){if(!ut[Ee]&&Ee>0){const Et=[...ut];Et[Ee-1]="",cn(Et),Sn.current[Ee-1]?.focus()}}else $e.key==="ArrowLeft"&&Ee>0?Sn.current[Ee-1]?.focus():$e.key==="ArrowRight"&&Ee<5&&Sn.current[Ee+1]?.focus()},Zt=Ee=>{Ee.preventDefault();const $e=Ee.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if($e.length>0){const Et=["","","","","",""];for(let Fe=0;Fe<$e.length;Fe++)Et[Fe]=$e[Fe];cn(Et);const Lt=Math.min($e.length,5);setTimeout(()=>Sn.current[Lt]?.focus(),10)}},Ta=async()=>{if(Ze(""),zi(Ee=>Ee+1),t===1){if(!a.trim()){Ze(" "),or();return}if(a.trim().length<2){Ze("     2 "),or();return}const Ee=d||iy();if(d||g(Ee),un(!0),await Ck(a.trim(),Ee)){Ze("   .  ."),or(),un(!1);return}un(!1),r(2)}else if(t===2){if(p.length<6){Ze("     6 "),or();return}r(3)}else if(t===3){if(p!==b){Ze("  "),or();return}r(4)}else if(t===4)if(Ot){if(ut.join("")!==_r){Ze("  "),or();return}r(5)}else{if(!S.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){Ze("  email"),or();return}un(!0);const[Ee,$e]=await Promise.all([Ik(S),Vk(S)]);if($e){Ze(" email "),or(),un(!1);return}if(Ee){Ze(" email  "),or(),un(!1);return}un(!1),we()}},ns=()=>{if(Ze(""),zi(Ee=>Ee+1),t>1){if(t===4&&Ot){Nr(!1);return}r(t-1)}},vo=async()=>{const Ee={nickname:a.trim(),tag:d,email:S.toLowerCase(),password:p,avatarColor:q,avatarGradient:U?`linear-gradient(135deg, ${Z}, ${Te})`:null,avatarImage:L,banned:!1,frozen:!1,createdAt:new Date().toISOString(),status:"online",aboutMe:"",banner:null,displayName:a.trim(),frame:"none",gameWidget:"",isAdmin:!1,theme:"jolt",language:"ru"};un(!0);const $e=await Ak(Ee);if(!$e.success){Ze(` : ${$e.error}.   Firestore.`),Mr(` Firebase: ${$e.error}`),un(!1);return}Mr("    Firebase!"),sessionStorage.setItem("jolt_email",Ee.email),h0(Ee),setTimeout(()=>i(Ee),500),un(!1)},Xn=p.length>0&&b.length>0&&p===b,Is=t===2?oe:t===3?Xn:!1,tn=p.length===0?0:p.length<4?1:p.length<6?2:p.length<10?3:4,li=["","","","",""],Vr=["","bg-red-500","bg-yellow-500","bg-blue-500","bg-emerald-500"],Nn=l.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),Br=l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}),Cs=()=>L?"transparent":U?`linear-gradient(135deg, ${Z}, ${Te})`:q,zr=()=>{if(L)return"#FFFFFF";if(U){const Ee=vy(Z),$e=vy(Te);return Ee&&$e?"#000000":"#FFFFFF"}return vy(q)?"#000000":"#FFFFFF"},Oi=()=>{const Ee=zr(),$e=Cs(),Lt=U&&!L?{background:`linear-gradient(135deg, ${Z}, ${Te})`,transition:"border-color 0.2s ease"}:{backgroundColor:q,transition:"background-color 0.5s ease, border-color 0.2s ease"};return l.jsxs("div",{className:"animate-fade-in-up",children:[l.jsx(CA,{}),l.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-6",children:" "}),l.jsx("div",{className:"flex justify-center items-start mb-6",children:l.jsxs("div",{className:"flex items-center gap-2",children:[!L&&l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>{B(!M),xt(!1)},className:"w-9 h-9 rounded-lg border-2 border-slate-600 hover:border-blue-400 transition-all flex items-center justify-center group shrink-0",style:Lt,title:" ",children:l.jsx("svg",{className:"w-4 h-4 text-white drop-shadow-md group-hover:scale-110 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),M&&!rt&&l.jsxs("div",{className:"absolute left-0 top-11 z-30 bg-slate-800 border border-slate-700 rounded-xl p-3 shadow-2xl shadow-black/50 animate-fade-in-up w-[180px]",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-xs text-slate-400 font-medium",children:" "}),l.jsx("button",{onClick:()=>B(!1),className:"text-slate-500 hover:text-white transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"grid grid-cols-5 gap-2 mb-3",children:ug.map(Fe=>l.jsx("button",{onClick:()=>{W(Fe),N(!1)},className:["w-7 h-7 rounded-full border-2 transition-all hover:scale-110",!U&&q===Fe?"border-white scale-110 shadow-lg ring-2 ring-white/20":"border-transparent"].join(" "),style:{backgroundColor:Fe}},Fe))}),l.jsx("div",{className:"border-t border-slate-700 pt-2 mb-2",children:l.jsxs("button",{onClick:()=>{xt(!0)},className:"w-full text-left text-xs text-purple-400 hover:text-purple-300 transition-colors flex items-center gap-1.5 py-1",children:[l.jsx("span",{className:"w-4 h-4 rounded-full shrink-0",style:{background:"linear-gradient(135deg, #3B82F6, #A855F7)"}})," "]})}),l.jsxs("div",{className:"border-t border-slate-700 pt-2",children:[l.jsx("button",{onClick:()=>R(!C),className:"text-xs text-blue-400 hover:text-blue-300 transition-colors mb-1.5 w-full text-left",children:C?"":"  ..."}),C&&l.jsx("input",{type:"color",value:je,onChange:Fe=>{D(Fe.target.value),W(Fe.target.value),N(!1)},className:"w-full h-8 cursor-pointer rounded border-0"})]})]}),M&&rt&&l.jsxs("div",{className:"absolute left-0 top-11 z-30 bg-slate-800 border border-slate-700 rounded-xl p-3 shadow-2xl shadow-black/50 animate-fade-in-up w-[220px]",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("button",{onClick:()=>xt(!1),className:"text-slate-400 hover:text-white transition-colors flex items-center gap-1 text-xs",children:[l.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),""]}),l.jsx("span",{className:"text-xs text-slate-400 font-medium",children:""}),l.jsx("button",{onClick:()=>{B(!1),xt(!1)},className:"text-slate-500 hover:text-white transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"w-full h-10 rounded-lg mb-3 border border-slate-600",style:{background:`linear-gradient(135deg, ${Z}, ${Te})`,transition:"background 0.4s ease"}}),l.jsxs("div",{className:"mb-3",children:[l.jsx("span",{className:"text-[11px] text-slate-400 font-medium mb-1.5 block",children:" 1"}),l.jsx("div",{className:"grid grid-cols-5 gap-1.5 mb-1.5",children:ug.map(Fe=>l.jsx("button",{onClick:()=>ye(Fe),className:["w-6 h-6 rounded-full border-2 transition-all hover:scale-110",Z===Fe?"border-white scale-110 ring-1 ring-white/30":"border-transparent"].join(" "),style:{backgroundColor:Fe}},`g1-${Fe}`))}),l.jsx("button",{onClick:()=>Se(!he),className:"text-[10px] text-blue-400 hover:text-blue-300 transition-colors",children:he?"":"  "}),he&&l.jsx("input",{type:"color",value:Ne,onChange:Fe=>{O(Fe.target.value),ye(Fe.target.value)},className:"w-full h-7 cursor-pointer rounded border-0 mt-1"})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("span",{className:"text-[11px] text-slate-400 font-medium mb-1.5 block",children:" 2"}),l.jsx("div",{className:"grid grid-cols-5 gap-1.5 mb-1.5",children:ug.map(Fe=>l.jsx("button",{onClick:()=>Qe(Fe),className:["w-6 h-6 rounded-full border-2 transition-all hover:scale-110",Te===Fe?"border-white scale-110 ring-1 ring-white/30":"border-transparent"].join(" "),style:{backgroundColor:Fe}},`g2-${Fe}`))}),l.jsx("button",{onClick:()=>He(!ke),className:"text-[10px] text-blue-400 hover:text-blue-300 transition-colors",children:ke?"":"  "}),ke&&l.jsx("input",{type:"color",value:te,onChange:Fe=>{ne(Fe.target.value),Qe(Fe.target.value)},className:"w-full h-7 cursor-pointer rounded border-0 mt-1"})]}),l.jsx("button",{onClick:()=>{N(!0),B(!1),xt(!1)},className:"w-full py-2 rounded-lg bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-400 hover:to-purple-400 text-white text-xs font-semibold transition-all",children:" "})]})]}),l.jsxs("div",{className:"relative flex flex-col items-center gap-2",children:[l.jsxs("button",{onClick:()=>ar.current?.click(),className:"w-20 h-20 rounded-full overflow-hidden border-2 border-slate-600 hover:border-blue-400 flex items-center justify-center text-3xl font-bold relative group",style:{background:$e,color:Ee,transition:"background 0.5s ease, color 0.3s ease"},children:[L?l.jsx("img",{src:L,alt:"Avatar",className:"w-full h-full object-cover"}):a?a[0].toUpperCase():"?",l.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-full",children:l.jsxs("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),l.jsx("input",{ref:ar,type:"file",accept:"image/*",onChange:oi,className:"hidden"}),l.jsx("span",{className:"text-[11px] text-slate-500",children:"  "}),L&&l.jsx("button",{onClick:()=>ce(null),className:"text-[11px] text-red-400 hover:text-red-300 transition-colors",children:" "})]})]})}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm text-slate-400 mb-1.5 font-medium",children:[" ",l.jsx("span",{className:"text-red-400",children:"*"})]}),l.jsx("input",{type:"text",value:a,onChange:Fe=>c(Fe.target.value),placeholder:" ",maxLength:32,className:"w-full bg-slate-800/60 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm text-slate-400 mb-1.5 font-medium",children:[" ",l.jsx("span",{className:"text-slate-600",children:"( , )"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-slate-500 text-xl font-mono",children:"#"}),l.jsx("input",{type:"text",value:d,onChange:Fe=>xe(Fe.target.value),placeholder:"123456",className:"flex-1 bg-slate-800/60 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all font-mono"}),l.jsx("button",{onClick:()=>g(iy()),className:"p-3 bg-slate-800 hover:bg-slate-700 rounded-xl transition-colors border border-slate-700",title:"  ",children:l.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),a.trim()&&l.jsxs("div",{className:"bg-slate-800/40 rounded-xl p-3.5 mb-4 border border-slate-700/50 animate-fade-in-up",children:[l.jsx("span",{className:"text-sm text-slate-400",children:" : "}),l.jsxs("span",{className:"text-blue-400 font-bold font-mono",children:[a.trim(),"#",d||"000000"]})]}),l.jsx("div",{className:"text-center mt-4",children:l.jsx("button",{onClick:e,className:"text-sm text-blue-400 hover:text-blue-300 transition-colors hover:underline",children:"  ? "})})]},`s1-${Bi}`)},Vl=()=>l.jsxs("div",{className:"animate-fade-in-up",children:[l.jsx(_1,{isOpen:Is,particleColor:"#3B82F6"}),l.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-1",children:" "}),l.jsx("p",{className:"text-slate-500 text-center text-sm mb-6",children:" 6 "}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx("input",{type:oe?"text":"password",value:p,onChange:Ee=>y(Ee.target.value),placeholder:" ",className:"w-full bg-slate-800/60 border border-slate-700 rounded-xl px-4 py-3 pr-12 text-white placeholder-slate-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"}),l.jsx("button",{onClick:()=>ue(!oe),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:oe?Br:Nn})]}),p&&l.jsxs("div",{className:"mb-2 animate-fade-in-up",children:[l.jsx("div",{className:"flex gap-1 mb-1.5",children:[1,2,3,4].map(Ee=>l.jsx("div",{className:["h-1.5 flex-1 rounded-full transition-all duration-300",tn>=Ee?Vr[Ee]:"bg-slate-800"].join(" ")},Ee))}),l.jsx("span",{className:"text-xs text-slate-500",children:li[tn]})]})]},`s2-${Bi}`),rs=()=>l.jsxs("div",{className:vr?"animate-shake":"animate-fade-in-up",children:[l.jsx(_1,{isOpen:Xn,particleColor:Xn?"#22C55E":"#3B82F6"}),l.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-1",children:" "}),l.jsx("p",{className:"text-slate-500 text-center text-sm mb-6",children:"   "}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx("input",{type:me?"text":"password",value:b,onChange:Ee=>T(Ee.target.value),placeholder:" ",className:["w-full bg-slate-800/60 border rounded-xl px-4 py-3 pr-12 text-white placeholder-slate-500 focus:ring-2 outline-none transition-all",b?Xn?"border-emerald-500 focus:border-emerald-500 focus:ring-emerald-500/20":"border-red-500 focus:border-red-500 focus:ring-red-500/20":"border-slate-700 focus:border-blue-500 focus:ring-blue-500/20"].join(" ")}),l.jsx("button",{onClick:()=>Ve(!me),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:me?Br:Nn})]}),b&&l.jsx("div",{className:["text-sm font-medium animate-fade-in-up",Xn?"text-emerald-400":"text-red-400"].join(" "),children:Xn?"  ":"   "})]},`s3-${Bi}`),Li=()=>l.jsxs("div",{className:"animate-fade-in-up",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx("div",{className:"animate-float",children:l.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 80 80",className:"drop-shadow-lg",children:[l.jsx("rect",{x:"10",y:"22",width:"60",height:"38",rx:"6",fill:"#1E293B",stroke:"#3B82F6",strokeWidth:"2"}),l.jsx("path",{d:"M10 28 L40 48 L70 28",fill:"none",stroke:"#3B82F6",strokeWidth:"2",strokeLinecap:"round"}),Ot&&l.jsxs(l.Fragment,{children:[l.jsx("circle",{cx:"62",cy:"22",r:"9",fill:"#22C55E"}),l.jsx("path",{d:"M57 22 L61 26 L67 18",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]})})}),Ot?l.jsxs(l.Fragment,{children:[l.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-1",children:" "}),l.jsxs("p",{className:"text-slate-500 text-center text-sm mb-6",children:["   ",l.jsx("span",{className:"text-blue-400",children:S})]}),l.jsx("div",{className:"flex justify-center gap-2.5 mb-5",children:ut.map((Ee,$e)=>l.jsx("input",{ref:Et=>{Sn.current[$e]=Et},type:"text",inputMode:"numeric",autoComplete:"one-time-code",maxLength:6,value:Ee,onChange:Et=>Re($e,Et.target.value),onKeyDown:Et=>_n($e,Et),onPaste:Zt,onFocus:Et=>Et.target.select(),className:"w-12 h-14 bg-slate-800/60 border border-slate-700 rounded-xl text-center text-xl font-bold text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"},$e))}),l.jsx("div",{className:"text-center text-sm",children:ai>0?l.jsxs("span",{className:"text-slate-500",children:["   ",l.jsxs("span",{className:"text-blue-400 font-mono",children:[ai,""]})]}):l.jsx("button",{onClick:we,className:"text-blue-400 hover:text-blue-300 transition-colors hover:underline",children:"  "})})]}):l.jsxs(l.Fragment,{children:[l.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-1",children:" Email"}),l.jsx("p",{className:"text-slate-500 text-center text-sm mb-6",children:"   "}),l.jsx("input",{type:"email",value:S,onChange:Ee=>V(Ee.target.value),placeholder:"example@gmail.com",className:"w-full bg-slate-800/60 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"})]})]},`s4-${Bi}`),is=()=>l.jsxs("div",{className:"animate-fade-in-up text-center",children:[l.jsx("div",{className:"animate-scale-in",children:l.jsx("div",{className:"w-24 h-24 rounded-full mx-auto mb-4 flex items-center justify-center text-3xl font-bold border-4 border-emerald-500 shadow-lg shadow-emerald-500/30",style:{background:L?"transparent":U?`linear-gradient(135deg, ${Z}, ${Te})`:q,color:zr()},children:L?l.jsx("img",{src:L,alt:"Avatar",className:"w-full h-full object-cover rounded-full"}):a[0]?.toUpperCase()})}),l.jsxs("h2",{className:"text-2xl font-bold text-white mb-1",children:[", ",a,"!"]}),l.jsxs("p",{className:"text-blue-400 font-mono font-bold mb-0.5",children:[a,"#",d]}),l.jsx("p",{className:"text-slate-500 text-sm mb-6",children:S}),l.jsx("div",{className:"bg-slate-800/40 rounded-xl p-4 mb-6 border border-slate-700/50 text-left space-y-3",children:[" "," ","Email "].map(Ee=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-500/20 flex items-center justify-center",children:l.jsx("svg",{className:"w-3 h-3 text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),l.jsx("span",{className:"text-slate-300 text-sm",children:Ee})]},Ee))}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>{r(1),zi(Ee=>Ee+1)},className:"flex-1 py-3 rounded-xl border border-slate-700 text-slate-400 hover:bg-slate-800 hover:text-white transition-all font-medium",children:""}),l.jsx("button",{onClick:vo,disabled:Jt,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 text-white font-semibold transition-all shadow-lg shadow-emerald-500/25 disabled:opacity-50",children:Jt?" ...":" "})]})]},`s5-${Bi}`);return l.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-4",children:[l.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-1/4 -left-24 w-72 h-72 bg-blue-500/[0.07] rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-1/4 -right-24 w-72 h-72 bg-cyan-500/[0.07] rounded-full blur-3xl"}),l.jsx("div",{className:"absolute top-3/4 left-1/3 w-48 h-48 bg-purple-500/[0.05] rounded-full blur-3xl"})]}),l.jsxs("div",{className:["relative w-full max-w-md",vr&&t!==3?"animate-shake":""].join(" "),children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-cyan-400 to-blue-500",children:" Jolt"}),l.jsx("p",{className:"text-slate-600 text-sm mt-1 tracking-wide uppercase",children:""})]}),l.jsx(IA,{currentStep:t}),l.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 p-6 shadow-2xl shadow-black/30",children:[vt&&l.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-3 mb-4 text-red-400 text-sm animate-fade-in-up flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),vt]}),t===1&&Oi(),t===2&&Vl(),t===3&&rs(),t===4&&Li(),t===5&&is(),t<5&&l.jsxs("div",{className:"flex gap-3 mt-6",children:[t>1&&l.jsx("button",{onClick:ns,className:"flex-1 py-3 rounded-xl border border-slate-700 text-slate-400 hover:bg-slate-800 hover:text-white transition-all font-medium",children:" "}),l.jsx("button",{onClick:Ta,disabled:Jt,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-400 hover:to-blue-500 text-white font-semibold transition-all shadow-lg shadow-blue-500/25 disabled:opacity-50",children:Jt?"...":" "})]})]})]}),Wt&&l.jsx("div",{className:"fixed top-4 right-4 bg-slate-800 border border-blue-500/30 rounded-xl px-5 py-3.5 text-sm text-blue-400 shadow-2xl shadow-black/50 animate-toast z-50 max-w-xs",children:Wt})]})}function zk({onComplete:i,onSwitchToRegister:e}){const[t,r]=k.useState("email"),[a,c]=k.useState(""),[d,g]=k.useState(""),[p,y]=k.useState(!1),[b,T]=k.useState(""),[S,V]=k.useState(""),[q,W]=k.useState(""),[L,ce]=k.useState(["","","","","",""]),[oe,ue]=k.useState(0),[me,Ve]=k.useState(null),[je,D]=k.useState(!1),[C,R]=k.useState(!1),M=k.useRef([]),B=k.useRef(null);k.useEffect(()=>()=>{B.current&&clearInterval(B.current)},[]);const U=ne=>{V(ne),setTimeout(()=>V(""),4e3)},N=()=>{D(!0),setTimeout(()=>D(!1),500)},rt=()=>{const ne=_2();W(ne),ce(["","","","","",""]),ue(60),U(` -   : ${ne}`),B.current&&clearInterval(B.current),B.current=setInterval(()=>{ue(he=>he<=1?(B.current&&clearInterval(B.current),0):he-1)},1e3),setTimeout(()=>M.current[0]?.focus(),100)},xt=async()=>{if(T(""),!a.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){T("  email"),N();return}R(!0);const ne=await Ex(a);if(!ne){T("   email  "),N(),R(!1);return}if(ne.banned){T("   "),N(),R(!1);return}if(ne.frozen){T("   "),N(),R(!1);return}Ve(ne),r("code"),rt(),R(!1)},Z=()=>{T("");const ne=L.join("");if(ne.length<6){T("  6  "),N();return}if(ne!==q){T(" "),N();return}r("password")},ye=()=>{if(T(""),!!me){if(d!==me.password){T(" "),N();return}sessionStorage.setItem("jolt_email",me.email),h0(me),i(me)}},Te=(ne,he)=>{const Se=he.replace(/\D/g,"");if(Se.length>1){const ke=[...L];for(let vt=0;vt<6;vt++)ke[vt]=Se[vt]||"";ce(ke);const He=Math.min(Se.length,5);setTimeout(()=>M.current[He]?.focus(),10);return}if(Se.length===1){const ke=[...L];ke[ne]=Se,ce(ke),ne<5&&setTimeout(()=>M.current[ne+1]?.focus(),10)}else if(he===""){const ke=[...L];ke[ne]="",ce(ke)}},Qe=(ne,he)=>{if(he.key==="Backspace"){if(!L[ne]&&ne>0){const Se=[...L];Se[ne-1]="",ce(Se),M.current[ne-1]?.focus()}}else he.key==="ArrowLeft"&&ne>0?M.current[ne-1]?.focus():he.key==="ArrowRight"&&ne<5&&M.current[ne+1]?.focus()},Ne=ne=>{ne.preventDefault();const he=ne.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(he.length>0){const Se=["","","","","",""];for(let He=0;He<he.length;He++)Se[He]=he[He];ce(Se);const ke=Math.min(he.length,5);setTimeout(()=>M.current[ke]?.focus(),10)}},O=l.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),te=l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})});return l.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-4",children:[l.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-1/4 -left-24 w-72 h-72 bg-blue-500/[0.07] rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-1/4 -right-24 w-72 h-72 bg-cyan-500/[0.07] rounded-full blur-3xl"})]}),l.jsxs("div",{className:["relative w-full max-w-md",je?"animate-shake":""].join(" "),children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-cyan-400 to-blue-500",children:" Jolt"}),l.jsx("p",{className:"text-slate-600 text-sm mt-1 tracking-wide uppercase",children:"  "})]}),l.jsx("div",{className:"flex justify-center gap-2 mb-6",children:["email","code","password"].map((ne,he)=>l.jsx("div",{className:["w-2.5 h-2.5 rounded-full transition-all duration-300",t===ne?"bg-blue-500 w-8":he<["email","code","password"].indexOf(t)?"bg-emerald-500":"bg-slate-700"].join(" ")},ne))}),l.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 p-6 shadow-2xl shadow-black/30",children:[b&&l.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-3 mb-4 text-red-400 text-sm animate-fade-in-up flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),b]}),t==="email"&&l.jsxs("div",{className:"animate-fade-in-up",children:[l.jsx("div",{className:"flex justify-center mb-6",children:l.jsx("div",{className:"w-20 h-20 rounded-2xl bg-slate-800 flex items-center justify-center animate-float border border-slate-700",children:l.jsx("svg",{className:"w-10 h-10 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})})}),l.jsx("h2",{className:"text-xl font-bold text-white text-center mb-6",children:"  "}),l.jsx("input",{type:"email",value:a,onChange:ne=>c(ne.target.value),placeholder:" email",className:"w-full bg-slate-800/60 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all mb-4",onKeyDown:ne=>ne.key==="Enter"&&xt()}),l.jsx("button",{onClick:xt,disabled:C,className:"w-full py-3 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-400 hover:to-blue-500 text-white font-semibold transition-all shadow-lg shadow-blue-500/25 disabled:opacity-50",children:C?" ...":"  "})]}),t==="code"&&l.jsxs("div",{className:"animate-fade-in-up",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx("div",{className:"animate-float",children:l.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 64 64",children:[l.jsx("rect",{x:"8",y:"16",width:"48",height:"32",rx:"5",fill:"#1E293B",stroke:"#3B82F6",strokeWidth:"2"}),l.jsx("path",{d:"M8 22 L32 40 L56 22",fill:"none",stroke:"#3B82F6",strokeWidth:"2",strokeLinecap:"round"})]})})}),l.jsx("h2",{className:"text-xl font-bold text-white text-center mb-1",children:" "}),l.jsxs("p",{className:"text-slate-500 text-center text-sm mb-6",children:["   ",l.jsx("span",{className:"text-blue-400",children:a})]}),l.jsx("div",{className:"flex justify-center gap-2.5 mb-5",children:L.map((ne,he)=>l.jsx("input",{ref:Se=>{M.current[he]=Se},type:"text",inputMode:"numeric",autoComplete:"one-time-code",maxLength:6,value:ne,onChange:Se=>Te(he,Se.target.value),onKeyDown:Se=>Qe(he,Se),onPaste:Ne,onFocus:Se=>Se.target.select(),className:"w-11 h-13 bg-slate-800/60 border border-slate-700 rounded-xl text-center text-xl font-bold text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"},he))}),l.jsx("div",{className:"text-center text-sm mb-5",children:oe>0?l.jsxs("span",{className:"text-slate-500",children:["   ",l.jsxs("span",{className:"text-blue-400 font-mono",children:[oe,""]})]}):l.jsx("button",{onClick:rt,className:"text-blue-400 hover:text-blue-300 transition-colors hover:underline",children:" "})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>{r("email"),T("")},className:"flex-1 py-3 rounded-xl border border-slate-700 text-slate-400 hover:bg-slate-800 hover:text-white transition-all font-medium",children:" "}),l.jsx("button",{onClick:Z,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-400 hover:to-blue-500 text-white font-semibold transition-all shadow-lg shadow-blue-500/25",children:" "})]})]}),t==="password"&&l.jsxs("div",{className:"animate-fade-in-up",children:[me&&l.jsxs("div",{className:"flex flex-col items-center mb-6",children:[l.jsx("div",{className:"w-18 h-18 rounded-full flex items-center justify-center text-2xl font-bold text-white mb-3 border-2 border-slate-700",style:{backgroundColor:me.avatarImage?"transparent":me.avatarColor,width:72,height:72},children:me.avatarImage?l.jsx("img",{src:me.avatarImage,alt:"",className:"w-full h-full object-cover rounded-full"}):me.nickname[0]?.toUpperCase()}),l.jsx("span",{className:"text-white font-semibold text-lg",children:me.nickname}),l.jsxs("span",{className:"text-slate-500 text-sm font-mono",children:["#",me.tag]})]}),l.jsx("h2",{className:"text-xl font-bold text-white text-center mb-6",children:" "}),l.jsxs("div",{className:"relative mb-5",children:[l.jsx("input",{type:p?"text":"password",value:d,onChange:ne=>g(ne.target.value),placeholder:"",className:"w-full bg-slate-800/60 border border-slate-700 rounded-xl px-4 py-3 pr-12 text-white placeholder-slate-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all",onKeyDown:ne=>ne.key==="Enter"&&ye()}),l.jsx("button",{onClick:()=>y(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:p?te:O})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>{r("code"),T("")},className:"flex-1 py-3 rounded-xl border border-slate-700 text-slate-400 hover:bg-slate-800 hover:text-white transition-all font-medium",children:" "}),l.jsx("button",{onClick:ye,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 text-white font-semibold transition-all shadow-lg shadow-emerald-500/25",children:" "})]})]}),l.jsx("div",{className:"text-center mt-6 pt-4 border-t border-slate-800",children:l.jsx("button",{onClick:e,className:"text-sm text-blue-400 hover:text-blue-300 transition-colors hover:underline",children:" ? "})})]})]}),S&&l.jsx("div",{className:"fixed top-4 right-4 bg-slate-800 border border-blue-500/30 rounded-xl px-5 py-3.5 text-sm text-blue-400 shadow-2xl shadow-black/50 animate-toast z-50 max-w-xs",children:S})]})}const Ok="modulepreload",Lk=function(i,e){return new URL(i,e).href},l2={},by=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let y=function(b){return Promise.all(b.map(T=>Promise.resolve(T).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const d=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),p=g?.nonce||g?.getAttribute("nonce");a=y(t.map(b=>{if(b=Lk(b,r),b in l2)return;l2[b]=!0;const T=b.endsWith(".css"),S=T?'[rel="stylesheet"]':"";if(r)for(let q=d.length-1;q>=0;q--){const W=d[q];if(W.href===b&&(!T||W.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${S}`))return;const V=document.createElement("link");if(V.rel=T?"stylesheet":Ok,T||(V.as="script"),V.crossOrigin="",V.href=b,p&&V.setAttribute("nonce",p),document.head.appendChild(V),T)return new Promise((q,W)=>{V.addEventListener("load",q),V.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${b}`)))})}))}function c(d){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d}return a.then(d=>{for(const g of d||[])g.status==="rejected"&&c(g.reason);return e().catch(c)})};async function _y(i,e){try{const t=Rt(ge,"users"),r=await Mi(t);let a=null;if(r.forEach(V=>{const q=V.data();`${q.nickname}#${q.tag}`.toLowerCase()===e.toLowerCase()&&(a=q)}),!a)return{success:!1,error:"  "};if(a.email===i)return{success:!1,error:"  "};const c=Ct(i),g=(await zt(Ae(ge,"users",c))).data();if(g?.friends?.includes(a.email))return{success:!1,error:"  "};if(g?.blockedUsers?.includes(a.email))return{success:!1,error:"  "};if(a.blockedUsers?.includes(i))return{success:!1,error:"   "};const p=Rt(ge,"friendRequests"),y=si(p,nr("fromEmail","==",i),nr("toEmail","==",a.email));if(!(await Mi(y)).empty)return{success:!1,error:"  "};const T=si(p,nr("fromEmail","==",a.email),nr("toEmail","==",i));return(await Mi(T)).empty?(await Es(p,{fromEmail:i,toEmail:a.email,fromNickname:g?.nickname||"",fromTag:g?.tag||"",fromAvatarColor:g?.avatarColor||"#5865F2",fromAvatarGradient:g?.avatarGradient||null,fromAvatarImage:g?.avatarImage||null,toNickname:a.nickname,toTag:a.tag,toAvatarColor:a.avatarColor||"#5865F2",toAvatarGradient:a.avatarGradient||null,toAvatarImage:a.avatarImage||null,createdAt:Ye.now(),expiresAt:Ye.fromDate(new Date(Date.now()+1440*60*1e3))}),{success:!0}):{success:!1,error:"     "}}catch(t){return console.error("sendFriendRequest error:",t),{success:!1,error:t.message}}}function $S(i,e){return Ct([i,e].sort().join("___"))}async function Pk(i){try{const e=await zt(Ae(ge,"friendRequests",i));if(!e.exists())return{success:!1};const t=e.data(),r=Ct(t.fromEmail),a=Ct(t.toEmail);await gt(Ae(ge,"users",r),{friends:Ks(t.toEmail)}),await gt(Ae(ge,"users",a),{friends:Ks(t.fromEmail)});const c=$S(t.fromEmail,t.toEmail),d=Ae(ge,"conversations",c);return(await zt(d)).exists()||await Bc(d,{participants:[t.fromEmail,t.toEmail],lastMessage:"",lastMessageAt:Ye.now(),createdAt:Ye.now(),closedBy:[],customNames:{}}),await ba(Ae(ge,"friendRequests",i)),console.log(" Friend request accepted, conversation created:",c),{success:!0}}catch(e){return console.error("acceptFriendRequest error:",e),{success:!1}}}async function c2(i){try{return await ba(Ae(ge,"friendRequests",i)),{success:!0}}catch(e){return console.error("declineFriendRequest error:",e),{success:!1}}}function Uk(i,e){const t=si(Rt(ge,"friendRequests"),nr("toEmail","==",i));return rr(t,r=>{const a=[];r.forEach(c=>a.push({id:c.id,...c.data()})),e(a)})}function Fk(i,e){const t=si(Rt(ge,"friendRequests"),nr("fromEmail","==",i));return rr(t,r=>{const a=[];r.forEach(c=>a.push({id:c.id,...c.data()})),e(a)})}async function qk(){try{const i=si(Rt(ge,"friendRequests"),nr("expiresAt","<",Ye.now())),e=await Mi(i);for(const t of e.docs)await ba(Ae(ge,"friendRequests",t.id))}catch(i){console.error("cleanExpiredRequests error:",i)}}function Gk(i,e){const t=Ct(i);let r=[],a={},c=[];const d=p=>{if(r.forEach(y=>y()),r=[],a={},c=p,p.length===0){e([]);return}for(const y of p){const b=rr(Ae(ge,"users",Ct(y)),T=>{T.exists()?a[y]={email:y,...T.data()}:delete a[y];const S=c.filter(V=>a[V]).map(V=>a[V]);e(S)});r.push(b)}},g=rr(Ae(ge,"users",t),p=>{if(!p.exists()){e([]);return}const b=p.data().friends||[],T=[...b].sort().join(","),S=[...c].sort().join(",");T!==S&&d(b)});return()=>{g(),r.forEach(p=>p())}}async function Hk(i,e){try{return await gt(Ae(ge,"users",Ct(i)),{friends:Il(e)}),await gt(Ae(ge,"users",Ct(e)),{friends:Il(i)}),{success:!0}}catch(t){return console.error("removeFriend error:",t),{success:!1}}}async function $k(i,e){try{return await gt(Ae(ge,"users",Ct(i)),{friends:Il(e),blockedUsers:Ks(e)}),await gt(Ae(ge,"users",Ct(e)),{friends:Il(i)}),{success:!0}}catch(t){return console.error("blockUser error:",t),{success:!1}}}async function Kk(i,e){try{return await gt(Ae(ge,"users",Ct(i)),{blockedUsers:Il(e),friends:Ks(e)}),await gt(Ae(ge,"users",Ct(e)),{friends:Ks(i)}),{success:!0}}catch(t){return console.error("unblockUser error:",t),{success:!1}}}async function u2(i,e){try{const t=await zt(Ae(ge,"users",Ct(i)));return t.exists()?(t.data().blockedUsers||[]).includes(e):!1}catch{return!1}}async function Qk(i,e,t,r,a,c,d,g,p){try{const y={fromEmail:i,fromNickname:e,fromTag:t,targetEmail:r,targetNickname:a,targetTag:c,reason:d,selectedMessages:p.map(S=>({text:S.text,senderId:S.senderId,timestamp:S.createdAt})),createdAt:Ye.now(),status:"pending"};await Es(Rt(ge,"reports"),y);const b=await Mi(Rt(ge,"users")),T=[];b.forEach(S=>{const V=S.data();(V.isAdmin||V.nickname==="JOLT"&&V.tag==="123456")&&T.push(V.email)});for(const S of T){const V=Ct(`reportbot___${S}`),q=Ae(ge,"conversations",V);(await zt(q)).exists()?await gt(q,{lastMessage:" ",lastMessageAt:Ye.now()}):await Bc(q,{participants:[S,"reportbot"],isBot:!0,lastMessage:" ",lastMessageAt:Ye.now(),createdAt:Ye.now(),closedBy:[],customNames:{}});let L=`
`;L+=`  
`,L+=`

`,L+=`  : ${e}#${t}
`,L+=`  : ${a}#${c}
`,L+=` : ${d}

`,p.length>0&&(L+=`   (${p.length}):
`,L+=`
`,p.forEach((oe,ue)=>{L+=`${ue+1}. ${oe.text}
`}),L+=`
`),L+=`
`;const ce=Rt(ge,"conversations",V,"messages");await Es(ce,{senderId:"reportbot",text:L,type:"text",createdAt:Ye.now(),readBy:[]});for(const oe of p)oe.type==="gif"&&oe.gifUrl?await Es(ce,{senderId:"reportbot",text:`   GIF  ${e}#${t}:`,type:"gif",gifUrl:oe.gifUrl,createdAt:Ye.now(),readBy:[]}):(oe.type==="image"||oe.type==="file")&&oe.fileUrl&&await Es(ce,{senderId:"reportbot",text:`     ${e}#${t}:`,type:"file",fileUrl:oe.fileUrl,fileName:oe.fileName||"photo.jpg",createdAt:Ye.now(),readBy:[]})}return{success:!0}}catch(y){return console.error("sendReport error:",y),{success:!1}}}function Wk(i,e){return rr(Rt(ge,"conversations"),t=>{const r=[];t.forEach(a=>{const c=a.data();c.participants?.includes(i)&&r.push({id:a.id,...c})}),r.sort((a,c)=>(c.lastMessageAt?.seconds||0)-(a.lastMessageAt?.seconds||0)),e(r)})}function Yk(i,e){const t=Rt(ge,"conversations",i,"messages");return rr(t,r=>{const a=[];r.forEach(c=>a.push({id:c.id,...c.data()})),a.sort((c,d)=>(c.createdAt?.seconds||0)-(d.createdAt?.seconds||0)),e(a)})}async function io(i,e,t,r="text",a,c,d,g,p){try{const y=Rt(ge,"conversations",i,"messages");await Es(y,{senderId:e,text:t,type:r,gifUrl:a||null,fileUrl:c||null,fileName:d||null,replyToId:g?.replyToId||null,replyToText:g?.replyToText||null,replyToSender:g?.replyToSender||null,forwardedFrom:p?.forwardedFrom||null,forwardedFromEmail:p?.forwardedFromEmail||null,forwardedText:p?.forwardedText||null,isEdited:!1,createdAt:Ye.now(),readBy:[e]});const b=r==="gif"?"GIF":r==="audio"?" ":r==="file"?` ${d||""}`:r==="video"?"  ":t;await gt(Ae(ge,"conversations",i),{lastMessage:b,lastMessageAt:Ye.now()})}catch(y){console.error("sendMessage error:",y)}}async function Xk(i,e){try{await gt(Ae(ge,"conversations",i),{closedBy:Ks(e)})}catch(t){console.error(t)}}async function dg(i,e){try{await gt(Ae(ge,"conversations",i),{closedBy:Il(e)})}catch(t){console.error(t)}}async function Jk(i,e,t,r){try{const a=Ae(ge,"conversations",i),c=await zt(a);if(c.exists()){const d=c.data().customNames||{};d[`${e}_${t}`]=r,await gt(a,{customNames:d})}}catch(a){console.error(a)}}function wy(i,e){return $S(i,e)}async function Zk(i,e){try{const t=[i,...e],r=[];for(const d of t){const g=await zt(Ae(ge,"users",Ct(d)));g.exists()?r.push(g.data().nickname||d):r.push(d)}const a=r.join(", "),c=await Es(Rt(ge,"conversations"),{participants:t,isGroup:!0,groupName:a,createdBy:i,lastMessage:"",lastMessageAt:Ye.now(),createdAt:Ye.now(),closedBy:[],customNames:{}});return console.log(" Group created:",c.id,a),c.id}catch(t){return console.error("createGroupConversation error:",t),null}}async function e6(i,e){try{const t=Ae(ge,"conversations",i);for(const r of e)await gt(t,{participants:Ks(r)});return console.log(" Invited to group:",e),!0}catch(t){return console.error("inviteToGroup error:",t),!1}}async function t6(i,e){try{return await gt(Ae(ge,"conversations",i),{participants:Il(e)}),console.log(" Kicked from group:",e),!0}catch(t){return console.error("kickFromGroup error:",t),!1}}async function o0(i){try{const e=Ct(`reportbot___${i}`),t=Ae(ge,"conversations",e);(await zt(t)).exists()||(await Bc(t,{participants:[i,"reportbot"],isBot:!0,lastMessage:"",lastMessageAt:Ye.now(),createdAt:Ye.now(),closedBy:[],customNames:{}}),console.log(" Report Bot conversation created for",i))}catch(e){console.error("ensureReportBot error:",e)}}async function n6(i){try{const e=Ct(`reportbot___${i}`),t=Ae(ge,"conversations",e);if((await zt(t)).exists()){const a=await Mi(Rt(ge,"conversations",e,"messages"));for(const c of a.docs)await ba(Ae(ge,"conversations",e,"messages",c.id));await ba(t),console.log(" Report Bot conversation removed for",i)}}catch(e){console.error("removeReportBot error:",e)}}const d2={"welcome.title":{ru:"    JOLT",en:"Welcome to JOLT messenger"},"welcome.desc":{ru:" JOLT     .       ",en:"In JOLT you can chat without limits. Select a friend chat to start messaging"},"search.placeholder":{ru:" ...",en:"Find chat..."},friends:{ru:"",en:"Friends"},"dm.title":{ru:" ",en:"Direct Messages"},"dm.empty":{ru:"  ",en:"No messages yet"},"dm.close":{ru:" ",en:"Close DM"},"status.online":{ru:" ",en:"Online"},"status.idle":{ru:"",en:"Idle"},"status.dnd":{ru:" ",en:"Do Not Disturb"},"status.invisible":{ru:"",en:"Invisible"},aboutme:{ru:" ",en:"About Me"},"aboutme.add":{ru:",  ...",en:"Click to add..."},playing:{ru:" ",en:"Playing"},"no.activity":{ru:" ",en:"No activity"},logout:{ru:"",en:"Log Out"},"server.add":{ru:" ",en:"Add Server"},"server.create":{ru:"  ",en:"Create your server"},"server.join":{ru:"  ",en:"Join a server"},"server.locked":{ru:"",en:"Locked"},"server.future":{ru:"    ",en:"Will be added in future updates"},"friends.all":{ru:"",en:"All"},"friends.online":{ru:" ",en:"Online"},"friends.pending":{ru:"",en:"Pending"},"friends.requests":{ru:"",en:"Requests"},"friends.add":{ru:"",en:"Add"},"friends.all.title":{ru:" ",en:"All Friends"},"friends.none":{ru:"    ",en:"You have no friends yet"},"friends.add.go":{ru:"  ",en:"Add a friend "},"friends.nobody.online":{ru:"   ",en:"Nobody is online"},"friends.no.outgoing":{ru:"  ",en:"No outgoing requests"},"friends.no.incoming":{ru:"  ",en:"No incoming requests"},"friends.outgoing":{ru:" ",en:"Outgoing request"},"friends.incoming":{ru:" ",en:"Incoming request"},"friends.incoming.title":{ru:" ",en:"Incoming Requests"},"friends.add.title":{ru:" ",en:"Add Friend"},"friends.add.desc":{ru:"     #123456",en:"Enter friend username in format Name#123456"},"friends.add.send":{ru:"",en:"Send"},"friends.add.self":{ru:"   ",en:"Cannot add yourself"},"friends.add.already":{ru:"  ",en:"Already friends"},"friends.add.sent":{ru:"  ",en:"Request already sent"},"friends.add.ok":{ru:" ",en:"Request sent to"},"friends.add.format":{ru:": #123456",en:"Format: Name#123456"},"friends.add.invalid":{ru:"  ",en:"Enter a valid username"},"chat.start":{ru:"    ",en:"This is the beginning of your conversation with"},"chat.write":{ru:"",en:"Write to"},"chat.record":{ru:"  ",en:"Press to record"},"mode.text":{ru:"",en:"Text"},"mode.voice":{ru:"",en:"Voice"},settings:{ru:"",en:"Settings"},"settings.account":{ru:" ",en:"My Account"},"settings.customize":{ru:"",en:"Customization"},"settings.interface":{ru:"",en:"Interface"},"settings.creator":{ru:" ",en:"Creator Panel"},"settings.admin":{ru:" ",en:"Admin Panel"},"settings.displayname":{ru:" ",en:"Display Name"},"settings.username":{ru:" ",en:"Username"},"settings.username.locked":{ru:" ",en:"cannot be changed"},"settings.email":{ru:"Email",en:"Email"},"settings.show":{ru:"",en:"Show"},"settings.hide":{ru:"",en:"Hide"},"settings.delete":{ru:" ",en:"Delete Account"},"settings.delete.confirm":{ru:" ",en:"Enter code"},"settings.delete.confirm2":{ru:" :",en:"to confirm:"},"settings.delete.error":{ru:" .  123456  .",en:"Wrong code. Enter 123456 to confirm."},"settings.cancel":{ru:"",en:"Cancel"},"settings.delete.btn":{ru:"",en:"Delete"},"settings.save":{ru:"",en:"Save"},"settings.banner":{ru:"",en:"Banner"},"settings.banner.change":{ru:" ",en:"Change banner"},"settings.banner.change2":{ru:"  (/GIF)",en:"Change banner (photo/GIF)"},"settings.avatar":{ru:"",en:"Avatar"},"settings.avatar.change":{ru:"  (/GIF)",en:"Change avatar (photo/GIF)"},"settings.frame":{ru:" ",en:"Avatar Frame"},"settings.frame.none":{ru:" ",en:"No Frame"},"settings.frame.removed":{ru:" ",en:"Frame removed"},"settings.frame.set":{ru:"",en:"set"},"settings.game":{ru:" ",en:"Game Widget"},"settings.aboutme":{ru:" ",en:"About Me"},"settings.theme":{ru:" ",en:"Interface Theme"},"settings.theme.jolt":{ru:" Jolt",en:"Jolt Theme"},"settings.theme.jolt.desc":{ru:" + Indigo ( )",en:"Black + Indigo (default)"},"settings.theme.dark":{ru:" ",en:"Dark Theme"},"settings.theme.dark.desc":{ru:"  ",en:"Classic dark theme"},"settings.theme.light":{ru:" ",en:"Light Theme"},"settings.theme.light.desc":{ru:" ",en:"Light theme"},"settings.theme.applied":{ru:"",en:"applied"},"settings.lang":{ru:"",en:"Language"},"settings.lang.ru":{ru:"",en:"Russian"},"settings.lang.en":{ru:"",en:"English"},"settings.lang.applied":{ru:" ",en:"Language changed"},"settings.username.note":{ru:"",en:"Username"},"settings.username.note2":{ru:" ",en:"won't change"},"toast.banner":{ru:" ",en:"Banner updated"},"toast.avatar":{ru:" ",en:"Avatar updated"},"toast.name":{ru:" ",en:"Name updated"},"toast.widget":{ru:" ",en:"Widget updated"},"toast.aboutme":{ru:"  ",en:"About me updated"},"toast.unban":{ru:" ",en:"User unbanned"},"toast.unfreeze":{ru:" ",en:"Account unfrozen"},"mod.ban":{ru:" ",en:"Ban User"},"mod.ban.reason":{ru:" ",en:"Ban reason"},"mod.ban.btn":{ru:"",en:"Ban"},"mod.ban.default":{ru:" ",en:"Rule violation"},"mod.banned":{ru:"",en:"Banned Users"},"mod.banned.none":{ru:" ",en:"No banned users"},"mod.banned.msg":{ru:"",en:"banned"},"mod.unban":{ru:"",en:"Unban"},"mod.freeze":{ru:" ",en:"Freeze Account"},"mod.freeze.reason":{ru:" ",en:"Freeze reason"},"mod.freeze.btn":{ru:"",en:"Freeze"},"mod.freeze.default":{ru:" ",en:"Account frozen"},"mod.frozen":{ru:"",en:"Frozen Users"},"mod.frozen.none":{ru:" ",en:"No frozen users"},"mod.frozen.msg":{ru:"",en:"frozen"},"mod.unfreeze":{ru:"",en:"Unfreeze"},"mod.admin.assign":{ru:" ",en:"Assign Admin"},"mod.admin.assign.btn":{ru:"",en:"Assign"},"mod.admin.assigned":{ru:" ",en:"assigned as admin"},"mod.admin.remove":{ru:"  ",en:"Remove Admin"},"mod.admin.remove.btn":{ru:"",en:"Remove"},"mod.admin.removed":{ru:"  ",en:"removed from admins"},"mod.admins":{ru:"",en:"Administrators"},"mod.admins.none":{ru:" ",en:"No administrators"},"mod.error.format":{ru:": #123456",en:"Format: Name#123456"},"mod.error.notfound":{ru:"  ",en:"User not found"},"mod.error.creator":{ru:"  ",en:"Cannot ban the creator"},"mod.error.creator.freeze":{ru:"  ",en:"Cannot freeze the creator"},"mod.error.creator.remove":{ru:"  ",en:"Cannot remove the creator"},"mod.error.admin.ban":{ru:"     ",en:"Admin cannot ban other admins"},"mod.error.admin.freeze":{ru:"     ",en:"Admin cannot freeze other admins"},"mod.tag.creator":{ru:"",en:"Creator"},"mod.tag.admin":{ru:"",en:"Admin"},"frame.creator":{ru:" ",en:"Creator Frame"},"frame.creator.cond":{ru:" JOLT#123456",en:"Only JOLT#123456"},"frame.admin":{ru:" ",en:"Admin Frame"},"frame.admin.cond":{ru:" + ",en:"Admins + creator"},"frame.acquaintance":{ru:"",en:"Acquaintance"},"frame.acquaintance.cond":{ru:" ",en:"Creator's friends"},"frame.newbie":{ru:"",en:"Newbie"},"frame.newbie.cond":{ru:"1  ",en:"1 month account age"},"frame.veteran":{ru:"",en:"Veteran"},"frame.veteran.cond":{ru:"6  ",en:"6 months account age"},"frame.legend":{ru:"",en:"Legend"},"frame.legend.cond":{ru:"1  ",en:"1 year account age"},"frame.immortal":{ru:"",en:"Immortal"},"frame.immortal.cond":{ru:"5  ",en:"5 years account age"}};function fe(i,e){return d2[i]?.[e]||d2[i]?.ru||i}const r6=["Minecraft","CS2","Valorant","Dota 2","Fortnite","Genshin Impact","Roblox","League of Legends","Apex Legends","GTA V"],i6=[{id:"creator",nameKey:"frame.creator",condKey:"frame.creator.cond",visibleWhenLocked:!1},{id:"admin",nameKey:"frame.admin",condKey:"frame.admin.cond",visibleWhenLocked:!1},{id:"acquaintance",nameKey:"frame.acquaintance",condKey:"frame.acquaintance.cond",visibleWhenLocked:!1},{id:"newbie",nameKey:"frame.newbie",condKey:"frame.newbie.cond",visibleWhenLocked:!0},{id:"veteran",nameKey:"frame.veteran",condKey:"frame.veteran.cond",visibleWhenLocked:!0},{id:"legend",nameKey:"frame.legend",condKey:"frame.legend.cond",visibleWhenLocked:!0},{id:"immortal",nameKey:"frame.immortal",condKey:"frame.immortal.cond",visibleWhenLocked:!0}];function s6(i){return Date.now()-new Date(i).getTime()}const hg=720*60*60*1e3;function KS(i,e){if(tr(e))return!0;const t=s6(e.createdAt);switch(i){case"none":return!0;case"creator":return!1;case"admin":return e.isAdmin;case"acquaintance":return!1;case"newbie":return t>=hg;case"veteran":return t>=6*hg;case"legend":return t>=12*hg;case"immortal":return t>=60*hg;default:return!1}}function a6(i,e){return tr(e)||KS(i.id,e)?!0:i.visibleWhenLocked}function l0(i){switch(i){case"creator":return"3px solid #6366F1";case"admin":return"3px solid #EF4444";case"acquaintance":return"3px solid #EF4444";case"newbie":return"3px solid #92400E";case"veteran":return"3px solid #ffffff";case"legend":return"3px solid #06B6D4";case"immortal":return"3px solid #EF4444";default:return"2px solid #334155"}}function o6(i){switch(i){case"creator":return"linear-gradient(135deg, #4338CA, #6366F1)";case"admin":return"linear-gradient(135deg, #B91C1C, #EF4444)";case"acquaintance":return"linear-gradient(135deg, #DC2626, #F87171)";case"newbie":return"linear-gradient(135deg, #78350F, #A16207, #92400E)";case"veteran":return"linear-gradient(135deg, #d4d4d4, #ffffff, #d4d4d4)";case"legend":return"linear-gradient(135deg, #06B6D4, #67E8F9, #06B6D4)";case"immortal":return"linear-gradient(135deg, #DC2626, #F97316, #EF4444)";default:return"#334155"}}function l6(i){const[e,t]=i.split("@");return t?e[0]+"***"+(e.length>1?e[e.length-1]:"")+"@"+t:"***"}function c6({user:i,onUserUpdate:e,onLogout:t,onClose:r}){const a=i.language||"ru",[c,d]=k.useState("account"),[g,p]=k.useState(!1),[y,b]=k.useState(i.displayName||i.nickname),[T,S]=k.useState(i.aboutMe||""),[V,q]=k.useState(i.gameWidget||""),[W,L]=k.useState(""),[ce,oe]=k.useState(!1),[ue,me]=k.useState(""),[Ve,je]=k.useState(""),[D,C]=k.useState(""),[R,M]=k.useState(""),[B,U]=k.useState(""),[N,rt]=k.useState(""),[xt,Z]=k.useState(""),[ye,Te]=k.useState(""),[Qe,Ne]=k.useState(null),[O,te]=k.useState(!1),[ne,he]=k.useState([]),[Se,ke]=k.useState([]),[He,vt]=k.useState([]),Ze=k.useRef(null),vr=k.useRef(null),br=k.useRef(null),_r=tr(i),bn=i.isAdmin||_r,ut=xe=>{je(xe),setTimeout(()=>je(""),3e3)},cn=async xe=>{const we={...i,...xe};h0(we),e(we);try{await jr(i.email,xe)}catch{}},Ot=k.useCallback(async()=>{try{const[xe,we,Re]=await Promise.all([jk(),kk(),Nk()]);he(xe),ke(we),vt(Re)}catch{}},[]);k.useEffect(()=>{(c==="creator"||c==="admin")&&Ot()},[c,Ot]);const Nr=xe=>{const we=xe.target.files?.[0];if(we){const Re=new FileReader;Re.onload=_n=>{cn({banner:_n.target?.result}),ut(fe("toast.banner",a))},Re.readAsDataURL(we)}},ai=xe=>{const we=xe.target.files?.[0];if(we){const Re=new FileReader;Re.onload=_n=>{cn({avatarImage:_n.target?.result}),ut(fe("toast.avatar",a))},Re.readAsDataURL(we)}},Qt=async()=>{if(W!=="123456"){me(fe("settings.delete.error",a));return}try{await Rk(i.email)}catch{}Iy(),t()},Wt=async()=>{if(Ne(null),!D.includes("#")){Ne({type:"error",msg:fe("mod.error.format",a)});return}const[xe,we]=D.split("#");te(!0);try{const Re=await ph(xe,we);if(!Re){Ne({type:"error",msg:fe("mod.error.notfound",a)}),te(!1);return}if(tr(Re)){Ne({type:"error",msg:fe("mod.error.creator",a)}),te(!1);return}if(!_r&&Re.isAdmin){Ne({type:"error",msg:fe("mod.error.admin.ban",a)}),te(!1);return}await jr(Re.email,{banned:!0,banReason:R||fe("mod.ban.default",a)}),await Dk(Re.email,R||fe("mod.ban.default",a)),Ne({type:"success",msg:`${xe}#${we} ${fe("mod.banned.msg",a)}`}),C(""),M(""),await Ot()}catch{Ne({type:"error",msg:".  ."})}te(!1)},Dr=async xe=>{try{await jr(xe,{banned:!1,banReason:void 0}),await Mk(xe),ut(fe("toast.unban",a)),await Ot()}catch{ut("")}},Bi=async()=>{if(Ne(null),!B.includes("#")){Ne({type:"error",msg:fe("mod.error.format",a)});return}const[xe,we]=B.split("#");te(!0);try{const Re=await ph(xe,we);if(!Re){Ne({type:"error",msg:fe("mod.error.notfound",a)}),te(!1);return}if(tr(Re)){Ne({type:"error",msg:fe("mod.error.creator.freeze",a)}),te(!1);return}if(!_r&&Re.isAdmin){Ne({type:"error",msg:fe("mod.error.admin.freeze",a)}),te(!1);return}await jr(Re.email,{frozen:!0,freezeReason:N||fe("mod.freeze.default",a)}),Ne({type:"success",msg:`${xe}#${we} ${fe("mod.frozen.msg",a)}`}),U(""),rt(""),await Ot()}catch{Ne({type:"error",msg:".  ."})}te(!1)},zi=async xe=>{try{await jr(xe,{frozen:!1,freezeReason:void 0}),ut(fe("toast.unfreeze",a)),await Ot()}catch{ut("")}},Jt=async()=>{if(Ne(null),!xt.includes("#")){Ne({type:"error",msg:fe("mod.error.format",a)});return}const[xe,we]=xt.split("#");te(!0);try{const Re=await ph(xe,we);if(!Re){Ne({type:"error",msg:fe("mod.error.notfound",a)}),te(!1);return}await jr(Re.email,{isAdmin:!0}),await o0(Re.email),Ne({type:"success",msg:`${xe}#${we} ${fe("mod.admin.assigned",a)}`}),Z(""),await Ot()}catch{Ne({type:"error",msg:".  ."})}te(!1)},un=async()=>{if(Ne(null),!ye.includes("#")){Ne({type:"error",msg:fe("mod.error.format",a)});return}const[xe,we]=ye.split("#");te(!0);try{const Re=await ph(xe,we);if(!Re){Ne({type:"error",msg:fe("mod.error.notfound",a)}),te(!1);return}if(tr(Re)){Ne({type:"error",msg:fe("mod.error.creator.remove",a)}),te(!1);return}await jr(Re.email,{isAdmin:!1,frame:Re.frame==="admin"?"none":Re.frame}),await n6(Re.email),Ne({type:"success",msg:`${xe}#${we} ${fe("mod.admin.removed",a)}`}),Te(""),await Ot()}catch{Ne({type:"error",msg:".  ."})}te(!1)},ar=()=>i.avatarImage?"transparent":i.avatarGradient?i.avatarGradient:i.avatarColor,Sn=[{key:"account",label:fe("settings.account",a),icon:"",show:!0},{key:"customize",label:fe("settings.customize",a),icon:"",show:!0},{key:"interface",label:fe("settings.interface",a),icon:"",show:!0},{key:"creator",label:fe("settings.creator",a),icon:"",show:_r},{key:"admin",label:fe("settings.admin",a),icon:"",show:bn&&!_r}],St=()=>l.jsxs("div",{className:"space-y-4 animate-fade-in-up",children:[l.jsxs("div",{className:"relative rounded-xl overflow-hidden cursor-pointer group",onClick:()=>Ze.current?.click(),children:[l.jsx("div",{className:"h-24 w-full",style:{background:i.banner?`url(${i.banner}) center/cover`:i.avatarGradient||`linear-gradient(135deg, ${i.avatarColor}, #1E293B)`}}),l.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors flex items-center justify-center",children:l.jsx("span",{className:"text-white text-sm opacity-0 group-hover:opacity-100 transition-opacity",children:fe("settings.banner.change",a)})})]}),l.jsx("input",{ref:Ze,type:"file",accept:"image/*,image/gif",onChange:Nr,className:"hidden"}),l.jsx("div",{className:"flex justify-start -mt-10 ml-4 relative z-10",children:l.jsx("div",{className:"rounded-full p-1",style:{background:"#111128"},children:l.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold text-white overflow-hidden",style:{background:ar(),border:l0(i.frame)},children:i.avatarImage?l.jsx("img",{src:i.avatarImage,alt:"",className:"w-full h-full object-cover rounded-full"}):i.nickname[0]?.toUpperCase()})})}),l.jsxs("div",{className:"space-y-3 mt-2",children:[l.jsxs("div",{className:"bg-[#0d0d1a] rounded-lg p-3",children:[l.jsx("div",{className:"text-[11px] text-slate-500 uppercase tracking-wider mb-1",children:fe("settings.displayname",a)}),l.jsx("div",{className:"text-white text-sm font-medium",children:i.displayName||i.nickname})]}),l.jsxs("div",{className:"bg-[#0d0d1a] rounded-lg p-3",children:[l.jsx("div",{className:"text-[11px] text-slate-500 uppercase tracking-wider mb-1",children:fe("settings.username",a)}),l.jsxs("div",{className:"text-white text-sm font-mono flex items-center gap-2",children:[i.nickname,"#",i.tag,l.jsx("span",{className:"text-[10px] text-slate-600 bg-slate-800 px-1.5 py-0.5 rounded",children:fe("settings.username.locked",a)})]})]}),l.jsxs("div",{className:"bg-[#0d0d1a] rounded-lg p-3",children:[l.jsx("div",{className:"text-[11px] text-slate-500 uppercase tracking-wider mb-1",children:fe("settings.email",a)}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-white text-sm font-mono",children:g?i.email:l6(i.email)}),l.jsx("button",{onClick:()=>p(!g),className:"text-xs text-indigo-400 hover:text-indigo-300 transition-colors",children:fe(g?"settings.hide":"settings.show",a)})]})]}),l.jsx("div",{className:"pt-2",children:ce?l.jsxs("div",{className:"bg-red-500/5 border border-red-500/20 rounded-lg p-3 space-y-2",children:[l.jsxs("p",{className:"text-red-400 text-sm",children:[fe("settings.delete.confirm",a)," ",l.jsx("span",{className:"font-mono font-bold",children:"123456"})," ",fe("settings.delete.confirm2",a)]}),l.jsx("input",{type:"text",value:W,onChange:xe=>L(xe.target.value),placeholder:"123456",className:"w-full bg-[#0d0d1a] border border-red-500/30 rounded px-3 py-2 text-white text-sm outline-none focus:border-red-500"}),ue&&l.jsx("p",{className:"text-red-400 text-xs",children:ue}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{oe(!1),L(""),me("")},className:"flex-1 py-2 rounded bg-slate-800 text-slate-400 text-sm hover:bg-slate-700 transition-colors",children:fe("settings.cancel",a)}),l.jsx("button",{onClick:Qt,className:"flex-1 py-2 rounded bg-red-600 hover:bg-red-500 text-white text-sm font-medium transition-colors",children:fe("settings.delete.btn",a)})]})]}):l.jsx("button",{onClick:()=>oe(!0),className:"w-full py-2.5 rounded-lg bg-red-500/10 hover:bg-red-500/20 text-red-400 text-sm font-medium transition-colors border border-red-500/20",children:fe("settings.delete",a)})})]})]}),Mr=()=>l.jsxs("div",{className:"space-y-5 animate-fade-in-up",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[11px] text-slate-500 uppercase tracking-wider mb-1.5 block",children:fe("settings.displayname",a)}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:y,onChange:xe=>b(xe.target.value),maxLength:32,className:"flex-1 bg-[#0d0d1a] border border-indigo-900/30 rounded-lg px-3 py-2 text-white text-sm outline-none focus:border-indigo-500 transition-colors"}),l.jsx("button",{onClick:()=>{cn({displayName:y}),ut(fe("toast.name",a))},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-lg text-white text-sm font-medium transition-colors",children:fe("settings.save",a)})]}),l.jsxs("p",{className:"text-[10px] text-slate-600 mt-1",children:[fe("settings.username.note",a)," (",i.nickname,"#",i.tag,") ",fe("settings.username.note2",a)]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[11px] text-slate-500 uppercase tracking-wider mb-1.5 block",children:fe("settings.avatar",a)}),l.jsxs("button",{onClick:()=>br.current?.click(),className:"flex items-center gap-3 bg-[#0d0d1a] hover:bg-[#151530] rounded-lg p-3 transition-colors w-full text-left",children:[l.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold text-white shrink-0 overflow-hidden",style:{background:ar()},children:i.avatarImage?l.jsx("img",{src:i.avatarImage,alt:"",className:"w-full h-full object-cover rounded-full"}):i.nickname[0]?.toUpperCase()}),l.jsx("span",{className:"text-indigo-400 text-sm",children:fe("settings.avatar.change",a)})]}),l.jsx("input",{ref:br,type:"file",accept:"image/*,image/gif",onChange:ai,className:"hidden"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[11px] text-slate-500 uppercase tracking-wider mb-1.5 block",children:fe("settings.banner",a)}),l.jsx("button",{onClick:()=>vr.current?.click(),className:"w-full h-16 rounded-lg overflow-hidden hover:opacity-80 transition-opacity",style:{background:i.banner?`url(${i.banner}) center/cover`:i.avatarGradient||`linear-gradient(135deg, ${i.avatarColor}, #1E293B)`},children:l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-black/20",children:l.jsx("span",{className:"text-white/70 text-sm",children:fe("settings.banner.change2",a)})})}),l.jsx("input",{ref:vr,type:"file",accept:"image/*,image/gif",onChange:Nr,className:"hidden"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[11px] text-slate-500 uppercase tracking-wider mb-2 block",children:fe("settings.frame",a)}),l.jsxs("div",{className:"space-y-1.5 max-h-44 overflow-y-auto pr-1",children:[l.jsxs("button",{onClick:()=>{cn({frame:"none"}),ut(fe("settings.frame.removed",a))},className:`w-full flex items-center gap-3 p-2.5 rounded-lg transition-colors text-left ${i.frame==="none"?"bg-indigo-600/20 border border-indigo-500/30":"bg-[#0d0d1a] hover:bg-[#151530]"}`,children:[l.jsx("div",{className:"w-9 h-9 rounded-full border-2 border-slate-600 flex items-center justify-center text-slate-500 text-sm shrink-0",children:""}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"text-white text-sm",children:fe("settings.frame.none",a)})}),i.frame==="none"&&l.jsx("span",{className:"text-indigo-400 text-xs",children:""})]}),i6.filter(xe=>a6(xe,i)).map(xe=>{const we=KS(xe.id,i);return l.jsxs("button",{onClick:()=>{we&&(cn({frame:xe.id}),ut(`${fe(xe.nameKey,a)} ${fe("settings.frame.set",a)}`))},disabled:!we,className:`w-full flex items-center gap-3 p-2.5 rounded-lg transition-colors text-left ${i.frame===xe.id?"bg-indigo-600/20 border border-indigo-500/30":we?"bg-[#0d0d1a] hover:bg-[#151530]":"bg-[#0d0d1a] opacity-40 cursor-not-allowed"}`,children:[l.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center text-xs shrink-0 overflow-hidden",style:{border:l0(xe.id),background:o6(xe.id)},children:l.jsx("span",{className:"text-white font-bold text-sm drop-shadow",children:xe.id==="creator"?"":xe.id==="admin"?"":xe.id==="acquaintance"?"":xe.id==="newbie"?"":xe.id==="veteran"?"":xe.id==="legend"?"":""})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-white text-sm",children:fe(xe.nameKey,a)}),l.jsxs("div",{className:"text-slate-500 text-[10px]",children:[fe(xe.condKey,a),we?"":" "]})]}),i.frame===xe.id&&l.jsx("span",{className:"text-indigo-400 text-xs",children:""})]},xe.id)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[11px] text-slate-500 uppercase tracking-wider mb-1.5 block",children:fe("settings.game",a)}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{value:V,onChange:xe=>q(xe.target.value),className:"flex-1 bg-[#0d0d1a] border border-indigo-900/30 rounded-lg px-3 py-2 text-white text-sm outline-none focus:border-indigo-500 appearance-none cursor-pointer",children:[l.jsx("option",{value:"",children:fe("no.activity",a)}),r6.map(xe=>l.jsx("option",{value:xe,children:xe},xe))]}),l.jsx("button",{onClick:()=>{cn({gameWidget:V}),ut(fe("toast.widget",a))},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-lg text-white text-sm font-medium transition-colors",children:""})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"text-[11px] text-slate-500 uppercase tracking-wider mb-1.5 flex items-center justify-between",children:[l.jsx("span",{children:fe("settings.aboutme",a)}),l.jsxs("span",{className:"text-slate-600",children:[T.length,"/200"]})]}),l.jsx("textarea",{value:T,onChange:xe=>{xe.target.value.length<=200&&S(xe.target.value)},placeholder:"...",rows:3,className:"w-full bg-[#0d0d1a] border border-indigo-900/30 rounded-lg px-3 py-2 text-white text-sm outline-none focus:border-indigo-500 resize-none transition-colors"}),l.jsx("button",{onClick:()=>{cn({aboutMe:T}),ut(fe("toast.aboutme",a))},className:"mt-1.5 px-4 py-1.5 bg-indigo-600 hover:bg-indigo-500 rounded-lg text-white text-xs font-medium transition-colors",children:fe("settings.save",a)})]})]}),or=()=>{const xe=[{key:"jolt",nameKey:"settings.theme.jolt",descKey:"settings.theme.jolt.desc",gradient:"linear-gradient(135deg, #000, #1E1B4B)"},{key:"dark",nameKey:"settings.theme.dark",descKey:"settings.theme.dark.desc",gradient:"linear-gradient(135deg, #111, #1a1a1a)"},{key:"light",nameKey:"settings.theme.light",descKey:"settings.theme.light.desc",gradient:"linear-gradient(135deg, #E2E8F0, #F8FAFC)"}],we=[{key:"ru",nameKey:"settings.lang.ru",flag:""},{key:"en",nameKey:"settings.lang.en",flag:""}];return l.jsxs("div",{className:"space-y-5 animate-fade-in-up",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-semibold text-sm mb-3",children:fe("settings.theme",a)}),l.jsx("div",{className:"space-y-2",children:xe.map(Re=>l.jsxs("button",{onClick:()=>{cn({theme:Re.key}),ut(`${fe(Re.nameKey,a)} ${fe("settings.theme.applied",a)}`)},className:`w-full flex items-center gap-3 p-3 rounded-xl transition-colors text-left ${i.theme===Re.key?"bg-indigo-600/20 border border-indigo-500/30":"bg-[#0d0d1a] hover:bg-[#151530] border border-transparent"}`,children:[l.jsx("div",{className:"w-12 h-8 rounded-lg shrink-0 border border-slate-700",style:{background:Re.gradient}}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-white text-sm font-medium",children:fe(Re.nameKey,a)}),l.jsx("div",{className:"text-slate-500 text-[11px]",children:fe(Re.descKey,a)})]}),i.theme===Re.key&&l.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-600 flex items-center justify-center shrink-0",children:l.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]},Re.key))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-semibold text-sm mb-3",children:fe("settings.lang",a)}),l.jsx("div",{className:"space-y-2",children:we.map(Re=>l.jsxs("button",{onClick:()=>{cn({language:Re.key}),ut(fe("settings.lang.applied",Re.key))},className:`w-full flex items-center gap-3 p-3 rounded-xl transition-colors text-left ${a===Re.key?"bg-indigo-600/20 border border-indigo-500/30":"bg-[#0d0d1a] hover:bg-[#151530] border border-transparent"}`,children:[l.jsx("span",{className:"text-2xl",children:Re.flag}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-white text-sm font-medium",children:fe(Re.nameKey,a)}),l.jsx("div",{className:"text-slate-500 text-[11px]",children:Re.key.toUpperCase()})]}),a===Re.key&&l.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-600 flex items-center justify-center shrink-0",children:l.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]},Re.key))})]})]})},oi=xe=>l.jsxs("div",{className:"space-y-4 animate-fade-in-up",children:[l.jsxs("div",{className:"bg-[#0d0d1a] rounded-xl p-3 space-y-2",children:[l.jsxs("h4",{className:"text-red-400 text-sm font-semibold",children:[" ",fe("mod.ban",a)]}),l.jsx("input",{type:"text",value:D,onChange:we=>C(we.target.value),placeholder:fe("mod.error.format",a),className:"w-full bg-[#111128] border border-slate-700 rounded-lg px-3 py-2 text-white text-sm outline-none focus:border-red-500"}),l.jsx("input",{type:"text",value:R,onChange:we=>M(we.target.value),placeholder:fe("mod.ban.reason",a),className:"w-full bg-[#111128] border border-slate-700 rounded-lg px-3 py-2 text-white text-sm outline-none focus:border-red-500"}),l.jsx("button",{onClick:Wt,disabled:O,className:"w-full py-2 bg-red-600 hover:bg-red-500 rounded-lg text-white text-sm font-medium transition-colors disabled:opacity-50",children:O?"...":fe("mod.ban.btn",a)})]}),l.jsxs("div",{className:"bg-[#0d0d1a] rounded-xl p-3",children:[l.jsxs("h4",{className:"text-slate-400 text-sm font-semibold mb-2",children:[fe("mod.banned",a)," (",ne.length,")"]}),ne.length===0?l.jsx("p",{className:"text-slate-600 text-xs",children:fe("mod.banned.none",a)}):l.jsx("div",{className:"space-y-1 max-h-28 overflow-y-auto",children:ne.map(we=>l.jsxs("div",{className:"flex items-center justify-between bg-[#111128] rounded-lg px-3 py-2",children:[l.jsxs("div",{children:[l.jsxs("span",{className:"text-white text-sm",children:[we.nickname,"#",we.tag]}),we.banReason&&l.jsxs("span",{className:"text-red-400 text-[10px] ml-2",children:["(",we.banReason,")"]})]}),l.jsx("button",{onClick:()=>Dr(we.email),className:"text-emerald-400 text-xs hover:text-emerald-300",children:fe("mod.unban",a)})]},we.email))})]}),l.jsxs("div",{className:"bg-[#0d0d1a] rounded-xl p-3 space-y-2",children:[l.jsxs("h4",{className:"text-blue-400 text-sm font-semibold",children:[" ",fe("mod.freeze",a)]}),l.jsx("input",{type:"text",value:B,onChange:we=>U(we.target.value),placeholder:fe("mod.error.format",a),className:"w-full bg-[#111128] border border-slate-700 rounded-lg px-3 py-2 text-white text-sm outline-none focus:border-blue-500"}),l.jsx("input",{type:"text",value:N,onChange:we=>rt(we.target.value),placeholder:fe("mod.freeze.reason",a),className:"w-full bg-[#111128] border border-slate-700 rounded-lg px-3 py-2 text-white text-sm outline-none focus:border-blue-500"}),l.jsx("button",{onClick:Bi,disabled:O,className:"w-full py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-white text-sm font-medium transition-colors disabled:opacity-50",children:O?"...":fe("mod.freeze.btn",a)})]}),l.jsxs("div",{className:"bg-[#0d0d1a] rounded-xl p-3",children:[l.jsxs("h4",{className:"text-slate-400 text-sm font-semibold mb-2",children:[fe("mod.frozen",a)," (",Se.length,")"]}),Se.length===0?l.jsx("p",{className:"text-slate-600 text-xs",children:fe("mod.frozen.none",a)}):l.jsx("div",{className:"space-y-1 max-h-28 overflow-y-auto",children:Se.map(we=>l.jsxs("div",{className:"flex items-center justify-between bg-[#111128] rounded-lg px-3 py-2",children:[l.jsxs("div",{children:[l.jsxs("span",{className:"text-white text-sm",children:[we.nickname,"#",we.tag]}),we.freezeReason&&l.jsxs("span",{className:"text-blue-400 text-[10px] ml-2",children:["(",we.freezeReason,")"]})]}),l.jsx("button",{onClick:()=>zi(we.email),className:"text-emerald-400 text-xs hover:text-emerald-300",children:fe("mod.unfreeze",a)})]},we.email))})]}),xe&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-[#0d0d1a] rounded-xl p-3 space-y-2",children:[l.jsxs("h4",{className:"text-purple-400 text-sm font-semibold",children:[" ",fe("mod.admin.assign",a)]}),l.jsx("input",{type:"text",value:xt,onChange:we=>Z(we.target.value),placeholder:fe("mod.error.format",a),className:"w-full bg-[#111128] border border-slate-700 rounded-lg px-3 py-2 text-white text-sm outline-none focus:border-purple-500"}),l.jsx("button",{onClick:Jt,disabled:O,className:"w-full py-2 bg-purple-600 hover:bg-purple-500 rounded-lg text-white text-sm font-medium transition-colors disabled:opacity-50",children:O?"...":fe("mod.admin.assign.btn",a)})]}),l.jsxs("div",{className:"bg-[#0d0d1a] rounded-xl p-3 space-y-2",children:[l.jsxs("h4",{className:"text-orange-400 text-sm font-semibold",children:[" ",fe("mod.admin.remove",a)]}),l.jsx("input",{type:"text",value:ye,onChange:we=>Te(we.target.value),placeholder:fe("mod.error.format",a),className:"w-full bg-[#111128] border border-slate-700 rounded-lg px-3 py-2 text-white text-sm outline-none focus:border-orange-500"}),l.jsx("button",{onClick:un,disabled:O,className:"w-full py-2 bg-orange-600 hover:bg-orange-500 rounded-lg text-white text-sm font-medium transition-colors disabled:opacity-50",children:O?"...":fe("mod.admin.remove.btn",a)})]}),l.jsxs("div",{className:"bg-[#0d0d1a] rounded-xl p-3",children:[l.jsxs("h4",{className:"text-slate-400 text-sm font-semibold mb-2",children:[fe("mod.admins",a)," (",He.length,")"]}),He.length===0?l.jsx("p",{className:"text-slate-600 text-xs",children:fe("mod.admins.none",a)}):l.jsx("div",{className:"space-y-1 max-h-28 overflow-y-auto",children:He.map(we=>l.jsxs("div",{className:"flex items-center gap-2 bg-[#111128] rounded-lg px-3 py-2",children:[l.jsxs("span",{className:"text-white text-sm",children:[we.nickname,"#",we.tag]}),tr(we)&&l.jsx("span",{className:"text-[10px] bg-purple-500/20 text-purple-400 px-1.5 py-0.5 rounded",children:fe("mod.tag.creator",a)}),!tr(we)&&we.isAdmin&&l.jsx("span",{className:"text-[10px] bg-indigo-500/20 text-indigo-400 px-1.5 py-0.5 rounded",children:fe("mod.tag.admin",a)})]},we.email))})]})]}),Qe&&l.jsx("div",{className:`text-sm px-3 py-2 rounded-lg ${Qe.type==="success"?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:Qe.msg})]});return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.6)",backdropFilter:"blur(6px)"},onClick:r,children:[l.jsxs("div",{className:"flex rounded-2xl overflow-hidden shadow-2xl border border-indigo-900/30 animate-scale-in",style:{width:720,maxWidth:"92vw",height:520,maxHeight:"85vh"},onClick:xe=>xe.stopPropagation(),children:[l.jsxs("div",{className:"w-48 bg-[#0d0d1a] flex flex-col py-4 border-r border-indigo-900/20 shrink-0",children:[l.jsx("h2",{className:"text-white font-bold text-lg px-4 mb-4",children:fe("settings",a)}),l.jsx("div",{className:"flex-1 space-y-0.5 px-2 overflow-y-auto",children:Sn.filter(xe=>xe.show).map(xe=>l.jsxs("button",{onClick:()=>{d(xe.key),Ne(null)},className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center gap-2 ${c===xe.key?"bg-indigo-600/20 text-white font-medium":"text-slate-400 hover:text-white hover:bg-[#111128]"}`,children:[l.jsx("span",{className:"text-base",children:xe.icon}),xe.label]},xe.key))}),l.jsx("div",{className:"px-2 pt-2 border-t border-indigo-900/20 mt-2",children:l.jsxs("button",{onClick:()=>{Iy(),t()},className:"w-full text-left px-3 py-2 rounded-md text-sm text-red-400 hover:bg-red-500/10 transition-colors flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),fe("logout",a)]})})]}),l.jsx("div",{className:"flex-1 bg-[#111128] overflow-y-auto",children:l.jsxs("div",{className:"max-w-md mx-auto py-5 px-5",children:[l.jsx("div",{className:"flex justify-end mb-3",children:l.jsx("button",{onClick:r,className:"w-8 h-8 rounded-full bg-[#0d0d1a] hover:bg-slate-700 flex items-center justify-center text-slate-400 hover:text-white transition-colors",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})}),c==="account"&&St(),c==="customize"&&Mr(),c==="interface"&&or(),c==="creator"&&oi(!0),c==="admin"&&oi(!1)]})})]}),Ve&&l.jsx("div",{className:"fixed top-4 right-4 bg-[#111128] border border-indigo-500/30 rounded-xl px-5 py-3 text-sm text-indigo-400 shadow-2xl z-[60] animate-toast",children:Ve})]})}function u6(i){return i.avatarImage?"transparent":i.avatarGradient?i.avatarGradient:i.avatarColor}function d6(i,e){return i==="newbie"?{background:"linear-gradient(135deg, #92400E 0%, #D97706 25%, #78350F 50%, #B45309 75%, #92400E 100%)",padding:3,borderRadius:"50%",width:e+6,height:e+6}:i==="veteran"?{background:"linear-gradient(135deg, #d4d4d4, #ffffff, #e5e5e5, #ffffff, #d4d4d4)",padding:3,borderRadius:"50%",width:e+6,height:e+6}:i==="legend"?{background:"linear-gradient(135deg, #06B6D4, #67E8F9, #0EA5E9, #67E8F9, #06B6D4)",padding:3,borderRadius:"50%",width:e+6,height:e+6}:i==="immortal"?{background:"linear-gradient(0deg, #DC2626, #F97316, #EF4444, #F59E0B)",padding:3,borderRadius:"50%",width:e+6,height:e+6}:null}function h6({avatarColor:i,avatarGradient:e,avatarImage:t,nickname:r,frame:a="none",size:c,statusDot:d,statusBorderColor:g="#111128",textColor:p="#fff"}){const y=u6({avatarColor:i,avatarGradient:e,avatarImage:t}),b=d6(a,c),T=!!b,S=T?"none":a&&a!=="none"?l0(a):"2px solid #334155",V=T?c+6:c,q=()=>{if(!a||a==="none")return null;const L=c,ce=L/2;switch(a){case"creator":return l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",style:{zIndex:5},children:l.jsxs("svg",{width:L,height:L,viewBox:`0 0 ${L} ${L}`,className:"frame-anim-creator-star",children:[l.jsx("polygon",{points:h2(ce,ce,L*.25,L*.1,5),fill:"none",stroke:"#60A5FA",strokeWidth:"1.5",filter:"url(#creatorGlow)"}),l.jsx("polygon",{points:h2(ce,ce,L*.2,L*.08,5),fill:"#3B82F6",opacity:"0.6"}),Array.from({length:8}).map((oe,ue)=>{const me=ue/8*Math.PI*2,Ve=L*.15,je=ce+Math.cos(me)*Ve,D=ce+Math.sin(me)*Ve;return l.jsx("circle",{cx:je,cy:D,r:1.5,fill:"#93C5FD",className:"frame-sand-particle",style:{animationDelay:`${ue*.15}s`}},ue)}),l.jsx("defs",{children:l.jsxs("filter",{id:"creatorGlow",children:[l.jsx("feGaussianBlur",{stdDeviation:"2",result:"blur"}),l.jsxs("feMerge",{children:[l.jsx("feMergeNode",{in:"blur"}),l.jsx("feMergeNode",{in:"SourceGraphic"})]})]})})]})});case"admin":return l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",style:{zIndex:5},children:l.jsxs("svg",{width:L,height:L,viewBox:`0 0 ${L} ${L}`,className:"frame-anim-admin-crown",children:[l.jsxs("g",{transform:`translate(${ce-L*.22}, ${ce-L*.15})`,children:[l.jsx("path",{d:`M0 ${L*.25} L${L*.09} ${L*.08} L${L*.22} ${L*.2} L${L*.33} 0 L${L*.44} ${L*.2} Z`,fill:"#EF4444",stroke:"#F87171",strokeWidth:"1",filter:"url(#crownGlow)"}),l.jsx("circle",{cx:L*.09,cy:L*.12,r:2,fill:"#FCD34D"}),l.jsx("circle",{cx:L*.22,cy:L*.2,r:2.5,fill:"#FCD34D"}),l.jsx("circle",{cx:L*.33,cy:L*.05,r:2,fill:"#FCD34D"})]}),l.jsx("defs",{children:l.jsxs("filter",{id:"crownGlow",children:[l.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"blur"}),l.jsxs("feMerge",{children:[l.jsx("feMergeNode",{in:"blur"}),l.jsx("feMergeNode",{in:"SourceGraphic"})]})]})})]})});case"acquaintance":return l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",style:{zIndex:5},children:l.jsxs("svg",{width:L,height:L,viewBox:"0 0 50 50",className:"frame-anim-handshake-pair",children:[l.jsx("g",{className:"frame-hand-left",children:l.jsx("path",{d:"M8 28 Q10 22 16 24 L20 25 L18 20 Q17 17 20 18 L24 25",stroke:"#F87171",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"})}),l.jsx("g",{className:"frame-hand-right",children:l.jsx("path",{d:"M42 28 Q40 22 34 24 L30 25 L32 20 Q33 17 30 18 L26 25",stroke:"#F87171",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"})}),l.jsx("circle",{cx:"25",cy:"25",r:"3",fill:"none",stroke:"#FCD34D",strokeWidth:"1",className:"frame-clap-burst",opacity:"0"})]})});case"veteran":return l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden rounded-full",style:{zIndex:5},children:l.jsx("svg",{width:L,height:L,viewBox:`0 0 ${L} ${L}`,children:[.2,.4,.6,.8].map((oe,ue)=>l.jsx("path",{d:`M${-L*.1} ${L*oe} Q${L*.3} ${L*(oe-.08)} ${L*.5} ${L*oe} T${L*1.1} ${L*oe}`,stroke:"rgba(255,255,255,0.25)",strokeWidth:"1.5",fill:"none",strokeLinecap:"round",className:"frame-wind-line",style:{animationDelay:`${ue*.4}s`}},ue))})});case"legend":return l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",style:{zIndex:5},children:l.jsxs("svg",{width:L,height:L,viewBox:"0 0 50 50",className:"frame-anim-diamond-gem",children:[l.jsxs("g",{className:"frame-diamond-rotate",children:[l.jsx("polygon",{points:"25,10 33,22 25,38 17,22",fill:"#06B6D4",stroke:"#67E8F9",strokeWidth:"1",filter:"url(#diamondGlow)",opacity:"0.8"}),l.jsx("line",{x1:"17",y1:"22",x2:"33",y2:"22",stroke:"#A5F3FC",strokeWidth:"0.5",opacity:"0.6"}),l.jsx("line",{x1:"25",y1:"10",x2:"22",y2:"22",stroke:"#A5F3FC",strokeWidth:"0.5",opacity:"0.4"}),l.jsx("line",{x1:"25",y1:"10",x2:"28",y2:"22",stroke:"#A5F3FC",strokeWidth:"0.5",opacity:"0.4"}),l.jsx("circle",{cx:"20",cy:"16",r:"1",fill:"#E0F2FE",className:"frame-sparkle",style:{animationDelay:"0s"}}),l.jsx("circle",{cx:"30",cy:"18",r:"0.8",fill:"#E0F2FE",className:"frame-sparkle",style:{animationDelay:"0.5s"}}),l.jsx("circle",{cx:"25",cy:"30",r:"0.8",fill:"#E0F2FE",className:"frame-sparkle",style:{animationDelay:"1s"}})]}),l.jsx("defs",{children:l.jsxs("filter",{id:"diamondGlow",children:[l.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"blur"}),l.jsxs("feMerge",{children:[l.jsx("feMergeNode",{in:"blur"}),l.jsx("feMergeNode",{in:"SourceGraphic"})]})]})})]})});case"immortal":return l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden rounded-full",style:{zIndex:5},children:l.jsxs("svg",{width:L,height:L,viewBox:"0 0 50 50",preserveAspectRatio:"none",children:[l.jsxs("g",{className:"frame-fire-group",children:[l.jsx("path",{d:"M5 50 Q8 38 12 42 Q14 36 17 40 Q19 34 22 38 Q24 32 25 36 Q26 32 28 38 Q31 34 33 40 Q36 36 38 42 Q42 38 45 50 Z",fill:"url(#fireGrad)",opacity:"0.9",className:"frame-flame-1"}),l.jsx("path",{d:"M10 50 Q13 40 16 44 Q18 38 21 42 Q23 36 25 40 Q27 36 29 42 Q32 38 34 44 Q37 40 40 50 Z",fill:"url(#fireGrad2)",opacity:"0.7",className:"frame-flame-2"}),l.jsx("path",{d:"M15 50 Q17 42 20 45 Q22 40 25 43 Q28 40 30 45 Q33 42 35 50 Z",fill:"#FCD34D",opacity:"0.5",className:"frame-flame-3"})]}),l.jsxs("defs",{children:[l.jsxs("linearGradient",{id:"fireGrad",x1:"0",y1:"1",x2:"0",y2:"0",children:[l.jsx("stop",{offset:"0%",stopColor:"#DC2626"}),l.jsx("stop",{offset:"50%",stopColor:"#F97316"}),l.jsx("stop",{offset:"100%",stopColor:"#FBBF24"})]}),l.jsxs("linearGradient",{id:"fireGrad2",x1:"0",y1:"1",x2:"0",y2:"0",children:[l.jsx("stop",{offset:"0%",stopColor:"#EF4444"}),l.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})]})]})});default:return null}},W=l.jsx("div",{className:"rounded-full flex items-center justify-center font-bold overflow-hidden",style:{width:c,height:c,background:y,fontSize:c*.4,color:p,border:T?"none":S},children:t?l.jsx("img",{src:t,alt:"",className:"w-full h-full object-cover rounded-full"}):r[0]?.toUpperCase()});return l.jsxs("div",{className:"relative shrink-0",style:{width:V,height:V},children:[T?l.jsx("div",{className:"rounded-full flex items-center justify-center",style:b,children:W}):W,q(),d&&l.jsx("div",{className:`absolute rounded-full ${d}`,style:{width:Math.max(c*.28,10),height:Math.max(c*.28,10),bottom:-1,right:-1,borderWidth:3,borderStyle:"solid",borderColor:g,zIndex:10}})]})}function h2(i,e,t,r,a){const c=[];for(let d=0;d<a*2;d++){const g=d*Math.PI/a-Math.PI/2,p=d%2===0?t:r;c.push(`${i+Math.cos(g)*p},${e+Math.sin(g)*p}`)}return c.join(" ")}function f6(){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let t=0;t<8;t++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}async function QS(i,e,t,r){try{const a={id:"cat_general",name:"General",order:0},c={id:"ch_general",name:"",type:"text",isPrivate:!1,categoryId:"cat_general"},d={id:"role_owner",name:" ",color:"#f1c40f",type:"owner"},g=await Es(Rt(ge,"servers"),{name:e,avatarImage:t||null,bannerImage:r||null,ownerId:i,members:[i],inviteCode:f6(),roles:[d],memberRoles:{[i]:["role_owner"]},categories:[a],channels:[c],createdAt:wm()}),p=Ct(i);return await gt(Ae(ge,"users",p),{servers:Ks(g.id)}),g.id}catch(a){return console.error("createServer error:",a),null}}function WS(i,e){const t=si(Rt(ge,"servers"),nr("members","array-contains",i));return rr(t,r=>{const a=r.docs.map(c=>({id:c.id,...c.data()}));e(a)},r=>{console.error("onUserServers error:",r),e([])})}async function YS(i,e){try{const t=Ae(ge,"servers",i),r=await zt(t);if(!r.exists())return null;const c=r.data().categories||[],d={id:`cat_${Date.now()}`,name:e,order:c.length};return await gt(t,{categories:[...c,d]}),d}catch(t){return console.error("addCategory error:",t),null}}async function XS(i,e,t,r,a){try{const c=Ae(ge,"servers",i),d=await zt(c);if(!d.exists())return null;const p=d.data().channels||[],y={id:`ch_${Date.now()}`,name:e,type:t,isPrivate:r,categoryId:a};return await gt(c,{channels:[...p,y]}),y}catch(c){return console.error("addChannel error:",c),null}}async function g6(i,e,t,r){try{const a=Ae(ge,"servers",i),c=await zt(a);if(!c.exists())return;const g=c.data().roles||[];g.push({id:`role_${Date.now()}`,name:e,color:t,type:r}),await gt(a,{roles:g})}catch(a){console.error("addRole error:",a)}}async function m6(i,e,t){try{const r=Ae(ge,"servers",i),a=await zt(r);if(!a.exists())return;const d=a.data().memberRoles||{};d[e]||(d[e]=[]),d[e].includes(t)||d[e].push(t),await gt(r,{memberRoles:d})}catch(r){console.error("assignRole error:",r)}}async function Cg(i,e){try{const t=si(Rt(ge,"servers"),nr("inviteCode","==",e)),r=await Mi(t);if(r.empty)return null;const c=r.docs[0].id;await gt(Ae(ge,"servers",c),{members:Ks(i)});const d=Ct(i);return await gt(Ae(ge,"users",d),{servers:Ks(c)}),c}catch(t){return console.error("joinByCode error:",t),null}}async function Rg(i,e,t,r,a,c="text",d,g,p){try{const y=`servers/${i}/channels/${e}/messages`;await Es(Rt(ge,y),{senderId:t,text:r,type:c,gifUrl:d||null,fileUrl:g||null,fileName:p||null,createdAt:wm(),isEdited:!1,...a?.replyToId?a:{}})}catch(y){console.error("sendChannelMessage error:",y)}}function JS(i,e,t){const r=`servers/${i}/channels/${e}/messages`,a=si(Rt(ge,r),jS("createdAt","asc"));return rr(a,c=>{t(c.docs.map(d=>({id:d.id,...d.data()})))},c=>{console.error("onChannelMessages error:",c),t([])})}async function ZS(i,e,t){try{const r=Ae(ge,"servers",i),a=await zt(r);if(!a.exists())return;const d=(a.data().roles||[]).map(g=>g.id===e?{...g,name:t}:g);await gt(r,{roles:d})}catch(r){console.error("renameRole error:",r)}}async function eE(i,e,t){try{const r=Ae(ge,"servers",i),a=await zt(r);if(!a.exists())return;const d=a.data().memberRoles||{};d[e]&&(d[e]=d[e].filter(g=>g!==t),d[e].length===0&&delete d[e]),await gt(r,{memberRoles:d})}catch(r){console.error("removeFromRole error:",r)}}async function tE(i,e,t,r){try{const a=Ae(ge,"servers",i),c=await zt(a);if(!c.exists())return;const g=c.data().mutes||{};g[e]={reason:t,mutedAt:Date.now(),duration:r},await gt(a,{mutes:g})}catch(a){console.error("muteUser error:",a)}}async function nE(i,e,t){try{const r=Ae(ge,"servers",i),a=await zt(r);if(!a.exists())return;const d=a.data().bans||{};d[e]={reason:t,bannedAt:Date.now()},await gt(r,{bans:d})}catch(r){console.error("banFromServer error:",r)}}async function rE(i,e){try{const t=Ae(ge,"servers",i),r=await zt(t);if(!r.exists())return;const c=(r.data().members||[]).filter(p=>p!==e);await gt(t,{members:c});const d=Ct(e),g=await zt(Ae(ge,"users",d));if(g.exists()){const y=(g.data().servers||[]).filter(b=>b!==i);await gt(Ae(ge,"users",d),{servers:y})}}catch(t){console.error("leaveServerAfterBan error:",t)}}async function iE(i,e){try{const t=Ae(ge,"servers",i),r=await zt(t);if(!r.exists())return;const c=r.data().bans||{};delete c[e],await gt(t,{bans:c})}catch(t){console.error("unbanFromServer error:",t)}}function jg(i,e){const r=(i.mutes||{})[e];if(!r)return{muted:!1,reason:"",remaining:0,duration:0};const a=Date.now()-r.mutedAt,c=r.duration-a;return c<=0?{muted:!1,reason:"",remaining:0,duration:0}:{muted:!0,reason:r.reason,remaining:c,duration:r.duration}}function c0(i,e){const r=(i.bans||{})[e];return r?{banned:!0,reason:r.reason}:{banned:!1,reason:""}}const f2=Object.freeze(Object.defineProperty({__proto__:null,addCategory:YS,addChannel:XS,addRole:g6,assignRole:m6,banFromServer:nE,createServer:QS,isUserBanned:c0,isUserMuted:jg,joinByCode:Cg,leaveServerAfterBan:rE,muteUser:tE,onChannelMessages:JS,onUserServers:WS,removeFromRole:eE,renameRole:ZS,sendChannelMessage:Rg,unbanFromServer:iE},Symbol.toStringTag,{value:"Module"})),sE={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]};function p6(i,e,t){const r=si(Rt(ge,"calls"),nr("receiverEmail","==",i),nr("status","==","calling"));return rr(r,a=>{if(!a.empty){const c=a.docs[0];if(c){const d=c.data();e({id:c.id,...d});return}}t()})}async function y6(i,e,t,r,a,c,d,g){const p=t==="video"?{audio:!0,video:!0}:{audio:!0,video:!1},y=await navigator.mediaDevices.getUserMedia(p),b=new RTCPeerConnection(sE);if(y.getTracks().forEach(C=>b.addTrack(C,y)),t==="audio")try{b.addTransceiver("video",{direction:"sendrecv"})}catch(C){console.warn("addTransceiver(video) failed:",C)}let T,S=null;b.ontrack=C=>{if(C.streams[0]){r(C.streams[0]);try{S=new AudioContext;const R=S.createAnalyser();S.createMediaStreamSource(C.streams[0]).connect(R),R.fftSize=512;const B=new Uint8Array(R.frequencyBinCount);T=setInterval(()=>{R.getByteFrequencyData(B);const U=B.reduce((N,rt)=>N+rt,0)/B.length;c(U>15)},100)}catch(R){console.error("Remote audio analysis failed:",R)}}};const V=new AudioContext,q=V.createAnalyser();V.createMediaStreamSource(y).connect(q),q.fftSize=512;const L=new Uint8Array(q.frequencyBinCount);let ce=setInterval(()=>{q.getByteFrequencyData(L);const C=L.reduce((R,M)=>R+M,0)/L.length;a(C>15)},100);const oe=Ae(Rt(ge,"calls")),ue=oe.id;b.onicecandidate=async C=>{C.candidate&&await Es(Rt(ge,"calls",ue,"callerCandidates"),C.candidate.toJSON())};const me=await b.createOffer();await b.setLocalDescription(me),await Bc(oe,{callerId:i.email,callerEmail:i.email,callerNickname:i.nickname,callerAvatar:i.avatarImage||null,callerAvatarColor:i.avatarColor||"#5865f2",receiverEmail:e,type:t,status:"calling",offer:{type:me.type,sdp:me.sdp},createdAt:wm()});const Ve=rr(Ae(ge,"calls",ue),async C=>{const R=C.data();R&&(d(R.status),R.answer&&!b.remoteDescription&&await b.setRemoteDescription(new RTCSessionDescription(R.answer)),(R.status==="ended"||R.status==="declined")&&g())}),je=rr(Rt(ge,"calls",ue,"receiverCandidates"),C=>{C.docChanges().forEach(async R=>{R.type==="added"&&await b.addIceCandidate(new RTCIceCandidate(R.doc.data()))})});return{pc:b,localStream:y,callId:ue,cleanup:()=>{clearInterval(ce),T&&clearInterval(T),S&&S.close(),Ve(),je(),y.getTracks().forEach(C=>C.stop()),b.close(),V.close()}}}async function x6(i,e,t,r,a,c,d){const g=d==="video"?{audio:!0,video:!0}:{audio:!0,video:!1},p=await navigator.mediaDevices.getUserMedia(g),y=new RTCPeerConnection(sE);if(p.getTracks().forEach(C=>y.addTrack(C,p)),d==="audio")try{y.addTransceiver("video",{direction:"sendrecv"})}catch(C){console.warn("addTransceiver(video) failed:",C)}let b,T=null;y.ontrack=C=>{if(C.streams[0]){e(C.streams[0]);try{T=new AudioContext;const R=T.createAnalyser();T.createMediaStreamSource(C.streams[0]).connect(R),R.fftSize=512;const B=new Uint8Array(R.frequencyBinCount);b=setInterval(()=>{R.getByteFrequencyData(B);const U=B.reduce((N,rt)=>N+rt,0)/B.length;r(U>15)},100)}catch(R){console.error("Remote audio analysis failed:",R)}}};const S=new AudioContext,V=S.createAnalyser();S.createMediaStreamSource(p).connect(V),V.fftSize=512;const W=new Uint8Array(V.frequencyBinCount);let L=setInterval(()=>{V.getByteFrequencyData(W);const C=W.reduce((R,M)=>R+M,0)/W.length;t(C>15)},100);y.onicecandidate=async C=>{C.candidate&&await Es(Rt(ge,"calls",i,"receiverCandidates"),C.candidate.toJSON())};const oe=(await zt(Ae(ge,"calls",i))).data();await y.setRemoteDescription(new RTCSessionDescription(oe.offer)),(await Mi(Rt(ge,"calls",i,"callerCandidates"))).forEach(async C=>{await y.addIceCandidate(new RTCIceCandidate(C.data()))});const me=rr(Rt(ge,"calls",i,"callerCandidates"),C=>{C.docChanges().forEach(async R=>{if(R.type==="added")try{await y.addIceCandidate(new RTCIceCandidate(R.doc.data()))}catch{}})}),Ve=await y.createAnswer();await y.setLocalDescription(Ve),await gt(Ae(ge,"calls",i),{answer:{type:Ve.type,sdp:Ve.sdp},status:"active"});const je=rr(Ae(ge,"calls",i),C=>{const R=C.data();R&&(a(R.status),(R?.status==="ended"||R?.status==="declined")&&c())});return{pc:y,localStream:p,cleanup:()=>{clearInterval(L),b&&clearInterval(b),T&&T.close(),je(),me(),p.getTracks().forEach(C=>C.stop()),y.close(),S.close()}}}async function v6(i){try{await gt(Ae(ge,"calls",i),{status:"declined",receiverDeclined:!0})}catch{}}async function b6(i){try{await gt(Ae(ge,"calls",i),{status:"ended"})}catch{}}async function g2(i,e){const t=e.getVideoTracks()[0];if(!t)return;const a=i.getTransceivers().find(c=>c?.receiver?.track?.kind==="video"||c?.sender?.track?.kind==="video")?.sender||i.getSenders().find(c=>c.track?.kind==="video");if(a){await a.replaceTrack(t);return}try{await i.addTransceiver("video",{direction:"sendrecv"}).sender.replaceTrack(t)}catch{i.addTrack(t,e)}}function lc({u:i,size:e}){return l.jsx(h6,{avatarColor:i?.avatarColor||"#5865F2",avatarGradient:i?.avatarGradient||null,avatarImage:i?.avatarImage||null,nickname:i?.nickname||i?.displayName||"?",frame:i?.frame||"none",size:e})}const _6=()=>l.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Ty=({on:i})=>i?l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("rect",{x:"9",y:"1",width:"6",height:"11",rx:"3"}),l.jsx("path",{d:"M19 10v1a7 7 0 01-14 0v-1"}),l.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"})]}):l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("rect",{x:"9",y:"1",width:"6",height:"11",rx:"3"}),l.jsx("path",{d:"M19 10v1a7 7 0 01-14 0v-1"}),l.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),l.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23",stroke:"#ed4245",strokeWidth:"2.5"})]}),Sy=({on:i})=>i?l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),l.jsx("path",{d:"M15.54 8.46a5 5 0 010 7.07"}),l.jsx("path",{d:"M19.07 4.93a10 10 0 010 14.14"})]}):l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),l.jsx("line",{x1:"23",y1:"9",x2:"17",y2:"15"}),l.jsx("line",{x1:"17",y1:"9",x2:"23",y2:"15"})]}),Ey=()=>l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 01-2.83 2.83l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"})]}),fg=()=>l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 00-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 010 7.75"})]}),ch=()=>l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:l.jsx("path",{d:"M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"})}),gg=()=>l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("polygon",{points:"23 7 16 12 23 17 23 7"}),l.jsx("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2"})]}),mg=()=>l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"}),l.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),l.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),l.jsx("line",{x1:"23",y1:"11",x2:"17",y2:"11"})]}),w6=()=>l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),m2=()=>l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),T6=()=>l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),l.jsx("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),l.jsx("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]}),uh=()=>l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"}),l.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"})]}),dh=()=>l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})]}),p2=()=>l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"4.93",y1:"4.93",x2:"19.07",y2:"19.07"})]}),S6=()=>l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2"}),l.jsx("path",{d:"M7 11V7a5 5 0 019.9-1"})]}),Ay=()=>l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"})]}),y2=()=>l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),l.jsx("line",{x1:"4",y1:"22",x2:"4",y2:"15"})]}),Fs=()=>l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),_u=()=>l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:l.jsx("polyline",{points:"20 6 9 17 4 12"})}),pg=()=>l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2"}),l.jsx("circle",{cx:"12",cy:"5",r:"2"}),l.jsx("line",{x1:"12",y1:"7",x2:"12",y2:"11"}),l.jsx("circle",{cx:"8",cy:"16",r:"1",fill:"currentColor"}),l.jsx("circle",{cx:"16",cy:"16",r:"1",fill:"currentColor"})]}),x2=()=>l.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),v2=()=>l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),b2="lBvvZq5LezAW3GXS9fUdyv4feS5PBvO9",Ii=[{key:"online",color:"#3ba55c",text:" ",textEn:"Online"},{key:"idle",color:"#faa61a",text:"",textEn:"Idle"},{key:"dnd",color:"#ed4245",text:" ",textEn:"Do not disturb"},{key:"invisible",color:"#747f8d",text:"",textEn:"Invisible"}];function E6(i){return i==="light"?{bg:"#e8e8e8",panelBg:"rgba(255,255,255,0.95)",panelBg2:"rgba(240,240,240,0.95)",cardBg:"#ffffff",cardBg2:"#f0f0f0",border:"rgba(0,0,0,0.1)",text:"#111111",textMuted:"#666666",textLight:"#999999",accent:"#5865F2",hover:"rgba(0,0,0,0.05)",inputBg:"#f0f0f0",msgBgMe:"#5865F2",msgBgOther:"#e0e0e0",msgTextMe:"#fff",msgTextOther:"#111",headerBg:"rgba(255,255,255,0.9)"}:i==="dark"?{bg:"#111111",panelBg:"rgba(30,30,30,0.95)",panelBg2:"rgba(25,25,25,0.95)",cardBg:"#1e1e1e",cardBg2:"#2a2a2a",border:"rgba(255,255,255,0.08)",text:"#e0e0e0",textMuted:"#888888",textLight:"#666666",accent:"#5865F2",hover:"rgba(255,255,255,0.05)",inputBg:"#2a2a2a",msgBgMe:"#5865F2",msgBgOther:"#2a2a2a",msgTextMe:"#fff",msgTextOther:"#e0e0e0",headerBg:"rgba(30,30,30,0.9)"}:{bg:"linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%)",panelBg:"rgba(30,30,60,0.6)",panelBg2:"rgba(20,20,50,0.7)",cardBg:"rgba(40,40,80,0.4)",cardBg2:"rgba(50,50,100,0.3)",border:"rgba(255,255,255,0.08)",text:"#e0e0ff",textMuted:"#8888bb",textLight:"#6666aa",accent:"#5865F2",hover:"rgba(88,101,242,0.1)",inputBg:"rgba(0,0,0,0.3)",msgBgMe:"#5865F2",msgBgOther:"rgba(40,40,80,0.6)",msgTextMe:"#fff",msgTextOther:"#e0e0ff",headerBg:"rgba(20,20,50,0.8)"}}function so(){return l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#5865F2",className:"inline ml-1",children:l.jsx("polygon",{points:"12,2 15,9 22,9 16.5,14 18.5,21 12,17 5.5,21 7.5,14 2,9 9,9"})})}function ao(){return l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#ED4245",className:"inline ml-1",children:[l.jsx("path",{d:"M12 2L15 8H21L16 12L18 19L12 15L6 19L8 12L3 8H9L12 2Z"}),l.jsx("circle",{cx:"12",cy:"10",r:"2",fill:"#fff"})]})}function yg(){return l.jsx("div",{className:"flex flex-col items-center gap-4",children:l.jsxs("svg",{width:"140",height:"140",viewBox:"0 0 80 80",fill:"none",className:"animate-sadFloat",children:[l.jsx("circle",{cx:"40",cy:"28",r:"18",stroke:"currentColor",strokeWidth:"2.5",fill:"none",className:"animate-sadTilt"}),l.jsx("circle",{cx:"33",cy:"25",r:"2.5",fill:"currentColor",className:"animate-sadBlink"}),l.jsx("circle",{cx:"47",cy:"25",r:"2.5",fill:"currentColor",className:"animate-sadBlink"}),l.jsx("path",{d:"M33 36 Q40 31 47 36",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none"}),l.jsx("line",{x1:"40",y1:"46",x2:"40",y2:"52",stroke:"currentColor",strokeWidth:"2.5"}),l.jsx("path",{d:"M15 68 Q27 52 40 52 Q53 52 65 68",stroke:"currentColor",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"})]})})}function A6({user:i,onLogout:e,onUserUpdate:t}){const r=E6(i.theme||"jolt"),a=i.language||"ru",c=x=>fe(x,a==="en"?"en":"ru"),[d,g]=k.useState(!1),[p,y]=k.useState("dm"),[b,T]=k.useState("all"),[S,V]=k.useState(""),[q,W]=k.useState(""),[L,ce]=k.useState(""),[oe,ue]=k.useState([]),[me,Ve]=k.useState([]),[je,D]=k.useState([]),[C,R]=k.useState([]),[M,B]=k.useState(null),[U,N]=k.useState([]),[rt,xt]=k.useState([]),[Z,ye]=k.useState(""),[Te,Qe]=k.useState(i.status||"online"),[Ne,O]=k.useState(!1),[te,ne]=k.useState(!1),[he,Se]=k.useState(!0),[ke,He]=k.useState(!0),[vt,Ze]=k.useState(i.aboutMe||""),[vr,br]=k.useState(!1),[_r,bn]=k.useState(!1),[ut,cn]=k.useState(""),[Ot,Nr]=k.useState(!1),[ai,Qt]=k.useState(""),[Wt,Dr]=k.useState([]),[Bi,zi]=k.useState(!1),[Jt,un]=k.useState(!1),[ar,Sn]=k.useState(!1),[St,Mr]=k.useState([]),[or,oi]=k.useState(!1),[xe,we]=k.useState(""),[Re,_n]=k.useState(!1),[Zt,Ta]=k.useState(""),[ns,vo]=k.useState(!1),[Xn,Is]=k.useState(new Set),[tn,li]=k.useState(new Set),[Vr,Nn]=k.useState(!1),[Br,Cs]=k.useState(null),[zr,Oi]=k.useState(""),[Vl,rs]=k.useState(!1),[Li,is]=k.useState(null),[Ee,$e]=k.useState(""),[Et,Lt]=k.useState(i),[Fe,Pt]=k.useState("text"),[nn,Zr]=k.useState(!1),[Sa,zc]=k.useState(0),[ss,Ea]=k.useState(null),En=k.useRef(null),Rs=k.useRef(null),lr=k.useRef(null),wr=k.useRef(null),Pn=k.useRef([]),as=x=>`${String(Math.floor(x/60)).padStart(2,"0")}:${String(x%60).padStart(2,"0")}`,dn=()=>{Rs.current&&(window.clearInterval(Rs.current),Rs.current=null)},Aa=()=>{wr.current&&(wr.current.getTracks().forEach(x=>x.stop()),wr.current=null)},Bl=async()=>{if(!Pn.current.length){Aa(),Zr(!1);return}const x=new Blob(Pn.current,{type:"audio/webm"}),A=URL.createObjectURL(x);Ea({blob:x,url:A,duration:Sa}),Pn.current=[]},os=async()=>{if(!nn)try{const x=await navigator.mediaDevices.getUserMedia({audio:!0});wr.current=x;const A=new MediaRecorder(x);lr.current=A,Pn.current=[],A.ondataavailable=j=>{j.data.size>0&&Pn.current.push(j.data)},A.onstop=()=>{dn(),Zr(!1),Bl()},A.start(),Zr(!0),zc(0),dn(),Rs.current=window.setInterval(()=>{zc(j=>j+1)},1e3)}catch(x){console.error("Voice recording failed",x)}},ls=()=>{lr.current&&lr.current.state!=="inactive"&&(lr.current.stop(),Aa())},zl=()=>{dn(),lr.current&&lr.current.state!=="inactive"&&lr.current.stop(),Aa(),Zr(!1),Pn.current=[],Ea(null)},bo=async()=>{if(!ss)return;const x=await new Promise((A,j)=>{const Y=new FileReader;Y.onload=()=>A(Y.result),Y.onerror=j,Y.readAsDataURL(ss.blob)});M&&await io(M,i.email,"  ","audio",void 0,x,"voice.webm"),Ue&&mt&&await Rg(Ue,mt,i.email,"  ",void 0,"audio",void 0,x,"voice.webm"),Ea(null)},[Ol,Ia]=k.useState(!1),[ci,cr]=k.useState([]),[hn,An]=k.useState(!1),[ei,_o]=k.useState([]),[At,cs]=k.useState(!1),[Tr,us]=k.useState([]),[it,Ca]=k.useState(null),[ui,js]=k.useState(null),[Or,Ra]=k.useState(""),[Sr,ur]=k.useState(null),[ks,Qs]=k.useState(null),[Un,Ns]=k.useState(null),[di,Pi]=k.useState([]),[Jn,hi]=k.useState(null),Dn=x=>hi(x),jt=()=>hi(null),[dr,ds]=k.useState([]),[Ue,fi]=k.useState(null),[Ds,Lr]=k.useState(!1),[Mn,Ws]=k.useState(""),[bt,Ui]=k.useState(null),[Ys,Xs]=k.useState(null),[wo,Fi]=k.useState(!1),[hr,gi]=k.useState(""),[mt,Er]=k.useState(null),[qi,Ms]=k.useState([]),[ti,hs]=k.useState(""),[ja,mi]=k.useState(!1),[To,Js]=k.useState(!1),[pi,ka]=k.useState([]),[Oc,fs]=k.useState(!1),[gs,So]=k.useState(""),[Na,Da]=k.useState(null),[Vs,yi]=k.useState(""),[Zs,Ma]=k.useState("text"),[ea,Va]=k.useState(!1),[ta,Zn]=k.useState(!1),[ms,Ll]=k.useState("general"),[Pr,h]=k.useState(""),[v,w]=k.useState("#5865F2"),[I,H]=k.useState("member"),[J,ve]=k.useState(""),[We,fn]=k.useState(""),[nt,Ut]=k.useState([]),[Ur,Gi]=k.useState(!1),[ni,xi]=k.useState(!1),[Fr,Ba]=k.useState(null),[Eo,Lc]=k.useState(!1),[Ao,nf]=k.useState(""),[Pc,dd]=k.useState(6e4),[Pl,na]=k.useState(!1),[Io,Ul]=k.useState(""),[Fl,hd]=k.useState(null),[Co,Uc]=k.useState(null),[ql,Fc]=k.useState(null),[Gl,fd]=k.useState(null),[Em,gd]=k.useState(null),[rf,sf]=k.useState(""),[In,Bs]=k.useState(null),[md,zs]=k.useState(null),[Ro,Hl]=k.useState(!1),[Ar,pd]=k.useState(null),[Ft,jo]=k.useState(null),[ko,$l]=k.useState(0),[Am,No]=k.useState(null),[ps,yd]=k.useState(!0),[za,Oa]=k.useState(!0),[vi,La]=k.useState(!1),[qr,Kl]=k.useState(!1),[gn,xd]=k.useState(null),[Ql,qc]=k.useState(null),[vd,bi]=k.useState(!1),[Gc,ri]=k.useState(!1),[Hi,ra]=k.useState("calling"),[Do,Hc]=k.useState(240),[Mo,Pa]=k.useState({x:20,y:20}),[Wl,Os]=k.useState(null),[$i,Vo]=k.useState(1),fr=k.useRef(null),$c=k.useRef(null),ys=k.useRef(null),Kc=k.useRef(null),Ua=k.useRef(null),Ls=k.useRef(null),Bo=k.useRef(null),Gr=k.useRef(null),zo=k.useRef(!1),Qc=k.useRef(!1),Hr=k.useRef({x:0,y:0}),ia=k.useRef(null),Oo=k.useRef(null),Yl=k.useRef(null),sa=k.useRef(null),$r=k.useRef([]),Yt=C.find(x=>x.id===M),mn=Yt?.participants?.find(x=>x!==i.email&&x!=="reportbot"),Ie=oe.find(x=>x.email===mn);[...rt,...U];const Kr=Yt?.isBot,Fn=Yt?.isGroup,af=Fn&&Yt?.createdBy===i.email,xs=(Ql?.getVideoTracks?.()||[]).length>0,Wc=Math.max(160,Do-170);let Fa=Math.min(780,Math.max(320,320+(Do-240)*1.8)),rn=Fa*9/16;rn>Wc&&(rn=Wc,Fa=rn*16/9),Fa=Math.round(Fa),rn=Math.round(rn);const kt=k.useCallback((x,A,j)=>{if(x?.customNames){const Y=`${i.email}_${A}`;if(x.customNames[Y])return x.customNames[Y]}return j?.displayName||j?.nickname||A},[i.email]);k.useEffect(()=>{(()=>{Te!=="dnd"&&(Qe("online"),jr(i.email,{status:"online"}),t({...i,status:"online"}))})();let A;const j=()=>{clearTimeout(A),Te==="idle"&&(Qe("online"),jr(i.email,{status:"online"})),A=setTimeout(()=>{Te!=="dnd"&&Te!=="invisible"&&(Qe("idle"),jr(i.email,{status:"idle"}))},600*1e3)};j();const Y=["mousemove","keydown","click","touchstart","scroll"];Y.forEach(_t=>window.addEventListener(_t,j));const ae=()=>{jr(i.email,{status:"invisible"})};window.addEventListener("beforeunload",ae);const qe=()=>{document.hidden?A=setTimeout(()=>{Te!=="dnd"&&jr(i.email,{status:"invisible"})},3e4):(clearTimeout(A),Te!=="dnd"&&(Qe("online"),jr(i.email,{status:"online"})),j())};return document.addEventListener("visibilitychange",qe),()=>{clearTimeout(A),Y.forEach(_t=>window.removeEventListener(_t,j)),window.removeEventListener("beforeunload",ae),document.removeEventListener("visibilitychange",qe),jr(i.email,{status:"invisible"})}},[i.email]),k.useEffect(()=>{qk(),(tr(Et)||Et.isAdmin)&&o0(i.email);const x=Gk(i.email,ue),A=Uk(i.email,Ve),j=Fk(i.email,D),Y=Wk(i.email,R);return()=>{x(),A(),j(),Y()}},[i.email,i.isAdmin]),k.useEffect(()=>{if(!M)return;const x=Yk(M,N);return()=>x()},[M]),k.useEffect(()=>{ia.current?.scrollIntoView({behavior:"smooth"})},[U]),k.useEffect(()=>{const x=WS(i.email,ds);return()=>x()},[i.email]),k.useEffect(()=>{if(!Ue){Ut([]);return}const x=dr.find(j=>j.id===Ue);if(!x)return;(async()=>{const j=[];for(const Y of x.members){const ae=await zt(Ae(ge,"users",Ct(Y)));ae.exists()?j.push({email:Y,...ae.data()}):j.push({email:Y,nickname:Y})}Ut(j)})()},[Ue,dr]),k.useEffect(()=>{if(!Ue||!mt){Ms([]);return}const x=JS(Ue,mt,Ms);return()=>x()},[Ue,mt]),k.useEffect(()=>{if(!Ue)return;const x=rr(Ae(ge,"servers",Ue),A=>{if(!A.exists())return;const j={id:A.id,...A.data()},Y=c0(j,i.email);if(Y.banned){fd({reason:Y.reason,serverId:Ue});return}const ae=jg(j,i.email);ae.muted&&Fc({reason:ae.reason,remaining:ae.remaining,duration:ae.duration})});return()=>x()},[Ue,i.email]),k.useEffect(()=>{if(!Ot)return;const x=setTimeout(()=>{Lo(ai||"trending")},500);return()=>clearTimeout(x)},[ai,Ot]),k.useEffect(()=>{const x=p6(i.email,A=>{jo(A),fr.current&&fr.current.id===A.id&&(fr.current=A)},()=>jo(null));return()=>x()},[i.email]),k.useEffect(()=>{if(!Ar?.id)return;const x=Ar.id,A=rr(Ae(ge,"calls",x),j=>{if(!j.exists())return;j.data().receiverDeclined&&Hi!=="active"&&(ra("calling"),Hl(!0))});return()=>A()},[Ar?.id,Hi]),k.useEffect(()=>{const x=j=>{zo.current&&Hc(Math.max(120,Math.min(j.clientY-60,window.innerHeight-200))),Qc.current&&Pa({x:j.clientX-Hr.current.x,y:j.clientY-Hr.current.y})},A=()=>{zo.current=!1,Qc.current=!1};return window.addEventListener("mousemove",x),window.addEventListener("mouseup",A),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",A)}},[]),k.useEffect(()=>{const x=Ct(i.email),A=rr(Ae(ge,"users",x),j=>{if(j.exists()){const Y=j.data(),ae={...i,...Y};Lt(ae),(Y.isAdmin!==i.isAdmin||Y.banned!==i.banned||Y.frozen!==i.frozen)&&t(ae),Y.isAdmin&&!i.isAdmin&&o0(i.email)}});return()=>A()},[i.email]),k.useEffect(()=>{mn&&u2(i.email,mn).then(vo)},[mn,i.email,oe]),k.useEffect(()=>{if(!Fn||!Yt?.participants){_o([]);return}(async()=>{const A=[];for(const j of Yt.participants){if(j==="reportbot")continue;const Y=await zt(Ae(ge,"users",Ct(j)));Y.exists()?A.push({email:j,...Y.data()}):A.push({email:j,nickname:j})}_o(A)})()},[Fn,Yt?.participants?.length,M]),k.useEffect(()=>{(async()=>{const A=new Set;for(const j of C){if(j.isBot)continue;const Y=j.participants?.find(ae=>ae!==i.email&&ae!=="reportbot");Y&&await u2(i.email,Y)&&A.add(Y)}li(A)})()},[C,i.email,oe]);const st=async x=>{if(!(!mn||!Ie))try{ra("calling");const{pc:A,localStream:j,callId:Y,cleanup:ae}=await y6({email:i.email,nickname:i.nickname,avatarImage:i.avatarImage||void 0,avatarColor:i.avatarColor||void 0},mn,x,qe=>qc(qe),qe=>bi(qe),qe=>ri(qe),qe=>ra(qe),()=>Xl());Gr.current=A,xd(j),Bo.current=ae,Hl(!0),pd({id:Y,partner:Ie,type:x}),x==="video"&&La(!0),$l(0)}catch(A){console.error("Call initiation failed:",A),Dn({title:"",message:" .    /.",type:"alert",onConfirm:jt})}},aa=async x=>{if(Ft)try{ra("active");const{pc:A,localStream:j,cleanup:Y}=await x6(Ft.id,ae=>qc(ae),ae=>bi(ae),ae=>ri(ae),ae=>ra(ae),()=>Xl(),x);Gr.current=A,xd(j),Bo.current=Y,Hl(!0),pd({id:Ft.id,partner:{email:Ft.callerEmail,nickname:Ft.callerNickname,avatarImage:Ft.callerAvatar,avatarColor:Ft.callerAvatarColor},type:Ft.type}),jo(null),x==="video"&&La(!0),$l(0)}catch(A){console.error("Failed to accept call:",A)}},_i=async()=>{Ft&&(await v6(Ft.id),fr.current=Ft,jo(null))},Xl=async()=>{Ar&&await b6(Ar.id),Bo.current&&Bo.current(),gn&&gn.getTracks().forEach(x=>x.stop()),xd(null),qc(null),Gr.current=null,Hl(!1),ra("ended"),pd(null),La(!1),Kl(!1),clearInterval(window._callTimerId)},oa=()=>{gn&&(gn.getAudioTracks().forEach(x=>x.enabled=!ps),yd(!ps))},of=async()=>{if(gn)if(vi){const x=gn.getVideoTracks()[0];if(x&&(x.stop(),gn.removeTrack(x),Gr.current)){const A=Gr.current.getSenders().find(j=>j.track?.kind==="video");if(A)try{await A.replaceTrack(null)}catch{}}La(!1)}else try{const x=await navigator.mediaDevices.getUserMedia({video:!0}),A=x.getVideoTracks()[0],j=gn.getVideoTracks()[0];j&&(j.stop(),gn.removeTrack(j)),gn.addTrack(A),Gr.current&&await g2(Gr.current,x),La(!0),Kl(!1)}catch(x){console.error("Failed to get camera",x)}},lf=async()=>{if(gn)if(qr){const x=gn.getVideoTracks()[0];if(x&&(x.stop(),gn.removeTrack(x)),Gr.current){const A=Gr.current.getSenders().find(j=>j.track?.kind==="video");if(A)try{await A.replaceTrack(null)}catch{}}Kl(!1)}else try{const x=await navigator.mediaDevices.getDisplayMedia({video:!0}),A=x.getVideoTracks()[0],j=gn.getVideoTracks()[0];j&&(j.stop(),gn.removeTrack(j)),gn.addTrack(A),Gr.current&&await g2(Gr.current,x),Kl(!0),La(!1),A.onended=async()=>{Kl(!1);try{gn.removeTrack(A)}catch{}if(Gr.current){const Y=Gr.current.getSenders().find(ae=>ae.track?.kind==="video");if(Y)try{await Y.replaceTrack(null)}catch{}}}}catch(x){console.error("Screen sharing failed:",x)}};k.useEffect(()=>{let x;return Ro&&Hi==="active"&&(x=setInterval(()=>$l(A=>A+1),1e3),window._callTimerId=x),()=>{x&&clearInterval(x)}},[Ro,Hi]),k.useEffect(()=>{Kc.current&&gn&&(Kc.current.srcObject=gn),Ua.current&&Ql&&(Ua.current.srcObject=Ql,Ua.current.muted=!za),Ls.current&&gn&&(Ls.current.srcObject=gn)},[gn,Ql,za,p,M,qr]);const Lo=async x=>{zi(!0);try{const A=x==="trending"?`https://api.giphy.com/v1/gifs/trending?api_key=${b2}&limit=20&rating=g`:`https://api.giphy.com/v1/gifs/search?api_key=${b2}&q=${encodeURIComponent(x)}&limit=20&rating=g`,Y=await(await fetch(A)).json();Dr(Y.data||[])}catch{Dr([])}zi(!1)},qa=async x=>{M&&(await io(M,i.email,"GIF","gif",x),Nr(!1))},bd=x=>{const A=x.target.files?.[0];if(!A)return;const j=URL.createObjectURL(A),Y=A.type.startsWith("image/")?"image":A.type.startsWith("video/")?"video":"file";Cs({file:A,url:j,type:Y}),Oi(""),Nn(!1)},Po=async()=>{if(!M||!Br){console.error("handleSendFile: no chat or no file",{selectedChat:M,filePreview:!!Br});return}const x=M,A=Br.file,j=A.name,Y=zr.trim()||j,ae=A.type.startsWith("image/");Cs(null),Oi("");try{let qe;if(ae?qe=await new Promise((_t,sn)=>{const pe=new Image;pe.onload=()=>{const qt=document.createElement("canvas"),Gn=600;let Oe=pe.width,_s=pe.height;Oe>Gn&&(_s=_s*Gn/Oe,Oe=Gn),qt.width=Oe,qt.height=_s,qt.getContext("2d").drawImage(pe,0,0,Oe,_s),_t(qt.toDataURL("image/jpeg",.7))},pe.onerror=sn,pe.src=URL.createObjectURL(A)}):qe=await new Promise((_t,sn)=>{const pe=new FileReader;pe.onload=()=>_t(pe.result),pe.onerror=sn,pe.readAsDataURL(A)}),qe.length>9e5){Dn({title:"",message:a==="ru"?"     ( ~700KB)":"File too large to send (max ~700KB)",type:"alert",onConfirm:jt});return}await io(x,i.email,Y,"file",void 0,qe,j),console.log(" File sent:",j)}catch(qe){console.error("handleSendFile error:",qe),Dn({title:"",message:a==="ru"?"  ":"File send error",type:"alert",onConfirm:jt})}},_d=async()=>{try{const x=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}),A=new MediaRecorder(x,{mimeType:"video/webm"});$r.current=[],A.ondataavailable=j=>{j.data.size>0&&$r.current.push(j.data)},A.onstop=()=>{const j=new Blob($r.current,{type:"video/webm"}),Y=URL.createObjectURL(j);is({blob:j,url:Y}),$e(""),x.getTracks().forEach(ae=>ae.stop())},sa.current=A,A.start(),rs(!0),Nn(!1)}catch(x){console.error("Screen recording error:",x)}},Ga=()=>{sa.current&&sa.current.state==="recording"&&(sa.current.stop(),rs(!1))},vs=async()=>{if(!M||!Li){console.error("handleSendRecording: no chat or no video",{selectedChat:M,recordedVideo:!!Li});return}const x=M,A=Li.blob,j=Ee.trim()||(a==="ru"?" ":"Screen recording");is(null),$e("");try{const Y=await new Promise((ae,qe)=>{const _t=new FileReader;_t.onload=()=>ae(_t.result),_t.onerror=qe,_t.readAsDataURL(A)});if(Y.length>9e5){await io(x,i.email,` ${j} (    )`,"text");return}await io(x,i.email,j,"video",void 0,Y,"recording.webm"),console.log(" Recording sent")}catch(Y){console.error("handleSendRecording error:",Y),Dn({title:"",message:a==="ru"?"  ":"Recording send error",type:"alert",onConfirm:jt})}},la=async()=>{M&&await io(M,i.email,"")},bs=async()=>{if(!S.trim())return;W(""),ce("");const x=await _y(i.email,S.trim());x.success?(ce(a==="ru"?" !":"Request sent!"),V("")):W(x.error||"")},wd=async x=>{const A=x;Qe(A),await jr(i.email,{status:A}),t({...i,status:A})},Jl=x=>{const A=wy(i.email,x);dg(A,i.email),B(A),y("dm"),bn(!1),br(!1)},Ha=async x=>{await Xk(x,i.email),M===x&&B(null)},Zl=x=>{Dn({title:a==="ru"?"  ":"Remove friend",message:a==="ru"?"        ?":"Are you sure you want to remove this friend?",type:"confirm",confirmColor:"#ed4245",confirmText:a==="ru"?"":"Remove",cancelText:a==="ru"?"":"Cancel",onConfirm:async()=>{await Hk(i.email,x),bn(!1),B(null),jt()}})},ca=x=>{Dn({title:a==="ru"?"":"Block user",message:a==="ru"?"      ?":"Are you sure you want to block this user?",type:"confirm",confirmColor:"#ed4245",confirmText:a==="ru"?"":"Block",cancelText:a==="ru"?"":"Cancel",onConfirm:async()=>{await $k(i.email,x),bn(!1),jt()}})},qn=async x=>{await Kk(i.email,x),bn(!1)},Yc=x=>{navigator.clipboard.writeText(`${x.nickname}#${x.tag}`),bn(!1)},cf=()=>{Sn(!0),Mr([]),bn(!1)},Im=async()=>{if(!Ie||!xe.trim())return;const x=U.filter(A=>St.includes(A.id)).map(A=>({...A,displayContent:A.type==="gif"&&A.gifUrl?`[GIF: ${A.gifUrl}]`:A.type==="image"&&A.fileUrl?`[IMAGE: ${A.fileUrl}]`:A.text||""}));await Qk(i.email,i.nickname,i.tag,Ie.email,Ie.nickname,Ie.tag,xe,St,x),Sn(!1),Mr([]),oi(!1),we(""),Dn({title:"",message:a==="ru"?"  !":"Report sent successfully!",type:"alert",onConfirm:jt})},Cm=async()=>{!M||!mn||(await Jk(M,i.email,mn,Zt),_n(!1))},uf=async()=>{if(!(!ui||!Or.trim()))try{let x;if(ui.isSrv&&ui.srvId&&ui.chId)x=Ae(ge,"servers",ui.srvId,"channels",ui.chId,"messages",ui.id);else if(M)x=Ae(ge,"conversations",M,"messages",ui.id);else return;await gt(x,{text:Or.trim(),isEdited:!0}),js(null),Ra("")}catch(x){console.error("Edit error:",x)}},Cn=x=>{M&&Bs(x)},Td=async x=>{if(M){try{const{arrayUnion:A}=await by(async()=>{const{arrayUnion:j}=await Promise.resolve().then(()=>$5);return{arrayUnion:j}},void 0,import.meta.url);await gt(Ae(ge,"conversations",M,"messages",x),{deletedFor:A(i.email)})}catch(A){console.error("Delete for me error:",A)}Bs(null)}},ec=async x=>{if(M){try{await ba(Ae(ge,"conversations",M,"messages",x))}catch(A){console.error("Delete for all error:",A)}Bs(null)}},tc=x=>{ur(x)},Sd=x=>{const A=document.getElementById(`msg-${x}`);A&&(A.scrollIntoView({behavior:"smooth",block:"center"}),A.style.background="rgba(88,101,242,0.15)",setTimeout(()=>{A.style.background="transparent"},1500))},$a=async()=>{if(!Z.trim()||!M)return;const x=Sr?{replyToId:Sr.id,replyToText:Sr.text?.slice(0,100),replyToSender:Sr.senderId}:{};await io(M,i.email,Z.trim(),"text",void 0,void 0,void 0,x),ye(""),ur(null)},Uo=async()=>{if(!Un||di.length===0)return;const x=Un.senderId;let A="Unknown";if(x===i.email)A=`${i.displayName||i.nickname}#${i.tag}`;else if(Ie&&Ie.email===x)A=`${Ie.nickname}#${Ie.tag}`;else{const ae=ei.find(qe=>qe.email===x);ae&&(A=`${ae.nickname}#${ae.tag}`)}const j={forwardedFrom:A,forwardedFromEmail:x,forwardedText:Un.text?.slice(0,200)||""},Y=Un.text||(Un.type==="gif"?"GIF":" ");for(const ae of di){const qe=wy(i.email,ae);await dg(qe,i.email),await io(qe,i.email,Y,Un.type||"text",Un.gifUrl,Un.fileUrl,Un.fileName,void 0,j)}Ns(null),Pi([])},Ed=C.filter(x=>x.closedBy?.includes(i.email)?!1:x.isBot?i.isAdmin||tr(i):!0).filter(x=>{if(!ut.trim())return!0;const A=x.participants?.find(ae=>ae!==i.email&&ae!=="reportbot"),j=oe.find(ae=>ae.email===A);return kt(x,A,j)?.toLowerCase().includes(ut.toLowerCase())}),wn=(x,A=36)=>{const j=x?.avatarGradient?`linear-gradient(135deg, ${x.avatarGradient[0]}, ${x.avatarGradient[1]})`:x?.avatarColor||"#5865F2",Y=(x?.nickname||x?.displayName||"?")[0].toUpperCase(),ae=x?.avatarGradient?ry(x.avatarGradient[0])&&ry(x.avatarGradient[1]):ry(x?.avatarColor||"#5865F2");return l.jsx("div",{style:{width:A,height:A,minWidth:A,borderRadius:"50%",background:x?.avatarImage?`url(${x.avatarImage}) center/cover`:j,display:"flex",alignItems:"center",justifyContent:"center",color:ae?"#000":"#fff",fontSize:A*.45,fontWeight:700},children:!x?.avatarImage&&Y})},Vn=x=>{const A=Ii.find(j=>j.key===x);return l.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:A?.color||"#747f8d",border:`2px solid ${r.cardBg}`,position:"absolute",bottom:0,right:0}})},ua={:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","","",""]},Ad=Object.keys(ua),Xc=["","","","","","",""],[Id,Fo]=k.useState(""),Cd=x=>{if(!x)return null;const A=x.createdAt?.seconds?new Date(x.createdAt.seconds*1e3):x.createdAt?new Date(x.createdAt):new Date;return l.jsxs("div",{style:{width:288,background:r.panelBg,borderLeft:`1px solid ${r.border}`,backdropFilter:"blur(20px)",display:"flex",flexDirection:"column",overflow:"auto",flexShrink:0},children:[l.jsx("div",{style:{height:80,background:x.banner?`url(${x.banner}) center/cover`:"linear-gradient(135deg, #5865F2, #7C3AED)",flexShrink:0}}),l.jsx("div",{style:{padding:"0 16px",marginTop:-30},children:l.jsxs("div",{style:{position:"relative",width:60,height:60},children:[l.jsx(lc,{u:x,size:60}),l.jsx("div",{style:{position:"absolute",bottom:2,right:2},children:Vn(x.status||"offline")})]})}),l.jsxs("div",{style:{padding:"12px 16px",flex:1},children:[l.jsxs("div",{style:{color:r.text,fontWeight:700,fontSize:16},children:[x.displayName||x.nickname,tr(x)&&l.jsx(so,{}),x.isAdmin&&l.jsx(ao,{})]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:13},children:[x.nickname,"#",x.tag]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:12,marginTop:4,display:"flex",alignItems:"center",gap:4},children:[l.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:Ii.find(j=>j.key===x.status)?.color||"#747f8d"}}),a==="ru"?Ii.find(j=>j.key===x.status)?.text||"":Ii.find(j=>j.key===x.status)?.textEn||"Offline"]}),l.jsxs("div",{style:{borderTop:`1px solid ${r.border}`,margin:"12px 0",paddingTop:12},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:4},children:a==="ru"?" ":"Member since"}),l.jsx("div",{style:{color:r.text,fontSize:13},children:A.toLocaleDateString(a==="ru"?"ru-RU":"en-US",{year:"numeric",month:"long",day:"numeric"})})]}),x.aboutMe&&l.jsxs("div",{style:{borderTop:`1px solid ${r.border}`,margin:"12px 0",paddingTop:12},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:4},children:a==="ru"?" ":"About me"}),l.jsx("div",{style:{color:r.text,fontSize:13,whiteSpace:"pre-wrap"},children:x.aboutMe})]}),x.gameWidget&&l.jsxs("div",{style:{borderTop:`1px solid ${r.border}`,margin:"12px 0",paddingTop:12},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:4},children:a==="ru"?" ":"Playing"}),l.jsxs("div",{style:{color:r.text,fontSize:13,display:"flex",alignItems:"center",gap:4},children:[l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2"}),l.jsx("line",{x1:"6",y1:"12",x2:"10",y2:"12"}),l.jsx("line",{x1:"8",y1:"10",x2:"8",y2:"14"}),l.jsx("circle",{cx:"15",cy:"10",r:"1",fill:"currentColor"}),l.jsx("circle",{cx:"18",cy:"13",r:"1",fill:"currentColor"})]}),x.gameWidget]})]})]})]})},nc=x=>{Is(A=>{const j=new Set(A);return j.has(x)?j.delete(x):j.add(x),j})},Jc=()=>{if(!_r||!Ie)return null;const x=Ie.createdAt?.seconds?new Date(Ie.createdAt.seconds*1e3):Ie.createdAt?new Date(Ie.createdAt):new Date;return ns?l.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>bn(!1),children:l.jsxs("div",{onClick:A=>A.stopPropagation(),style:{width:400,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:24,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:16},children:[l.jsx(lc,{u:Ie,size:64}),l.jsxs("div",{style:{color:r.text,fontWeight:700,fontSize:16,marginTop:8},children:[Ie.nickname,"#",Ie.tag]}),l.jsx("div",{style:{color:"#ed4245",fontSize:13,marginTop:4},children:a==="ru"?" ":"User is blocked"})]}),l.jsxs("button",{onClick:()=>qn(Ie.email),style:{width:"100%",padding:"10px",borderRadius:8,border:"none",background:"#3ba55c",color:"#fff",cursor:"pointer",fontSize:14,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[l.jsx(S6,{})," ",a==="ru"?"":"Unblock"]})]})}):l.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>{bn(!1),_n(!1)},children:l.jsxs("div",{onClick:A=>A.stopPropagation(),style:{width:620,height:420,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",backdropFilter:"blur(20px)",display:"flex"},children:[l.jsxs("div",{style:{width:"50%",borderRight:`1px solid ${r.border}`,display:"flex",flexDirection:"column",overflow:"auto"},children:[l.jsx("div",{style:{height:90,background:Ie.bannerImage?`url(${Ie.bannerImage}) center/cover`:"linear-gradient(135deg, #5865F2, #7C3AED)",flexShrink:0}}),l.jsx("div",{style:{padding:"0 16px",marginTop:-30},children:l.jsxs("div",{style:{position:"relative",width:60,height:60},children:[l.jsx(lc,{u:Ie,size:60}),l.jsx("div",{style:{position:"absolute",bottom:2,right:2},children:Vn(Ie.status||"offline")})]})}),l.jsxs("div",{style:{padding:"10px 16px",flex:1},children:[l.jsxs("div",{style:{color:r.text,fontWeight:700,fontSize:16},children:[Ie.displayName||Ie.nickname,tr(Ie)&&l.jsx(so,{}),Ie.isAdmin&&l.jsx(ao,{})]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:13},children:[Ie.nickname,"#",Ie.tag]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:12,marginTop:6,display:"flex",alignItems:"center",gap:4},children:[l.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:Ii.find(A=>A.key===Ie.status)?.color||"#747f8d"}}),a==="ru"?Ii.find(A=>A.key===Ie.status)?.text||"":Ii.find(A=>A.key===Ie.status)?.textEn||"Offline"]}),l.jsxs("div",{style:{borderTop:`1px solid ${r.border}`,marginTop:12,paddingTop:10},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:4},children:a==="ru"?" ":"Member since"}),l.jsx("div",{style:{color:r.text,fontSize:13},children:x.toLocaleDateString(a==="ru"?"ru-RU":"en-US",{year:"numeric",month:"long",day:"numeric"})})]}),Ie.aboutMe&&l.jsxs("div",{style:{borderTop:`1px solid ${r.border}`,marginTop:10,paddingTop:10},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:4},children:a==="ru"?" ":"About me"}),l.jsx("div",{style:{color:r.text,fontSize:13,whiteSpace:"pre-wrap"},children:Ie.aboutMe})]}),Ie.gameWidget&&l.jsxs("div",{style:{borderTop:`1px solid ${r.border}`,marginTop:10,paddingTop:10},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:4},children:a==="ru"?" ":"Playing"}),l.jsxs("div",{style:{color:r.text,fontSize:13},children:[" ",Ie.gameWidget]})]})]})]}),l.jsxs("div",{style:{width:"50%",display:"flex",flexDirection:"column",padding:12},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:8,padding:"0 8px"},children:a==="ru"?"":"Actions"}),l.jsxs("div",{style:{flex:1,overflow:"auto"},children:[Re?l.jsxs("div",{style:{display:"flex",gap:4,padding:"4px 6px",marginBottom:4},children:[l.jsx("input",{value:Zt,onChange:A=>Ta(A.target.value),placeholder:a==="ru"?" ...":"New name...",style:{flex:1,background:r.inputBg,border:`1px solid ${r.border}`,borderRadius:6,padding:"8px 10px",color:r.text,fontSize:13,outline:"none"},autoFocus:!0}),l.jsx("button",{onClick:Cm,style:{background:"#3ba55c",color:"#fff",border:"none",borderRadius:6,padding:"8px 10px",fontSize:12,cursor:"pointer",display:"flex",alignItems:"center"},children:l.jsx(_u,{})}),l.jsx("button",{onClick:()=>_n(!1),style:{background:"#ed4245",color:"#fff",border:"none",borderRadius:6,padding:"8px 10px",fontSize:12,cursor:"pointer",display:"flex",alignItems:"center"},children:l.jsx(Fs,{})})]}):l.jsx(wu,{icon:l.jsx(uh,{}),label:a==="ru"?" ":"Change name",color:r.text,onClick:()=>{_n(!0),Ta("")},tc:r}),l.jsx(wu,{icon:l.jsx(x2,{}),label:a==="ru"?" ":"Close DM",color:r.text,onClick:()=>{Ha(M),bn(!1)},tc:r}),l.jsx("div",{style:{height:1,background:r.border,margin:"6px 0"}}),l.jsx(wu,{icon:l.jsx(dh,{}),label:a==="ru"?"  ":"Remove friend",color:"#ed4245",onClick:()=>Zl(Ie.email),tc:r}),l.jsx(wu,{icon:l.jsx(p2,{}),label:a==="ru"?"":"Block",color:"#ed4245",onClick:()=>ca(Ie.email),tc:r}),l.jsx("div",{style:{height:1,background:r.border,margin:"6px 0"}}),l.jsx(wu,{icon:l.jsx(Ay,{}),label:a==="ru"?" ":"Copy username",color:r.text,onClick:()=>Yc(Ie),tc:r}),l.jsx(wu,{icon:l.jsx(y2,{}),label:a==="ru"?"":"Report",color:"#ed4245",onClick:cf,tc:r})]}),l.jsx("button",{onClick:()=>bn(!1),style:{width:"100%",padding:"8px",borderRadius:8,border:`1px solid ${r.border}`,background:r.cardBg2,color:r.textMuted,cursor:"pointer",fontSize:13,marginTop:8},children:a==="ru"?"":"Close"})]})]})})},df=r.bg.includes("gradient")?{background:r.bg,minHeight:"100vh"}:{backgroundColor:r.bg,minHeight:"100vh"};return l.jsxs("div",{style:{...df,display:"flex",height:"100vh",overflow:"hidden"},children:[l.jsxs("div",{style:{width:72,background:r.panelBg2,borderRight:`1px solid ${r.border}`,display:"flex",flexDirection:"column",alignItems:"center",padding:"12px 0",backdropFilter:"blur(20px)",flexShrink:0},children:[l.jsx("button",{onClick:()=>{B(null),y("dm"),fi(null),Er(null)},style:{width:48,height:48,borderRadius:16,background:Ue?"rgba(88,101,242,0.3)":"linear-gradient(135deg, #5865F2, #7C3AED)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",marginBottom:8,transition:"all 0.2s"},onMouseEnter:x=>x.currentTarget.style.borderRadius="12px",onMouseLeave:x=>x.currentTarget.style.borderRadius="16px",children:l.jsx(_6,{})}),l.jsx("div",{style:{width:32,height:2,background:r.border,borderRadius:1,marginBottom:8}}),l.jsx("div",{style:{flex:1,overflow:"auto",display:"flex",flexDirection:"column",alignItems:"center",gap:6},children:dr.map(x=>l.jsx("button",{onClick:()=>{const A=c0(x,i.email);if(A.banned){fd({reason:A.reason,serverId:x.id});return}const j=jg(x,i.email);j.muted&&Fc({reason:j.reason,remaining:j.remaining,duration:j.duration}),fi(x.id),B(null),Er(x.channels?.[0]?.id||"ch_general")},title:x.name,style:{width:48,height:48,borderRadius:Ue===x.id?12:24,background:x.avatarImage?`url(${x.avatarImage}) center/cover`:"#2f3136",border:Ue===x.id?"2px solid #5865F2":"2px solid transparent",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:18,fontWeight:700,transition:"all 0.2s",flexShrink:0},onMouseEnter:A=>A.currentTarget.style.borderRadius="12px",onMouseLeave:A=>{Ue!==x.id&&(A.currentTarget.style.borderRadius="24px")},children:!x.avatarImage&&(x.name?.[0]?.toUpperCase()||"S")},x.id))}),l.jsx("button",{onClick:()=>ne(!0),style:{width:48,height:48,borderRadius:16,background:r.cardBg,border:`1px solid ${r.border}`,cursor:"pointer",color:"#3ba55c",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:x=>{x.currentTarget.style.borderRadius="12px",x.currentTarget.style.background="#3ba55c",x.currentTarget.style.color="#fff"},onMouseLeave:x=>{x.currentTarget.style.borderRadius="16px",x.currentTarget.style.background=r.cardBg,x.currentTarget.style.color="#3ba55c"},children:l.jsx(v2,{})})]}),Ue&&(()=>{const x=dr.find(j=>j.id===Ue);if(!x)return null;const A=x.ownerId===i.email;return l.jsxs("div",{style:{width:240,background:r.panelBg,borderRight:`1px solid ${r.border}`,display:"flex",flexDirection:"column",backdropFilter:"blur(20px)",flexShrink:0},children:[l.jsxs("div",{onClick:()=>mi(!ja),style:{padding:"12px 16px",borderBottom:`1px solid ${r.border}`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"background 0.15s",background:x.bannerImage?`linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url(${x.bannerImage}) center/cover`:void 0,backgroundSize:x.bannerImage?"cover":void 0},onMouseEnter:j=>{x.bannerImage||(j.currentTarget.style.background=r.hover)},onMouseLeave:j=>{x.bannerImage||(j.currentTarget.style.background="transparent")},children:[l.jsx("span",{style:{color:r.text,fontWeight:700,fontSize:15,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:x.name}),l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:r.textMuted,strokeWidth:"2.5",strokeLinecap:"round",children:l.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),ja&&l.jsxs("div",{style:{background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:8,margin:"4px 8px",overflow:"hidden",boxShadow:"0 4px 16px rgba(0,0,0,0.3)"},children:[A&&l.jsxs("button",{onClick:async()=>{mi(!1);const j=[];for(const Y of x.members){const ae=await zt(Ae(ge,"users",Ct(Y)));ae.exists()?j.push({email:Y,...ae.data()}):j.push({email:Y,nickname:Y})}Ut(j),Zn(!0),Ll("general")},style:{width:"100%",padding:"8px 12px",background:"none",border:"none",color:r.text,cursor:"pointer",fontSize:13,textAlign:"left",display:"flex",alignItems:"center",gap:8},onMouseEnter:j=>j.currentTarget.style.background=r.hover,onMouseLeave:j=>j.currentTarget.style.background="none",children:[l.jsx(Ey,{})," ",a==="ru"?" ":"Server settings"]}),l.jsxs("button",{onClick:()=>{mi(!1),Js(!0),ka([])},style:{width:"100%",padding:"8px 12px",background:"none",border:"none",color:r.text,cursor:"pointer",fontSize:13,textAlign:"left",display:"flex",alignItems:"center",gap:8},onMouseEnter:j=>j.currentTarget.style.background=r.hover,onMouseLeave:j=>j.currentTarget.style.background="none",children:[l.jsx(mg,{})," ",a==="ru"?" ":"Invite friend"]})]}),A&&l.jsxs("button",{onClick:()=>{fs(!0),So("")},style:{margin:"8px 8px 4px",padding:"6px 10px",borderRadius:6,border:`1px dashed ${r.border}`,background:"transparent",color:r.textMuted,cursor:"pointer",fontSize:12,display:"flex",alignItems:"center",gap:6,transition:"all 0.15s"},onMouseEnter:j=>{j.currentTarget.style.borderColor="#5865F2",j.currentTarget.style.color="#5865F2"},onMouseLeave:j=>{j.currentTarget.style.borderColor=r.border,j.currentTarget.style.color=r.textMuted},children:[l.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),a==="ru"?" ":"Create category"]}),l.jsx("div",{style:{flex:1,overflow:"auto",padding:"4px 0"},children:(x.categories||[]).map(j=>l.jsxs("div",{children:[l.jsxs("div",{className:"group",style:{display:"flex",alignItems:"center",padding:"6px 12px",cursor:"pointer"},onMouseEnter:Y=>Y.currentTarget.style.background=r.hover,onMouseLeave:Y=>Y.currentTarget.style.background="transparent",children:[l.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:r.textMuted,strokeWidth:"2.5",strokeLinecap:"round",children:l.jsx("polyline",{points:"6 9 12 15 18 9"})}),l.jsx("span",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginLeft:4,flex:1},children:j.name}),A&&l.jsx("button",{onClick:Y=>{Y.stopPropagation(),Da(j.id),yi(""),Ma("text"),Va(!1)},style:{opacity:0,background:"none",border:"none",color:r.textMuted,cursor:"pointer",padding:2,display:"flex",transition:"opacity 0.15s"},className:"group-hover:!opacity-100",onMouseEnter:Y=>{Y.currentTarget.style.opacity="1",Y.currentTarget.style.color="#5865F2"},children:l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),(x.channels||[]).filter(Y=>{if(Y.categoryId!==j.id)return!1;if(!Y.isPrivate||A)return!0;const ae=x.memberRoles?.[i.email]||[];return(x.roles||[]).filter(_t=>ae.includes(_t.id)).some(_t=>_t.type==="moderator")}).map(Y=>l.jsxs("button",{onClick:()=>{Er(Y.id),B(null)},style:{width:"100%",padding:"6px 12px 6px 24px",background:mt===Y.id?r.hover:"transparent",border:"none",color:mt===Y.id?r.text:r.textMuted,cursor:"pointer",fontSize:14,textAlign:"left",display:"flex",alignItems:"center",gap:6,transition:"all 0.15s",borderRadius:4,margin:"0 4px"},onMouseEnter:ae=>{mt!==Y.id&&(ae.currentTarget.style.background=r.hover),ae.currentTarget.style.color=r.text},onMouseLeave:ae=>{mt!==Y.id&&(ae.currentTarget.style.background="transparent"),ae.currentTarget.style.color=mt===Y.id?r.text:r.textMuted},children:[Y.type==="voice"?"":"#"," ",Y.name," ",Y.isPrivate&&""]},Y.id))]},j.id))}),l.jsx("div",{style:{padding:8,background:r.panelBg2,borderTop:`1px solid ${r.border}`},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsxs("div",{style:{position:"relative",cursor:"pointer",flexShrink:0},onClick:()=>O(!Ne),children:[l.jsx(lc,{u:i,size:32}),l.jsx("div",{style:{position:"absolute",bottom:-1,right:-1},children:Vn(Te)})]}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{style:{color:r.text,fontSize:13,fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i.displayName||i.nickname}),l.jsxs("div",{style:{color:r.textMuted,fontSize:11},children:["#",i.tag]})]}),l.jsxs("div",{style:{display:"flex",gap:2},children:[l.jsx("button",{onClick:()=>Se(!he),style:{width:28,height:28,borderRadius:6,border:"none",background:he?"transparent":"rgba(237,66,69,0.2)",color:he?r.textMuted:"#ed4245",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Ty,{on:he})}),l.jsx("button",{onClick:()=>He(!ke),style:{width:28,height:28,borderRadius:6,border:"none",background:ke?"transparent":"rgba(237,66,69,0.2)",color:ke?r.textMuted:"#ed4245",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Sy,{on:ke})}),l.jsx("button",{onClick:()=>g(!0),style:{width:28,height:28,borderRadius:6,border:"none",background:"transparent",color:r.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Ey,{})})]})]})})]})})(),!Ue&&l.jsxs("div",{style:{width:240,background:r.panelBg,borderRight:`1px solid ${r.border}`,display:"flex",flexDirection:"column",backdropFilter:"blur(20px)",flexShrink:0},children:[l.jsx("div",{style:{padding:10},children:l.jsx("input",{value:ut,onChange:x=>cn(x.target.value),placeholder:c("search.placeholder"),style:{width:"100%",background:r.inputBg,border:"none",borderRadius:6,padding:"8px 10px",color:r.text,fontSize:13,outline:"none"}})}),l.jsxs("button",{onClick:()=>{y("friends"),B(null)},style:{margin:"0 8px 4px",padding:"8px 10px",borderRadius:6,border:"none",background:p==="friends"?r.hover:"none",color:r.text,fontSize:14,cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:8},onMouseEnter:x=>{p!=="friends"&&(x.currentTarget.style.background=r.hover)},onMouseLeave:x=>{p!=="friends"&&(x.currentTarget.style.background="none")},children:[l.jsx(fg,{})," ",c("friends"),me.length>0&&l.jsx("span",{style:{background:"#ed4245",color:"#fff",borderRadius:"50%",width:18,height:18,fontSize:11,display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"auto"},children:me.length})]}),l.jsx("div",{style:{padding:"6px 16px 4px",color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase"},children:c("dm.title")}),l.jsx("div",{style:{flex:1,overflow:"auto",padding:"0 8px"},children:Ed.length===0?l.jsx("div",{style:{color:r.textMuted,fontSize:13,padding:16,textAlign:"center"},children:c("dm.empty")}):Ed.map(x=>{const A=x.isBot,j=x.isGroup,Y=j?null:x.participants?.find(sn=>sn!==i.email&&sn!=="reportbot"),ae=A||j?null:oe.find(sn=>sn.email===Y),qe=A?"Report Bot":j?x.groupName||"Group":kt(x,Y,ae),_t=M===x.id;return l.jsxs("div",{onClick:()=>{B(x.id),y("dm"),br(!1),bn(!1),Sn(!1),An(!1)},className:"group",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",borderRadius:8,cursor:"pointer",background:_t?r.hover:"transparent",marginBottom:2,transition:"background 0.15s"},onMouseEnter:sn=>{_t||(sn.currentTarget.style.background=r.hover)},onMouseLeave:sn=>{_t||(sn.currentTarget.style.background="transparent")},children:[A?l.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:"linear-gradient(135deg, #ed4245, #ff6b6b)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,color:"#fff"},children:l.jsx(pg,{})}):j?l.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:"linear-gradient(135deg, #5865F2, #7C3AED)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,color:"#fff",fontSize:14,fontWeight:700},children:(x.groupName||"G")[0]}):l.jsxs("div",{style:{position:"relative",flexShrink:0},children:[wn(ae,36),ae&&l.jsx("div",{style:{position:"absolute",bottom:-1,right:-1},children:Vn(ae.status||"offline")})]}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{style:{color:r.text,fontSize:14,fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:qe}),l.jsx("div",{style:{color:r.textMuted,fontSize:12,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:x.lastMessage||""})]}),!A&&!j&&Y&&(()=>{const sn=tn.has(Y);return l.jsxs("div",{style:{opacity:0,display:"flex",alignItems:"center",gap:2,transition:"opacity 0.15s"},className:"group-hover:!opacity-100",onMouseEnter:pe=>pe.currentTarget.style.opacity="1",onMouseLeave:pe=>pe.currentTarget.style.opacity="0",children:[sn&&l.jsx("button",{onClick:pe=>{pe.stopPropagation(),qn(Y)},style:{background:"none",border:"none",color:r.textMuted,cursor:"pointer",padding:2,display:"flex",alignItems:"center",transition:"color 0.15s"},onMouseEnter:pe=>pe.currentTarget.style.color="#3ba55c",onMouseLeave:pe=>pe.currentTarget.style.color=r.textMuted,children:l.jsx(_u,{})}),l.jsx("button",{onClick:pe=>{pe.stopPropagation(),Ha(x.id)},style:{background:"none",border:"none",color:r.textMuted,cursor:"pointer",padding:2,display:"flex",alignItems:"center",transition:"color 0.15s"},onMouseEnter:pe=>pe.currentTarget.style.color="#ed4245",onMouseLeave:pe=>pe.currentTarget.style.color=r.textMuted,children:l.jsx(x2,{})})]})})()]},x.id)})}),l.jsx("div",{style:{padding:8,background:r.panelBg2,borderTop:`1px solid ${r.border}`},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsxs("div",{style:{position:"relative",cursor:"pointer",flexShrink:0},onClick:()=>O(!Ne),children:[l.jsx(lc,{u:i,size:32}),l.jsx("div",{style:{position:"absolute",bottom:-1,right:-1},children:Vn(Te)})]}),l.jsxs("div",{style:{flex:1,minWidth:0,cursor:"pointer"},onClick:()=>O(!Ne),children:[l.jsxs("div",{style:{color:r.text,fontSize:13,fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[i.displayName||i.nickname,tr(i)&&l.jsx(so,{}),i.isAdmin&&l.jsx(ao,{})]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:11},children:["#",i.tag]})]}),l.jsxs("div",{style:{display:"flex",gap:2},children:[l.jsx("button",{onClick:()=>Se(!he),style:{width:28,height:28,borderRadius:6,border:"none",background:he?"transparent":"rgba(237,66,69,0.2)",color:he?r.textMuted:"#ed4245",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Ty,{on:he})}),l.jsx("button",{onClick:()=>He(!ke),style:{width:28,height:28,borderRadius:6,border:"none",background:ke?"transparent":"rgba(237,66,69,0.2)",color:ke?r.textMuted:"#ed4245",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Sy,{on:ke})}),l.jsx("button",{onClick:()=>g(!0),style:{width:28,height:28,borderRadius:6,border:"none",background:"transparent",color:r.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Ey,{})})]})]})}),Ne&&l.jsx("div",{style:{position:"fixed",inset:0,zIndex:90},onClick:()=>O(!1),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{position:"absolute",bottom:64,left:72,width:280,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,overflow:"hidden",boxShadow:"0 10px 40px rgba(0,0,0,0.4)",backdropFilter:"blur(20px)"},children:[l.jsx("div",{style:{height:70,background:i.banner?`url(${i.banner}) center/cover`:"linear-gradient(135deg, #5865F2, #7C3AED)"}}),l.jsx("div",{style:{padding:"0 14px",marginTop:-24},children:l.jsxs("div",{style:{position:"relative",width:48,height:48},children:[l.jsx(lc,{u:i,size:48}),l.jsx("div",{style:{position:"absolute",bottom:1,right:1},children:Vn(Te)})]})}),l.jsxs("div",{style:{padding:"8px 14px 14px"},children:[l.jsxs("div",{style:{color:r.text,fontWeight:700},children:[i.displayName||i.nickname,tr(i)&&l.jsx(so,{}),i.isAdmin&&l.jsx(ao,{})]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:12},children:[i.nickname,"#",i.tag]}),l.jsxs("div",{style:{margin:"10px 0",borderTop:`1px solid ${r.border}`,paddingTop:10},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:6},children:a==="ru"?"":"Status"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:4},children:Ii.map(x=>l.jsxs("button",{onClick:()=>wd(x.key),style:{padding:"6px 8px",borderRadius:6,border:Te===x.key?"1px solid #5865F2":`1px solid ${r.border}`,background:Te===x.key?"rgba(88,101,242,0.15)":"transparent",color:r.text,cursor:"pointer",fontSize:12,textAlign:"left",display:"flex",alignItems:"center",gap:4},children:[l.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:x.color}}),a==="ru"?x.text:x.textEn]},x.key))})]}),l.jsxs("div",{style:{borderTop:`1px solid ${r.border}`,paddingTop:10},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:4},children:a==="ru"?" ":"About me"}),l.jsx("textarea",{value:vt,onChange:x=>Ze(x.target.value.slice(0,200)),onBlur:()=>{jr(i.email,{aboutMe:vt}),t({...i,aboutMe:vt})},style:{width:"100%",background:r.inputBg,border:`1px solid ${r.border}`,borderRadius:6,padding:"6px 8px",color:r.text,fontSize:12,resize:"none",height:50,outline:"none"}})]}),l.jsx("button",{onClick:()=>{O(!1),e()},style:{width:"100%",marginTop:10,padding:"8px",borderRadius:6,border:"none",background:"rgba(237,66,69,0.15)",color:"#ed4245",cursor:"pointer",fontSize:13,fontWeight:600},children:c("logout")})]})]})})]}),l.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[p==="friends"&&!M&&l.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[l.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${r.border}`,display:"flex",alignItems:"center",gap:8,background:r.headerBg,backdropFilter:"blur(10px)"},children:[l.jsxs("span",{style:{color:r.text,fontWeight:700,fontSize:16,display:"flex",alignItems:"center",gap:6},children:[l.jsx(fg,{})," ",c("friends")]}),l.jsx("div",{style:{display:"flex",gap:4,marginLeft:16},children:["all","online","pending","requests","add"].map(x=>l.jsxs("button",{onClick:()=>T(x),style:{padding:"4px 12px",borderRadius:6,border:"none",background:b===x?"rgba(88,101,242,0.2)":"transparent",color:b===x?"#5865F2":r.textMuted,cursor:"pointer",fontSize:13,fontWeight:600,display:"flex",alignItems:"center",gap:4},children:[x==="all"?a==="ru"?"":"All":x==="online"?a==="ru"?" ":"Online":x==="pending"?a==="ru"?"":"Pending":x==="requests"?a==="ru"?"":"Requests":a==="ru"?"":"Add",x==="requests"&&me.length>0&&l.jsx("span",{style:{background:"#ed4245",color:"#fff",borderRadius:"50%",width:16,height:16,fontSize:10,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:me.length})]},x))})]}),l.jsxs("div",{style:{flex:1,overflow:"auto",padding:16},children:[b==="add"&&l.jsxs("div",{children:[l.jsx("div",{style:{color:r.text,fontWeight:700,fontSize:15,marginBottom:8},children:a==="ru"?" ":"Add friend"}),l.jsx("div",{style:{color:r.textMuted,fontSize:13,marginBottom:12},children:a==="ru"?"   (#)":"Enter username (Nickname#Tag)"}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{value:S,onChange:x=>V(x.target.value),onKeyDown:x=>x.key==="Enter"&&bs(),placeholder:"User#123456",style:{flex:1,background:r.inputBg,border:`1px solid ${r.border}`,borderRadius:8,padding:"10px 14px",color:r.text,fontSize:14,outline:"none"}}),l.jsx("button",{onClick:bs,style:{padding:"10px 24px",borderRadius:8,border:"none",background:"#5865F2",color:"#fff",fontSize:14,fontWeight:600,cursor:"pointer"},children:a==="ru"?"":"Send"})]}),q&&l.jsx("div",{style:{color:"#ed4245",fontSize:13,marginTop:8},children:q}),L&&l.jsx("div",{style:{color:"#3ba55c",fontSize:13,marginTop:8},children:L})]}),b==="all"&&(oe.length===0?l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:r.textMuted},children:[l.jsx(yg,{}),l.jsx("div",{style:{marginTop:16,fontSize:15},children:a==="ru"?"  ":"No friends yet"})]}):oe.map(x=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"10px 12px",borderRadius:8,marginBottom:4,borderBottom:`1px solid ${r.border}`},children:[l.jsxs("div",{style:{position:"relative"},children:[wn(x,40),l.jsx("div",{style:{position:"absolute",bottom:-1,right:-1},children:Vn(x.status||"offline")})]}),l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{color:r.text,fontWeight:600,fontSize:14},children:[x.displayName||x.nickname,tr(x)&&l.jsx(so,{}),x.isAdmin&&l.jsx(ao,{})]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:12},children:[x.nickname,"#",x.tag]})]}),l.jsx("button",{onClick:()=>Jl(x.email),style:{padding:"6px 12px",borderRadius:6,border:"none",background:"rgba(88,101,242,0.15)",color:"#5865F2",cursor:"pointer",fontSize:12,fontWeight:600},children:a==="ru"?"":"Message"}),l.jsx("button",{onClick:()=>Zl(x.email),style:{padding:"6px 12px",borderRadius:6,border:"none",background:"rgba(237,66,69,0.1)",color:"#ed4245",cursor:"pointer",fontSize:12},children:a==="ru"?"":"Remove"})]},x.email))),b==="online"&&(oe.filter(x=>x.status==="online").length===0?l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:r.textMuted},children:[l.jsx(yg,{}),l.jsx("div",{style:{marginTop:16,fontSize:15},children:a==="ru"?"   ":"Nobody online"})]}):oe.filter(x=>x.status==="online").map(x=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"10px 12px",borderRadius:8,marginBottom:4,borderBottom:`1px solid ${r.border}`},children:[l.jsxs("div",{style:{position:"relative"},children:[wn(x,40),l.jsx("div",{style:{position:"absolute",bottom:-1,right:-1},children:Vn(x.status)})]}),l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{color:r.text,fontWeight:600},children:x.displayName||x.nickname}),l.jsxs("div",{style:{color:r.textMuted,fontSize:12},children:[x.nickname,"#",x.tag]})]}),l.jsx("button",{onClick:()=>Jl(x.email),style:{padding:"6px 12px",borderRadius:6,border:"none",background:"rgba(88,101,242,0.15)",color:"#5865F2",cursor:"pointer",fontSize:12},children:a==="ru"?"":"Message"})]},x.email))),b==="pending"&&(je.length===0?l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:r.textMuted},children:[l.jsx(yg,{}),l.jsx("div",{style:{marginTop:16,fontSize:15},children:a==="ru"?"  ":"No pending requests"})]}):je.map(x=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"10px 12px",borderRadius:8,marginBottom:4,borderBottom:`1px solid ${r.border}`},children:[wn({nickname:x.toNickname,avatarColor:x.toAvatarColor,avatarGradient:x.toAvatarGradient,avatarImage:x.toAvatarImage},40),l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{color:r.text,fontWeight:600},children:[x.toNickname,"#",x.toTag]}),l.jsx("div",{style:{color:r.textMuted,fontSize:12},children:a==="ru"?" ":"Outgoing request"})]}),l.jsx("button",{onClick:()=>c2(x.id),style:{padding:"6px 12px",borderRadius:6,border:"none",background:"rgba(237,66,69,0.1)",color:"#ed4245",cursor:"pointer",fontSize:12},children:a==="ru"?"":"Cancel"})]},x.id))),b==="requests"&&(me.length===0?l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:r.textMuted},children:[l.jsx(yg,{}),l.jsx("div",{style:{marginTop:16,fontSize:15},children:a==="ru"?"  ":"No incoming requests"})]}):me.map(x=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"10px 12px",borderRadius:8,marginBottom:4,borderBottom:`1px solid ${r.border}`},children:[wn({nickname:x.fromNickname,avatarColor:x.fromAvatarColor,avatarGradient:x.fromAvatarGradient,avatarImage:x.fromAvatarImage},40),l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{color:r.text,fontWeight:600},children:[x.fromNickname,"#",x.fromTag]}),l.jsx("div",{style:{color:r.textMuted,fontSize:12},children:a==="ru"?" ":"Incoming request"})]}),l.jsx("button",{onClick:()=>Pk(x.id),style:{width:32,height:32,borderRadius:8,border:"none",background:"rgba(59,165,92,0.15)",color:"#3ba55c",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(_u,{})}),l.jsx("button",{onClick:()=>c2(x.id),style:{width:32,height:32,borderRadius:8,border:"none",background:"rgba(237,66,69,0.1)",color:"#ed4245",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Fs,{})})]},x.id)))]})]}),Ue&&mt&&(()=>{const x=dr.find(j=>j.id===Ue),A=x?.channels?.find(j=>j.id===mt);return!x||!A?null:l.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:[l.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[l.jsxs("div",{style:{padding:"10px 16px",borderBottom:`1px solid ${r.border}`,display:"flex",alignItems:"center",gap:10,background:r.headerBg,backdropFilter:"blur(10px)",flexShrink:0},children:[l.jsx("span",{style:{color:r.textMuted,fontSize:18},children:A.type==="voice"?"":"#"}),l.jsx("span",{style:{color:r.text,fontWeight:700,fontSize:15},children:A.name}),A.isPrivate&&l.jsxs("span",{style:{color:"#ed4245",fontSize:11},children:[" ",a==="ru"?"":"Private"]}),l.jsx("div",{style:{marginLeft:"auto"},children:l.jsx(oo,{icon:l.jsx(fg,{}),tc:r,active:ni,onClick:()=>xi(!ni)})})]}),l.jsxs("div",{style:{flex:1,overflow:"auto",padding:"16px 16px 0"},children:[qi.length===0?l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[l.jsx("span",{style:{fontSize:48,marginBottom:8},children:"#"}),l.jsx("div",{style:{color:r.text,fontSize:18,fontWeight:700},children:a==="ru"?`   #${A.name}`:`Welcome to #${A.name}`}),l.jsx("div",{style:{color:r.textMuted,fontSize:14},children:a==="ru"?"  ":"This is the beginning of the channel"})]}):qi.map(j=>{const Y=j.senderId===i.email,ae=nt.find(Oe=>Oe.email===j.senderId),qe=Y?i.displayName||i.nickname:ae?.displayName||ae?.nickname||j.senderId,_t=x.memberRoles?.[j.senderId]||[],pe=(x.roles||[]).filter(Oe=>_t.includes(Oe.id)).sort((Oe,_s)=>Oe.type==="owner"?-1:_s.type==="owner"?1:Oe.type==="moderator"?-1:1)[0],qt=pe?pe.color:Y?"#5865F2":r.text,Gn=x.ownerId===i.email;return l.jsxs("div",{id:`srv-msg-${j.id}`,className:"group/srvmsg",style:{display:"flex",gap:10,marginBottom:4,padding:"6px 8px",borderRadius:8,position:"relative",transition:"background 0.15s"},onMouseEnter:Oe=>Oe.currentTarget.style.background=r.hover,onMouseLeave:Oe=>Oe.currentTarget.style.background="transparent",children:[wn(Y?i:ae||{nickname:j.senderId},36),l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6,marginBottom:2},children:[l.jsx("span",{style:{color:qt,fontWeight:700,fontSize:14},children:qe}),l.jsx("span",{style:{color:r.textLight,fontSize:11},children:j.createdAt?.seconds?new Date(j.createdAt.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}),j.isEdited&&l.jsx("span",{style:{color:r.textLight,fontSize:10,fontStyle:"italic"},children:a==="ru"?"()":"(edited)"})]}),j.replyToId&&l.jsx("div",{onClick:()=>{const Oe=document.getElementById(`srv-msg-${j.replyToId}`);Oe&&(Oe.scrollIntoView({behavior:"smooth",block:"center"}),Oe.style.background="rgba(88,101,242,0.15)",setTimeout(()=>{Oe.style.background="transparent"},1500))},style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",marginBottom:4,borderLeft:"3px solid #5865F2",background:"rgba(88,101,242,0.08)",borderRadius:"0 6px 6px 0",cursor:"pointer",maxWidth:350},children:l.jsx("span",{style:{color:r.textMuted,fontSize:12,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:j.replyToText||"..."})}),j.type==="gif"&&j.gifUrl?l.jsx("img",{src:j.gifUrl,alt:"GIF",style:{maxWidth:250,borderRadius:8,cursor:"pointer"},onClick:()=>Os(j.gifUrl)}):l.jsx("div",{style:{color:r.text,fontSize:14,whiteSpace:"pre-wrap"},children:j.text})]}),l.jsxs("div",{className:"opacity-0 group-hover/srvmsg:opacity-100",style:{position:"absolute",top:-12,right:8,display:"flex",gap:2,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:6,padding:"2px 4px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",zIndex:10,transition:"opacity 0.15s"},children:[(Y||Gn)&&l.jsx("button",{onClick:()=>{js({...j,isSrv:!0,srvId:Ue,chId:mt}),Ra(j.text||"")},title:a==="ru"?"":"Edit",style:{width:28,height:28,borderRadius:4,border:"none",background:"transparent",color:r.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Oe=>{Oe.currentTarget.style.background=r.hover,Oe.currentTarget.style.color="#5865F2"},onMouseLeave:Oe=>{Oe.currentTarget.style.background="transparent",Oe.currentTarget.style.color=r.textMuted},children:l.jsx(uh,{})}),l.jsx("button",{onClick:()=>Qs(j),title:a==="ru"?"":"Reply",style:{width:28,height:28,borderRadius:4,border:"none",background:"transparent",color:r.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Oe=>{Oe.currentTarget.style.background=r.hover,Oe.currentTarget.style.color="#5865F2"},onMouseLeave:Oe=>{Oe.currentTarget.style.background="transparent",Oe.currentTarget.style.color=r.textMuted},children:l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[l.jsx("polyline",{points:"9 14 4 9 9 4"}),l.jsx("path",{d:"M20 20v-7a4 4 0 00-4-4H4"})]})}),(Y||Gn)&&l.jsx("button",{onClick:()=>Dn({title:a==="ru"?" ":"Delete message",message:a==="ru"?"    ?":"Delete this message for everyone?",type:"confirm",confirmColor:"#ed4245",confirmText:a==="ru"?"":"Delete",cancelText:a==="ru"?"":"Cancel",onConfirm:async()=>{try{await ba(Ae(ge,"servers",Ue,"channels",mt,"messages",j.id))}catch(Oe){console.error(Oe)}jt()}}),title:a==="ru"?"":"Delete",style:{width:28,height:28,borderRadius:4,border:"none",background:"transparent",color:r.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Oe=>{Oe.currentTarget.style.background="rgba(237,66,69,0.1)",Oe.currentTarget.style.color="#ed4245"},onMouseLeave:Oe=>{Oe.currentTarget.style.background="transparent",Oe.currentTarget.style.color=r.textMuted},children:l.jsx(dh,{})})]})]},j.id)}),l.jsx("div",{ref:ia})]}),A.type==="text"&&(()=>{const j=jg(x,i.email);return l.jsx("div",{style:{padding:"12px 16px",borderTop:`1px solid ${r.border}`,background:r.headerBg,flexShrink:0},children:j.muted?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,background:"rgba(250,166,26,0.1)",borderRadius:10,padding:"10px 16px",border:"1px solid rgba(250,166,26,0.3)"},children:[l.jsx("span",{style:{fontSize:16},children:""}),l.jsx("span",{style:{color:"#faa61a",fontSize:13,fontWeight:600},children:a==="ru"?`  ( ${Math.ceil(j.remaining/6e4)} )`:`You are muted (${Math.ceil(j.remaining/6e4)} min left)`})]}):l.jsxs("div",{children:[ks?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8,padding:"6px 12px",background:"rgba(88,101,242,0.08)",borderLeft:"3px solid #5865F2",borderRadius:"0 8px 8px 0"},children:[l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{style:{color:"#5865F2",fontSize:12,fontWeight:700},children:ks.senderId===i.email?i.displayName||i.nickname:nt.find(Y=>Y.email===ks.senderId)?.nickname||"?"}),l.jsx("div",{style:{color:r.textMuted,fontSize:12,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(ks.text||"").slice(0,80)||"..."})]}),l.jsx("button",{onClick:()=>Qs(null),style:{background:"none",border:"none",color:r.textMuted,cursor:"pointer",padding:4,display:"flex"},children:l.jsx(Fs,{})})]}):null,l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,background:r.inputBg,borderRadius:10,padding:"6px 12px"},children:[l.jsx("input",{value:ti,onChange:Y=>hs(Y.target.value),onKeyDown:Y=>{if(Y.key==="Enter"&&ti.trim()){const ae=ks,qe=ti.trim();hs(""),Qs(null),Rg(Ue,mt,i.email,qe,ae?{replyToId:ae.id,replyToText:(ae.text||"").slice(0,100),replyToSender:ae.senderId}:void 0)}},placeholder:`${a==="ru"?" ":"Message"} #${A.name}...`,style:{flex:1,background:"none",border:"none",color:r.text,fontSize:14,outline:"none"}}),l.jsx("button",{onClick:()=>{if(ti.trim()){const Y=ks,ae=ti.trim();hs(""),Qs(null),Rg(Ue,mt,i.email,ae,Y?{replyToId:Y.id,replyToText:(Y.text||"").slice(0,100),replyToSender:Y.senderId}:void 0)}},disabled:!ti.trim(),style:{background:ti.trim()?"#5865F2":r.cardBg2,border:"none",borderRadius:8,padding:"6px 12px",color:ti.trim()?"#fff":r.textMuted,cursor:ti.trim()?"pointer":"default",display:"flex",alignItems:"center"},children:l.jsx(m2,{})})]})]})})})(),A.type==="voice"&&l.jsx("div",{style:{padding:"16px",textAlign:"center",borderTop:`1px solid ${r.border}`,background:r.headerBg},children:l.jsxs("div",{style:{color:r.textMuted,fontSize:14},children:[" ",a==="ru"?"   !":"Voice channel  coming soon!"]})})]}),ni&&(()=>{const j=x.roles||[],Y=x.memberRoles||{},ae=j.filter(Be=>Be.type==="owner"),qe=j.filter(Be=>Be.type==="moderator"),_t=j.filter(Be=>Be.type!=="owner"&&Be.type!=="moderator"),sn=[...ae,...qe,..._t],pe=new Set,qt=sn.map(Be=>{const Rn=nt.filter(Ir=>(Y[Ir.email]||[]).includes(Be.id));return Rn.forEach(Ir=>pe.add(Ir.email)),{role:Be,members:Rn}}),Gn=nt.filter(Be=>!pe.has(Be.email)&&Be.status!=="invisible"&&Be.status!=="offline"),Oe=nt.filter(Be=>Be.status==="invisible"||Be.status==="offline"),_s=sn.length>0;return l.jsxs("div",{style:{width:220,background:r.panelBg,borderLeft:`1px solid ${r.border}`,backdropFilter:"blur(20px)",display:"flex",flexDirection:"column",overflow:"hidden",flexShrink:0},children:[l.jsxs("div",{style:{padding:"12px 14px",borderBottom:`1px solid ${r.border}`,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsx("span",{style:{color:r.text,fontWeight:700,fontSize:14},children:a==="ru"?"":"Members"}),l.jsx("button",{onClick:()=>xi(!1),style:{background:"none",border:"none",color:r.textMuted,cursor:"pointer",padding:4,display:"flex"},children:l.jsx(Fs,{})})]}),l.jsx("div",{style:{flex:1,overflow:"auto",padding:"4px 8px"},children:l.jsxs(l.Fragment,{children:[!_s&&Gn.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",padding:"10px 8px 4px"},children:[a==="ru"?" ":"Online","  ",Gn.length]}),Gn.map(Be=>l.jsxs("div",{onClick:()=>Be.email!==i.email&&zs(Be),style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",borderRadius:6,marginBottom:1,cursor:Be.email!==i.email?"pointer":"default",transition:"background 0.15s"},onMouseEnter:Rn=>{Be.email!==i.email&&(Rn.currentTarget.style.background=r.hover)},onMouseLeave:Rn=>Rn.currentTarget.style.background="transparent",children:[l.jsxs("div",{style:{position:"relative",flexShrink:0},children:[wn(Be,28),l.jsx("div",{style:{position:"absolute",bottom:-1,right:-1},children:Vn(Be.status||"offline")})]}),l.jsx("span",{style:{color:r.text,fontSize:13,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Be.displayName||Be.nickname})]},Be.email))]}),qt.map(({role:Be,members:Rn})=>Rn.length>0&&l.jsxs("div",{children:[l.jsxs("div",{style:{color:Be.color,fontSize:11,fontWeight:700,textTransform:"uppercase",padding:"10px 8px 4px",display:"flex",alignItems:"center",gap:4},children:[Be.type==="owner"?"":Be.type==="moderator"?"":""," ",Be.name,"  ",Rn.length]}),Rn.map(Ir=>l.jsxs("div",{onClick:()=>Ir.email!==i.email&&zs(Ir),style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",borderRadius:6,marginBottom:1,cursor:Ir.email!==i.email?"pointer":"default",transition:"background 0.15s"},onMouseEnter:Ki=>{Ir.email!==i.email&&(Ki.currentTarget.style.background=r.hover)},onMouseLeave:Ki=>Ki.currentTarget.style.background="transparent",children:[l.jsxs("div",{style:{position:"relative",flexShrink:0},children:[wn(Ir,28),l.jsx("div",{style:{position:"absolute",bottom:-1,right:-1},children:Vn(Ir.status||"offline")})]}),l.jsx("span",{style:{color:Be.color,fontSize:13,fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Ir.displayName||Ir.nickname})]},Ir.email))]},Be.id)),_s&&Gn.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",padding:"10px 8px 4px"},children:[a==="ru"?" ":"Online","  ",Gn.length]}),Gn.map(Be=>l.jsxs("div",{onClick:()=>Be.email!==i.email&&zs(Be),style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",borderRadius:6,marginBottom:1,cursor:Be.email!==i.email?"pointer":"default",transition:"background 0.15s"},onMouseEnter:Rn=>{Be.email!==i.email&&(Rn.currentTarget.style.background=r.hover)},onMouseLeave:Rn=>Rn.currentTarget.style.background="transparent",children:[l.jsxs("div",{style:{position:"relative",flexShrink:0},children:[wn(Be,28),l.jsx("div",{style:{position:"absolute",bottom:-1,right:-1},children:Vn(Be.status||"offline")})]}),l.jsx("span",{style:{color:r.text,fontSize:13,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Be.displayName||Be.nickname})]},Be.email))]}),Oe.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{color:r.textLight,fontSize:11,fontWeight:700,textTransform:"uppercase",padding:"10px 8px 4px"},children:[a==="ru"?"  ":"Offline","  ",Oe.length]}),Oe.map(Be=>l.jsxs("div",{onClick:()=>Be.email!==i.email&&zs(Be),style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",borderRadius:6,marginBottom:1,opacity:.7,cursor:Be.email!==i.email?"pointer":"default",transition:"background 0.15s"},onMouseEnter:Rn=>{Be.email!==i.email&&(Rn.currentTarget.style.background=r.hover)},onMouseLeave:Rn=>Rn.currentTarget.style.background="transparent",children:[l.jsxs("div",{style:{position:"relative",flexShrink:0},children:[wn(Be,28),l.jsx("div",{style:{position:"absolute",bottom:-1,right:-1},children:Vn("invisible")})]}),l.jsx("span",{style:{color:r.textMuted,fontSize:13,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Be.displayName||Be.nickname})]},Be.email))]})]})})]})})()]})})(),p==="dm"&&!M&&!Ue&&l.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[l.jsx("div",{style:{fontSize:80,marginBottom:16,animation:"wave 1.5s ease-in-out infinite"},children:""}),l.jsx("div",{style:{color:r.text,fontSize:24,fontWeight:700,marginBottom:8},children:a==="ru"?"    JOLT":"Welcome to JOLT messenger"}),l.jsx("div",{style:{color:r.textMuted,fontSize:15,textAlign:"center",maxWidth:400},children:a==="ru"?" JOLT     .       ":"In JOLT you can chat without limits. Select a friend chat to start"})]}),M&&l.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:[l.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[l.jsxs("div",{style:{padding:"10px 16px",borderBottom:`1px solid ${r.border}`,display:"flex",alignItems:"center",gap:10,background:r.headerBg,backdropFilter:"blur(10px)",flexShrink:0},children:[Kr?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("div",{style:{width:32,height:32,borderRadius:"50%",background:"linear-gradient(135deg, #ed4245, #ff6b6b)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:l.jsx(pg,{})}),l.jsx("span",{style:{color:r.text,fontWeight:700,fontSize:15},children:"Report Bot"})]}):Fn?l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("div",{style:{width:32,height:32,borderRadius:"50%",background:"linear-gradient(135deg, #5865F2, #7C3AED)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:14,fontWeight:700},children:Yt?.groupName?.[0]||"G"}),l.jsx("span",{style:{color:r.text,fontWeight:700,fontSize:15,maxWidth:300,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Yt?.groupName||"Group"}),l.jsxs("span",{style:{color:r.textMuted,fontSize:12},children:["(",Yt?.participants?.length||0,")"]})]}),l.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:6},children:[l.jsx(oo,{icon:l.jsx(ch,{}),tc:r,disabled:!0}),l.jsx(oo,{icon:l.jsx(gg,{}),tc:r,disabled:!0}),l.jsx(oo,{icon:l.jsx(mg,{}),tc:r,onClick:()=>{cs(!0),us([])}}),l.jsx(oo,{icon:l.jsx(fg,{}),tc:r,active:hn,onClick:()=>{An(!hn),br(!1)}})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{onClick:()=>bn(!_r),style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[wn(Ie,32),l.jsxs("span",{style:{color:r.text,fontWeight:700,fontSize:15},children:[Ie?kt(Yt,mn,Ie):mn,Ie&&tr(Ie)&&l.jsx(so,{}),Ie?.isAdmin&&l.jsx(ao,{})]}),l.jsxs("span",{style:{color:r.textMuted,fontSize:12},children:["#",Ie?.tag]})]}),l.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:6},children:[l.jsx(oo,{icon:l.jsx(ch,{}),tc:r,onClick:()=>st("audio")}),l.jsx(oo,{icon:l.jsx(gg,{}),tc:r,onClick:()=>st("video")}),l.jsx(oo,{icon:l.jsx(mg,{}),tc:r,onClick:()=>{Ia(!0),cr([])}}),l.jsx(oo,{icon:l.jsx(w6,{}),tc:r,active:vr,onClick:()=>br(!vr)})]})]}),ar&&l.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:8,alignItems:"center"},children:[l.jsx("span",{style:{color:r.textMuted,fontSize:13},children:a==="ru"?`: ${St.length}/15`:`Selected: ${St.length}/15`}),l.jsx("button",{onClick:()=>oi(!0),disabled:St.length===0,style:{padding:"6px 14px",borderRadius:6,border:"none",background:St.length>0?"#ed4245":r.cardBg2,color:St.length>0?"#fff":r.textMuted,cursor:St.length>0?"pointer":"default",fontSize:13},children:a==="ru"?"":"Continue"}),l.jsx("button",{onClick:()=>{Sn(!1),Mr([])},style:{padding:"6px 14px",borderRadius:6,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:13},children:a==="ru"?"":"Cancel"})]})]}),Ro&&Ar&&l.jsxs("div",{style:{padding:"16px 16px 24px 16px",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",flexShrink:0,position:"relative",height:Do,transition:zo.current?"none":"height 0.1s"},children:[l.jsxs("div",{style:{display:"flex",gap:20,alignItems:"center",marginBottom:16,flex:1,minHeight:0,justifyContent:"center",width:"100%"},children:[l.jsxs("div",{className:vd?"speaking-indicator":"",style:{position:"relative",width:qr||vi?Fa:80,height:qr||vi?rn:80,borderRadius:qr||vi?8:"50%",background:qr||vi?"#000":i.avatarImage?`url(${i.avatarImage}) center/cover`:i.avatarColor||"#5865F2",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:32,fontWeight:700,zIndex:2,transition:"all 0.2s"},children:[!(qr||vi)&&!i.avatarImage&&(i.displayName||i.nickname)?.[0]?.toUpperCase(),l.jsx("video",{ref:Kc,autoPlay:!0,muted:!0,playsInline:!0,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:qr||vi?"contain":"cover",borderRadius:qr||vi?8:"50%",opacity:vi||qr?1:0,transition:"all 0.2s"}})]}),Hi==="active"&&l.jsxs("div",{className:Gc?"speaking-indicator":"",style:{position:"relative",width:xs?Fa:80,height:xs?rn:80,borderRadius:xs?8:"50%",background:xs?"#000":Ar.partner?.avatarImage?`url(${Ar.partner.avatarImage}) center/cover`:Ar.partner?.avatarColor||"#5865F2",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:32,fontWeight:700,zIndex:2,transition:"all 0.2s"},children:[!xs&&!Ar.partner?.avatarImage&&Ar.partner?.nickname?.[0]?.toUpperCase(),l.jsx("video",{ref:Ua,autoPlay:!0,playsInline:!0,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:xs?"contain":"cover",borderRadius:xs?8:"50%",opacity:xs?1:0,transition:"all 0.2s"}})]})]}),l.jsx("div",{style:{color:"#fff",fontSize:16,fontWeight:600,marginBottom:4},children:Ar.partner?.nickname}),l.jsx("div",{style:{color:"#aaa",fontSize:13,marginBottom:16,fontFamily:"monospace"},children:Hi==="active"?`${String(Math.floor(ko/60)).padStart(2,"0")}:${String(ko%60).padStart(2,"0")}`:a==="ru"?"...":"Calling..."}),l.jsxs("div",{style:{display:"flex",gap:12},children:[l.jsx("button",{onClick:lf,style:{width:44,height:44,borderRadius:"50%",border:"none",background:qr?"#fff":"rgba(255,255,255,0.2)",color:qr?"#000":"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:" ",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),l.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),l.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})}),l.jsx("button",{onClick:of,style:{width:44,height:44,borderRadius:"50%",border:"none",background:vi?"#fff":"rgba(255,255,255,0.2)",color:vi?"#000":"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"",children:l.jsx(gg,{})}),l.jsx("button",{onClick:oa,style:{width:44,height:44,borderRadius:"50%",border:"none",background:ps?"rgba(255,255,255,0.2)":"#fff",color:ps?"#fff":"#000",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"",children:l.jsx(Ty,{on:ps})}),l.jsx("button",{onClick:()=>Oa(!za),style:{width:44,height:44,borderRadius:"50%",border:"none",background:za?"rgba(255,255,255,0.2)":"#fff",color:za?"#fff":"#000",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"",children:l.jsx(Sy,{on:za})}),l.jsx("button",{onClick:Xl,style:{width:44,height:44,borderRadius:"50%",border:"none",background:"#ed4245",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"",children:l.jsx(ch,{})})]}),l.jsx("div",{onMouseDown:()=>{zo.current=!0},style:{position:"absolute",bottom:0,left:0,right:0,height:16,cursor:"ns-resize",display:"flex",alignItems:"center",justifyContent:"center",opacity:.5},children:l.jsx("div",{style:{width:40,height:4,borderRadius:2,background:"#fff"}})})]}),l.jsxs("div",{ref:Oo,style:{flex:1,overflow:"auto",padding:"16px 16px 0"},children:[U.length===0&&!Kr?l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[l.jsx("div",{style:{color:r.text,fontSize:18,fontWeight:700,marginBottom:4},children:a==="ru"?"  ":"Nothing here yet"}),l.jsx("div",{style:{color:r.textMuted,fontSize:14,marginBottom:16},children:a==="ru"?"      ":"Send a message or tap the greeting below"}),l.jsx("div",{onClick:la,style:{fontSize:60,cursor:"pointer",animation:"wave 1.5s ease-in-out infinite",transition:"transform 0.2s"},onMouseEnter:x=>x.currentTarget.style.transform="scale(1.2)",onMouseLeave:x=>x.currentTarget.style.transform="scale(1)",children:""})]}):U.length===0&&Kr?l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:r.textMuted},children:[l.jsx("div",{style:{width:60,height:60,borderRadius:"50%",background:"linear-gradient(135deg, #ed4245, #ff6b6b)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",marginBottom:12},children:l.jsx(pg,{})}),l.jsx("div",{style:{color:r.text,fontSize:16,fontWeight:700},children:"Report Bot"}),l.jsx("div",{style:{fontSize:13},children:a==="ru"?"   ":"Reports will appear here"})]}):U.filter(x=>!(x.deletedFor||[]).includes(i.email)).map(x=>{const A=x.senderId===i.email,j=x.senderId==="reportbot",Y=ns&&!A&&!j,ae=Xn.has(x.id),qe=St.includes(x.id),_t=ar&&!A,sn=j?"Report Bot":A?i.displayName||i.nickname:Fn?ei.find(pe=>pe.email===x.senderId)?.nickname||"?":Ie?.displayName||Ie?.nickname||"?";return l.jsxs("div",{id:`msg-${x.id}`,onClick:()=>{!ar||A||(qe?Mr(pe=>pe.filter(qt=>qt!==x.id)):St.length<15&&Mr(pe=>[...pe,x.id]))},className:"group/msg",style:{display:"flex",gap:10,marginBottom:4,padding:"6px 8px",borderRadius:8,background:qe?"rgba(237,66,69,0.1)":"transparent",border:qe?"1px solid rgba(237,66,69,0.3)":"1px solid transparent",cursor:_t?"pointer":"default",opacity:ar&&A?.35:1,transition:"background 0.15s",position:"relative"},children:[j?l.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:"linear-gradient(135deg, #ed4245, #ff6b6b)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,color:"#fff"},children:l.jsx(pg,{})}):wn(A?i:Fn&&ei.find(pe=>pe.email===x.senderId)||Ie,36),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6,marginBottom:2},children:[l.jsx("span",{style:{color:j?"#ed4245":A?"#5865F2":r.text,fontWeight:700,fontSize:14},children:sn}),l.jsx("span",{style:{color:r.textLight,fontSize:11},children:x.createdAt?.seconds?new Date(x.createdAt.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}),x.isEdited&&l.jsx("span",{style:{color:r.textLight,fontSize:10,fontStyle:"italic"},children:a==="ru"?"()":"(edited)"})]}),x.forwardedFrom&&l.jsxs("div",{onClick:pe=>{pe.stopPropagation();const qt=x.forwardedFromEmail;if(qt&&qt!==i.email)if(oe.some(Oe=>Oe.email===qt))Jl(qt);else{const Oe=x.forwardedFrom;Dn({title:a==="ru"?"  ?":"Add friend?",message:a==="ru"?`${Oe}   .  ?`:`${Oe} is not a friend. Send request?`,type:"confirm",confirmColor:"#5865F2",confirmText:a==="ru"?"":"Send",cancelText:a==="ru"?"":"Cancel",onConfirm:async()=>{await _y(i.email,Oe),jt()}})}},style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",marginBottom:4,borderLeft:"3px solid #3ba55c",background:"rgba(59,165,92,0.08)",borderRadius:"0 6px 6px 0",cursor:"pointer",maxWidth:350},children:[l.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#3ba55c",strokeWidth:"2.5",strokeLinecap:"round",children:[l.jsx("polyline",{points:"15 14 20 9 15 4"}),l.jsx("path",{d:"M4 20v-7a4 4 0 014-4h12"})]}),l.jsxs("span",{style:{color:"#3ba55c",fontSize:12,fontWeight:600},children:[a==="ru"?" ":"Forwarded from"," ",x.forwardedFrom]})]}),x.replyToId&&(U.some(qt=>qt.id===x.replyToId&&!(qt.deletedFor||[]).includes(i.email))?l.jsxs("div",{onClick:qt=>{qt.stopPropagation(),Sd(x.replyToId)},style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",marginBottom:4,borderLeft:"3px solid #5865F2",background:"rgba(88,101,242,0.08)",borderRadius:"0 6px 6px 0",cursor:"pointer",maxWidth:350},children:[l.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#5865F2",strokeWidth:"2.5",strokeLinecap:"round",children:[l.jsx("polyline",{points:"9 14 4 9 9 4"}),l.jsx("path",{d:"M20 20v-7a4 4 0 00-4-4H4"})]}),l.jsx("span",{style:{color:r.textMuted,fontSize:12,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:x.replyToText||"..."})]}):l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",marginBottom:4,borderLeft:"3px solid #747f8d",background:"rgba(116,127,141,0.08)",borderRadius:"0 6px 6px 0",maxWidth:350},children:[l.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#747f8d",strokeWidth:"2.5",strokeLinecap:"round",children:[l.jsx("polyline",{points:"9 14 4 9 9 4"}),l.jsx("path",{d:"M20 20v-7a4 4 0 00-4-4H4"})]}),l.jsx("span",{style:{color:"#747f8d",fontSize:12,fontStyle:"italic"},children:a==="ru"?" ":"Message deleted"})]})),Y&&!ae?l.jsxs("button",{onClick:pe=>{pe.stopPropagation(),nc(x.id)},style:{background:r.cardBg2,border:`1px solid ${r.border}`,borderRadius:6,padding:"6px 14px",color:r.textMuted,cursor:"pointer",fontSize:13,display:"flex",alignItems:"center",gap:6},children:[l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),a==="ru"?" ":"Show message"]}):l.jsxs(l.Fragment,{children:[x.type==="gif"&&x.gifUrl?l.jsx("img",{src:x.gifUrl,alt:"GIF",style:{maxWidth:250,borderRadius:8,cursor:"pointer"},onClick:()=>Os(x.gifUrl)}):x.type==="file"&&x.fileUrl?l.jsxs("div",{children:[x.fileName?.match(/\.(jpg|jpeg|png|gif|webp|svg)$/i)?l.jsx("img",{src:x.fileUrl,alt:x.fileName,style:{maxWidth:300,maxHeight:250,borderRadius:8,cursor:"pointer"},onClick:()=>Os(x.fileUrl)}):l.jsxs("a",{href:x.fileUrl,target:"_blank",rel:"noreferrer",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",background:r.cardBg2,borderRadius:8,textDecoration:"none"},children:[l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:r.accent,strokeWidth:"2",children:[l.jsx("path",{d:"M13 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V9z"}),l.jsx("polyline",{points:"13 2 13 9 20 9"})]}),l.jsx("span",{style:{color:r.accent,fontSize:13,fontWeight:600},children:x.fileName||""})]}),x.text&&x.text!==x.fileName&&l.jsx("div",{style:{color:r.text,fontSize:14,marginTop:4,whiteSpace:"pre-wrap"},children:x.text})]}):x.type==="video"&&x.fileUrl?l.jsxs("div",{children:[l.jsx("video",{src:x.fileUrl,controls:!0,style:{maxWidth:350,maxHeight:250,borderRadius:8,background:"#000"}}),x.text&&x.text!==" "&&l.jsx("div",{style:{color:r.text,fontSize:14,marginTop:4,whiteSpace:"pre-wrap"},children:x.text})]}):x.type==="server_invite"?l.jsxs("div",{style:{borderRadius:8,overflow:"hidden",maxWidth:320,border:`1px solid ${r.border}`},children:[l.jsx("div",{style:{background:"linear-gradient(135deg, #5865F2, #7C3AED)",padding:"10px 14px"},children:l.jsx("div",{style:{color:"#fff",fontSize:12,fontWeight:600,opacity:.8},children:a==="ru"?"  ":"Server Invitation"})}),l.jsxs("div",{style:{padding:"10px 14px",background:r.cardBg2},children:[l.jsx("div",{style:{color:r.text,fontSize:14,whiteSpace:"pre-wrap",marginBottom:8},children:x.text}),l.jsxs("button",{onClick:async pe=>{pe.stopPropagation();const qt=x.text?.match(/:\s*(\S+)/i)||x.text?.match(/code:\s*(\S+)/i);if(qt){const Gn=await Cg(i.email,qt[1]);Gn?(fi(Gn),Er("ch_general"),B(null)):Dn({title:"",message:a==="ru"?"  ":"Server not found",type:"alert",onConfirm:jt})}},style:{width:"100%",padding:"8px 14px",borderRadius:6,border:"none",background:"#5865F2",color:"#fff",cursor:"pointer",fontSize:13,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:6,transition:"all 0.15s"},onMouseEnter:pe=>pe.currentTarget.style.background="#4752C4",onMouseLeave:pe=>pe.currentTarget.style.background="#5865F2",children:[l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[l.jsx("path",{d:"M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4"}),l.jsx("polyline",{points:"10 17 15 12 10 7"}),l.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),a==="ru"?"":"Join"]})]})]}):l.jsx("div",{style:{color:r.text,fontSize:14,whiteSpace:"pre-wrap",lineHeight:1.4},children:x.text}),Y&&ae&&l.jsx("button",{onClick:pe=>{pe.stopPropagation(),nc(x.id)},style:{background:"none",border:"none",color:r.textMuted,cursor:"pointer",fontSize:11,padding:"2px 0",marginTop:2},children:a==="ru"?"":"Hide"})]})]}),!ar&&!j&&l.jsxs("div",{className:"opacity-0 group-hover/msg:opacity-100",style:{position:"absolute",top:-12,right:8,display:"flex",gap:2,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:6,padding:"2px 4px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",transition:"opacity 0.15s",zIndex:10},children:[A&&l.jsx("button",{onClick:pe=>{pe.stopPropagation(),js(x),Ra(x.text||"")},title:a==="ru"?"":"Edit",style:{width:28,height:28,borderRadius:4,border:"none",background:"transparent",color:r.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s"},onMouseEnter:pe=>{pe.currentTarget.style.background=r.hover,pe.currentTarget.style.color="#5865F2"},onMouseLeave:pe=>{pe.currentTarget.style.background="transparent",pe.currentTarget.style.color=r.textMuted},children:l.jsx(uh,{})}),l.jsx("button",{onClick:pe=>{pe.stopPropagation(),tc(x)},title:a==="ru"?"":"Reply",style:{width:28,height:28,borderRadius:4,border:"none",background:"transparent",color:r.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s"},onMouseEnter:pe=>{pe.currentTarget.style.background=r.hover,pe.currentTarget.style.color="#5865F2"},onMouseLeave:pe=>{pe.currentTarget.style.background="transparent",pe.currentTarget.style.color=r.textMuted},children:l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[l.jsx("polyline",{points:"9 14 4 9 9 4"}),l.jsx("path",{d:"M20 20v-7a4 4 0 00-4-4H4"})]})}),l.jsx("button",{onClick:pe=>{pe.stopPropagation(),Ns(x),Pi([])},title:a==="ru"?"":"Forward",style:{width:28,height:28,borderRadius:4,border:"none",background:"transparent",color:r.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s"},onMouseEnter:pe=>{pe.currentTarget.style.background=r.hover,pe.currentTarget.style.color="#3ba55c"},onMouseLeave:pe=>{pe.currentTarget.style.background="transparent",pe.currentTarget.style.color=r.textMuted},children:l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[l.jsx("polyline",{points:"15 14 20 9 15 4"}),l.jsx("path",{d:"M4 20v-7a4 4 0 014-4h12"})]})}),A&&l.jsx("button",{onClick:pe=>{pe.stopPropagation(),Cn(x)},title:a==="ru"?"":"Delete",style:{width:28,height:28,borderRadius:4,border:"none",background:"transparent",color:r.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s"},onMouseEnter:pe=>{pe.currentTarget.style.background="rgba(237,66,69,0.1)",pe.currentTarget.style.color="#ed4245"},onMouseLeave:pe=>{pe.currentTarget.style.background="transparent",pe.currentTarget.style.color=r.textMuted},children:l.jsx(dh,{})})]}),_t&&l.jsx("div",{style:{display:"flex",alignItems:"center"},children:l.jsx("div",{style:{width:18,height:18,borderRadius:4,border:qe?"2px solid #ed4245":`2px solid ${r.textMuted}`,background:qe?"#ed4245":"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:12},children:qe&&""})})]},x.id)}),l.jsx("div",{ref:ia})]}),!ar&&!Kr&&l.jsxs("div",{style:{padding:"12px 16px",borderTop:`1px solid ${r.border}`,background:r.headerBg,backdropFilter:"blur(10px)",flexShrink:0,position:"relative"},children:[l.jsx("input",{ref:Yl,type:"file",style:{display:"none"},onChange:bd}),Sr&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8,padding:"8px 12px",background:"rgba(88,101,242,0.08)",borderLeft:"3px solid #5865F2",borderRadius:"0 8px 8px 0"},children:[l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#5865F2",strokeWidth:"2.5",strokeLinecap:"round",children:[l.jsx("polyline",{points:"9 14 4 9 9 4"}),l.jsx("path",{d:"M20 20v-7a4 4 0 00-4-4H4"})]}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{style:{color:"#5865F2",fontSize:12,fontWeight:700},children:Sr.senderId===i.email?i.displayName||i.nickname:Fn?ei.find(x=>x.email===Sr.senderId)?.nickname||"?":Ie?.displayName||Ie?.nickname||"?"}),l.jsx("div",{style:{color:r.textMuted,fontSize:12,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Sr.text?.slice(0,80)||"GIF"})]}),l.jsx("button",{onClick:()=>ur(null),style:{background:"none",border:"none",color:r.textMuted,cursor:"pointer",padding:4,display:"flex"},children:l.jsx(Fs,{})})]}),Vl&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8,padding:"8px 12px",background:"rgba(237,66,69,0.1)",borderRadius:8,border:"1px solid rgba(237,66,69,0.3)"},children:[l.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:"#ed4245",animation:"pulse 1s infinite"}}),l.jsx("span",{style:{color:"#ed4245",fontSize:13,fontWeight:600,flex:1},children:a==="ru"?" ...":"Recording screen..."}),l.jsx("button",{onClick:Ga,style:{padding:"4px 12px",borderRadius:6,border:"none",background:"#ed4245",color:"#fff",cursor:"pointer",fontSize:12,fontWeight:600},children:a==="ru"?"":"Stop"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,background:r.inputBg,borderRadius:10,padding:"6px 12px"},children:[l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{onClick:()=>{Nn(!Vr),un(!1),Nr(!1)},style:{background:"none",border:"none",cursor:"pointer",color:r.textMuted,padding:4,display:"flex",alignItems:"center",transition:"color 0.15s, transform 0.2s",transform:Vr?"rotate(45deg)":"none"},onMouseEnter:x=>x.currentTarget.style.color=r.text,onMouseLeave:x=>x.currentTarget.style.color=r.textMuted,children:l.jsx(v2,{})}),Vr&&l.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:220,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:8,boxShadow:"0 8px 30px rgba(0,0,0,0.4)",zIndex:50,overflow:"hidden"},children:[l.jsxs("button",{onClick:()=>{Yl.current?.click()},style:{width:"100%",padding:"10px 14px",background:"none",border:"none",color:r.text,cursor:"pointer",fontSize:13,textAlign:"left",display:"flex",alignItems:"center",gap:10,transition:"background 0.15s"},onMouseEnter:x=>x.currentTarget.style.background=r.hover,onMouseLeave:x=>x.currentTarget.style.background="none",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:l.jsx("path",{d:"M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"})}),a==="ru"?" ":"Send file"]}),l.jsx("div",{style:{height:1,background:r.border}}),l.jsxs("button",{onClick:_d,style:{width:"100%",padding:"10px 14px",background:"none",border:"none",color:r.text,cursor:"pointer",fontSize:13,textAlign:"left",display:"flex",alignItems:"center",gap:10,transition:"background 0.15s"},onMouseEnter:x=>x.currentTarget.style.background=r.hover,onMouseLeave:x=>x.currentTarget.style.background="none",children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),l.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),l.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"}),l.jsx("circle",{cx:"12",cy:"10",r:"2",fill:"currentColor"})]}),a==="ru"?" ":"Screen recording"]})]})]}),l.jsx("input",{value:Z,onChange:x=>ye(x.target.value),onKeyDown:x=>x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),$a()),placeholder:a==="ru"?" ...":"Type a message...",style:{flex:1,background:"none",border:"none",color:r.text,fontSize:14,outline:"none"},onClick:()=>Nn(!1)}),l.jsx("button",{onClick:()=>{Nr(!Ot),un(!1),Nn(!1)},style:{background:"none",color:Ot?"#5865F2":r.textMuted,cursor:"pointer",fontSize:11,fontWeight:800,padding:"3px 6px",borderRadius:4,border:`1.5px solid ${Ot?"#5865F2":r.textMuted}`,transition:"all 0.15s"},children:"GIF"}),l.jsx("button",{onClick:()=>{un(!Jt),Nr(!1),Nn(!1)},style:{background:"none",border:"none",cursor:"pointer",color:Jt?"#5865F2":r.textMuted,padding:4,display:"flex",alignItems:"center",transition:"color 0.15s"},children:l.jsx(T6,{})}),l.jsx("button",{onTouchStart:x=>{En.current=x.touches[0].clientX},onTouchMove:x=>{if(En.current===null)return;x.touches[0].clientX-En.current<-50&&(Pt(j=>j==="text"?"voice":"text"),En.current=null)},onTouchEnd:()=>{En.current=null},onMouseDown:x=>{En.current=x.clientX},onMouseMove:x=>{if(En.current===null)return;x.clientX-En.current<-50&&(Pt(j=>j==="text"?"voice":"text"),En.current=null)},onMouseUp:()=>{En.current=null},onMouseLeave:()=>{En.current=null},onClick:()=>{Fe==="voice"?nn?ls():ss?bo():os():$a()},disabled:Fe==="text"?!Z.trim():!1,style:{background:Fe==="voice"?nn?"#ed4245":"#5865F2":Z.trim()?"#5865F2":r.cardBg2,border:"none",borderRadius:8,padding:"6px 12px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",transition:"all 0.15s"},children:Fe==="voice"?nn?"":"":l.jsx(m2,{})})]}),Fe==="voice"&&l.jsxs("div",{style:{marginTop:8,display:"flex",alignItems:"center",gap:8},children:[nn&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsxs("div",{style:{color:"#ed4245",fontSize:12,fontWeight:600},children:[" ",as(Sa)]}),l.jsx("button",{onClick:zl,style:{padding:"4px 10px",borderRadius:6,border:"none",background:"rgba(237,66,69,0.15)",color:"#ed4245",cursor:"pointer",fontSize:12},children:a==="ru"?"":"Cancel"})]}),ss&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("audio",{controls:!0,src:ss.url,style:{height:32}}),l.jsx("button",{onClick:bo,style:{padding:"4px 10px",borderRadius:6,border:"none",background:"#3ba55c",color:"#fff",cursor:"pointer",fontSize:12},children:a==="ru"?"":"Send"}),l.jsx("button",{onClick:()=>{URL.revokeObjectURL(ss.url),Ea(null)},style:{padding:"4px 10px",borderRadius:6,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:12},children:a==="ru"?"":"Cancel"})]}),!nn&&!ss&&l.jsx("div",{style:{color:r.textMuted,fontSize:12},children:a==="ru"?"     ":"Swipe left to switch to text"})]}),Jt&&l.jsxs("div",{style:{position:"absolute",bottom:60,right:16,width:340,height:320,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,overflow:"hidden",boxShadow:"0 10px 40px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",zIndex:50},children:[l.jsx("div",{style:{display:"flex",gap:2,padding:"6px 8px",borderBottom:`1px solid ${r.border}`,overflow:"auto"},children:Ad.map((x,A)=>l.jsx("button",{onClick:()=>Fo(x),style:{padding:"4px 8px",borderRadius:6,border:"none",background:Id===x?"rgba(88,101,242,0.2)":"transparent",cursor:"pointer",fontSize:16,flexShrink:0},children:Xc[A]},x))}),l.jsx("div",{style:{flex:1,overflow:"auto",padding:8,display:"flex",flexWrap:"wrap",gap:2,alignContent:"flex-start"},children:ua[Id]?.map(x=>l.jsx("button",{onClick:()=>ye(A=>A+x),style:{width:36,height:36,border:"none",background:"none",fontSize:22,cursor:"pointer",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:A=>A.currentTarget.style.background=r.hover,onMouseLeave:A=>A.currentTarget.style.background="none",children:x},x))})]}),Ot&&l.jsxs("div",{style:{position:"absolute",bottom:60,right:60,width:360,height:380,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,overflow:"hidden",boxShadow:"0 10px 40px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",zIndex:50},children:[l.jsx("div",{style:{padding:8,borderBottom:`1px solid ${r.border}`},children:l.jsx("input",{value:ai,onChange:x=>Qt(x.target.value),placeholder:a==="ru"?" GIF...":"Search GIFs...",style:{width:"100%",background:r.inputBg,border:`1px solid ${r.border}`,borderRadius:8,padding:"8px 12px",color:r.text,fontSize:13,outline:"none"}})}),l.jsx("div",{style:{flex:1,overflow:"auto",padding:8,display:"grid",gridTemplateColumns:"1fr 1fr",gap:6},children:Bi?l.jsx("div",{style:{gridColumn:"1/-1",display:"flex",alignItems:"center",justifyContent:"center",color:r.textMuted,padding:40},children:a==="ru"?"...":"Loading..."}):Wt.length===0?l.jsx("div",{style:{gridColumn:"1/-1",display:"flex",alignItems:"center",justifyContent:"center",color:r.textMuted,padding:40},children:a==="ru"?"  ":"Nothing found"}):Wt.map(x=>{const A=x.images?.fixed_height_small?.url||x.images?.fixed_height?.url,j=x.images?.original?.url||x.images?.fixed_height?.url||A;return A?l.jsx("img",{src:A,alt:"",onClick:()=>qa(j||A),style:{width:"100%",borderRadius:8,cursor:"pointer",objectFit:"cover",height:100,transition:"transform 0.15s"},onMouseEnter:Y=>Y.currentTarget.style.transform="scale(1.05)",onMouseLeave:Y=>Y.currentTarget.style.transform="scale(1)"},x.id):null})}),l.jsx("div",{style:{padding:"4px 8px",borderTop:`1px solid ${r.border}`,display:"flex",alignItems:"center",justifyContent:"flex-end"},children:l.jsx("span",{style:{color:r.textLight,fontSize:10},children:"Powered by GIPHY"})})]})]})]}),vr&&!Kr&&!Fn&&Ie&&Cd(Ie),hn&&Fn&&l.jsx("div",{style:{width:256,background:r.panelBg,borderLeft:`1px solid ${r.border}`,backdropFilter:"blur(20px)",display:"flex",flexDirection:"column",overflow:"hidden",flexShrink:0},children:it?l.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"auto"},children:[l.jsxs("div",{style:{padding:"10px 12px",borderBottom:`1px solid ${r.border}`,display:"flex",alignItems:"center",gap:8},children:[l.jsx("button",{onClick:()=>Ca(null),style:{background:"none",border:"none",color:r.textMuted,cursor:"pointer",display:"flex",alignItems:"center",padding:4},children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:l.jsx("polyline",{points:"15 18 9 12 15 6"})})}),l.jsx("span",{style:{color:r.text,fontWeight:700,fontSize:14},children:a==="ru"?"":"Profile"})]}),l.jsx("div",{style:{height:70,background:it.bannerImage?`url(${it.bannerImage}) center/cover`:"linear-gradient(135deg, #5865F2, #7C3AED)",flexShrink:0}}),l.jsx("div",{style:{padding:"0 14px",marginTop:-26},children:l.jsxs("div",{style:{position:"relative",width:52,height:52},children:[l.jsx(lc,{u:it,size:52}),l.jsx("div",{style:{position:"absolute",bottom:1,right:1},children:Vn(it.status||"offline")})]})}),l.jsxs("div",{style:{padding:"10px 14px",flex:1},children:[l.jsxs("div",{style:{color:r.text,fontWeight:700,fontSize:15},children:[it.displayName||it.nickname,tr(it)&&l.jsx(so,{}),it.isAdmin&&l.jsx(ao,{})]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:12},children:[it.nickname,"#",it.tag]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:12,marginTop:4,display:"flex",alignItems:"center",gap:4},children:[l.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:Ii.find(x=>x.key===it.status)?.color||"#747f8d"}}),a==="ru"?Ii.find(x=>x.key===it.status)?.text||"":Ii.find(x=>x.key===it.status)?.textEn||"Offline"]}),it.aboutMe&&l.jsxs("div",{style:{borderTop:`1px solid ${r.border}`,marginTop:10,paddingTop:10},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:4},children:a==="ru"?" ":"About me"}),l.jsx("div",{style:{color:r.text,fontSize:13,whiteSpace:"pre-wrap"},children:it.aboutMe})]}),it.createdAt&&l.jsxs("div",{style:{borderTop:`1px solid ${r.border}`,marginTop:10,paddingTop:10},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:4},children:a==="ru"?" ":"Member since"}),l.jsx("div",{style:{color:r.text,fontSize:13},children:new Date(it.createdAt?.seconds?it.createdAt.seconds*1e3:it.createdAt).toLocaleDateString(a==="ru"?"ru-RU":"en-US",{year:"numeric",month:"long",day:"numeric"})})]}),it.email!==i.email&&!oe.some(x=>x.email===it.email)&&l.jsxs("button",{onClick:async()=>{const x=`${it.nickname}#${it.tag}`,A=await _y(i.email,x);A.success?Dn({title:"",message:a==="ru"?"   !":"Friend request sent!",type:"alert",onConfirm:jt}):Dn({title:"",message:A.error||"Error",type:"alert",onConfirm:jt})},style:{width:"100%",marginTop:12,padding:"8px",borderRadius:8,border:"none",background:"#5865F2",color:"#fff",cursor:"pointer",fontSize:13,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[l.jsx(mg,{})," ",a==="ru"?"  ":"Add friend"]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{padding:"12px 14px",borderBottom:`1px solid ${r.border}`,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsxs("span",{style:{color:r.text,fontWeight:700,fontSize:14},children:[a==="ru"?"":"Members"," (",ei.length,")"]}),l.jsx("button",{onClick:()=>An(!1),style:{background:"none",border:"none",color:r.textMuted,cursor:"pointer",padding:4,display:"flex",alignItems:"center"},children:l.jsx(Fs,{})})]}),l.jsx("div",{style:{flex:1,overflow:"auto",padding:"4px 8px"},children:ei.map(x=>l.jsxs("div",{className:"group",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 8px",borderRadius:8,cursor:"pointer",transition:"background 0.15s"},onMouseEnter:A=>A.currentTarget.style.background=r.hover,onMouseLeave:A=>A.currentTarget.style.background="transparent",onClick:()=>Ca(x),children:[l.jsxs("div",{style:{position:"relative",flexShrink:0},children:[wn(x,32),l.jsx("div",{style:{position:"absolute",bottom:-1,right:-1},children:Vn(x.status||"offline")})]}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsxs("div",{style:{color:r.text,fontSize:13,fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[x.displayName||x.nickname,x.email===Yt?.createdBy&&l.jsx("span",{style:{color:"#faa61a",fontSize:10,marginLeft:4},children:""}),tr(x)&&l.jsx(so,{}),x.isAdmin&&l.jsx(ao,{})]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:11},children:["#",x.tag]})]}),af&&x.email!==i.email&&l.jsx("button",{onClick:async A=>{A.stopPropagation();const j=x.email,Y=x.nickname,ae=M;Dn({title:a==="ru"?"  ":"Remove from group",message:a==="ru"?` ${Y}  ?`:`Remove ${Y} from group?`,type:"confirm",confirmColor:"#ed4245",confirmText:a==="ru"?"":"Remove",cancelText:a==="ru"?"":"Cancel",onConfirm:async()=>{await t6(ae,j),jt()}})},style:{opacity:0,background:"none",border:"none",color:r.textMuted,cursor:"pointer",padding:4,display:"flex",alignItems:"center",transition:"opacity 0.15s, color 0.15s"},className:"group-hover:!opacity-100",onMouseEnter:A=>{A.currentTarget.style.opacity="1",A.currentTarget.style.color="#ed4245"},onMouseLeave:A=>A.currentTarget.style.color=r.textMuted,children:l.jsx(Fs,{})})]},x.email))})]})})]})]}),Jc(),or&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>oi(!1),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:400,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:24,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsxs("h3",{style:{color:r.text,margin:"0 0 12px",fontSize:18,display:"flex",alignItems:"center",gap:8},children:[l.jsx(y2,{})," ",a==="ru"?"":"Report"]}),Ie&&!ns&&l.jsxs("button",{onClick:()=>{ca(Ie.email)},style:{width:"100%",padding:"8px",borderRadius:8,border:"1px solid rgba(237,66,69,0.3)",background:"rgba(237,66,69,0.08)",color:"#ed4245",cursor:"pointer",fontSize:13,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:6,marginBottom:12,transition:"background 0.15s"},onMouseEnter:x=>x.currentTarget.style.background="rgba(237,66,69,0.15)",onMouseLeave:x=>x.currentTarget.style.background="rgba(237,66,69,0.08)",children:[l.jsx(p2,{})," ",a==="ru"?" ":"Block user"]}),l.jsx("div",{style:{color:r.textMuted,fontSize:13,marginBottom:8},children:a==="ru"?`: ${Ie?.nickname}#${Ie?.tag}`:`On: ${Ie?.nickname}#${Ie?.tag}`}),l.jsx("div",{style:{color:r.textMuted,fontSize:13,marginBottom:12},children:a==="ru"?` : ${St.length}`:`Selected messages: ${St.length}`}),l.jsx("textarea",{value:xe,onChange:x=>we(x.target.value),placeholder:a==="ru"?" ...":"Reason...",style:{width:"100%",background:r.inputBg,border:`1px solid ${r.border}`,borderRadius:8,padding:10,color:r.text,fontSize:14,resize:"none",height:80,outline:"none",marginBottom:16}}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:()=>{oi(!1),Sn(!1),Mr([])},style:{padding:"8px 16px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:14},children:a==="ru"?"":"Cancel"}),l.jsx("button",{onClick:Im,disabled:!xe.trim(),style:{padding:"8px 16px",borderRadius:8,border:"none",background:xe.trim()?"#ed4245":r.cardBg2,color:xe.trim()?"#fff":r.textMuted,cursor:xe.trim()?"pointer":"default",fontSize:14,fontWeight:600},children:a==="ru"?"":"Report"})]})]})}),Br&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>Cs(null),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:440,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:20,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsx("h3",{style:{color:r.text,margin:"0 0 12px",fontSize:16},children:a==="ru"?" ":"Send file"}),l.jsx("div",{style:{background:r.inputBg,borderRadius:8,padding:12,marginBottom:12,textAlign:"center",maxHeight:280,overflow:"auto"},children:Br.type==="image"?l.jsx("img",{src:Br.url,alt:"",style:{maxWidth:"100%",maxHeight:240,borderRadius:8,objectFit:"contain"}}):Br.type==="video"?l.jsx("video",{src:Br.url,controls:!0,style:{maxWidth:"100%",maxHeight:240,borderRadius:8}}):l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,justifyContent:"center",padding:20},children:[l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:r.textMuted,strokeWidth:"2",children:[l.jsx("path",{d:"M13 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V9z"}),l.jsx("polyline",{points:"13 2 13 9 20 9"})]}),l.jsx("span",{style:{color:r.text,fontSize:14},children:Br.file.name})]})}),l.jsx("input",{value:zr,onChange:x=>Oi(x.target.value),onKeyDown:x=>x.key==="Enter"&&Po(),placeholder:a==="ru"?" ...":"Add caption...",style:{width:"100%",background:r.inputBg,border:`1px solid ${r.border}`,borderRadius:8,padding:"10px 12px",color:r.text,fontSize:14,outline:"none",marginBottom:12}}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:()=>Cs(null),style:{padding:"8px 16px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:14},children:a==="ru"?"":"Cancel"}),l.jsx("button",{onClick:Po,style:{padding:"8px 16px",borderRadius:8,border:"none",background:"#5865F2",color:"#fff",cursor:"pointer",fontSize:14,fontWeight:600},children:a==="ru"?"":"Send"})]})]})}),Li&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>is(null),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:520,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:20,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsx("h3",{style:{color:r.text,margin:"0 0 12px",fontSize:16},children:a==="ru"?" ":"Screen recording"}),l.jsx("video",{src:Li.url,controls:!0,style:{width:"100%",maxHeight:300,borderRadius:8,background:"#000",marginBottom:12}}),l.jsx("input",{value:Ee,onChange:x=>$e(x.target.value),onKeyDown:x=>x.key==="Enter"&&vs(),placeholder:a==="ru"?" ...":"Add caption...",style:{width:"100%",background:r.inputBg,border:`1px solid ${r.border}`,borderRadius:8,padding:"10px 12px",color:r.text,fontSize:14,outline:"none",marginBottom:12}}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:()=>is(null),style:{padding:"8px 16px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:14},children:a==="ru"?"":"Cancel"}),l.jsx("button",{onClick:vs,style:{padding:"8px 16px",borderRadius:8,border:"none",background:"#5865F2",color:"#fff",cursor:"pointer",fontSize:14,fontWeight:600},children:a==="ru"?"":"Send"})]})]})}),te&&!Ds&&!wo&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>ne(!1),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:380,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:24,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsx("h3",{style:{color:r.text,margin:"0 0 16px",textAlign:"center"},children:a==="ru"?"":"Servers"}),l.jsxs("button",{onClick:()=>{ne(!1),Lr(!0),Ws(""),Ui(null),Xs(null)},style:{width:"100%",padding:"14px",marginBottom:8,borderRadius:8,border:`1px solid ${r.border}`,background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:14,textAlign:"left",display:"flex",alignItems:"center",gap:10,transition:"all 0.15s"},onMouseEnter:x=>{x.currentTarget.style.background="rgba(88,101,242,0.15)",x.currentTarget.style.borderColor="#5865F2"},onMouseLeave:x=>{x.currentTarget.style.background=r.cardBg2,x.currentTarget.style.borderColor=r.border},children:[l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#5865F2",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),a==="ru"?"  ":"Create your server"]}),l.jsxs("button",{onClick:()=>{ne(!1),Fi(!0),gi("")},style:{width:"100%",padding:"14px",marginBottom:12,borderRadius:8,border:`1px solid ${r.border}`,background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:14,textAlign:"left",display:"flex",alignItems:"center",gap:10,transition:"all 0.15s"},onMouseEnter:x=>{x.currentTarget.style.background="rgba(59,165,92,0.15)",x.currentTarget.style.borderColor="#3ba55c"},onMouseLeave:x=>{x.currentTarget.style.background=r.cardBg2,x.currentTarget.style.borderColor=r.border},children:[l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#3ba55c",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("path",{d:"M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4"}),l.jsx("polyline",{points:"10 17 15 12 10 7"}),l.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),a==="ru"?"  ":"Join a server"]})]})}),Ds&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>Lr(!1),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:440,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:24,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsx("h3",{style:{color:r.text,margin:"0 0 16px",textAlign:"center",fontSize:20},children:a==="ru"?" ":"Create a server"}),l.jsxs("div",{style:{marginBottom:16},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:12,fontWeight:700,textTransform:"uppercase",marginBottom:6},children:a==="ru"?" ":"Server banner"}),l.jsx("div",{onClick:()=>ys.current?.click(),style:{width:"100%",height:80,borderRadius:8,background:Ys?`url(${Ys}) center/cover`:`linear-gradient(135deg, ${r.cardBg2}, ${r.inputBg})`,border:`2px dashed ${r.border}`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:r.textMuted,fontSize:13,transition:"border-color 0.15s"},onMouseEnter:x=>x.currentTarget.style.borderColor="#5865F2",onMouseLeave:x=>x.currentTarget.style.borderColor=r.border,children:!Ys&&(a==="ru"?"+  ":"+ Upload banner")}),l.jsx("input",{ref:ys,type:"file",accept:"image/*",style:{display:"none"},onChange:x=>{const A=x.target.files?.[0];if(!A)return;const j=new FileReader;j.onload=()=>Xs(j.result),j.readAsDataURL(A)}})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:16},children:[l.jsx("div",{onClick:()=>$c.current?.click(),style:{width:72,height:72,borderRadius:"50%",background:bt?`url(${bt}) center/cover`:"#000",border:`2px dashed ${r.border}`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:28,fontWeight:700,flexShrink:0,transition:"border-color 0.15s"},onMouseEnter:x=>x.currentTarget.style.borderColor="#5865F2",onMouseLeave:x=>x.currentTarget.style.borderColor=r.border,children:!bt&&(Mn?Mn[0].toUpperCase():"?")}),l.jsx("input",{ref:$c,type:"file",accept:"image/*",style:{display:"none"},onChange:x=>{const A=x.target.files?.[0];if(!A)return;const j=new FileReader;j.onload=()=>Ui(j.result),j.readAsDataURL(A)}}),l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:12,fontWeight:700,textTransform:"uppercase",marginBottom:6},children:a==="ru"?" ":"Server avatar"}),l.jsx("div",{style:{color:r.textMuted,fontSize:12},children:a==="ru"?"    ":"Click the circle to upload"})]})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:12,fontWeight:700,textTransform:"uppercase",marginBottom:6},children:a==="ru"?" ":"Server name"}),l.jsx("input",{value:Mn,onChange:x=>Ws(x.target.value),placeholder:a==="ru"?"  ...":"Enter server name...",autoFocus:!0,style:{width:"100%",background:r.inputBg,border:`1px solid ${r.border}`,borderRadius:8,padding:"12px 14px",color:r.text,fontSize:15,outline:"none"}})]}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:()=>Lr(!1),style:{padding:"10px 20px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:14},children:a==="ru"?"":"Cancel"}),l.jsx("button",{disabled:!Mn.trim(),onClick:async()=>{try{const x=await QS(i.email,Mn.trim(),bt||void 0,Ys||void 0);x&&(fi(x),Er("ch_general"),B(null),y("dm"))}catch(x){console.error("Create server error:",x)}Lr(!1),ne(!1)},style:{padding:"10px 24px",borderRadius:8,border:"none",background:Mn.trim()?"#5865F2":r.cardBg2,color:Mn.trim()?"#fff":r.textMuted,cursor:Mn.trim()?"pointer":"not-allowed",fontSize:14,fontWeight:600,transition:"all 0.15s"},children:a==="ru"?"":"Create"})]})]})}),wo&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>Fi(!1),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:400,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:24,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsx("h3",{style:{color:r.text,margin:"0 0 16px",textAlign:"center"},children:a==="ru"?"  ":"Join a server"}),l.jsx("div",{style:{color:r.textMuted,fontSize:13,marginBottom:12,textAlign:"center"},children:a==="ru"?"  ":"Enter invite code"}),l.jsx("input",{value:hr,onChange:x=>gi(x.target.value),placeholder:"abc12345",autoFocus:!0,onKeyDown:async x=>{if(x.key==="Enter"&&hr.trim()){const A=await Cg(i.email,hr.trim());A?(fi(A),Er("ch_general"),B(null),Fi(!1)):Dn({title:"",message:a==="ru"?"  ":"Server not found",type:"alert",onConfirm:jt})}},style:{width:"100%",background:r.inputBg,border:`1px solid ${r.border}`,borderRadius:8,padding:"12px 14px",color:r.text,fontSize:15,outline:"none",marginBottom:16,textAlign:"center",letterSpacing:2}}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:()=>Fi(!1),style:{padding:"10px 20px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:14},children:a==="ru"?"":"Cancel"}),l.jsx("button",{disabled:!hr.trim(),onClick:async()=>{const x=await Cg(i.email,hr.trim());x?(fi(x),Er("ch_general"),B(null),Fi(!1)):Dn({title:"",message:a==="ru"?"  ":"Server not found",type:"alert",onConfirm:jt})},style:{padding:"10px 20px",borderRadius:8,border:"none",background:hr.trim()?"#3ba55c":r.cardBg2,color:hr.trim()?"#fff":r.textMuted,cursor:hr.trim()?"pointer":"not-allowed",fontSize:14,fontWeight:600},children:a==="ru"?"":"Join"})]})]})}),To&&Ue&&(()=>{const x=dr.find(A=>A.id===Ue);return x?l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>Js(!1),children:l.jsxs("div",{onClick:A=>A.stopPropagation(),style:{width:420,maxHeight:"70vh",background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:20,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},children:[l.jsx("h3",{style:{color:r.text,margin:"0 0 4px",fontSize:18},children:a==="ru"?"  ":"Invite to server"}),l.jsx("div",{style:{color:r.textMuted,fontSize:13,marginBottom:10},children:a==="ru"?"     ":"Select friends or share the invite code"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,background:r.inputBg,borderRadius:8,padding:"10px 14px",marginBottom:14,border:`1px solid ${r.border}`},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:2},children:a==="ru"?" ":"Invite code"}),l.jsx("div",{style:{color:r.accent,fontWeight:700,fontSize:18,letterSpacing:2},children:x.inviteCode})]}),l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(x.inviteCode),Gi(!0),setTimeout(()=>Gi(!1),2e3)},style:{padding:"8px 14px",borderRadius:6,border:"none",background:Ur?"#3ba55c":r.cardBg2,color:Ur?"#fff":r.text,cursor:"pointer",fontSize:12,fontWeight:600,display:"flex",alignItems:"center",gap:4,transition:"all 0.2s"},children:Ur?l.jsxs(l.Fragment,{children:[l.jsx(_u,{})," ",a==="ru"?"":"Copied"]}):l.jsxs(l.Fragment,{children:[l.jsx(Ay,{})," ",a==="ru"?"":"Copy"]})})]}),l.jsx("div",{style:{color:r.textMuted,fontSize:12,fontWeight:700,textTransform:"uppercase",marginBottom:6},children:a==="ru"?"  ":"Or invite friends"}),l.jsx("div",{style:{flex:1,overflow:"auto",marginBottom:14},children:oe.filter(A=>!x.members.includes(A.email)).map(A=>{const j=pi.includes(A.email);return l.jsxs("div",{onClick:()=>{ka(j?Y=>Y.filter(ae=>ae!==A.email):Y=>[...Y,A.email])},style:{display:"flex",alignItems:"center",gap:10,padding:"10px 12px",borderRadius:8,cursor:"pointer",marginBottom:2,background:j?"rgba(88,101,242,0.1)":"transparent",transition:"background 0.15s"},onMouseEnter:Y=>{j||(Y.currentTarget.style.background=r.hover)},onMouseLeave:Y=>{j||(Y.currentTarget.style.background="transparent")},children:[wn(A,36),l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{color:r.text,fontWeight:600,fontSize:14},children:A.nickname}),l.jsxs("div",{style:{color:r.textMuted,fontSize:12},children:["#",A.tag]})]}),l.jsx("div",{style:{width:22,height:22,borderRadius:6,border:j?"2px solid #3ba55c":`2px solid ${r.textMuted}`,background:j?"#3ba55c":"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:j&&l.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"3",strokeLinecap:"round",children:l.jsx("polyline",{points:"20 6 9 17 4 12"})})})]},A.email)})}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:()=>Js(!1),style:{padding:"10px 20px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:14},children:a==="ru"?"":"Cancel"}),l.jsx("button",{disabled:pi.length===0,onClick:async()=>{const A=dr.find(j=>j.id===Ue);for(const j of pi){const Y=wy(i.email,j);await dg(Y,i.email),await dg(Y,j);const ae=a==="ru"?`     **${A?.name||""}**!
      : ${A?.inviteCode||""}`:` I invite you to the server **${A?.name||"Server"}**!
Click the button below or use code: ${A?.inviteCode||""}`;await io(Y,i.email,ae,"server_invite",void 0,void 0,void 0,void 0,void 0)}Js(!1),ka([])},style:{padding:"10px 20px",borderRadius:8,border:"none",background:pi.length>0?"#5865F2":r.cardBg2,color:pi.length>0?"#fff":r.textMuted,cursor:pi.length>0?"pointer":"not-allowed",fontSize:14,fontWeight:600},children:a==="ru"?"":"Invite"})]})]})}):null})(),Oc&&Ue&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>fs(!1),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:360,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:20,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsx("h3",{style:{color:r.text,margin:"0 0 12px",fontSize:16},children:a==="ru"?" ":"Create category"}),l.jsx("input",{value:gs,onChange:x=>So(x.target.value),placeholder:a==="ru"?" ":"Category name",autoFocus:!0,style:{width:"100%",background:r.inputBg,border:`1px solid ${r.border}`,borderRadius:8,padding:"10px 12px",color:r.text,fontSize:14,outline:"none",marginBottom:14}}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:()=>fs(!1),style:{padding:"8px 16px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:13},children:a==="ru"?"":"Cancel"}),l.jsx("button",{disabled:!gs.trim(),onClick:async()=>{await YS(Ue,gs.trim()),fs(!1),So("")},style:{padding:"8px 16px",borderRadius:8,border:"none",background:gs.trim()?"#5865F2":r.cardBg2,color:gs.trim()?"#fff":r.textMuted,cursor:gs.trim()?"pointer":"not-allowed",fontSize:13,fontWeight:600},children:a==="ru"?"":"Create"})]})]})}),Na&&Ue&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>Da(null),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:380,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:20,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsx("h3",{style:{color:r.text,margin:"0 0 12px",fontSize:16},children:a==="ru"?" ":"Create channel"}),l.jsx("input",{value:Vs,onChange:x=>yi(x.target.value),placeholder:a==="ru"?" ":"Channel name",autoFocus:!0,style:{width:"100%",background:r.inputBg,border:`1px solid ${r.border}`,borderRadius:8,padding:"10px 12px",color:r.text,fontSize:14,outline:"none",marginBottom:12}}),l.jsx("div",{style:{color:r.textMuted,fontSize:12,fontWeight:700,textTransform:"uppercase",marginBottom:6},children:a==="ru"?" ":"Channel type"}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12},children:[l.jsxs("button",{onClick:()=>Ma("text"),style:{flex:1,padding:"10px",borderRadius:8,border:Zs==="text"?"2px solid #5865F2":`1px solid ${r.border}`,background:Zs==="text"?"rgba(88,101,242,0.1)":"transparent",color:r.text,cursor:"pointer",fontSize:13,display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:["# ",a==="ru"?"":"Text"]}),l.jsxs("button",{onClick:()=>Ma("voice"),style:{flex:1,padding:"10px",borderRadius:8,border:Zs==="voice"?"2px solid #5865F2":`1px solid ${r.border}`,background:Zs==="voice"?"rgba(88,101,242,0.1)":"transparent",color:r.text,cursor:"pointer",fontSize:13,display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[" ",a==="ru"?"":"Voice"]})]}),l.jsx("div",{style:{color:r.textMuted,fontSize:12,fontWeight:700,textTransform:"uppercase",marginBottom:6},children:a==="ru"?"":"Privacy"}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:14},children:[l.jsx("button",{onClick:()=>Va(!1),style:{flex:1,padding:"10px",borderRadius:8,border:ea?`1px solid ${r.border}`:"2px solid #3ba55c",background:ea?"transparent":"rgba(59,165,92,0.1)",color:r.text,cursor:"pointer",fontSize:13},children:a==="ru"?"":"Public"}),l.jsxs("button",{onClick:()=>Va(!0),style:{flex:1,padding:"10px",borderRadius:8,border:ea?"2px solid #ed4245":`1px solid ${r.border}`,background:ea?"rgba(237,66,69,0.1)":"transparent",color:r.text,cursor:"pointer",fontSize:13,display:"flex",alignItems:"center",justifyContent:"center",gap:4},children:[" ",a==="ru"?"":"Private"]})]}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:()=>Da(null),style:{padding:"8px 16px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:13},children:a==="ru"?"":"Cancel"}),l.jsx("button",{disabled:!Vs.trim(),onClick:async()=>{await XS(Ue,Vs.trim(),Zs,ea,Na),Da(null),yi(""),Ma("text"),Va(!1)},style:{padding:"8px 16px",borderRadius:8,border:"none",background:Vs.trim()?"#5865F2":r.cardBg2,color:Vs.trim()?"#fff":r.textMuted,cursor:Vs.trim()?"pointer":"not-allowed",fontSize:13,fontWeight:600},children:a==="ru"?"":"Create"})]})]})}),Ol&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>Ia(!1),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:420,maxHeight:"70vh",background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:20,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},children:[l.jsx("h3",{style:{color:r.text,margin:"0 0 4px",fontSize:18},children:a==="ru"?" ":"Create group"}),l.jsx("div",{style:{color:r.textMuted,fontSize:13,marginBottom:14},children:a==="ru"?"   ":"Select friends to add"}),l.jsxs("div",{style:{flex:1,overflow:"auto",marginBottom:14},children:[oe.filter(x=>x.email!==mn).map(x=>{const A=ci.includes(x.email);return l.jsxs("div",{onClick:()=>{cr(A?j=>j.filter(Y=>Y!==x.email):j=>[...j,x.email])},className:"group",style:{display:"flex",alignItems:"center",gap:10,padding:"10px 12px",borderRadius:8,cursor:"pointer",marginBottom:2,transition:"background 0.15s",background:A?"rgba(88,101,242,0.1)":"transparent"},onMouseEnter:j=>{A||(j.currentTarget.style.background=r.hover)},onMouseLeave:j=>{A||(j.currentTarget.style.background="transparent")},children:[l.jsxs("div",{style:{position:"relative",flexShrink:0},children:[wn(x,36),l.jsx("div",{style:{position:"absolute",bottom:-1,right:-1},children:Vn(x.status||"offline")})]}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{style:{color:r.text,fontWeight:600,fontSize:14},children:x.displayName||x.nickname}),l.jsxs("div",{style:{color:r.textMuted,fontSize:12},children:[x.nickname,"#",x.tag]})]}),l.jsx("div",{style:{width:22,height:22,borderRadius:6,border:A?"2px solid #3ba55c":`2px solid ${r.textMuted}`,background:A?"#3ba55c":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s",flexShrink:0},children:A&&l.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"3",strokeLinecap:"round",children:l.jsx("polyline",{points:"20 6 9 17 4 12"})})})]},x.email)}),oe.filter(x=>x.email!==mn).length===0&&l.jsx("div",{style:{color:r.textMuted,textAlign:"center",padding:30,fontSize:14},children:a==="ru"?"  ":"No available friends"})]}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:()=>Ia(!1),style:{padding:"10px 20px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:14},children:a==="ru"?"":"Cancel"}),l.jsx("button",{disabled:ci.length===0,onClick:async()=>{const x=mn?[mn,...ci]:ci,A=await Zk(i.email,x);A&&(B(A),y("dm")),Ia(!1),cr([])},style:{padding:"10px 20px",borderRadius:8,border:"none",background:ci.length>0?"#5865F2":r.cardBg2,color:ci.length>0?"#fff":r.textMuted,cursor:ci.length>0?"pointer":"not-allowed",fontSize:14,fontWeight:600,transition:"all 0.15s"},children:a==="ru"?" ":"Create group"})]})]})}),At&&Fn&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>cs(!1),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:420,maxHeight:"70vh",background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:20,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},children:[l.jsx("h3",{style:{color:r.text,margin:"0 0 4px",fontSize:18},children:a==="ru"?"  ":"Invite to group"}),l.jsx("div",{style:{color:r.textMuted,fontSize:13,marginBottom:14},children:a==="ru"?"   ":"Select friends to invite"}),l.jsxs("div",{style:{flex:1,overflow:"auto",marginBottom:14},children:[oe.filter(x=>!(Yt?.participants||[]).includes(x.email)).map(x=>{const A=Tr.includes(x.email);return l.jsxs("div",{onClick:()=>{us(A?j=>j.filter(Y=>Y!==x.email):j=>[...j,x.email])},className:"group",style:{display:"flex",alignItems:"center",gap:10,padding:"10px 12px",borderRadius:8,cursor:"pointer",marginBottom:2,transition:"background 0.15s",background:A?"rgba(88,101,242,0.1)":"transparent"},onMouseEnter:j=>{A||(j.currentTarget.style.background=r.hover)},onMouseLeave:j=>{A||(j.currentTarget.style.background="transparent")},children:[l.jsxs("div",{style:{position:"relative",flexShrink:0},children:[wn(x,36),l.jsx("div",{style:{position:"absolute",bottom:-1,right:-1},children:Vn(x.status||"offline")})]}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{style:{color:r.text,fontWeight:600,fontSize:14},children:x.displayName||x.nickname}),l.jsxs("div",{style:{color:r.textMuted,fontSize:12},children:[x.nickname,"#",x.tag]})]}),l.jsx("div",{style:{width:22,height:22,borderRadius:6,border:A?"2px solid #3ba55c":`2px solid ${r.textMuted}`,background:A?"#3ba55c":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s",flexShrink:0},children:A&&l.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"3",strokeLinecap:"round",children:l.jsx("polyline",{points:"20 6 9 17 4 12"})})})]},x.email)}),oe.filter(x=>!(Yt?.participants||[]).includes(x.email)).length===0&&l.jsx("div",{style:{color:r.textMuted,textAlign:"center",padding:30,fontSize:14},children:a==="ru"?"    ":"All friends are already in the group"})]}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:()=>cs(!1),style:{padding:"10px 20px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:14},children:a==="ru"?"":"Cancel"}),l.jsx("button",{disabled:Tr.length===0,onClick:async()=>{await e6(M,Tr),cs(!1),us([])},style:{padding:"10px 20px",borderRadius:8,border:"none",background:Tr.length>0?"#5865F2":r.cardBg2,color:Tr.length>0?"#fff":r.textMuted,cursor:Tr.length>0?"pointer":"not-allowed",fontSize:14,fontWeight:600,transition:"all 0.15s"},children:a==="ru"?"":"Invite"})]})]})}),ui&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>js(null),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:440,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:20,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsxs("h3",{style:{color:r.text,margin:"0 0 12px",fontSize:16,display:"flex",alignItems:"center",gap:8},children:[l.jsx(uh,{})," ",a==="ru"?" ":"Edit message"]}),l.jsx("textarea",{value:Or,onChange:x=>Ra(x.target.value),autoFocus:!0,onKeyDown:x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),uf())},style:{width:"100%",background:r.inputBg,border:`1px solid ${r.border}`,borderRadius:8,padding:"10px 12px",color:r.text,fontSize:14,resize:"none",height:100,outline:"none",marginBottom:16}}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:()=>js(null),style:{padding:"8px 16px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:14},children:a==="ru"?"":"Cancel"}),l.jsx("button",{onClick:uf,disabled:!Or.trim(),style:{padding:"8px 16px",borderRadius:8,border:"none",background:Or.trim()?"#5865F2":r.cardBg2,color:Or.trim()?"#fff":r.textMuted,cursor:Or.trim()?"pointer":"default",fontSize:14,fontWeight:600},children:a==="ru"?"":"Save"})]})]})}),Un&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>Ns(null),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:420,maxHeight:"70vh",background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:20,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},children:[l.jsxs("h3",{style:{color:r.text,margin:"0 0 4px",fontSize:18,display:"flex",alignItems:"center",gap:8},children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[l.jsx("polyline",{points:"15 14 20 9 15 4"}),l.jsx("path",{d:"M4 20v-7a4 4 0 014-4h12"})]}),a==="ru"?" ":"Forward message"]}),l.jsx("div",{style:{background:r.inputBg,borderRadius:8,padding:"8px 12px",marginBottom:12,marginTop:8,borderLeft:`3px solid ${r.accent}`},children:l.jsx("div",{style:{color:r.textMuted,fontSize:12,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Un.type==="gif"?" GIF":Un.type==="file"?` ${Un.fileName||""}`:Un.text?.slice(0,100)})}),l.jsx("div",{style:{color:r.textMuted,fontSize:13,marginBottom:10},children:a==="ru"?"   ":"Select friends to forward to"}),l.jsxs("div",{style:{flex:1,overflow:"auto",marginBottom:14},children:[oe.map(x=>{const A=di.includes(x.email);return l.jsxs("div",{onClick:()=>{Pi(A?j=>j.filter(Y=>Y!==x.email):j=>[...j,x.email])},style:{display:"flex",alignItems:"center",gap:10,padding:"10px 12px",borderRadius:8,cursor:"pointer",marginBottom:2,transition:"background 0.15s",background:A?"rgba(59,165,92,0.1)":"transparent"},onMouseEnter:j=>{A||(j.currentTarget.style.background=r.hover)},onMouseLeave:j=>{A||(j.currentTarget.style.background=A?"rgba(59,165,92,0.1)":"transparent")},children:[l.jsxs("div",{style:{position:"relative",flexShrink:0},children:[wn(x,36),l.jsx("div",{style:{position:"absolute",bottom:-1,right:-1},children:Vn(x.status||"offline")})]}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{style:{color:r.text,fontWeight:600,fontSize:14},children:x.displayName||x.nickname}),l.jsxs("div",{style:{color:r.textMuted,fontSize:12},children:[x.nickname,"#",x.tag]})]}),l.jsx("div",{style:{width:22,height:22,borderRadius:6,border:A?"2px solid #3ba55c":`2px solid ${r.textMuted}`,background:A?"#3ba55c":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s",flexShrink:0},children:A&&l.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"3",strokeLinecap:"round",children:l.jsx("polyline",{points:"20 6 9 17 4 12"})})})]},x.email)}),oe.length===0&&l.jsx("div",{style:{color:r.textMuted,textAlign:"center",padding:30,fontSize:14},children:a==="ru"?" ":"No friends"})]}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:()=>Ns(null),style:{padding:"10px 20px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:14},children:a==="ru"?"":"Cancel"}),l.jsxs("button",{disabled:di.length===0,onClick:Uo,style:{padding:"10px 20px",borderRadius:8,border:"none",background:di.length>0?"#3ba55c":r.cardBg2,color:di.length>0?"#fff":r.textMuted,cursor:di.length>0?"pointer":"not-allowed",fontSize:14,fontWeight:600,transition:"all 0.15s"},children:[a==="ru"?"":"Send"," ",di.length>0&&`(${di.length})`]})]})]})}),ta&&Ue&&(()=>{const x=dr.find(A=>A.id===Ue);return x?l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>Zn(!1),children:l.jsxs("div",{onClick:A=>A.stopPropagation(),style:{width:560,maxHeight:"80vh",background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",display:"flex",overflow:"hidden"},children:[l.jsxs("div",{style:{width:160,background:r.panelBg2,borderRight:`1px solid ${r.border}`,padding:"16px 8px"},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",padding:"0 8px",marginBottom:8},children:a==="ru"?"":"Settings"}),["general","roles","bans"].map(A=>l.jsx("button",{onClick:()=>Ll(A),style:{width:"100%",padding:"8px 12px",borderRadius:6,border:"none",background:ms===A?r.hover:"transparent",color:ms===A?r.text:r.textMuted,cursor:"pointer",fontSize:13,textAlign:"left",marginBottom:2,fontWeight:ms===A?600:400},children:A==="general"?a==="ru"?"":"General":A==="roles"?a==="ru"?"":"Roles":a==="ru"?"":"Banned"},A))]}),l.jsxs("div",{style:{flex:1,overflow:"auto",padding:20},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[l.jsx("h3",{style:{color:r.text,margin:0,fontSize:18},children:ms==="general"?a==="ru"?" ":"Server Settings":a==="ru"?"":"Roles"}),l.jsx("button",{onClick:()=>Zn(!1),style:{background:"none",border:"none",color:r.textMuted,cursor:"pointer",padding:4,display:"flex"},children:l.jsx(Fs,{})})]}),ms==="general"&&l.jsxs("div",{children:[l.jsx("div",{style:{color:r.textMuted,fontSize:12,fontWeight:700,textTransform:"uppercase",marginBottom:4},children:a==="ru"?" ":"Server name"}),l.jsx("div",{style:{color:r.text,fontSize:15,padding:"8px 12px",background:r.inputBg,borderRadius:6,marginBottom:16},children:x.name}),l.jsx("div",{style:{color:r.textMuted,fontSize:12,fontWeight:700,textTransform:"uppercase",marginBottom:4},children:a==="ru"?" ":"Invite code"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[l.jsx("div",{style:{color:r.accent,fontSize:18,fontWeight:700,letterSpacing:2,flex:1},children:x.inviteCode}),l.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(x.inviteCode)},style:{padding:"6px 12px",borderRadius:6,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:12,display:"flex",alignItems:"center",gap:4},children:[l.jsx(Ay,{})," ",a==="ru"?"":"Copy"]})]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:12,fontWeight:700,textTransform:"uppercase",marginBottom:4},children:[a==="ru"?"":"Members"," (",x.members.length,")"]}),l.jsx("div",{style:{maxHeight:200,overflow:"auto"},children:nt.map(A=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",borderRadius:6,marginBottom:2},children:[wn(A,28),l.jsx("span",{style:{color:r.text,fontSize:13,flex:1},children:A.nickname||A.email}),A.email===x.ownerId&&l.jsx("span",{style:{color:"#faa61a",fontSize:11},children:""})]},A.email))})]}),ms==="roles"&&l.jsxs("div",{children:[l.jsxs("div",{style:{background:r.inputBg,borderRadius:8,padding:14,marginBottom:16,border:`1px solid ${r.border}`},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:12,fontWeight:700,textTransform:"uppercase",marginBottom:8},children:a==="ru"?" ":"Create role"}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[l.jsx("input",{value:Pr,onChange:A=>h(A.target.value),placeholder:a==="ru"?" ":"Role name",style:{flex:1,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:6,padding:"8px 10px",color:r.text,fontSize:13,outline:"none"}}),l.jsx("input",{type:"color",value:v,onChange:A=>w(A.target.value),style:{width:36,height:36,border:"none",borderRadius:6,cursor:"pointer",background:"none"}})]}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[l.jsxs("button",{onClick:()=>H("moderator"),style:{flex:1,padding:"6px",borderRadius:6,border:I==="moderator"?"2px solid #ed4245":`1px solid ${r.border}`,background:I==="moderator"?"rgba(237,66,69,0.1)":"transparent",color:r.text,cursor:"pointer",fontSize:12},children:[" ",a==="ru"?"":"Moderator"]}),l.jsxs("button",{onClick:()=>H("member"),style:{flex:1,padding:"6px",borderRadius:6,border:I==="member"?"2px solid #5865F2":`1px solid ${r.border}`,background:I==="member"?"rgba(88,101,242,0.1)":"transparent",color:r.text,cursor:"pointer",fontSize:12},children:[" ",a==="ru"?"":"Member"]})]}),l.jsx("button",{disabled:!Pr.trim(),onClick:async()=>{const{addRole:A}=await by(async()=>{const{addRole:j}=await Promise.resolve().then(()=>f2);return{addRole:j}},void 0,import.meta.url);await A(Ue,Pr.trim(),v,I),h(""),w("#5865F2"),H("member")},style:{width:"100%",padding:"8px",borderRadius:6,border:"none",background:Pr.trim()?"#5865F2":r.cardBg2,color:Pr.trim()?"#fff":r.textMuted,cursor:Pr.trim()?"pointer":"not-allowed",fontSize:13,fontWeight:600},children:a==="ru"?" ":"Create role"})]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:12,fontWeight:700,textTransform:"uppercase",marginBottom:8},children:[a==="ru"?"":"Roles"," (",(x.roles||[]).length,")"]}),(x.roles||[]).length===0?l.jsx("div",{style:{color:r.textMuted,fontSize:13,textAlign:"center",padding:20},children:a==="ru"?" ":"No roles"}):(x.roles||[]).map(A=>l.jsxs("div",{style:{background:r.inputBg,borderRadius:8,padding:12,marginBottom:8,border:`1px solid ${r.border}`},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[l.jsx("div",{style:{width:14,height:14,borderRadius:"50%",background:A.color}}),Em===A.id?l.jsxs("div",{style:{display:"flex",gap:4,flex:1},children:[l.jsx("input",{value:rf,onChange:j=>sf(j.target.value),autoFocus:!0,style:{flex:1,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:4,padding:"4px 8px",color:r.text,fontSize:13,outline:"none"}}),l.jsx("button",{onClick:async()=>{await ZS(Ue,A.id,rf.trim()),gd(null)},style:{background:"#3ba55c",color:"#fff",border:"none",borderRadius:4,padding:"4px 8px",cursor:"pointer",display:"flex",alignItems:"center"},children:l.jsx(_u,{})}),l.jsx("button",{onClick:()=>gd(null),style:{background:"#ed4245",color:"#fff",border:"none",borderRadius:4,padding:"4px 8px",cursor:"pointer",display:"flex",alignItems:"center"},children:l.jsx(Fs,{})})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{color:A.color,fontWeight:700,fontSize:14,flex:1},children:A.name}),A.type!=="owner"&&l.jsx("button",{onClick:()=>{gd(A.id),sf(A.name)},style:{background:"none",border:"none",color:r.textMuted,cursor:"pointer",padding:4,display:"flex",alignItems:"center"},title:a==="ru"?"":"Rename",children:l.jsx(uh,{})})]}),l.jsx("span",{style:{color:r.textMuted,fontSize:11,background:r.cardBg2,padding:"2px 8px",borderRadius:4},children:A.type==="owner"?" Owner":A.type==="moderator"?" Mod":" Member"})]}),A.type!=="owner"&&l.jsxs("div",{style:{display:"flex",gap:6,marginBottom:8},children:[l.jsxs("select",{value:We===A.id?J:"",onChange:j=>{fn(A.id),ve(j.target.value)},style:{flex:1,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:6,padding:"6px 8px",color:r.text,fontSize:12,outline:"none"},children:[l.jsx("option",{value:"",children:a==="ru"?" ...":"Select member..."}),nt.filter(j=>j.email!==x.ownerId).map(j=>l.jsx("option",{value:j.email,children:j.nickname||j.email},j.email))]}),l.jsx("button",{disabled:We!==A.id||!J,onClick:async()=>{const{assignRole:j}=await by(async()=>{const{assignRole:Y}=await Promise.resolve().then(()=>f2);return{assignRole:Y}},void 0,import.meta.url);await j(Ue,J,A.id),ve(""),fn("")},style:{padding:"6px 12px",borderRadius:6,border:"none",background:We===A.id&&J?"#3ba55c":r.cardBg2,color:We===A.id&&J?"#fff":r.textMuted,cursor:We===A.id&&J?"pointer":"not-allowed",fontSize:12},children:a==="ru"?"":"Assign"})]}),Object.entries(x.memberRoles||{}).filter(([,j])=>j.includes(A.id)).length>0&&l.jsxs("div",{children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,marginBottom:4},children:a==="ru"?"  :":"Members with role:"}),Object.entries(x.memberRoles||{}).filter(([,j])=>j.includes(A.id)).map(([j])=>{const Y=nt.find(ae=>ae.email===j);return l.jsxs("div",{className:"group",style:{display:"inline-flex",alignItems:"center",gap:4,marginRight:8,marginBottom:4,padding:"2px 8px",borderRadius:4,background:r.cardBg2},children:[l.jsx("span",{style:{color:A.color,fontSize:12},children:Y?.nickname||j}),A.type!=="owner"&&l.jsx("button",{onClick:async()=>{await eE(Ue,j,A.id)},style:{background:"none",border:"none",color:r.textMuted,cursor:"pointer",padding:0,display:"flex",alignItems:"center",opacity:0,transition:"opacity 0.15s, color 0.15s"},className:"group-hover:!opacity-100",onMouseEnter:ae=>{ae.currentTarget.style.opacity="1",ae.currentTarget.style.color="#ed4245"},onMouseLeave:ae=>ae.currentTarget.style.color=r.textMuted,children:l.jsx(Fs,{})})]},j)})]})]},A.id))]}),ms==="bans"&&l.jsxs("div",{children:[l.jsx("div",{style:{color:r.textMuted,fontSize:12,fontWeight:700,textTransform:"uppercase",marginBottom:8},children:a==="ru"?" ":"Banned users"}),(()=>{const A=x.bans||{},j=Object.keys(A);return j.length===0?l.jsx("div",{style:{color:r.textMuted,fontSize:13,textAlign:"center",padding:30},children:a==="ru"?" ":"No banned users"}):j.map(Y=>{const ae=A[Y];return l.jsxs("div",{className:"group",style:{display:"flex",alignItems:"center",gap:10,padding:"10px 12px",borderRadius:8,marginBottom:4,border:`1px solid ${r.border}`,background:r.inputBg},children:[l.jsx("div",{style:{width:32,height:32,borderRadius:"50%",background:"#ed4245",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:14,fontWeight:700},children:Y[0].toUpperCase()}),l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{color:r.text,fontSize:13,fontWeight:600},children:Y}),l.jsxs("div",{style:{color:"#ed4245",fontSize:11},children:[a==="ru"?":":"Reason:"," ",ae.reason]})]}),l.jsx("button",{onClick:async()=>{await iE(Ue,Y)},style:{opacity:0,background:"none",border:"none",color:r.textMuted,cursor:"pointer",padding:6,display:"flex",alignItems:"center",transition:"opacity 0.15s, color 0.15s"},className:"group-hover:!opacity-100",onMouseEnter:qe=>{qe.currentTarget.style.opacity="1",qe.currentTarget.style.color="#3ba55c"},onMouseLeave:qe=>qe.currentTarget.style.color=r.textMuted,title:a==="ru"?"":"Unban",children:l.jsx(_u,{})})]},Y)})})()]})]})]})}):null})(),Jn&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.65)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(4px)",animation:"fadeIn 0.15s ease"},onClick:()=>{Jn.type==="alert"?Jn.onConfirm():jt()},children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:380,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:14,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",overflow:"hidden",animation:"fadeIn 0.2s ease"},children:[l.jsx("div",{style:{height:4,background:Jn.confirmColor||"#5865F2"}}),l.jsxs("div",{style:{padding:"20px 24px"},children:[l.jsx("div",{style:{color:r.text,fontWeight:700,fontSize:18,marginBottom:8},children:Jn.title}),l.jsx("div",{style:{color:r.textMuted,fontSize:14,lineHeight:1.5,marginBottom:20},children:Jn.message}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[Jn.type==="confirm"&&l.jsx("button",{onClick:jt,style:{padding:"10px 20px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:14,fontWeight:500,transition:"all 0.15s"},onMouseEnter:x=>x.currentTarget.style.background=r.hover,onMouseLeave:x=>x.currentTarget.style.background=r.cardBg2,children:Jn.cancelText||(a==="ru"?"":"Cancel")}),l.jsx("button",{onClick:Jn.onConfirm,style:{padding:"10px 20px",borderRadius:8,border:"none",background:Jn.confirmColor||"#5865F2",color:"#fff",cursor:"pointer",fontSize:14,fontWeight:600,transition:"all 0.15s",minWidth:100},onMouseEnter:x=>x.currentTarget.style.opacity="0.9",onMouseLeave:x=>x.currentTarget.style.opacity="1",children:Jn.type==="alert"?"OK":Jn.confirmText||(a==="ru"?"":"Confirm")})]})]})]})}),Eo&&(Fl||Fr)&&Ue&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:300},onClick:()=>Lc(!1),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:400,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:20,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsxs("h3",{style:{color:"#faa61a",margin:"0 0 12px",fontSize:16},children:[" ",a==="ru"?" ":"Mute user"]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:13,marginBottom:8},children:[(Fl||Fr)?.nickname,"#",(Fl||Fr)?.tag]}),l.jsx("input",{value:Ao,onChange:x=>nf(x.target.value),placeholder:a==="ru"?" ...":"Mute reason...",style:{width:"100%",background:r.inputBg,border:`1px solid ${r.border}`,borderRadius:8,padding:"10px 12px",color:r.text,fontSize:14,outline:"none",marginBottom:12}}),l.jsx("div",{style:{color:r.textMuted,fontSize:12,fontWeight:700,textTransform:"uppercase",marginBottom:6},children:a==="ru"?"":"Duration"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:4,marginBottom:14},children:[{l:"1 ",v:6e4},{l:"5 ",v:3e5},{l:"10 ",v:6e5},{l:"30 ",v:18e5},{l:"1 ",v:36e5},{l:"3 ",v:108e5},{l:"6 ",v:216e5},{l:"8 ",v:288e5},{l:"12 ",v:432e5},{l:"24 ",v:864e5}].map(x=>l.jsx("button",{onClick:()=>dd(x.v),style:{padding:"6px",borderRadius:6,border:Pc===x.v?"2px solid #faa61a":`1px solid ${r.border}`,background:Pc===x.v?"rgba(250,166,26,0.1)":"transparent",color:r.text,cursor:"pointer",fontSize:12},children:x.l},x.v))}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:()=>Lc(!1),style:{padding:"8px 16px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:13},children:a==="ru"?"":"Cancel"}),l.jsx("button",{disabled:!Ao.trim(),onClick:async()=>{await tE(Ue,(Fl||Fr).email,Ao.trim(),Pc),Lc(!1),hd(null),Ba(null)},style:{padding:"8px 16px",borderRadius:8,border:"none",background:Ao.trim()?"#faa61a":r.cardBg2,color:Ao.trim()?"#000":r.textMuted,cursor:Ao.trim()?"pointer":"not-allowed",fontSize:13,fontWeight:600},children:a==="ru"?"":"Mute"})]})]})}),Pl&&(Co||Fr)&&Ue&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:300},onClick:()=>na(!1),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:400,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:12,padding:20,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsxs("h3",{style:{color:"#ed4245",margin:"0 0 12px",fontSize:16},children:[" ",a==="ru"?"":"Ban user"]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:13,marginBottom:8},children:[(Co||Fr)?.nickname,"#",(Co||Fr)?.tag]}),l.jsx("input",{value:Io,onChange:x=>Ul(x.target.value),placeholder:a==="ru"?" ...":"Ban reason...",style:{width:"100%",background:r.inputBg,border:`1px solid ${r.border}`,borderRadius:8,padding:"10px 12px",color:r.text,fontSize:14,outline:"none",marginBottom:14}}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:()=>na(!1),style:{padding:"8px 16px",borderRadius:8,border:"none",background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:13},children:a==="ru"?"":"Cancel"}),l.jsx("button",{disabled:!Io.trim(),onClick:async()=>{await nE(Ue,(Co||Fr).email,Io.trim()),na(!1),Uc(null),Ba(null)},style:{padding:"8px 16px",borderRadius:8,border:"none",background:Io.trim()?"#ed4245":r.cardBg2,color:Io.trim()?"#fff":r.textMuted,cursor:Io.trim()?"pointer":"not-allowed",fontSize:13,fontWeight:600},children:a==="ru"?"":"Ban"})]})]})}),ql&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9998},children:l.jsxs("div",{style:{width:380,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:14,overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsx("div",{style:{height:4,background:"#faa61a"}}),l.jsxs("div",{style:{padding:"24px",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),l.jsx("div",{style:{color:r.text,fontWeight:700,fontSize:20,marginBottom:12},children:a==="ru"?" ":"You have been muted"}),l.jsxs("div",{style:{color:r.textMuted,fontSize:14,marginBottom:6},children:[a==="ru"?":":"Reason:"," ",l.jsx("span",{style:{color:r.text},children:ql.reason})]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:14,marginBottom:6},children:[a==="ru"?":":"Duration:"," ",l.jsxs("span",{style:{color:r.text},children:[Math.ceil(ql.duration/6e4)," ",a==="ru"?"":"min"]})]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:14,marginBottom:16},children:[a==="ru"?":":"Remaining:"," ",l.jsxs("span",{style:{color:"#faa61a",fontWeight:700},children:[Math.ceil(ql.remaining/6e4)," ",a==="ru"?"":"min"]})]}),l.jsx("button",{onClick:()=>Fc(null),style:{padding:"10px 32px",borderRadius:8,border:"none",background:"#faa61a",color:"#000",cursor:"pointer",fontSize:14,fontWeight:600},children:"OK"})]})]})}),Gl&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9998},children:l.jsxs("div",{style:{width:380,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:14,overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsx("div",{style:{height:4,background:"#ed4245"}}),l.jsxs("div",{style:{padding:"24px",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),l.jsx("div",{style:{color:r.text,fontWeight:700,fontSize:20,marginBottom:12},children:a==="ru"?"    ":"You are banned from this server"}),l.jsxs("div",{style:{color:r.textMuted,fontSize:14,marginBottom:16},children:[a==="ru"?" :":"Ban reason:"," ",l.jsx("span",{style:{color:"#ed4245"},children:Gl.reason})]}),l.jsx("button",{onClick:async()=>{Gl?.serverId&&await rE(Gl.serverId,i.email),fd(null),fi(null)},style:{padding:"10px 32px",borderRadius:8,border:"none",background:"#ed4245",color:"#fff",cursor:"pointer",fontSize:14,fontWeight:600},children:a==="ru"?"  ":"Leave server"})]})]})}),In&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.65)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(4px)"},onClick:()=>Bs(null),children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{width:380,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:14,overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[l.jsx("div",{style:{height:4,background:"#ed4245"}}),l.jsxs("div",{style:{padding:"20px 24px"},children:[l.jsxs("div",{style:{color:r.text,fontWeight:700,fontSize:18,marginBottom:8,display:"flex",alignItems:"center",gap:8},children:[l.jsx(dh,{})," ",a==="ru"?" ":"Delete message"]}),l.jsx("div",{style:{color:r.textMuted,fontSize:13,marginBottom:6,padding:"8px 12px",background:r.inputBg,borderRadius:6,borderLeft:`3px solid ${r.border}`,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:In.type==="gif"?" GIF":In.type==="image"||In.type==="file"?` ${In.fileName||""}`:(In.text||"").slice(0,80)}),l.jsx("div",{style:{color:r.textMuted,fontSize:13,marginBottom:20},children:a==="ru"?"  :":"Choose how to delete:"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[l.jsxs("button",{onClick:()=>Td(In.id),style:{width:"100%",padding:"12px 16px",borderRadius:8,border:`1px solid ${r.border}`,background:r.cardBg2,color:r.text,cursor:"pointer",fontSize:14,textAlign:"left",display:"flex",alignItems:"center",gap:10,transition:"all 0.15s"},onMouseEnter:x=>{x.currentTarget.style.background=r.hover,x.currentTarget.style.borderColor="#5865F2"},onMouseLeave:x=>{x.currentTarget.style.background=r.cardBg2,x.currentTarget.style.borderColor=r.border},children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:600},children:a==="ru"?"  ":"Delete for me"}),l.jsx("div",{style:{color:r.textMuted,fontSize:12},children:a==="ru"?"    ":"Message disappears only for you"})]})]}),l.jsxs("button",{onClick:()=>ec(In.id),style:{width:"100%",padding:"12px 16px",borderRadius:8,border:"1px solid rgba(237,66,69,0.3)",background:"rgba(237,66,69,0.08)",color:"#ed4245",cursor:"pointer",fontSize:14,textAlign:"left",display:"flex",alignItems:"center",gap:10,transition:"all 0.15s"},onMouseEnter:x=>x.currentTarget.style.background="rgba(237,66,69,0.15)",onMouseLeave:x=>x.currentTarget.style.background="rgba(237,66,69,0.08)",children:[l.jsx(dh,{}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:600},children:a==="ru"?"  ":"Delete for everyone"}),l.jsx("div",{style:{color:"rgba(237,66,69,0.7)",fontSize:12},children:a==="ru"?"    ":"Message deleted for all participants"})]})]}),l.jsx("button",{onClick:()=>Bs(null),style:{width:"100%",padding:"10px",borderRadius:8,border:"none",background:r.cardBg2,color:r.textMuted,cursor:"pointer",fontSize:13},children:a==="ru"?"":"Cancel"})]})]})]})}),md&&Ue&&(()=>{const x=md,A=dr.find(ae=>ae.id===Ue),j=x.createdAt?.seconds?new Date(x.createdAt.seconds*1e3):new Date,Y=A?.ownerId===i.email;return l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.65)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:500,backdropFilter:"blur(4px)"},onClick:()=>zs(null),children:l.jsxs("div",{onClick:ae=>ae.stopPropagation(),style:{width:520,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:14,overflow:"hidden",boxShadow:"0 24px 64px rgba(0,0,0,0.6)",display:"flex"},children:[l.jsxs("div",{style:{width:"55%",borderRight:`1px solid ${r.border}`,display:"flex",flexDirection:"column"},children:[l.jsx("div",{style:{height:100,background:x.bannerImage?`url(${x.bannerImage}) center/cover`:"linear-gradient(135deg, #5865F2, #7C3AED)",flexShrink:0}}),l.jsx("div",{style:{padding:"0 16px",marginTop:-30},children:l.jsxs("div",{style:{position:"relative",width:60,height:60},children:[wn(x,60),l.jsx("div",{style:{position:"absolute",bottom:2,right:2},children:Vn(x.status||"offline")})]})}),l.jsxs("div",{style:{padding:"10px 16px",flex:1,overflow:"auto"},children:[l.jsxs("div",{style:{color:r.text,fontWeight:700,fontSize:16},children:[x.displayName||x.nickname,tr(x)&&l.jsx(so,{}),x.isAdmin&&l.jsx(ao,{})]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:13},children:[x.nickname,"#",x.tag]}),l.jsxs("div",{style:{color:r.textMuted,fontSize:12,marginTop:4,display:"flex",alignItems:"center",gap:4},children:[l.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:Ii.find(ae=>ae.key===x.status)?.color||"#747f8d"}}),a==="ru"?Ii.find(ae=>ae.key===x.status)?.text||"":Ii.find(ae=>ae.key===x.status)?.textEn||"Offline"]}),l.jsxs("div",{style:{borderTop:`1px solid ${r.border}`,marginTop:10,paddingTop:10},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:4},children:a==="ru"?" ":"Member since"}),l.jsx("div",{style:{color:r.text,fontSize:13},children:j.toLocaleDateString(a==="ru"?"ru-RU":"en-US",{year:"numeric",month:"long",day:"numeric"})})]}),x.aboutMe&&l.jsxs("div",{style:{borderTop:`1px solid ${r.border}`,marginTop:10,paddingTop:10},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:4},children:a==="ru"?" ":"About me"}),l.jsx("div",{style:{color:r.text,fontSize:13,whiteSpace:"pre-wrap"},children:x.aboutMe})]})]})]}),l.jsxs("div",{style:{width:"45%",display:"flex",flexDirection:"column",padding:16},children:[l.jsx("div",{style:{color:r.textMuted,fontSize:11,fontWeight:700,textTransform:"uppercase",marginBottom:10},children:Y?a==="ru"?"":"Moderation":a==="ru"?"":"Profile"}),Y?l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,flex:1},children:[l.jsxs("button",{onClick:()=>{hd(x),Lc(!0),nf(""),dd(6e4),zs(null)},style:{width:"100%",padding:"12px 14px",borderRadius:8,border:"none",background:"rgba(250,166,26,0.12)",color:"#faa61a",cursor:"pointer",fontSize:14,fontWeight:600,display:"flex",alignItems:"center",gap:8,transition:"background 0.15s"},onMouseEnter:ae=>ae.currentTarget.style.background="rgba(250,166,26,0.2)",onMouseLeave:ae=>ae.currentTarget.style.background="rgba(250,166,26,0.12)",children:[" ",a==="ru"?" ":"Mute user"]}),l.jsxs("button",{onClick:()=>{Uc(x),na(!0),Ul(""),zs(null)},style:{width:"100%",padding:"12px 14px",borderRadius:8,border:"none",background:"rgba(237,66,69,0.12)",color:"#ed4245",cursor:"pointer",fontSize:14,fontWeight:600,display:"flex",alignItems:"center",gap:8,transition:"background 0.15s"},onMouseEnter:ae=>ae.currentTarget.style.background="rgba(237,66,69,0.2)",onMouseLeave:ae=>ae.currentTarget.style.background="rgba(237,66,69,0.12)",children:[" ",a==="ru"?"":"Ban user"]})]}):l.jsx("div",{style:{color:r.textMuted,fontSize:13,textAlign:"center",marginTop:20},children:a==="ru"?"     ":"Only the server owner can manage members"}),l.jsx("button",{onClick:()=>zs(null),style:{width:"100%",padding:"10px",borderRadius:8,border:`1px solid ${r.border}`,background:r.cardBg2,color:r.textMuted,cursor:"pointer",fontSize:13,marginTop:"auto"},children:a==="ru"?"":"Close"})]})]})})})(),Ft&&!Ro&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.65)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(4px)"},children:l.jsxs("div",{style:{width:340,background:r.cardBg,border:`1px solid ${r.border}`,borderRadius:16,padding:24,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",alignItems:"center",animation:"fadeIn 0.2s ease"},children:[l.jsx("div",{style:{position:"relative",width:80,height:80,borderRadius:"50%",background:Ft.callerAvatar?`url(${Ft.callerAvatar}) center/cover`:Ft.callerAvatarColor||"#5865F2",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:32,fontWeight:700,marginBottom:16},children:!Ft.callerAvatar&&Ft.callerNickname?.[0]?.toUpperCase()}),l.jsx("div",{style:{color:r.text,fontSize:20,fontWeight:700,marginBottom:8},children:Ft.callerNickname}),l.jsx("div",{style:{color:r.textMuted,fontSize:14,marginBottom:24},children:Ft.type==="video"?"  ...":"  ..."}),l.jsxs("div",{style:{display:"flex",gap:16,width:"100%"},children:[l.jsxs("button",{onClick:_i,style:{flex:1,padding:"12px",borderRadius:8,border:"none",background:"#ed4245",color:"#fff",cursor:"pointer",fontSize:15,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"background 0.15s"},children:[l.jsx(ch,{})," "]}),l.jsxs("button",{onClick:()=>aa(Ft.type),style:{flex:1,padding:"12px",borderRadius:8,border:"none",background:"#3ba55c",color:"#fff",cursor:"pointer",fontSize:15,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"background 0.15s"},children:[Ft.type==="video"?l.jsx(gg,{}):l.jsx(ch,{})," "]})]})]})}),Ro&&qr&&(p!=="dm"||mn!==Ar?.partner?.email)&&l.jsx("div",{style:{position:"fixed",left:Mo.x,top:Mo.y,width:240,height:135,background:"#000",borderRadius:8,overflow:"hidden",boxShadow:"0 8px 30px rgba(0,0,0,0.5)",zIndex:1e3,cursor:"move"},onMouseDown:x=>{Qc.current=!0,Hr.current={x:x.clientX-Mo.x,y:x.clientY-Mo.y}},children:l.jsx("video",{ref:Ls,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"contain"}})}),Wl&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>{Os(null),Vo(1)},children:l.jsxs("div",{onClick:x=>x.stopPropagation(),style:{position:"relative",width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:[l.jsx("div",{style:{overflow:"auto",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("img",{src:Wl,alt:"",style:{maxWidth:$i>1?"none":"100%",maxHeight:$i>1?"none":"100%",width:$i>1?`${$i*100}%`:"auto",height:$i>1?`${$i*100}%`:"auto",objectFit:"contain",borderRadius:8,transition:"all 0.2s ease-out"}})}),l.jsx("button",{onClick:()=>{Os(null),Vo(1)},style:{position:"absolute",top:16,right:16,background:"rgba(0,0,0,0.5)",border:"none",color:"#fff",padding:8,borderRadius:"50%",cursor:"pointer",zIndex:10},children:l.jsx(Fs,{})}),l.jsxs("div",{style:{position:"absolute",bottom:24,left:"50%",transform:"translateX(-50%)",display:"flex",gap:12,zIndex:10},children:[l.jsx("button",{onClick:()=>Vo(x=>Math.max(.5,x-.25)),style:{padding:"8px 16px",background:"rgba(255,255,255,0.2)",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontSize:20,fontWeight:"bold"},children:"-"}),l.jsx("button",{onClick:()=>Vo(1),style:{padding:"8px 16px",background:"rgba(255,255,255,0.2)",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:"bold"},children:"100%"}),l.jsx("button",{onClick:()=>Vo(x=>Math.min(5,x+.25)),style:{padding:"8px 16px",background:"rgba(255,255,255,0.2)",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontSize:20,fontWeight:"bold"},children:"+"})]}),l.jsx("button",{onClick:async()=>{await jr(i.email,{avatarImage:Wl}),t({...i,avatarImage:Wl}),Os(null),Vo(1)},style:{position:"absolute",bottom:24,right:24,padding:"12px 20px",background:"#5865F2",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600,zIndex:10,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:a==="ru"?"  ":"Set as Avatar"})]})}),d&&l.jsx(c6,{user:i,onClose:()=>g(!1),onUserUpdate:t,onLogout:e})]})}function wu({icon:i,label:e,color:t,onClick:r,tc:a}){return l.jsxs("button",{onClick:r,style:{width:"100%",textAlign:"left",background:"none",border:"none",color:t,padding:"8px 10px",borderRadius:6,cursor:"pointer",fontSize:13,display:"flex",alignItems:"center",gap:8},onMouseEnter:c=>c.currentTarget.style.background=a.hover,onMouseLeave:c=>c.currentTarget.style.background="none",children:[i," ",e]})}function oo({icon:i,tc:e,disabled:t,active:r,onClick:a}){return l.jsx("button",{onClick:a,disabled:t,style:{width:32,height:32,borderRadius:6,border:"none",background:r?"rgba(88,101,242,0.2)":"transparent",color:r?"#5865F2":e.textMuted,cursor:t?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:t?.5:1},children:i})}function I6(){const[i,e]=k.useState("loading"),[t,r]=k.useState(null),[a,c]=k.useState(!1);k.useEffect(()=>{(async()=>{const V=RA();if(V)try{const q=await Ex(V.email);if(q){if(q.banned){r(q),e("banned");return}if(q.frozen){r(q),e("frozen");return}r(q),e("messenger");return}}catch{if(V.banned){r(V),e("banned");return}if(V.frozen){r(V),e("frozen");return}r(V),e("messenger");return}e("register")})()},[]);const d=S=>{c(!0),setTimeout(()=>{e(S),c(!1)},300)},g=S=>{if(S.banned){r(S),d("banned");return}if(S.frozen){r(S),d("frozen");return}r(S),d("messenger")},p=()=>{Iy(),r(null),d("login")},y=()=>l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-950 via-slate-950 to-red-950 p-4",children:l.jsxs("div",{className:"text-center max-w-md",children:[l.jsx("div",{className:"text-7xl mb-6 animate-pulse",children:""}),l.jsx("h1",{className:"text-3xl font-black text-red-400 mb-3",children:" "}),l.jsx("p",{className:"text-slate-400 mb-4",children:"     Jolt."}),t?.banReason&&l.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4 mb-6",children:[l.jsx("div",{className:"text-[11px] text-red-500/60 uppercase tracking-wider mb-1",children:""}),l.jsx("p",{className:"text-red-400 text-sm",children:t.banReason})]}),l.jsx("p",{className:"text-slate-600 text-xs",children:"    ,   ."})]})}),b=()=>l.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-950 via-slate-950 to-cyan-950 p-4 relative overflow-hidden",children:[Array.from({length:30}).map((S,V)=>l.jsx("div",{className:"absolute text-white/20 animate-fall pointer-events-none",style:{left:`${Math.random()*100}%`,top:"-20px",fontSize:`${8+Math.random()*16}px`,animationDuration:`${3+Math.random()*5}s`,animationDelay:`${Math.random()*5}s`},children:""},V)),l.jsxs("div",{className:"text-center max-w-md relative z-10",children:[l.jsx("div",{className:"text-7xl mb-6",children:""}),l.jsx("h1",{className:"text-3xl font-black text-blue-400 mb-3",children:" "}),l.jsx("p",{className:"text-slate-400 mb-4",children:"    ."}),t?.freezeReason&&l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4 mb-6",children:[l.jsx("div",{className:"text-[11px] text-blue-500/60 uppercase tracking-wider mb-1",children:""}),l.jsx("p",{className:"text-blue-400 text-sm",children:t.freezeReason})]}),l.jsx("button",{onClick:p,className:"px-8 py-3 rounded-xl bg-blue-600 hover:bg-blue-500 text-white font-semibold transition-all",children:""})]})]}),T=()=>l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-5xl mb-4 animate-pulse",children:""}),l.jsx("h1",{className:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-cyan-400 to-blue-500 mb-2",children:"Jolt"}),l.jsx("p",{className:"text-slate-500 text-sm",children:"..."})]})});return l.jsxs("div",{className:["transition-opacity duration-300",a?"opacity-0":"opacity-100"].join(" "),children:[i==="loading"&&T(),i==="register"&&l.jsx(Bk,{onComplete:g,onSwitchToLogin:()=>d("login")}),i==="login"&&l.jsx(zk,{onComplete:g,onSwitchToRegister:()=>d("register")}),i==="messenger"&&t&&l.jsx(A6,{user:t,onLogout:p,onUserUpdate:S=>r(S)}),i==="banned"&&y(),i==="frozen"&&b()]})}AA.createRoot(document.getElementById("root")).render(l.jsx(k.StrictMode,{children:l.jsx(I6,{})}));</script>
    <style rel="stylesheet" crossorigin>@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-font-weight:initial;--tw-tracking:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-outline-style:solid;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-duration:initial;--tw-ease:initial}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-300:oklch(80.8% .114 19.571);--color-red-400:oklch(70.4% .191 22.216);--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-950:oklch(25.8% .092 26.042);--color-orange-400:oklch(75% .183 55.934);--color-orange-500:oklch(70.5% .213 47.604);--color-orange-600:oklch(64.6% .222 41.116);--color-yellow-500:oklch(79.5% .184 86.047);--color-emerald-300:oklch(84.5% .143 164.978);--color-emerald-400:oklch(76.5% .177 163.223);--color-emerald-500:oklch(69.6% .17 162.48);--color-emerald-600:oklch(59.6% .145 163.225);--color-cyan-400:oklch(78.9% .154 211.53);--color-cyan-500:oklch(71.5% .143 215.221);--color-cyan-950:oklch(30.2% .056 229.695);--color-blue-300:oklch(80.9% .105 251.813);--color-blue-400:oklch(70.7% .165 254.624);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-950:oklch(28.2% .091 267.935);--color-indigo-300:oklch(78.5% .115 274.713);--color-indigo-400:oklch(67.3% .182 276.935);--color-indigo-500:oklch(58.5% .233 277.117);--color-indigo-600:oklch(51.1% .262 276.966);--color-indigo-900:oklch(35.9% .144 278.697);--color-purple-300:oklch(82.7% .119 306.383);--color-purple-400:oklch(71.4% .203 305.504);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-600:oklch(55.8% .288 302.321);--color-slate-300:oklch(86.9% .022 252.894);--color-slate-400:oklch(70.4% .04 256.788);--color-slate-500:oklch(55.4% .046 257.417);--color-slate-600:oklch(44.6% .043 257.281);--color-slate-700:oklch(37.2% .044 257.287);--color-slate-800:oklch(27.9% .041 260.031);--color-slate-900:oklch(20.8% .042 265.755);--color-slate-950:oklch(12.9% .042 264.695);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-xs:20rem;--container-md:28rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5/2.25);--text-5xl:3rem;--text-5xl--line-height:1;--text-7xl:4.5rem;--text-7xl--line-height:1;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--font-weight-black:900;--tracking-wide:.025em;--tracking-wider:.05em;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--radius-2xl:1rem;--drop-shadow-md:0 3px 3px #0000001f;--drop-shadow-lg:0 4px 4px #00000026;--drop-shadow-xl:0 9px 7px #0000001a;--ease-out:cubic-bezier(0,0,.2,1);--ease-in-out:cubic-bezier(.4,0,.2,1);--animate-pulse:pulse 2s cubic-bezier(.4,0,.6,1)infinite;--blur-xl:24px;--blur-3xl:64px;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::file-selector-button{appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.pointer-events-none{pointer-events:none}.invisible{visibility:hidden}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.inset-0{inset:calc(var(--spacing)*0)}.top-1\/2{top:50%}.top-1\/4{top:25%}.top-3\/4{top:75%}.top-4{top:calc(var(--spacing)*4)}.top-11{top:calc(var(--spacing)*11)}.-right-24{right:calc(var(--spacing)*-24)}.right-3{right:calc(var(--spacing)*3)}.right-4{right:calc(var(--spacing)*4)}.bottom-1\/4{bottom:25%}.-left-24{left:calc(var(--spacing)*-24)}.left-0{left:calc(var(--spacing)*0)}.left-1\/3{left:33.3333%}.z-10{z-index:10}.z-30{z-index:30}.z-50{z-index:50}.z-\[60\]{z-index:60}.mx-1{margin-inline:calc(var(--spacing)*1)}.mx-auto{margin-inline:auto}.-mt-10{margin-top:calc(var(--spacing)*-10)}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-1\.5{margin-top:calc(var(--spacing)*1.5)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-6{margin-top:calc(var(--spacing)*6)}.mb-0\.5{margin-bottom:calc(var(--spacing)*.5)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-1\.5{margin-bottom:calc(var(--spacing)*1.5)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-5{margin-bottom:calc(var(--spacing)*5)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-2{margin-left:calc(var(--spacing)*2)}.ml-4{margin-left:calc(var(--spacing)*4)}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-flex{display:inline-flex}.h-0\.5{height:calc(var(--spacing)*.5)}.h-1\.5{height:calc(var(--spacing)*1.5)}.h-2\.5{height:calc(var(--spacing)*2.5)}.h-3{height:calc(var(--spacing)*3)}.h-3\.5{height:calc(var(--spacing)*3.5)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-7{height:calc(var(--spacing)*7)}.h-8{height:calc(var(--spacing)*8)}.h-9{height:calc(var(--spacing)*9)}.h-10{height:calc(var(--spacing)*10)}.h-13{height:calc(var(--spacing)*13)}.h-14{height:calc(var(--spacing)*14)}.h-16{height:calc(var(--spacing)*16)}.h-18{height:calc(var(--spacing)*18)}.h-20{height:calc(var(--spacing)*20)}.h-24{height:calc(var(--spacing)*24)}.h-28{height:calc(var(--spacing)*28)}.h-48{height:calc(var(--spacing)*48)}.h-72{height:calc(var(--spacing)*72)}.h-full{height:100%}.max-h-28{max-height:calc(var(--spacing)*28)}.max-h-44{max-height:calc(var(--spacing)*44)}.min-h-screen{min-height:100vh}.w-2\.5{width:calc(var(--spacing)*2.5)}.w-3{width:calc(var(--spacing)*3)}.w-3\.5{width:calc(var(--spacing)*3.5)}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-7{width:calc(var(--spacing)*7)}.w-8{width:calc(var(--spacing)*8)}.w-9{width:calc(var(--spacing)*9)}.w-10{width:calc(var(--spacing)*10)}.w-11{width:calc(var(--spacing)*11)}.w-12{width:calc(var(--spacing)*12)}.w-16{width:calc(var(--spacing)*16)}.w-18{width:calc(var(--spacing)*18)}.w-20{width:calc(var(--spacing)*20)}.w-24{width:calc(var(--spacing)*24)}.w-28{width:calc(var(--spacing)*28)}.w-48{width:calc(var(--spacing)*48)}.w-72{width:calc(var(--spacing)*72)}.w-\[180px\]{width:180px}.w-\[220px\]{width:220px}.w-full{width:100%}.max-w-md{max-width:var(--container-md)}.max-w-xs{max-width:var(--container-xs)}.min-w-0{min-width:calc(var(--spacing)*0)}.flex-1{flex:1}.shrink-0{flex-shrink:0}.-translate-y-1\/2{--tw-translate-y: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.scale-110{--tw-scale-x:110%;--tw-scale-y:110%;--tw-scale-z:110%;scale:var(--tw-scale-x)var(--tw-scale-y)}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-pulse{animation:var(--animate-pulse)}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.resize{resize:both}.resize-none{resize:none}.appearance-none{appearance:none}.grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.justify-start{justify-content:flex-start}.gap-1{gap:calc(var(--spacing)*1)}.gap-1\.5{gap:calc(var(--spacing)*1.5)}.gap-2{gap:calc(var(--spacing)*2)}.gap-2\.5{gap:calc(var(--spacing)*2.5)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}:where(.space-y-0\.5>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*.5)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*.5)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-1\.5>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1.5)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1.5)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-5>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*5)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*5)*calc(1 - var(--tw-space-y-reverse)))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:var(--radius-2xl)}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-xl{border-radius:var(--radius-xl)}.border{border-style:var(--tw-border-style);border-width:1px}.border-0{border-style:var(--tw-border-style);border-width:0}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-4{border-style:var(--tw-border-style);border-width:4px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-r{border-right-style:var(--tw-border-style);border-right-width:1px}.border-blue-500\/20{border-color:#3080ff33}@supports (color:color-mix(in lab,red,red)){.border-blue-500\/20{border-color:color-mix(in oklab,var(--color-blue-500)20%,transparent)}}.border-blue-500\/30{border-color:#3080ff4d}@supports (color:color-mix(in lab,red,red)){.border-blue-500\/30{border-color:color-mix(in oklab,var(--color-blue-500)30%,transparent)}}.border-emerald-500{border-color:var(--color-emerald-500)}.border-emerald-500\/20{border-color:#00bb7f33}@supports (color:color-mix(in lab,red,red)){.border-emerald-500\/20{border-color:color-mix(in oklab,var(--color-emerald-500)20%,transparent)}}.border-indigo-500\/30{border-color:#625fff4d}@supports (color:color-mix(in lab,red,red)){.border-indigo-500\/30{border-color:color-mix(in oklab,var(--color-indigo-500)30%,transparent)}}.border-indigo-900\/20{border-color:#312c8533}@supports (color:color-mix(in lab,red,red)){.border-indigo-900\/20{border-color:color-mix(in oklab,var(--color-indigo-900)20%,transparent)}}.border-indigo-900\/30{border-color:#312c854d}@supports (color:color-mix(in lab,red,red)){.border-indigo-900\/30{border-color:color-mix(in oklab,var(--color-indigo-900)30%,transparent)}}.border-red-500{border-color:var(--color-red-500)}.border-red-500\/20{border-color:#fb2c3633}@supports (color:color-mix(in lab,red,red)){.border-red-500\/20{border-color:color-mix(in oklab,var(--color-red-500)20%,transparent)}}.border-red-500\/30{border-color:#fb2c364d}@supports (color:color-mix(in lab,red,red)){.border-red-500\/30{border-color:color-mix(in oklab,var(--color-red-500)30%,transparent)}}.border-slate-600{border-color:var(--color-slate-600)}.border-slate-700{border-color:var(--color-slate-700)}.border-slate-700\/50{border-color:#31415880}@supports (color:color-mix(in lab,red,red)){.border-slate-700\/50{border-color:color-mix(in oklab,var(--color-slate-700)50%,transparent)}}.border-slate-800{border-color:var(--color-slate-800)}.border-transparent{border-color:#0000}.border-white{border-color:var(--color-white)}.bg-\[\#0d0d1a\]{background-color:#0d0d1a}.bg-\[\#111128\]{background-color:#111128}.bg-black\/0{background-color:#0000}@supports (color:color-mix(in lab,red,red)){.bg-black\/0{background-color:color-mix(in oklab,var(--color-black)0%,transparent)}}.bg-black\/20{background-color:#0003}@supports (color:color-mix(in lab,red,red)){.bg-black\/20{background-color:color-mix(in oklab,var(--color-black)20%,transparent)}}.bg-black\/50{background-color:#00000080}@supports (color:color-mix(in lab,red,red)){.bg-black\/50{background-color:color-mix(in oklab,var(--color-black)50%,transparent)}}.bg-blue-500{background-color:var(--color-blue-500)}.bg-blue-500\/10{background-color:#3080ff1a}@supports (color:color-mix(in lab,red,red)){.bg-blue-500\/10{background-color:color-mix(in oklab,var(--color-blue-500)10%,transparent)}}.bg-blue-500\/\[0\.07\]{background-color:#3080ff12}@supports (color:color-mix(in lab,red,red)){.bg-blue-500\/\[0\.07\]{background-color:color-mix(in oklab,var(--color-blue-500)7%,transparent)}}.bg-blue-600{background-color:var(--color-blue-600)}.bg-cyan-500\/\[0\.07\]{background-color:#00b7d712}@supports (color:color-mix(in lab,red,red)){.bg-cyan-500\/\[0\.07\]{background-color:color-mix(in oklab,var(--color-cyan-500)7%,transparent)}}.bg-emerald-500{background-color:var(--color-emerald-500)}.bg-emerald-500\/10{background-color:#00bb7f1a}@supports (color:color-mix(in lab,red,red)){.bg-emerald-500\/10{background-color:color-mix(in oklab,var(--color-emerald-500)10%,transparent)}}.bg-emerald-500\/20{background-color:#00bb7f33}@supports (color:color-mix(in lab,red,red)){.bg-emerald-500\/20{background-color:color-mix(in oklab,var(--color-emerald-500)20%,transparent)}}.bg-indigo-500\/20{background-color:#625fff33}@supports (color:color-mix(in lab,red,red)){.bg-indigo-500\/20{background-color:color-mix(in oklab,var(--color-indigo-500)20%,transparent)}}.bg-indigo-600{background-color:var(--color-indigo-600)}.bg-indigo-600\/20{background-color:#4f39f633}@supports (color:color-mix(in lab,red,red)){.bg-indigo-600\/20{background-color:color-mix(in oklab,var(--color-indigo-600)20%,transparent)}}.bg-orange-600{background-color:var(--color-orange-600)}.bg-purple-500\/20{background-color:#ac4bff33}@supports (color:color-mix(in lab,red,red)){.bg-purple-500\/20{background-color:color-mix(in oklab,var(--color-purple-500)20%,transparent)}}.bg-purple-500\/\[0\.05\]{background-color:#ac4bff0d}@supports (color:color-mix(in lab,red,red)){.bg-purple-500\/\[0\.05\]{background-color:color-mix(in oklab,var(--color-purple-500)5%,transparent)}}.bg-purple-600{background-color:var(--color-purple-600)}.bg-red-500{background-color:var(--color-red-500)}.bg-red-500\/5{background-color:#fb2c360d}@supports (color:color-mix(in lab,red,red)){.bg-red-500\/5{background-color:color-mix(in oklab,var(--color-red-500)5%,transparent)}}.bg-red-500\/10{background-color:#fb2c361a}@supports (color:color-mix(in lab,red,red)){.bg-red-500\/10{background-color:color-mix(in oklab,var(--color-red-500)10%,transparent)}}.bg-red-600{background-color:var(--color-red-600)}.bg-slate-700{background-color:var(--color-slate-700)}.bg-slate-800{background-color:var(--color-slate-800)}.bg-slate-800\/40{background-color:#1d293d66}@supports (color:color-mix(in lab,red,red)){.bg-slate-800\/40{background-color:color-mix(in oklab,var(--color-slate-800)40%,transparent)}}.bg-slate-800\/60{background-color:#1d293d99}@supports (color:color-mix(in lab,red,red)){.bg-slate-800\/60{background-color:color-mix(in oklab,var(--color-slate-800)60%,transparent)}}.bg-slate-900\/80{background-color:#0f172bcc}@supports (color:color-mix(in lab,red,red)){.bg-slate-900\/80{background-color:color-mix(in oklab,var(--color-slate-900)80%,transparent)}}.bg-yellow-500{background-color:var(--color-yellow-500)}.bg-gradient-to-br{--tw-gradient-position:to bottom right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.from-blue-400{--tw-gradient-from:var(--color-blue-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-blue-500{--tw-gradient-from:var(--color-blue-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-blue-950{--tw-gradient-from:var(--color-blue-950);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-emerald-500{--tw-gradient-from:var(--color-emerald-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-red-950{--tw-gradient-from:var(--color-red-950);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-slate-950{--tw-gradient-from:var(--color-slate-950);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.via-cyan-400{--tw-gradient-via:var(--color-cyan-400);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-slate-900{--tw-gradient-via:var(--color-slate-900);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-slate-950{--tw-gradient-via:var(--color-slate-950);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.to-blue-500{--tw-gradient-to:var(--color-blue-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-blue-600{--tw-gradient-to:var(--color-blue-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-cyan-950{--tw-gradient-to:var(--color-cyan-950);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-emerald-600{--tw-gradient-to:var(--color-emerald-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-500{--tw-gradient-to:var(--color-purple-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-red-950{--tw-gradient-to:var(--color-red-950);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-slate-950{--tw-gradient-to:var(--color-slate-950);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.object-cover{object-fit:cover}.p-1{padding:calc(var(--spacing)*1)}.p-2\.5{padding:calc(var(--spacing)*2.5)}.p-3{padding:calc(var(--spacing)*3)}.p-3\.5{padding:calc(var(--spacing)*3.5)}.p-4{padding:calc(var(--spacing)*4)}.p-6{padding:calc(var(--spacing)*6)}.px-1\.5{padding-inline:calc(var(--spacing)*1.5)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-5{padding-inline:calc(var(--spacing)*5)}.px-8{padding-inline:calc(var(--spacing)*8)}.py-0\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\.5{padding-block:calc(var(--spacing)*1.5)}.py-2{padding-block:calc(var(--spacing)*2)}.py-2\.5{padding-block:calc(var(--spacing)*2.5)}.py-3{padding-block:calc(var(--spacing)*3)}.py-3\.5{padding-block:calc(var(--spacing)*3.5)}.py-4{padding-block:calc(var(--spacing)*4)}.py-5{padding-block:calc(var(--spacing)*5)}.pt-2{padding-top:calc(var(--spacing)*2)}.pt-4{padding-top:calc(var(--spacing)*4)}.pr-1{padding-right:calc(var(--spacing)*1)}.pr-12{padding-right:calc(var(--spacing)*12)}.text-center{text-align:center}.text-left{text-align:left}.font-mono{font-family:var(--font-mono)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}.text-5xl{font-size:var(--text-5xl);line-height:var(--tw-leading,var(--text-5xl--line-height))}.text-7xl{font-size:var(--text-7xl);line-height:var(--tw-leading,var(--text-7xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\[10px\]{font-size:10px}.text-\[11px\]{font-size:11px}.font-black{--tw-font-weight:var(--font-weight-black);font-weight:var(--font-weight-black)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-wide{--tw-tracking:var(--tracking-wide);letter-spacing:var(--tracking-wide)}.tracking-wider{--tw-tracking:var(--tracking-wider);letter-spacing:var(--tracking-wider)}.text-blue-400{color:var(--color-blue-400)}.text-blue-500\/60{color:#3080ff99}@supports (color:color-mix(in lab,red,red)){.text-blue-500\/60{color:color-mix(in oklab,var(--color-blue-500)60%,transparent)}}.text-emerald-400{color:var(--color-emerald-400)}.text-indigo-400{color:var(--color-indigo-400)}.text-orange-400{color:var(--color-orange-400)}.text-purple-400{color:var(--color-purple-400)}.text-red-400{color:var(--color-red-400)}.text-red-500\/60{color:#fb2c3699}@supports (color:color-mix(in lab,red,red)){.text-red-500\/60{color:color-mix(in oklab,var(--color-red-500)60%,transparent)}}.text-slate-300{color:var(--color-slate-300)}.text-slate-400{color:var(--color-slate-400)}.text-slate-500{color:var(--color-slate-500)}.text-slate-600{color:var(--color-slate-600)}.text-transparent{color:#0000}.text-white{color:var(--color-white)}.text-white\/20{color:#fff3}@supports (color:color-mix(in lab,red,red)){.text-white\/20{color:color-mix(in oklab,var(--color-white)20%,transparent)}}.text-white\/70{color:#ffffffb3}@supports (color:color-mix(in lab,red,red)){.text-white\/70{color:color-mix(in oklab,var(--color-white)70%,transparent)}}.uppercase{text-transform:uppercase}.italic{font-style:italic}.placeholder-slate-500::placeholder{color:var(--color-slate-500)}.opacity-0{opacity:0}.opacity-40{opacity:.4}.opacity-100{opacity:1}.shadow-2xl{--tw-shadow:0 25px 50px -12px var(--tw-shadow-color,#00000040);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-1{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-2{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-4{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(4px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-black\/30{--tw-shadow-color:#0000004d}@supports (color:color-mix(in lab,red,red)){.shadow-black\/30{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-black)30%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-black\/50{--tw-shadow-color:#00000080}@supports (color:color-mix(in lab,red,red)){.shadow-black\/50{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-black)50%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-blue-500\/25{--tw-shadow-color:#3080ff40}@supports (color:color-mix(in lab,red,red)){.shadow-blue-500\/25{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-blue-500)25%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-blue-500\/40{--tw-shadow-color:#3080ff66}@supports (color:color-mix(in lab,red,red)){.shadow-blue-500\/40{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-blue-500)40%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-emerald-500\/25{--tw-shadow-color:#00bb7f40}@supports (color:color-mix(in lab,red,red)){.shadow-emerald-500\/25{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-emerald-500)25%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-emerald-500\/30{--tw-shadow-color:#00bb7f4d}@supports (color:color-mix(in lab,red,red)){.shadow-emerald-500\/30{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-emerald-500)30%,transparent)var(--tw-shadow-alpha),transparent)}}.ring-blue-500\/20{--tw-ring-color:#3080ff33}@supports (color:color-mix(in lab,red,red)){.ring-blue-500\/20{--tw-ring-color:color-mix(in oklab,var(--color-blue-500)20%,transparent)}}.ring-white\/20{--tw-ring-color:#fff3}@supports (color:color-mix(in lab,red,red)){.ring-white\/20{--tw-ring-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.ring-white\/30{--tw-ring-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.ring-white\/30{--tw-ring-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.outline{outline-style:var(--tw-outline-style);outline-width:1px}.blur{--tw-blur:blur(8px);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.blur-3xl{--tw-blur:blur(var(--blur-3xl));filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow{--tw-drop-shadow-size:drop-shadow(0 1px 2px var(--tw-drop-shadow-color,#0000001a))drop-shadow(0 1px 1px var(--tw-drop-shadow-color,#0000000f));--tw-drop-shadow:drop-shadow(0 1px 2px #0000001a)drop-shadow(0 1px 1px #0000000f);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow-lg{--tw-drop-shadow-size:drop-shadow(0 4px 4px var(--tw-drop-shadow-color,#00000026));--tw-drop-shadow:drop-shadow(var(--drop-shadow-lg));filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow-md{--tw-drop-shadow-size:drop-shadow(0 3px 3px var(--tw-drop-shadow-color,#0000001f));--tw-drop-shadow:drop-shadow(var(--drop-shadow-md));filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow-xl{--tw-drop-shadow-size:drop-shadow(0 9px 7px var(--tw-drop-shadow-color,#0000001a));--tw-drop-shadow:drop-shadow(var(--drop-shadow-xl));filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.backdrop-blur-xl{--tw-backdrop-blur:blur(var(--blur-xl));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-300{--tw-duration:.3s;transition-duration:.3s}.duration-500{--tw-duration:.5s;transition-duration:.5s}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}.ease-out{--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}.outline-none{--tw-outline-style:none;outline-style:none}@media(hover:hover){.group-hover\:scale-110:is(:where(.group):hover *){--tw-scale-x:110%;--tw-scale-y:110%;--tw-scale-z:110%;scale:var(--tw-scale-x)var(--tw-scale-y)}.group-hover\:bg-black\/40:is(:where(.group):hover *){background-color:#0006}@supports (color:color-mix(in lab,red,red)){.group-hover\:bg-black\/40:is(:where(.group):hover *){background-color:color-mix(in oklab,var(--color-black)40%,transparent)}}.group-hover\:\!opacity-100:is(:where(.group):hover *){opacity:1!important}.group-hover\:opacity-100:is(:where(.group):hover *),.group-hover\/msg\:opacity-100:is(:where(.group\/msg):hover *),.group-hover\/srvmsg\:opacity-100:is(:where(.group\/srvmsg):hover *){opacity:1}.hover\:scale-110:hover{--tw-scale-x:110%;--tw-scale-y:110%;--tw-scale-z:110%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\:border-blue-400:hover{border-color:var(--color-blue-400)}.hover\:bg-\[\#111128\]:hover{background-color:#111128}.hover\:bg-\[\#151530\]:hover{background-color:#151530}.hover\:bg-blue-500:hover{background-color:var(--color-blue-500)}.hover\:bg-indigo-500:hover{background-color:var(--color-indigo-500)}.hover\:bg-orange-500:hover{background-color:var(--color-orange-500)}.hover\:bg-purple-500:hover{background-color:var(--color-purple-500)}.hover\:bg-red-500:hover{background-color:var(--color-red-500)}.hover\:bg-red-500\/10:hover{background-color:#fb2c361a}@supports (color:color-mix(in lab,red,red)){.hover\:bg-red-500\/10:hover{background-color:color-mix(in oklab,var(--color-red-500)10%,transparent)}}.hover\:bg-red-500\/20:hover{background-color:#fb2c3633}@supports (color:color-mix(in lab,red,red)){.hover\:bg-red-500\/20:hover{background-color:color-mix(in oklab,var(--color-red-500)20%,transparent)}}.hover\:bg-slate-700:hover{background-color:var(--color-slate-700)}.hover\:bg-slate-800:hover{background-color:var(--color-slate-800)}.hover\:from-blue-400:hover{--tw-gradient-from:var(--color-blue-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.hover\:from-emerald-400:hover{--tw-gradient-from:var(--color-emerald-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.hover\:to-blue-500:hover{--tw-gradient-to:var(--color-blue-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.hover\:to-emerald-500:hover{--tw-gradient-to:var(--color-emerald-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.hover\:to-purple-400:hover{--tw-gradient-to:var(--color-purple-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.hover\:text-blue-300:hover{color:var(--color-blue-300)}.hover\:text-emerald-300:hover{color:var(--color-emerald-300)}.hover\:text-indigo-300:hover{color:var(--color-indigo-300)}.hover\:text-purple-300:hover{color:var(--color-purple-300)}.hover\:text-red-300:hover{color:var(--color-red-300)}.hover\:text-white:hover{color:var(--color-white)}.hover\:underline:hover{text-decoration-line:underline}.hover\:opacity-80:hover{opacity:.8}}.focus\:border-blue-500:focus{border-color:var(--color-blue-500)}.focus\:border-emerald-500:focus{border-color:var(--color-emerald-500)}.focus\:border-indigo-500:focus{border-color:var(--color-indigo-500)}.focus\:border-orange-500:focus{border-color:var(--color-orange-500)}.focus\:border-purple-500:focus{border-color:var(--color-purple-500)}.focus\:border-red-500:focus{border-color:var(--color-red-500)}.focus\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\:ring-blue-500\/20:focus{--tw-ring-color:#3080ff33}@supports (color:color-mix(in lab,red,red)){.focus\:ring-blue-500\/20:focus{--tw-ring-color:color-mix(in oklab,var(--color-blue-500)20%,transparent)}}.focus\:ring-emerald-500\/20:focus{--tw-ring-color:#00bb7f33}@supports (color:color-mix(in lab,red,red)){.focus\:ring-emerald-500\/20:focus{--tw-ring-color:color-mix(in oklab,var(--color-emerald-500)20%,transparent)}}.focus\:ring-red-500\/20:focus{--tw-ring-color:#fb2c3633}@supports (color:color-mix(in lab,red,red)){.focus\:ring-red-500\/20:focus{--tw-ring-color:color-mix(in oklab,var(--color-red-500)20%,transparent)}}.disabled\:opacity-50:disabled{opacity:.5}}@keyframes particle-fly{0%{opacity:1;transform:translate(-50%,-50%)scale(1)}to{transform:translate(calc(-50% + var(--tx)),calc(-50% + var(--ty)))scale(0);opacity:0}}@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@keyframes shake{0%,to{transform:translate(0)}10%,30%,50%,70%,90%{transform:translate(-6px)}20%,40%,60%,80%{transform:translate(6px)}}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes scaleIn{0%{opacity:0;transform:scale(.7)}to{opacity:1;transform:scale(1)}}@keyframes toastSlide{0%{opacity:0;transform:translate(120%)}8%{opacity:1;transform:translate(0)}85%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(120%)}}@keyframes pulseGlow{0%,to{box-shadow:0 0 8px 2px #3b82f64d}50%{box-shadow:0 0 20px 6px #3b82f680}}@keyframes confetti{0%{opacity:1;transform:translateY(0)rotate(0)}to{opacity:0;transform:translateY(-80px)rotate(720deg)}}@keyframes wave-hand{0%{transform:rotate(0)}10%{transform:rotate(14deg)}20%{transform:rotate(-8deg)}30%{transform:rotate(14deg)}40%{transform:rotate(-4deg)}50%{transform:rotate(10deg)}60%{transform:rotate(0)}to{transform:rotate(0)}}.animate-wave{transform-origin:70% 70%;animation:1.8s ease-in-out infinite wave-hand;display:inline-block}@keyframes fall{0%{opacity:1;transform:translateY(-20px)rotate(0)}to{opacity:0;transform:translateY(100vh)rotate(360deg)}}.animate-fall{animation:linear infinite fall}@keyframes sadBustFloat{0%,to{transform:translateY(0)}50%{transform:translateY(-8px)}}@keyframes sadBustBlink{0%,42%,48%,to{opacity:1}45%{opacity:0}}@keyframes sadBustHeadTilt{0%,to{transform:rotate(0)}30%{transform:rotate(-3deg)}70%{transform:rotate(3deg)}}@keyframes creator-star-cycle{0%{opacity:0;filter:blur(4px);transform:scale(0)rotate(-30deg)}15%{opacity:1;filter:blur();transform:scale(1.15)rotate(0)}25%{opacity:1;transform:scale(1)rotate(0)}55%{opacity:1;transform:scale(1)rotate(0)}70%{opacity:.4;filter:blur(3px);transform:scale(.6)rotate(15deg)}80%{opacity:0;filter:blur(6px);transform:scale(0)rotate(30deg)}to{opacity:0}}.frame-anim-creator-star{animation:4s ease-in-out infinite creator-star-cycle}@keyframes sand-fly{0%{opacity:0;transform:translate(0)scale(1)}50%{opacity:0}60%{opacity:1;transform:translate(0)scale(1)}to{opacity:0;transform:translate(var(--sx),var(--sy))scale(0)}}.frame-sand-particle{--sx:0px;--sy:0px;animation:4s ease-out infinite sand-fly}.frame-sand-particle:nth-child(2){--sx:8px;--sy:-6px}.frame-sand-particle:nth-child(3){--sx:-5px;--sy:-8px}.frame-sand-particle:nth-child(4){--sx:7px;--sy:4px}.frame-sand-particle:nth-child(5){--sx:-8px;--sy:3px}.frame-sand-particle:nth-child(6){--sx:4px;--sy:7px}.frame-sand-particle:nth-child(7){--sx:-6px;--sy:-4px}.frame-sand-particle:nth-child(8){--sx:6px;--sy:-7px}.frame-sand-particle:nth-child(9){--sx:-4px;--sy:6px}@keyframes admin-crown-cycle{0%{opacity:0;filter:blur(3px);transform:scale(0)rotate(-15deg)}15%{opacity:1;filter:blur();transform:scale(1.1)rotate(0)}25%{opacity:1;transform:scale(1)rotate(0)}55%{opacity:1;transform:scale(1)rotate(0)}70%{opacity:.3;filter:blur(3px);transform:scale(.5)rotate(10deg)}80%{opacity:0;filter:blur(5px);transform:scale(0)rotate(20deg)}to{opacity:0}}.frame-anim-admin-crown{animation:4s ease-in-out infinite admin-crown-cycle}@keyframes hand-left-move{0%{opacity:0;transform:translate(-12px)}20%{opacity:1;transform:translate(-12px)}45%{transform:translate(0)}50%{transform:translate(1px)}55%{transform:translate(-1px)}60%{transform:translate(0)}80%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-12px)}}@keyframes hand-right-move{0%{opacity:0;transform:translate(12px)}20%{opacity:1;transform:translate(12px)}45%{transform:translate(0)}50%{transform:translate(-1px)}55%{transform:translate(1px)}60%{transform:translate(0)}80%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(12px)}}@keyframes clap-burst{0%{opacity:0;r:2}45%{opacity:0;r:2}50%{opacity:1;r:3}55%{opacity:.8;r:6}65%{opacity:0;r:8}to{opacity:0}}.frame-anim-handshake-pair{opacity:1}.frame-hand-left{animation:3.5s ease-in-out infinite hand-left-move}.frame-hand-right{animation:3.5s ease-in-out infinite hand-right-move}.frame-clap-burst{animation:3.5s ease-in-out infinite clap-burst}@keyframes wind-blow{0%{opacity:0;transform:translate(-100%)}20%{opacity:.5}50%{opacity:.3}80%{opacity:.5}to{opacity:0;transform:translate(100%)}}.frame-wind-line{animation:2.5s ease-in-out infinite wind-blow}@keyframes diamond-spin-cycle{0%{opacity:0;transform:scale(0)rotateY(0)}15%{opacity:1;transform:scale(1)rotateY(0)}70%{opacity:1;transform:scale(1)rotateY(360deg)}85%{opacity:0;transform:scale(0)rotateY(360deg)}to{opacity:0}}@keyframes sparkle-blink{0%,to{opacity:0}50%{opacity:1}}.frame-anim-diamond-gem{perspective:100px}.frame-diamond-rotate{transform-origin:50%;animation:4s ease-in-out infinite diamond-spin-cycle}.frame-sparkle{animation:1.5s ease-in-out infinite sparkle-blink}@keyframes flame-flicker-1{0%,to{opacity:.9;transform:translateY(0)scaleY(1)}25%{opacity:1;transform:translateY(-2px)scaleY(1.1)}50%{opacity:.8;transform:translateY(1px)scaleY(.95)}75%{opacity:.95;transform:translateY(-1px)scaleY(1.05)}}@keyframes flame-flicker-2{0%,to{opacity:.7;transform:translateY(0)scaleY(1)}33%{opacity:.9;transform:translateY(-3px)scaleY(1.15)}66%{opacity:.6;transform:translateY(1px)scaleY(.9)}}@keyframes flame-flicker-3{0%,to{opacity:.5;transform:translateY(0)}50%{opacity:.7;transform:translateY(-2px)}}.frame-fire-group{transform-origin:bottom}.frame-flame-1{animation:.8s ease-in-out infinite flame-flicker-1}.frame-flame-2{animation:.6s ease-in-out .1s infinite flame-flicker-2}.frame-flame-3{animation:.5s ease-in-out .2s infinite flame-flicker-3}@keyframes speakingPulse{0%{box-shadow:0 0 #3ba55cb3}70%{box-shadow:0 0 0 10px #3ba55c00}to{box-shadow:0 0 #3ba55c00}}.speaking-indicator{animation:1.5s infinite speakingPulse;border:3px solid #3ba55c!important}.animate-float{animation:3s ease-in-out infinite float}.animate-shake{animation:.5s ease-in-out shake}.animate-fade-in-up{animation:.5s ease-out fadeInUp}.animate-scale-in{animation:.4s ease-out scaleIn}.animate-toast{animation:4s ease-in-out forwards toastSlide}.animate-pulse-glow{animation:2s ease-in-out infinite pulseGlow}.particle{pointer-events:none;border-radius:50%;animation:.8s ease-out forwards particle-fly;position:absolute;top:45%;left:50%}::-webkit-scrollbar{width:5px}::-webkit-scrollbar-track{background:0 0}::-webkit-scrollbar-thumb{background:#334155;border-radius:3px}::-webkit-scrollbar-thumb:hover{background:#475569}body{background:#0f172a;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;overflow:hidden}.code-input:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f640}input[type=color]{-webkit-appearance:none;border:none;padding:0}input[type=color]::-webkit-color-swatch-wrapper{padding:0}input[type=color]::-webkit-color-swatch{border:none;border-radius:4px}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-outline-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-backdrop-blur{syntax:"*";inherits:false}@property --tw-backdrop-brightness{syntax:"*";inherits:false}@property --tw-backdrop-contrast{syntax:"*";inherits:false}@property --tw-backdrop-grayscale{syntax:"*";inherits:false}@property --tw-backdrop-hue-rotate{syntax:"*";inherits:false}@property --tw-backdrop-invert{syntax:"*";inherits:false}@property --tw-backdrop-opacity{syntax:"*";inherits:false}@property --tw-backdrop-saturate{syntax:"*";inherits:false}@property --tw-backdrop-sepia{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@keyframes pulse{50%{opacity:.5}}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
